let chart;!function(e,t,n){function i(e,t){return typeof e===t}var r=[],a=[],o={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){a.push({name:e,fn:t,options:n})},addAsyncTest:function(e){a.push({name:null,fn:e})}},s=function(){};s.prototype=o,(s=new s).addTest("devicemotion","DeviceMotionEvent"in e),s.addTest("deviceorientation","DeviceOrientationEvent"in e);var c=t.documentElement,u="svg"===c.nodeName.toLowerCase();(function(){var e,t,n,o,c,u;for(var l in a)if(a.hasOwnProperty(l)){if(e=[],(t=a[l]).name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(o=i(t.fn,"function")?t.fn():t.fn,c=0;c<e.length;c++)1===(u=e[c].split(".")).length?s[u[0]]=o:(!s[u[0]]||s[u[0]]instanceof Boolean||(s[u[0]]=new Boolean(s[u[0]])),s[u[0]][u[1]]=o),r.push((o?"":"no-")+u.join("-"))}})(),function(e){var t=c.className,n=s._config.classPrefix||"";if(u&&(t=t.baseVal),s._config.enableJSClass){var i=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(i,"$1"+n+"js$2")}s._config.enableClasses&&(t+=" "+n+e.join(" "+n),u?c.className.baseVal=t:c.className=t)}(r),delete o.addTest,delete o.addAsyncTest;for(var l=0;l<s._q.length;l++)s._q[l]();e.Modernizr=s}(window,document),Modernizr.devicemotion?console.log("supported"):console.log("not supported"),$(".chart-area").parent().css("overflow","visible"),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("TwoStep",[],t):"object"==typeof exports?exports.TwoStep=t():e.TwoStep=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return[40,32,39,34].indexOf(e)>-1?1:[37,38,33].indexOf(e)>-1?-1:0},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.instances=[]}return i(e,[{key:"register",value:function(e){return this.instances.push(e),this}},{key:"getActiveInstances",value:function(){return this.instances.filter(function(e){return e.enabled})}}]),e}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=i(n(0)),o=new(i(n(1)).default),s=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),0===t.elements.length)throw"Elements array is empty";if(t.narrative){if(t.elements.length!==t.narrative.length)throw"Elements and narrative are different lengths";if(!1==!t.narrative.filter(function(e){return"function"!=typeof e}).length)throw"Narrative contains non-functions";this.narrative=t.narrative}this.onChange=t.onChange,this.elements=Array.prototype.slice.call(t.elements),this.enabled=!0,this.offset=t.hasOwnProperty("offset")?t.offset:{down:"50%",up:"0"};var n=this.setWaypoints(this.elements,function(e){if("down"==e){var t=r.elements.indexOf(this.element);t!==this.index&&r.goTo(t,!1,e)}},t.continuous,this.offset.down),i=this.setWaypoints(this.elements,function(e){if("up"==e){var t=r.elements.indexOf(this.element);t!==this.index&&r.goTo(t,!1,e)}},t.continuous,this.offset.up);if(this.waypoints=[n,i],t.stick){if(void 0===$().fixTo)throw"fixTo is not present on the page, or may have been loaded in before jQuery.";$(t.stick).wrapInner('<div class="two-step-sticky-wrapper"></div>'),this.sticky=$(t.stick).find(".two-step-sticky-wrapper").fixTo($(t.stick))}this.setKeyboard(),this.index=-1,o.register(this),setInterval(function(){Waypoint.refreshAll()},1e3);var r=this}return r(e,[{key:"goTo",value:function(e,t,n){var i=this;if(!1===this.isValidIndex(e))throw e+" is not a valid index. Must be between 0 and "+(this.elements.length-1)+" (inclusive).";this.narrative&&this.narrative[e]({element:this.elements[e],index:e,direction:n}),this.onChange&&this.onChange({element:this.elements[e],index:e,direction:n}),this.index=e;var r=$(this.elements).eq(e);return $(this.elements).removeClass("active"),r.addClass("active"),!0===t?(this.disableWaypoints(),$("html, body").animate({scrollTop:r.offset().top-100},500).promise().then(function(){i.enableWaypoints()})):$.Deferred().resolve()}},{key:"setWaypoints",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments[3];return e.map(function(e){return new Waypoint({element:e,handler:t,continuous:n,offset:i})})}},{key:"setKeyboard",value:function(){var e=this;$(window).keydown(function(t){if(e.disabled)return!0;var n=(0,a.default)(t.keyCode),i=o.getActiveInstances();if(0!==n&&t.target===document.body&&!1===t.metaKey&&1===i.length){var r=e.index+n;return!e.isValidIndex(r)||(e.goTo(r,!0),t.preventDefault(),!1)}})}},{key:"isValidIndex",value:function(e){return e<this.elements.length&&e>-1}},{key:"disableWaypoints",value:function(){[].concat.apply([],this.waypoints).forEach(function(e){return e.disable()})}},{key:"enableWaypoints",value:function(){[].concat.apply([],this.waypoints).forEach(function(e){return e.enable()})}},{key:"disable",value:function(){this.disabled=!0,this.enabled=!1,this.disableWaypoints(),this.sticky&&this.sticky.fixTo("stop")}},{key:"enable",value:function(){this.disabled=!1,this.enabled=!0,this.enableWaypoints(),this.sticky&&this.sticky.fixTo("start")}}]),e}();t.default=s,e.exports=t.default}])});var ts=new TwoStep({elements:document.querySelectorAll(".parent .narrative-item"),onChange:function(e){console.log("Item "+e.index)},stick:document.querySelector(".parent .sticky-outer"),narrative:[function(e){$(".highcharts-plot-bands-0").animate({opacity:0},500),$(".highcharts-plot-band-label").animate({opacity:0},500)},function(e){$(".chart-title").text("Median home price 1981-present, in 2021 dollars"),$(".chart-source").text("Census Bureau and Department of Housing and Urban Development via FRED"),chart.update({chart:{type:"area",spacingLeft:10},data:{startColumn:0,endColumn:1},yAxis:{min:0,max:4e5,labels:{formatter:function(){return"$"+this.value/1e3+"k"}}}}),$(".highcharts-plot-bands-0").animate({opacity:1},500),$(".highcharts-plot-band-label").animate({opacity:1},500)},function(e){$(".chart-title").text("30-year, fixed-rate mortgage average, 1981-present"),$(".chart-source").text("Freddie Mac via FRED"),$(".highcharts-plot-bands-0").animate({opacity:0},500),$(".highcharts-plot-band-label").animate({opacity:0},500),chart.update({chart:{type:"line",spacingLeft:20},data:{startColumn:2,endColumn:3},series:[{animation:{defer:0}}],yAxis:{min:0,max:20,tickAmount:5,labels:{formatter:function(){return this.value+"%"}}}})},function(e){$(".chart-title").text("Monthly payment on a $205,000 home"),$(".chart-source").text("Freddie Mac via FRED (mortgage rate)"),chart.update({chart:{type:"area",spacingLeft:5},data:{startColumn:4,endColumn:5},series:[{animation:{defer:0}}],yAxis:{min:0,max:3e3,tickAmount:5,labels:{formatter:function(){return"$"+this.value.toLocaleString()}}}})},function(e){$(".chart-title").text("Monthly payment on the median home"),$(".chart-source").text("Census Bureau and Department of Housing and Urban Development via FRED (home price); Freddie Mac via FRED (mortgage rate)"),chart.update({chart:{type:"area",spacingLeft:5},data:{startColumn:6,endColumn:7},yAxis:{min:0,max:3e3,tickAmount:5,labels:{formatter:function(){return"$"+this.value.toLocaleString()}}}})},function(e){$(".chart-title").text("Total interest paid on a median home at the average rate"),$(".chart-source").text("Census Bureau and Department of Housing and Urban Development via FRED (home price); Freddie Mac via FRED (mortgage rate)"),chart.update({chart:{type:"area",spacingLeft:5},data:{startColumn:8,endColumn:9},yAxis:{min:0,max:8e5,tickAmount:5,labels:{formatter:function(){return"$"+this.value/1e3+"k"}}}})}],offset:{up:"-10%",down:"100%"}}),requirejs,require,define;function drawHighcharts(){chart=Highcharts.chart("chart-container",{chart:{type:"area",styledMode:!0,spacingBottom:25,spacingRight:25,spacingLeft:10,spacingTop:20,animation:{duration:1e3},ignoreHiddenSeries:!1},title:{text:null},data:{csvURL:"https://raw.githubusercontent.com/kschmidt2/grow-historical-mortgages/master/data/median-home-price.csv",endColumn:1,startColumn:0},annotations:[{}],plotOptions:{series:{animation:{duration:1e3},lineWidth:1,states:{hover:{enabled:!1}},clip:!1,marker:{enabled:!1,symbol:"circle",fillColor:"#ffffff",states:{hover:{fillColor:"#ffffff"}}}}},legend:{enabled:!1},xAxis:{labels:{style:{whiteSpace:"nowrap"}},tickLength:5,min:Date.UTC(1980,0,1),max:Date.UTC(2022,10,1)},yAxis:{title:!1,labels:{useHTML:!0,overflow:"allow"},min:0,max:4e5,tickAmount:5,tickLength:25,tickPosition:"inside",labels:{formatter:function(){return"$"+this.value/1e3+"k"}},plotBands:[{color:"#F5F5F5",from:208e3,to:405e3,id:"plotband-1",label:{text:"+95%",useHTML:!0,verticalAlign:"top",y:50}}]},credits:{enabled:!1},tooltip:{enabled:!1},defs:{gradient0:{tagName:"linearGradient",id:"gradient-0",x1:0,y1:0,x2:0,y2:1,children:[{tagName:"stop",offset:0},{tagName:"stop",offset:1}]}},responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{align:"left",x:-18},tooltip:{enabled:!1}}}]}})}Highcharts.setOptions({lang:{thousandsSep:","}}),Highcharts.Annotation.prototype.addClipPaths=function(){},"complete"===document.readyState||"interactive"===document.readyState?drawHighcharts():document.addEventListener("DOMContentLoaded",drawHighcharts),function(global,setTimeout){var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.6",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;function commentReplace(e,t){return t||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){var n;if(e)for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}function eachReverse(e,t){var n;if(e)for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,i){return t&&eachProp(t,function(t,r){!n&&hasProp(e,r)||(!i||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[r]=t:(e[r]||(e[r]={}),mixin(e[r],t,n,i)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,i){var r=new Error(t+"\nhttps://requirejs.org/docs/errors.html#"+e);return r.requireType=e,r.requireModules=i,n&&(r.originalError=n),r}if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,i){var r,a,o=defContextName;return isArray(e)||"string"==typeof e||(a=e,isArray(t)?(e=t,t=n,n=i):e=[]),a&&a.context&&(o=a.context),(r=getOwn(contexts,o))||(r=contexts[o]=req.s.newContext(o)),a&&r.configure(a),r.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=void 0!==setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var i=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return i.type=e.scriptType||"text/javascript",i.charset="utf-8",i.async=!0,i},req.load=function(e,t,n){var i,r=e&&e.config||{};if(isBrowser)return(i=req.createNode(r,t,n)).setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),!i.attachEvent||i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0||isOpera?(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)),i.src=n,r.onNodeCreated&&r.onNodeCreated(i,r,t,n),currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{setTimeout(function(){},0),importScripts(n),e.completeLoad(t)}catch(i){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,i,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){if(head||(head=e.parentNode),dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,n){var i,r;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(i=currentlyAddingScript||getInteractiveScript())&&(e||(e=i.getAttribute("data-requiremodule")),r=contexts[i.getAttribute("data-requirecontext")]),r?(r.defQueue.push([e,t,n]),r.defQueueMap[e]=!0):globalDefQueue.push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}function newContext(e){var t,n,i,r,a,o={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},s={},c={},u={},l=[],d={},f={},p={},h=1,m=1;function g(e,t,n){var i,r,a,s,c,u,l,d,f,p,h=t&&t.split("/"),m=o.map,g=m&&m["*"];if(e&&(u=(e=e.split("/")).length-1,o.nodeIdCompat&&jsSuffixRegExp.test(e[u])&&(e[u]=e[u].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&h&&(e=h.slice(0,h.length-1).concat(e)),function(e){var t,n;for(t=0;t<e.length;t++)if("."===(n=e[t]))e.splice(t,1),t-=1;else if(".."===n){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}(e),e=e.join("/")),n&&m&&(h||g)){e:for(a=(r=e.split("/")).length;a>0;a-=1){if(c=r.slice(0,a).join("/"),h)for(s=h.length;s>0;s-=1)if((i=getOwn(m,h.slice(0,s).join("/")))&&(i=getOwn(i,c))){l=i,d=a;break e}!f&&g&&getOwn(g,c)&&(f=getOwn(g,c),p=a)}!l&&f&&(l=f,d=p),l&&(r.splice(0,d,l),e=r.join("/"))}return getOwn(o.pkgs,e)||e}function v(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===i.contextName)return t.parentNode.removeChild(t),!0})}function b(e){var t=getOwn(o.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),i.require.undef(e),i.makeRequire(null,{skipMap:!0})([e]),!0}function x(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function y(e,t,n,r){var a,o,s,c,u=null,l=t?t.name:null,f=e,p=!0,v="";return e||(p=!1,e="_@r"+(h+=1)),u=(c=x(e))[0],e=c[1],u&&(u=g(u,l,r),o=getOwn(d,u)),e&&(u?v=n?e:o&&o.normalize?o.normalize(e,function(e){return g(e,l,r)}):-1===e.indexOf("!")?g(e,l,r):e:(u=(c=x(v=g(e,l,r)))[0],v=c[1],n=!0,a=i.nameToUrl(v))),{prefix:u,name:v,parentMap:t,unnormalized:!!(s=!u||o||n?"":"_unnormalized"+(m+=1)),url:a,originalName:f,isDefine:p,id:(u?u+"!"+v:v)+s}}function w(e){var t=e.id,n=getOwn(s,t);return n||(n=s[t]=new i.Module(e)),n}function E(e,t,n){var i=e.id,r=getOwn(s,i);!hasProp(d,i)||r&&!r.defineEmitComplete?(r=w(e)).error&&"error"===t?n(r.error):r.on(t,n):"defined"===t&&n(d[i])}function k(e,t){var n=e.requireModules,i=!1;t?t(e):(each(n,function(t){var n=getOwn(s,t);n&&(n.error=e,n.events.error&&(i=!0,n.emit("error",e)))}),i||req.onError(e))}function q(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(i.defQueueMap[t]=!0),l.push(e)}),globalDefQueue=[])}function M(e){delete s[e],delete c[e]}function S(){var e,n,r=1e3*o.waitSeconds,u=r&&i.startTime+r<(new Date).getTime(),l=[],f=[],p=!1,h=!0;if(!t){if(t=!0,eachProp(c,function(e){var t=e.map,i=t.id;if(e.enabled&&(t.isDefine||f.push(e),!e.error))if(!e.inited&&u)b(i)?(n=!0,p=!0):(l.push(i),v(i));else if(!e.inited&&e.fetched&&t.isDefine&&(p=!0,!t.prefix))return h=!1}),u&&l.length)return(e=makeError("timeout","Load timeout for modules: "+l,null,l)).contextName=i.contextName,k(e);h&&each(f,function(e){!function e(t,n,i){var r=t.map.id;t.error?t.emit("error",t.error):(n[r]=!0,each(t.depMaps,function(r,a){var o=r.id,c=getOwn(s,o);!c||t.depMatched[a]||i[o]||(getOwn(n,o)?(t.defineDep(a,d[o]),t.check()):e(c,n,i))}),i[r]=!0)}(e,{},{})}),u&&!n||!p||!isBrowser&&!isWebWorker||a||(a=setTimeout(function(){a=0,S()},50)),t=!1}}function O(e){hasProp(d,e[0])||w(y(e[0],null,!0)).init(e[1],e[2])}function C(e,t,n,i){e.detachEvent&&!isOpera?i&&e.detachEvent(i,t):e.removeEventListener(n,t,!1)}function T(e){var t=e.currentTarget||e.srcElement;return C(t,i.onScriptLoad,"load","onreadystatechange"),C(t,i.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function A(){var e;for(q();l.length;){if(null===(e=l.shift())[0])return k(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));O(e)}i.defQueueMap={}}return r={require:function(e){return e.require?e.require:e.require=i.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?d[e.map.id]=e.exports:e.exports=d[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(o.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},(n=function(e){this.events=getOwn(u,e.id)||{},this.map=e,this.shim=getOwn(o.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0}).prototype={init:function(e,t,n,i){i=i||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,i.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();i.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;f[e]||(f[e]=!0,i.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,r=this.depExports,a=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{a=i.execCb(n,o,r,a)}catch(t){e=t}else a=i.execCb(n,o,r,a);if(this.map.isDefine&&void 0===a&&((t=this.module)?a=t.exports:this.usingExports&&(a=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",k(this.error=e)}else a=o;if(this.exports=a,this.map.isDefine&&!this.ignore&&(d[n]=a,req.onResourceLoad)){var s=[];each(this.depMaps,function(e){s.push(e.normalizedMap||e)}),req.onResourceLoad(i,this.map,s)}M(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(i.defQueueMap,n)||this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,n=y(e.prefix);this.depMaps.push(n),E(n,"defined",bind(this,function(n){var r,a,c,u=getOwn(p,this.map.id),l=this.map.name,d=this.map.parentMap?this.map.parentMap.name:null,f=i.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(n.normalize&&(l=n.normalize(l,function(e){return g(e,d,!0)})||""),E(a=y(e.prefix+"!"+l,this.map.parentMap,!0),"defined",bind(this,function(e){this.map.normalizedMap=a,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),void((c=getOwn(s,a.id))&&(this.depMaps.push(a),this.events.error&&c.on("error",bind(this,function(e){this.emit("error",e)})),c.enable()))):u?(this.map.url=i.nameToUrl(u),void this.load()):((r=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})})).error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(s,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&M(e.map.id)}),k(e)}),r.fromText=bind(this,function(n,a){var s=e.name,c=y(s),u=useInteractive;a&&(n=a),u&&(useInteractive=!1),w(c),hasProp(o.config,t)&&(o.config[s]=o.config[t]);try{req.exec(n)}catch(e){return k(makeError("fromtexteval","fromText eval for "+t+" failed: "+e,e,[t]))}u&&(useInteractive=!0),this.depMaps.push(c),i.completeLoad(s),f([s],r)}),void n.load(e.name,f,r,o))})),i.enable(n,this),this.pluginMaps[n.id]=n},enable:function(){c[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,a,o;if("string"==typeof e){if(e=y(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,o=getOwn(r,e.id))return void(this.depExports[t]=o(this));this.depCount+=1,E(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?E(e,"error",bind(this,this.errback)):this.events.error&&E(e,"error",bind(this,function(e){this.emit("error",e)}))}n=e.id,a=s[n],hasProp(r,n)||!a||a.enabled||i.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(s,e.id);t&&!t.enabled&&i.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},(i={config:o,contextName:e,registry:s,defined:d,urlFetched:f,defQueue:l,defQueueMap:{},Module:n,makeModuleMap:y,nextTick:req.nextTick,onError:k,configure:function(e){if(e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs){var t=e.urlArgs;e.urlArgs=function(e,n){return(-1===n.indexOf("?")?"?":"&")+t}}var n=o.shim,r={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){r[t]?(o[t]||(o[t]={}),mixin(o[t],e,!0,!0)):o[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(p[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=i.makeShimExports(e)),n[t]=e}),o.shim=n),e.packages&&each(e.packages,function(e){var t;t=(e="string"==typeof e?{name:e}:e).name,e.location&&(o.paths[t]=e.location),o.pkgs[t]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(s,function(e,t){e.inited||e.map.unnormalized||(e.map=y(t,null,!0))}),(e.deps||e.callback)&&i.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}},makeRequire:function(t,n){function a(o,c,u){var l,f;return n.enableBuildCallback&&c&&isFunction(c)&&(c.__requireJsBuild=!0),"string"==typeof o?isFunction(c)?k(makeError("requireargs","Invalid require call"),u):t&&hasProp(r,o)?r[o](s[t.id]):req.get?req.get(i,o,t,a):(l=y(o,t,!1,!0).id,hasProp(d,l)?d[l]:k(makeError("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(A(),i.nextTick(function(){A(),(f=w(y(null,t))).skipMap=n.skipMap,f.init(o,c,u,{enabled:!0}),S()}),a)}return n=n||{},mixin(a,{isBrowser:isBrowser,toUrl:function(e){var n,r=e.lastIndexOf("."),a=e.split("/")[0];return-1!==r&&(!("."===a||".."===a)||r>1)&&(n=e.substring(r,e.length),e=e.substring(0,r)),i.nameToUrl(g(e,t&&t.id,!0),n,!0)},defined:function(e){return hasProp(d,y(e,t,!1,!0).id)},specified:function(e){return e=y(e,t,!1,!0).id,hasProp(d,e)||hasProp(s,e)}}),t||(a.undef=function(e){q();var n=y(e,t,!0),r=getOwn(s,e);r.undefed=!0,v(e),delete d[e],delete f[n.url],delete u[e],eachReverse(l,function(t,n){t[0]===e&&l.splice(n,1)}),delete i.defQueueMap[e],r&&(r.events.defined&&(u[e]=r.events),M(e))}),a},enable:function(e){getOwn(s,e.id)&&w(e).enable()},completeLoad:function(e){var t,n,r,a=getOwn(o.shim,e)||{},c=a.exports;for(q();l.length;){if(null===(n=l.shift())[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);O(n)}if(i.defQueueMap={},r=getOwn(s,e),!t&&!hasProp(d,e)&&r&&!r.inited){if(!(!o.enforceDefine||c&&getGlobal(c)))return b(e)?void 0:k(makeError("nodefine","No define call for "+e,null,[e]));O([e,a.deps||[],a.exportsFn])}S()},nameToUrl:function(e,t,n){var r,a,s,c,u,l,d=getOwn(o.pkgs,e);if(d&&(e=d),l=getOwn(p,e))return i.nameToUrl(l,t,n);if(req.jsExtRegExp.test(e))c=e+(t||"");else{for(r=o.paths,s=(a=e.split("/")).length;s>0;s-=1)if(u=getOwn(r,a.slice(0,s).join("/"))){isArray(u)&&(u=u[0]),a.splice(0,s,u);break}c=a.join("/"),c=("/"===(c+=t||(/^data\:|^blob\:|\?/.test(c)||n?"":".js")).charAt(0)||c.match(/^[\w\+\.\-]+:/)?"":o.baseUrl)+c}return o.urlArgs&&!/^blob\:/.test(c)?c+o.urlArgs(e,c):c},load:function(e,t){req.load(i,e,t)},execCb:function(e,t,n,i){return t.apply(i,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=T(e);i.completeLoad(t.id)}},onScriptError:function(e){var t=T(e);if(!b(t.id)){var n=[];return eachProp(s,function(e,i){0!==i.indexOf("_@r")&&each(e.depMaps,function(e){if(e.id===t.id)return n.push(i),!0})}),k(makeError("scripterror",'Script error for "'+t.id+(n.length?'", needed by: '+n.join(", "):'"'),e,[t.id]))}}}).require=i.makeRequire(),i}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e}),interactiveScript)}}(this,"undefined"==typeof setTimeout?void 0:setTimeout);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJyZXF1aXJlLmpzIl0sIm5hbWVzIjpbImNoYXJ0IiwiZSIsIm4iLCJvIiwicyIsInQiLCJmIiwibCIsIl92ZXJzaW9uIiwiX2NvbmZpZyIsImNsYXNzUHJlZml4IiwiZW5hYmxlQ2xhc3NlcyIsImVuYWJsZUpTQ2xhc3MiLCJ1c2VQcmVmaXhlcyIsIl9xIiwib24iLCJ0aGlzIiwic2V0VGltZW91dCIsImFkZFRlc3QiLCJwdXNoIiwibmFtZSIsImZuIiwib3B0aW9ucyIsImFkZEFzeW5jVGVzdCIsIk1vZGVybml6ciIsInByb3RvdHlwZSIsInIiLCJkb2N1bWVudEVsZW1lbnQiLCJjIiwibm9kZU5hbWUiLCJ0b0xvd2VyQ2FzZSIsImEiLCJpIiwiaGFzT3duUHJvcGVydHkiLCJhbGlhc2VzIiwibGVuZ3RoIiwic3BsaXQiLCJCb29sZWFuIiwiam9pbiIsImNsYXNzTmFtZSIsImJhc2VWYWwiLCJSZWdFeHAiLCJyZXBsYWNlIiwiZCIsIndpbmRvdyIsImRvY3VtZW50IiwiZGV2aWNlbW90aW9uIiwiY29uc29sZSIsImxvZyIsIiQiLCJwYXJlbnQiLCJjc3MiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwiVHdvU3RlcCIsImNhbGwiLCJtIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJwIiwidmFsdWUiLCJpbmRleE9mIiwid3JpdGFibGUiLCJrZXkiLCJUeXBlRXJyb3IiLCJpbnN0YW5jZXMiLCJmaWx0ZXIiLCJlbmFibGVkIiwiZWxlbWVudHMiLCJuYXJyYXRpdmUiLCJvbkNoYW5nZSIsIkFycmF5Iiwic2xpY2UiLCJvZmZzZXQiLCJkb3duIiwidXAiLCJzZXRXYXlwb2ludHMiLCJlbGVtZW50IiwiaW5kZXgiLCJnb1RvIiwiY29udGludW91cyIsIndheXBvaW50cyIsInN0aWNrIiwiZml4VG8iLCJ3cmFwSW5uZXIiLCJzdGlja3kiLCJmaW5kIiwic2V0S2V5Ym9hcmQiLCJyZWdpc3RlciIsInNldEludGVydmFsIiwiV2F5cG9pbnQiLCJyZWZyZXNoQWxsIiwiaXNWYWxpZEluZGV4IiwiZGlyZWN0aW9uIiwiZXEiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiZGlzYWJsZVdheXBvaW50cyIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJ0b3AiLCJwcm9taXNlIiwidGhlbiIsImVuYWJsZVdheXBvaW50cyIsIkRlZmVycmVkIiwicmVzb2x2ZSIsImFyZ3VtZW50cyIsIm1hcCIsImhhbmRsZXIiLCJrZXlkb3duIiwiZGlzYWJsZWQiLCJrZXlDb2RlIiwiZ2V0QWN0aXZlSW5zdGFuY2VzIiwidGFyZ2V0IiwiYm9keSIsIm1ldGFLZXkiLCJwcmV2ZW50RGVmYXVsdCIsImNvbmNhdCIsImFwcGx5IiwiZm9yRWFjaCIsImRpc2FibGUiLCJlbmFibGUiLCJ0cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJldmVudCIsInF1ZXJ5U2VsZWN0b3IiLCJvcGFjaXR5IiwidGV4dCIsInVwZGF0ZSIsInR5cGUiLCJzcGFjaW5nTGVmdCIsImRhdGEiLCJzdGFydENvbHVtbiIsImVuZENvbHVtbiIsInlBeGlzIiwibWluIiwibWF4IiwibGFiZWxzIiwiZm9ybWF0dGVyIiwic2VyaWVzIiwiYW5pbWF0aW9uIiwiZGVmZXIiLCJ0aWNrQW1vdW50IiwidG9Mb2NhbGVTdHJpbmciLCJyZXF1aXJlanMiLCJyZXF1aXJlIiwiZHJhd0hpZ2hjaGFydHMiLCJIaWdoY2hhcnRzIiwic3R5bGVkTW9kZSIsInNwYWNpbmdCb3R0b20iLCJzcGFjaW5nUmlnaHQiLCJzcGFjaW5nVG9wIiwiZHVyYXRpb24iLCJpZ25vcmVIaWRkZW5TZXJpZXMiLCJ0aXRsZSIsImNzdlVSTCIsImFubm90YXRpb25zIiwicGxvdE9wdGlvbnMiLCJsaW5lV2lkdGgiLCJzdGF0ZXMiLCJob3ZlciIsImNsaXAiLCJtYXJrZXIiLCJzeW1ib2wiLCJmaWxsQ29sb3IiLCJsZWdlbmQiLCJ4QXhpcyIsInN0eWxlIiwid2hpdGVTcGFjZSIsInRpY2tMZW5ndGgiLCJEYXRlIiwiVVRDIiwidXNlSFRNTCIsIm92ZXJmbG93IiwidGlja1Bvc2l0aW9uIiwicGxvdEJhbmRzIiwiY29sb3IiLCJmcm9tIiwidG8iLCJpZCIsImxhYmVsIiwidmVydGljYWxBbGlnbiIsInkiLCJjcmVkaXRzIiwidG9vbHRpcCIsImRlZnMiLCJncmFkaWVudDAiLCJ0YWdOYW1lIiwieDEiLCJ5MSIsIngyIiwieTIiLCJjaGlsZHJlbiIsInJlc3BvbnNpdmUiLCJydWxlcyIsImNvbmRpdGlvbiIsIm1heFdpZHRoIiwiY2hhcnRPcHRpb25zIiwiYWxpZ24iLCJ4Iiwic2V0T3B0aW9ucyIsImxhbmciLCJ0aG91c2FuZHNTZXAiLCJBbm5vdGF0aW9uIiwiYWRkQ2xpcFBhdGhzIiwicmVhZHlTdGF0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJnbG9iYWwiLCJyZXEiLCJoZWFkIiwiYmFzZUVsZW1lbnQiLCJkYXRhTWFpbiIsInNyYyIsImludGVyYWN0aXZlU2NyaXB0IiwiY3VycmVudGx5QWRkaW5nU2NyaXB0IiwibWFpblNjcmlwdCIsInN1YlBhdGgiLCJ2ZXJzaW9uIiwiY29tbWVudFJlZ0V4cCIsImNqc1JlcXVpcmVSZWdFeHAiLCJqc1N1ZmZpeFJlZ0V4cCIsImN1cnJEaXJSZWdFeHAiLCJvcCIsIm9zdHJpbmciLCJ0b1N0cmluZyIsImhhc093biIsImlzQnJvd3NlciIsIm5hdmlnYXRvciIsImlzV2ViV29ya2VyIiwiaW1wb3J0U2NyaXB0cyIsInJlYWR5UmVnRXhwIiwicGxhdGZvcm0iLCJkZWZDb250ZXh0TmFtZSIsImlzT3BlcmEiLCJvcGVyYSIsImNvbnRleHRzIiwiY2ZnIiwiZ2xvYmFsRGVmUXVldWUiLCJ1c2VJbnRlcmFjdGl2ZSIsImNvbW1lbnRSZXBsYWNlIiwibWF0Y2giLCJzaW5nbGVQcmVmaXgiLCJpc0Z1bmN0aW9uIiwiaXQiLCJpc0FycmF5IiwiZWFjaCIsImFyeSIsImZ1bmMiLCJlYWNoUmV2ZXJzZSIsImhhc1Byb3AiLCJvYmoiLCJwcm9wIiwiZ2V0T3duIiwiZWFjaFByb3AiLCJtaXhpbiIsInNvdXJjZSIsImZvcmNlIiwiZGVlcFN0cmluZ01peGluIiwiYmluZCIsInNjcmlwdHMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImRlZmF1bHRPbkVycm9yIiwiZXJyIiwiZ2V0R2xvYmFsIiwiZyIsInBhcnQiLCJtYWtlRXJyb3IiLCJtc2ciLCJyZXF1aXJlTW9kdWxlcyIsIkVycm9yIiwicmVxdWlyZVR5cGUiLCJvcmlnaW5hbEVycm9yIiwidW5kZWZpbmVkIiwiZGVwcyIsImNhbGxiYWNrIiwiZXJyYmFjayIsIm9wdGlvbmFsIiwiY29udGV4dCIsImNvbmZpZyIsImNvbnRleHROYW1lIiwibmV3Q29udGV4dCIsImNvbmZpZ3VyZSIsIm5leHRUaWNrIiwianNFeHRSZWdFeHAiLCJjdHgiLCJwYXJlbnROb2RlIiwib25FcnJvciIsImNyZWF0ZU5vZGUiLCJtb2R1bGVOYW1lIiwidXJsIiwibm9kZSIsInhodG1sIiwiY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRlRWxlbWVudCIsInNjcmlwdFR5cGUiLCJjaGFyc2V0IiwiYXN5bmMiLCJsb2FkIiwic2V0QXR0cmlidXRlIiwiYXR0YWNoRXZlbnQiLCJvblNjcmlwdExvYWQiLCJvblNjcmlwdEVycm9yIiwib25Ob2RlQ3JlYXRlZCIsImluc2VydEJlZm9yZSIsImFwcGVuZENoaWxkIiwiY29tcGxldGVMb2FkIiwic2tpcERhdGFNYWluIiwic2NyaXB0IiwiZ2V0QXR0cmlidXRlIiwiYmFzZVVybCIsInBvcCIsInRlc3QiLCJkZXAiLCJnZXRJbnRlcmFjdGl2ZVNjcmlwdCIsImRlZlF1ZXVlIiwiZGVmUXVldWVNYXAiLCJqUXVlcnkiLCJleGVjIiwiZXZhbCIsImluQ2hlY2tMb2FkZWQiLCJNb2R1bGUiLCJoYW5kbGVycyIsImNoZWNrTG9hZGVkVGltZW91dElkIiwid2FpdFNlY29uZHMiLCJwYXRocyIsImJ1bmRsZXMiLCJwa2dzIiwic2hpbSIsInJlZ2lzdHJ5IiwiZW5hYmxlZFJlZ2lzdHJ5IiwidW5kZWZFdmVudHMiLCJkZWZpbmVkIiwidXJsRmV0Y2hlZCIsImJ1bmRsZXNNYXAiLCJyZXF1aXJlQ291bnRlciIsInVubm9ybWFsaXplZENvdW50ZXIiLCJub3JtYWxpemUiLCJiYXNlTmFtZSIsImFwcGx5TWFwIiwibWFwVmFsdWUiLCJuYW1lUGFydHMiLCJqIiwibmFtZVNlZ21lbnQiLCJsYXN0SW5kZXgiLCJmb3VuZE1hcCIsImZvdW5kSSIsImZvdW5kU3Rhck1hcCIsInN0YXJJIiwiYmFzZVBhcnRzIiwic3Rhck1hcCIsIm5vZGVJZENvbXBhdCIsImNoYXJBdCIsInNwbGljZSIsInRyaW1Eb3RzIiwib3V0ZXJMb29wIiwicmVtb3ZlU2NyaXB0Iiwic2NyaXB0Tm9kZSIsInJlbW92ZUNoaWxkIiwiaGFzUGF0aEZhbGxiYWNrIiwicGF0aENvbmZpZyIsInNoaWZ0IiwidW5kZWYiLCJtYWtlUmVxdWlyZSIsInNraXBNYXAiLCJzcGxpdFByZWZpeCIsInByZWZpeCIsInN1YnN0cmluZyIsIm1ha2VNb2R1bGVNYXAiLCJwYXJlbnRNb2R1bGVNYXAiLCJpc05vcm1hbGl6ZWQiLCJwbHVnaW5Nb2R1bGUiLCJzdWZmaXgiLCJwYXJlbnROYW1lIiwib3JpZ2luYWxOYW1lIiwiaXNEZWZpbmUiLCJub3JtYWxpemVkTmFtZSIsIm5hbWVUb1VybCIsInBhcmVudE1hcCIsInVubm9ybWFsaXplZCIsImdldE1vZHVsZSIsImRlcE1hcCIsIm1vZCIsImRlZmluZUVtaXRDb21wbGV0ZSIsImVycm9yIiwiaWRzIiwibm90aWZpZWQiLCJldmVudHMiLCJlbWl0IiwidGFrZUdsb2JhbFF1ZXVlIiwicXVldWVJdGVtIiwiY2xlYW5SZWdpc3RyeSIsImNoZWNrTG9hZGVkIiwidXNpbmdQYXRoRmFsbGJhY2siLCJ3YWl0SW50ZXJ2YWwiLCJleHBpcmVkIiwic3RhcnRUaW1lIiwiZ2V0VGltZSIsIm5vTG9hZHMiLCJyZXFDYWxscyIsInN0aWxsTG9hZGluZyIsIm5lZWRDeWNsZUNoZWNrIiwibW9kSWQiLCJpbml0ZWQiLCJmZXRjaGVkIiwiYnJlYWtDeWNsZSIsInRyYWNlZCIsInByb2Nlc3NlZCIsImRlcE1hcHMiLCJkZXBJZCIsImRlcE1hdGNoZWQiLCJkZWZpbmVEZXAiLCJjaGVjayIsImNhbGxHZXRNb2R1bGUiLCJhcmdzIiwiaW5pdCIsInJlbW92ZUxpc3RlbmVyIiwiaWVOYW1lIiwiZGV0YWNoRXZlbnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZ2V0U2NyaXB0RGF0YSIsImV2dCIsImN1cnJlbnRUYXJnZXQiLCJzcmNFbGVtZW50IiwiaW50YWtlRGVmaW5lcyIsInVzaW5nRXhwb3J0cyIsInVyaSIsImRlcEV4cG9ydHMiLCJwbHVnaW5NYXBzIiwiZGVwQ291bnQiLCJmYWN0b3J5IiwiaWdub3JlIiwiZmV0Y2giLCJjYWxsUGx1Z2luIiwiZW5hYmxlQnVpbGRDYWxsYmFjayIsImVuYWJsaW5nIiwiY2pzTW9kdWxlIiwiZGVmaW5pbmciLCJleGVjQ2IiLCJyZXF1aXJlTWFwIiwib25SZXNvdXJjZUxvYWQiLCJyZXNMb2FkTWFwcyIsIm5vcm1hbGl6ZWRNYXAiLCJkZWZpbmVFbWl0dGVkIiwicGx1Z2luTWFwIiwicGx1Z2luIiwibm9ybWFsaXplZE1vZCIsImJ1bmRsZUlkIiwibG9jYWxSZXF1aXJlIiwiZnJvbVRleHQiLCJ0ZXh0QWx0IiwibW9kdWxlTWFwIiwiaGFzSW50ZXJhY3RpdmUiLCJ1bmRlZmVkIiwiY2IiLCJjYnMiLCJ1cmxBcmdzIiwib2JqcyIsInYiLCJleHBvcnRzRm4iLCJtYWtlU2hpbUV4cG9ydHMiLCJwYWNrYWdlcyIsInBrZ09iaiIsImxvY2F0aW9uIiwibWFpbiIsInJldCIsInJlbE1hcCIsInJlcXVpcmVNb2QiLCJfX3JlcXVpcmVKc0J1aWxkIiwidG9VcmwiLCJtb2R1bGVOYW1lUGx1c0V4dCIsImV4dCIsImxhc3RJbmRleE9mIiwic2VnbWVudCIsInNwZWNpZmllZCIsImZvdW5kIiwic2hFeHBvcnRzIiwiZW5mb3JjZURlZmluZSIsInNraXBFeHQiLCJz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QUFBUSxrQkFBQThGLElBR0E5RixvQkF4OERBLENBc2xFQTVNLEtBQUEsb0JBQUFDLGdCQUFBc1EsRUFBQXRRIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBhZGRzIHNvY2lhbCBjbGFzcyB0byBnZXQgc29jaWFsIGNoYXJ0XG4vLyBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjaGFydC1hcmVhXCIpO1xuLy8gZm9yKHZhciBpID0gMDsgaSA8IGVsZW1lbnQubGVuZ3RoOyBpKyspXG4vLyB7XG4vLyAgICAgZWxlbWVudFtpXS5jbGFzc05hbWUgKz0gXCIgc29jaWFsXCI7XG4vLyB9XG4vKiEgbW9kZXJuaXpyIDMuNi4wIChDdXN0b20gQnVpbGQpIHwgTUlUICpcbiAqIGh0dHBzOi8vbW9kZXJuaXpyLmNvbS9kb3dubG9hZC8/LWRldmljZW1vdGlvbl9kZXZpY2VvcmllbnRhdGlvbi1zZXRjbGFzc2VzICEqL1xuICFmdW5jdGlvbihlLG4sbyl7ZnVuY3Rpb24gcyhlLG4pe3JldHVybiB0eXBlb2YgZT09PW59ZnVuY3Rpb24gYSgpe3ZhciBlLG4sbyxhLGksbCxyO2Zvcih2YXIgYyBpbiBmKWlmKGYuaGFzT3duUHJvcGVydHkoYykpe2lmKGU9W10sbj1mW2NdLG4ubmFtZSYmKGUucHVzaChuLm5hbWUudG9Mb3dlckNhc2UoKSksbi5vcHRpb25zJiZuLm9wdGlvbnMuYWxpYXNlcyYmbi5vcHRpb25zLmFsaWFzZXMubGVuZ3RoKSlmb3Iobz0wO288bi5vcHRpb25zLmFsaWFzZXMubGVuZ3RoO28rKyllLnB1c2gobi5vcHRpb25zLmFsaWFzZXNbb10udG9Mb3dlckNhc2UoKSk7Zm9yKGE9cyhuLmZuLFwiZnVuY3Rpb25cIik/bi5mbigpOm4uZm4saT0wO2k8ZS5sZW5ndGg7aSsrKWw9ZVtpXSxyPWwuc3BsaXQoXCIuXCIpLDE9PT1yLmxlbmd0aD9Nb2Rlcm5penJbclswXV09YTooIU1vZGVybml6cltyWzBdXXx8TW9kZXJuaXpyW3JbMF1daW5zdGFuY2VvZiBCb29sZWFufHwoTW9kZXJuaXpyW3JbMF1dPW5ldyBCb29sZWFuKE1vZGVybml6cltyWzBdXSkpLE1vZGVybml6cltyWzBdXVtyWzFdXT1hKSx0LnB1c2goKGE/XCJcIjpcIm5vLVwiKStyLmpvaW4oXCItXCIpKX19ZnVuY3Rpb24gaShlKXt2YXIgbj1yLmNsYXNzTmFtZSxvPU1vZGVybml6ci5fY29uZmlnLmNsYXNzUHJlZml4fHxcIlwiO2lmKGMmJihuPW4uYmFzZVZhbCksTW9kZXJuaXpyLl9jb25maWcuZW5hYmxlSlNDbGFzcyl7dmFyIHM9bmV3IFJlZ0V4cChcIihefFxcXFxzKVwiK28rXCJuby1qcyhcXFxcc3wkKVwiKTtuPW4ucmVwbGFjZShzLFwiJDFcIitvK1wianMkMlwiKX1Nb2Rlcm5penIuX2NvbmZpZy5lbmFibGVDbGFzc2VzJiYobis9XCIgXCIrbytlLmpvaW4oXCIgXCIrbyksYz9yLmNsYXNzTmFtZS5iYXNlVmFsPW46ci5jbGFzc05hbWU9bil9dmFyIHQ9W10sZj1bXSxsPXtfdmVyc2lvbjpcIjMuNi4wXCIsX2NvbmZpZzp7Y2xhc3NQcmVmaXg6XCJcIixlbmFibGVDbGFzc2VzOiEwLGVuYWJsZUpTQ2xhc3M6ITAsdXNlUHJlZml4ZXM6ITB9LF9xOltdLG9uOmZ1bmN0aW9uKGUsbil7dmFyIG89dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bihvW2VdKX0sMCl9LGFkZFRlc3Q6ZnVuY3Rpb24oZSxuLG8pe2YucHVzaCh7bmFtZTplLGZuOm4sb3B0aW9uczpvfSl9LGFkZEFzeW5jVGVzdDpmdW5jdGlvbihlKXtmLnB1c2goe25hbWU6bnVsbCxmbjplfSl9fSxNb2Rlcm5penI9ZnVuY3Rpb24oKXt9O01vZGVybml6ci5wcm90b3R5cGU9bCxNb2Rlcm5penI9bmV3IE1vZGVybml6cixNb2Rlcm5penIuYWRkVGVzdChcImRldmljZW1vdGlvblwiLFwiRGV2aWNlTW90aW9uRXZlbnRcImluIGUpLE1vZGVybml6ci5hZGRUZXN0KFwiZGV2aWNlb3JpZW50YXRpb25cIixcIkRldmljZU9yaWVudGF0aW9uRXZlbnRcImluIGUpO3ZhciByPW4uZG9jdW1lbnRFbGVtZW50LGM9XCJzdmdcIj09PXIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTthKCksaSh0KSxkZWxldGUgbC5hZGRUZXN0LGRlbGV0ZSBsLmFkZEFzeW5jVGVzdDtmb3IodmFyIGQ9MDtkPE1vZGVybml6ci5fcS5sZW5ndGg7ZCsrKU1vZGVybml6ci5fcVtkXSgpO2UuTW9kZXJuaXpyPU1vZGVybml6cn0od2luZG93LGRvY3VtZW50KTtcblxuICBpZiAoTW9kZXJuaXpyLmRldmljZW1vdGlvbikge1xuICAgIC8vIHN1cHBvcnRlZFxuICAgICAgICBjb25zb2xlLmxvZyhcInN1cHBvcnRlZFwiKVxuICB9IGVsc2Uge1xuICAgIC8vIG5vdC1zdXBwb3J0ZWRcbiAgICBjb25zb2xlLmxvZyhcIm5vdCBzdXBwb3J0ZWRcIilcbiAgfVxuXG4gIGxldCBjaGFydDtcblxuXG4kKCBcIi5jaGFydC1hcmVhXCIgKS5wYXJlbnQoKS5jc3MoIFwib3ZlcmZsb3dcIiwgXCJ2aXNpYmxlXCIgKVxuIWZ1bmN0aW9uKGUsdCl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9dCgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJUd29TdGVwXCIsW10sdCk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5Ud29TdGVwPXQoKTplLlR3b1N0ZXA9dCgpfSh0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoaSl7aWYobltpXSlyZXR1cm4gbltpXS5leHBvcnRzO3ZhciBvPW5baV09e2k6aSxsOiExLGV4cG9ydHM6e319O3JldHVybiBlW2ldLmNhbGwoby5leHBvcnRzLG8sby5leHBvcnRzLHQpLG8ubD0hMCxvLmV4cG9ydHN9dmFyIG49e307cmV0dXJuIHQubT1lLHQuYz1uLHQuaT1mdW5jdGlvbihlKXtyZXR1cm4gZX0sdC5kPWZ1bmN0aW9uKGUsbixpKXt0Lm8oZSxuKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbix7Y29uZmlndXJhYmxlOiExLGVudW1lcmFibGU6ITAsZ2V0Oml9KX0sdC5uPWZ1bmN0aW9uKGUpe3ZhciBuPWUmJmUuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiBlLmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIGV9O3JldHVybiB0LmQobixcImFcIixuKSxufSx0Lm89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9LHQucD1cIlwiLHQodC5zPTIpfShbZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkoZSl7dmFyIHQ9WzQwLDMyLDM5LDM0XSxuPVszNywzOCwzM107cmV0dXJuIHQuaW5kZXhPZihlKT4tMT8xOm4uaW5kZXhPZihlKT4tMT8tMTowfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLHQuZGVmYXVsdD1pLGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIGk9dFtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbih0LG4saSl7cmV0dXJuIG4mJmUodC5wcm90b3R5cGUsbiksaSYmZSh0LGkpLHR9fSgpLHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7aSh0aGlzLGUpLHRoaXMuaW5zdGFuY2VzPVtdfXJldHVybiBvKGUsW3trZXk6XCJyZWdpc3RlclwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmluc3RhbmNlcy5wdXNoKGUpLHRoaXN9fSx7a2V5OlwiZ2V0QWN0aXZlSW5zdGFuY2VzXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnN0YW5jZXMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLmVuYWJsZWR9KX19XSksZX0oKTt0LmRlZmF1bHQ9cixlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaShlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19ZnVuY3Rpb24gbyhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciBpPXRbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24odCxuLGkpe3JldHVybiBuJiZlKHQucHJvdG90eXBlLG4pLGkmJmUodCxpKSx0fX0oKSxzPW4oMCksYT1pKHMpLHU9bigxKSxmPWkodSksbD1uZXcgZi5kZWZhdWx0LGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe2Z1bmN0aW9uIG4oZSl7aWYoXCJ1cFwiPT1lKXt2YXIgdD1hLmVsZW1lbnRzLmluZGV4T2YodGhpcy5lbGVtZW50KTt0IT09dGhpcy5pbmRleCYmYS5nb1RvKHQsITEsZSl9fWZ1bmN0aW9uIGkoZSl7aWYoXCJkb3duXCI9PWUpe3ZhciB0PWEuZWxlbWVudHMuaW5kZXhPZih0aGlzLmVsZW1lbnQpO3QhPT10aGlzLmluZGV4JiZhLmdvVG8odCwhMSxlKX19aWYobyh0aGlzLGUpLDA9PT10LmVsZW1lbnRzLmxlbmd0aCl0aHJvd1wiRWxlbWVudHMgYXJyYXkgaXMgZW1wdHlcIjtpZih0Lm5hcnJhdGl2ZSl7aWYodC5lbGVtZW50cy5sZW5ndGghPT10Lm5hcnJhdGl2ZS5sZW5ndGgpdGhyb3dcIkVsZW1lbnRzIGFuZCBuYXJyYXRpdmUgYXJlIGRpZmZlcmVudCBsZW5ndGhzXCI7aWYoIXQubmFycmF0aXZlLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cImZ1bmN0aW9uXCIhPXR5cGVvZiBlfSkubGVuZ3RoPT09ITEpdGhyb3dcIk5hcnJhdGl2ZSBjb250YWlucyBub24tZnVuY3Rpb25zXCI7dGhpcy5uYXJyYXRpdmU9dC5uYXJyYXRpdmV9dGhpcy5vbkNoYW5nZT10Lm9uQ2hhbmdlLHRoaXMuZWxlbWVudHM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodC5lbGVtZW50cyksdGhpcy5lbmFibGVkPSEwLHRoaXMub2Zmc2V0PXQuaGFzT3duUHJvcGVydHkoXCJvZmZzZXRcIik/dC5vZmZzZXQ6e2Rvd246XCI1MCVcIix1cDpcIjBcIn07dmFyIHI9dGhpcy5zZXRXYXlwb2ludHModGhpcy5lbGVtZW50cyxpLHQuY29udGludW91cyx0aGlzLm9mZnNldC5kb3duKSxzPXRoaXMuc2V0V2F5cG9pbnRzKHRoaXMuZWxlbWVudHMsbix0LmNvbnRpbnVvdXMsdGhpcy5vZmZzZXQudXApO2lmKHRoaXMud2F5cG9pbnRzPVtyLHNdLHQuc3RpY2spe2lmKHZvaWQgMD09PSQoKS5maXhUbyl0aHJvd1wiZml4VG8gaXMgbm90IHByZXNlbnQgb24gdGhlIHBhZ2UsIG9yIG1heSBoYXZlIGJlZW4gbG9hZGVkIGluIGJlZm9yZSBqUXVlcnkuXCI7JCh0LnN0aWNrKS53cmFwSW5uZXIoJzxkaXYgY2xhc3M9XCJ0d28tc3RlcC1zdGlja3ktd3JhcHBlclwiPjwvZGl2PicpLHRoaXMuc3RpY2t5PSQodC5zdGljaykuZmluZChcIi50d28tc3RlcC1zdGlja3ktd3JhcHBlclwiKS5maXhUbygkKHQuc3RpY2spKX10aGlzLnNldEtleWJvYXJkKCksdGhpcy5pbmRleD0tMSxsLnJlZ2lzdGVyKHRoaXMpLHNldEludGVydmFsKGZ1bmN0aW9uKCl7V2F5cG9pbnQucmVmcmVzaEFsbCgpfSwxZTMpO3ZhciBhPXRoaXN9cmV0dXJuIHIoZSxbe2tleTpcImdvVG9cIix2YWx1ZTpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcztpZih0aGlzLmlzVmFsaWRJbmRleChlKT09PSExKXRocm93IGUrXCIgaXMgbm90IGEgdmFsaWQgaW5kZXguIE11c3QgYmUgYmV0d2VlbiAwIGFuZCBcIisodGhpcy5lbGVtZW50cy5sZW5ndGgtMSkrXCIgKGluY2x1c2l2ZSkuXCI7dGhpcy5uYXJyYXRpdmUmJnRoaXMubmFycmF0aXZlW2VdKHtlbGVtZW50OnRoaXMuZWxlbWVudHNbZV0saW5kZXg6ZSxkaXJlY3Rpb246bn0pLHRoaXMub25DaGFuZ2UmJnRoaXMub25DaGFuZ2Uoe2VsZW1lbnQ6dGhpcy5lbGVtZW50c1tlXSxpbmRleDplLGRpcmVjdGlvbjpufSksdGhpcy5pbmRleD1lO3ZhciBvPSQodGhpcy5lbGVtZW50cykuZXEoZSk7cmV0dXJuICQodGhpcy5lbGVtZW50cykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIiksby5hZGRDbGFzcyhcImFjdGl2ZVwiKSx0PT09ITA/KHRoaXMuZGlzYWJsZVdheXBvaW50cygpLCQoXCJodG1sLCBib2R5XCIpLmFuaW1hdGUoe3Njcm9sbFRvcDpvLm9mZnNldCgpLnRvcC0xMDB9LDUwMCkucHJvbWlzZSgpLnRoZW4oZnVuY3Rpb24oKXtpLmVuYWJsZVdheXBvaW50cygpfSkpOiQuRGVmZXJyZWQoKS5yZXNvbHZlKCl9fSx7a2V5Olwic2V0V2F5cG9pbnRzXCIsdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj0hKGFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdKXx8YXJndW1lbnRzWzJdLGk9YXJndW1lbnRzWzNdO3JldHVybiBlLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gbmV3IFdheXBvaW50KHtlbGVtZW50OmUsaGFuZGxlcjp0LGNvbnRpbnVvdXM6bixvZmZzZXQ6aX0pfSl9fSx7a2V5Olwic2V0S2V5Ym9hcmRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXM7JCh3aW5kb3cpLmtleWRvd24oZnVuY3Rpb24odCl7aWYoZS5kaXNhYmxlZClyZXR1cm4hMDt2YXIgbj0oMCxhLmRlZmF1bHQpKHQua2V5Q29kZSksaT1sLmdldEFjdGl2ZUluc3RhbmNlcygpO2lmKDAhPT1uJiZ0LnRhcmdldD09PWRvY3VtZW50LmJvZHkmJnQubWV0YUtleT09PSExJiYxPT09aS5sZW5ndGgpe3ZhciBvPWUuaW5kZXgrbjtyZXR1cm4hZS5pc1ZhbGlkSW5kZXgobyl8fChlLmdvVG8obywhMCksdC5wcmV2ZW50RGVmYXVsdCgpLCExKX19KX19LHtrZXk6XCJpc1ZhbGlkSW5kZXhcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gZTx0aGlzLmVsZW1lbnRzLmxlbmd0aCYmZT4tMX19LHtrZXk6XCJkaXNhYmxlV2F5cG9pbnRzXCIsdmFsdWU6ZnVuY3Rpb24oKXtbXS5jb25jYXQuYXBwbHkoW10sdGhpcy53YXlwb2ludHMpLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGlzYWJsZSgpfSl9fSx7a2V5OlwiZW5hYmxlV2F5cG9pbnRzXCIsdmFsdWU6ZnVuY3Rpb24oKXtbXS5jb25jYXQuYXBwbHkoW10sdGhpcy53YXlwb2ludHMpLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIGUuZW5hYmxlKCl9KX19LHtrZXk6XCJkaXNhYmxlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkPSEwLHRoaXMuZW5hYmxlZD0hMSx0aGlzLmRpc2FibGVXYXlwb2ludHMoKSx0aGlzLnN0aWNreSYmdGhpcy5zdGlja3kuZml4VG8oXCJzdG9wXCIpfX0se2tleTpcImVuYWJsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZD0hMSx0aGlzLmVuYWJsZWQ9ITAsdGhpcy5lbmFibGVXYXlwb2ludHMoKSx0aGlzLnN0aWNreSYmdGhpcy5zdGlja3kuZml4VG8oXCJzdGFydFwiKX19XSksZX0oKTt0LmRlZmF1bHQ9YyxlLmV4cG9ydHM9dC5kZWZhdWx0fV0pfSk7XG5cbnZhciB0cyA9IG5ldyBUd29TdGVwKHtcbiAgZWxlbWVudHM6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wYXJlbnQgLm5hcnJhdGl2ZS1pdGVtJyksXG4gIG9uQ2hhbmdlOiBmdW5jdGlvbihldmVudCkge1xuICAgICAgY29uc29sZS5sb2coJ0l0ZW0gJytldmVudC5pbmRleCk7XG4gIH0sXG4gIHN0aWNrOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFyZW50IC5zdGlja3ktb3V0ZXInKSxcbiAgbmFycmF0aXZlOiBbXG4gICAgICBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAkKCcuaGlnaGNoYXJ0cy1wbG90LWJhbmRzLTAnKS5hbmltYXRlKHtvcGFjaXR5OiAwfSw1MDApO1xuICAgICAgICAkKCcuaGlnaGNoYXJ0cy1wbG90LWJhbmQtbGFiZWwnKS5hbmltYXRlKHtvcGFjaXR5OiAwfSw1MDApO1xuICAgICAgfSxcbiAgICAgIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICQoJy5jaGFydC10aXRsZScpLnRleHQoJ01lZGlhbiBob21lIHByaWNlIDE5ODEtcHJlc2VudCwgaW4gMjAyMSBkb2xsYXJzJyk7XG4gICAgICAgICQoJy5jaGFydC1zb3VyY2UnKS50ZXh0KCdDZW5zdXMgQnVyZWF1IGFuZCBEZXBhcnRtZW50IG9mIEhvdXNpbmcgYW5kIFVyYmFuIERldmVsb3BtZW50IHZpYSBGUkVEJyk7XG4gICAgICAgIGNoYXJ0LnVwZGF0ZSh7XG4gICAgICAgICAgICBjaGFydDoge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdhcmVhJyxcbiAgICAgICAgICAgICAgICBzcGFjaW5nTGVmdDogMTBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgc3RhcnRDb2x1bW46IDAsXG4gICAgICAgICAgICAgICAgZW5kQ29sdW1uOiAxXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeUF4aXM6IHtcbiAgICAgICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICAgICAgbWF4OiA0MDAwMDAsXG4gICAgICAgICAgICAgICAgbGFiZWxzOiB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24gKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyQnICsgdGhpcy52YWx1ZS8xMDAwICsgJ2snXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgICQoJy5oaWdoY2hhcnRzLXBsb3QtYmFuZHMtMCcpLmFuaW1hdGUoe29wYWNpdHk6IDF9LDUwMCk7XG4gICAgICAgICQoJy5oaWdoY2hhcnRzLXBsb3QtYmFuZC1sYWJlbCcpLmFuaW1hdGUoe29wYWNpdHk6IDF9LDUwMCk7XG4gICAgICB9LFxuICAgICAgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgJCgnLmNoYXJ0LXRpdGxlJykudGV4dCgnMzAteWVhciwgZml4ZWQtcmF0ZSBtb3J0Z2FnZSBhdmVyYWdlLCAxOTgxLXByZXNlbnQnKTtcbiAgICAgICAgJCgnLmNoYXJ0LXNvdXJjZScpLnRleHQoJ0ZyZWRkaWUgTWFjIHZpYSBGUkVEJyk7XG4gICAgICAgICQoJy5oaWdoY2hhcnRzLXBsb3QtYmFuZHMtMCcpLmFuaW1hdGUoe29wYWNpdHk6IDB9LDUwMCk7XG4gICAgICAgICQoJy5oaWdoY2hhcnRzLXBsb3QtYmFuZC1sYWJlbCcpLmFuaW1hdGUoe29wYWNpdHk6IDB9LDUwMCk7XG4gICAgICAgIGNoYXJ0LnVwZGF0ZSh7XG4gICAgICAgICAgICBjaGFydDoge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdsaW5lJyxcbiAgICAgICAgICAgICAgICBzcGFjaW5nTGVmdDogMjBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgc3RhcnRDb2x1bW46IDIsXG4gICAgICAgICAgICAgICAgZW5kQ29sdW1uOiAzXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2VyaWVzOiBbe1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcjogMCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfV0sICBcbiAgICAgICAgICAgIHlBeGlzOiB7XG4gICAgICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgICAgIG1heDogMjAsXG4gICAgICAgICAgICAgICAgdGlja0Ftb3VudDogNSxcbiAgICAgICAgICAgICAgICBsYWJlbHM6IHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbiAoKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlICsgJyUnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICQoJy5jaGFydC10aXRsZScpLnRleHQoJ01vbnRobHkgcGF5bWVudCBvbiBhICQyMDUsMDAwIGhvbWUnKTtcbiAgICAgICAgJCgnLmNoYXJ0LXNvdXJjZScpLnRleHQoJ0ZyZWRkaWUgTWFjIHZpYSBGUkVEIChtb3J0Z2FnZSByYXRlKScpO1xuICAgICAgICBjaGFydC51cGRhdGUoe1xuICAgICAgICAgICAgY2hhcnQ6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnYXJlYScsXG4gICAgICAgICAgICAgICAgc3BhY2luZ0xlZnQ6IDVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgc3RhcnRDb2x1bW46IDQsXG4gICAgICAgICAgICAgICAgZW5kQ29sdW1uOiA1XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2VyaWVzOiBbe1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcjogMCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfV0sICBcbiAgICAgICAgICAgIHlBeGlzOiB7XG4gICAgICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgICAgIG1heDogMzAwMCxcbiAgICAgICAgICAgICAgICB0aWNrQW1vdW50OiA1LFxuICAgICAgICAgICAgICAgIGxhYmVsczoge1xuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uICgpe1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICckJyArIHRoaXMudmFsdWUudG9Mb2NhbGVTdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgJCgnLmNoYXJ0LXRpdGxlJykudGV4dCgnTW9udGhseSBwYXltZW50IG9uIHRoZSBtZWRpYW4gaG9tZScpO1xuICAgICAgICAkKCcuY2hhcnQtc291cmNlJykudGV4dCgnQ2Vuc3VzIEJ1cmVhdSBhbmQgRGVwYXJ0bWVudCBvZiBIb3VzaW5nIGFuZCBVcmJhbiBEZXZlbG9wbWVudCB2aWEgRlJFRCAoaG9tZSBwcmljZSk7IEZyZWRkaWUgTWFjIHZpYSBGUkVEIChtb3J0Z2FnZSByYXRlKScpO1xuICAgICAgICBjaGFydC51cGRhdGUoe1xuICAgICAgICAgICAgY2hhcnQ6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnYXJlYScsXG4gICAgICAgICAgICAgICAgc3BhY2luZ0xlZnQ6IDVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgc3RhcnRDb2x1bW46IDYsXG4gICAgICAgICAgICAgICAgZW5kQ29sdW1uOiA3XG4gICAgICAgICAgICB9LCBcbiAgICAgICAgICAgIHlBeGlzOiB7XG4gICAgICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgICAgIG1heDogMzAwMCxcbiAgICAgICAgICAgICAgICB0aWNrQW1vdW50OiA1LFxuICAgICAgICAgICAgICAgIGxhYmVsczoge1xuICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZXI6IGZ1bmN0aW9uICgpe1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICckJyArIHRoaXMudmFsdWUudG9Mb2NhbGVTdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgJCgnLmNoYXJ0LXRpdGxlJykudGV4dCgnVG90YWwgaW50ZXJlc3QgcGFpZCBvbiBhIG1lZGlhbiBob21lIGF0IHRoZSBhdmVyYWdlIHJhdGUnKTtcbiAgICAgICAgJCgnLmNoYXJ0LXNvdXJjZScpLnRleHQoJ0NlbnN1cyBCdXJlYXUgYW5kIERlcGFydG1lbnQgb2YgSG91c2luZyBhbmQgVXJiYW4gRGV2ZWxvcG1lbnQgdmlhIEZSRUQgKGhvbWUgcHJpY2UpOyBGcmVkZGllIE1hYyB2aWEgRlJFRCAobW9ydGdhZ2UgcmF0ZSknKTtcbiAgICAgICAgY2hhcnQudXBkYXRlKHtcbiAgICAgICAgICAgIGNoYXJ0OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2FyZWEnLFxuICAgICAgICAgICAgICAgIHNwYWNpbmdMZWZ0OiA1XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIHN0YXJ0Q29sdW1uOiA4LFxuICAgICAgICAgICAgICAgIGVuZENvbHVtbjogOVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHlBeGlzOiB7XG4gICAgICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgICAgIG1heDogODAwMDAwLFxuICAgICAgICAgICAgICAgIHRpY2tBbW91bnQ6IDUsXG4gICAgICAgICAgICAgICAgbGFiZWxzOiB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24gKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyQnICsgdGhpcy52YWx1ZS8xMDAwICsgJ2snXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICBdLFxuICBvZmZzZXQ6IHtcbiAgICAgIHVwOiAnLTEwJScsXG4gICAgICBkb3duOiAnMTAwJSdcbiAgfVxufSk7XG5cblxuSGlnaGNoYXJ0cy5zZXRPcHRpb25zKHtcbiAgICBsYW5nOiB7XG4gICAgICB0aG91c2FuZHNTZXA6ICcsJ1xuICAgIH1cbn0pO1xuXG5cbkhpZ2hjaGFydHMuQW5ub3RhdGlvbi5wcm90b3R5cGUuYWRkQ2xpcFBhdGhzID0gZnVuY3Rpb24oKSB7fTtcblxuZnVuY3Rpb24gZHJhd0hpZ2hjaGFydHMoKSB7XG4gICAgY2hhcnQgPSBIaWdoY2hhcnRzLmNoYXJ0KCdjaGFydC1jb250YWluZXInLCB7XG4gICAgICAgIGNoYXJ0OiB7XG4gICAgICAgICAgICB0eXBlOiAnYXJlYScsXG4gICAgICAgICAgICBzdHlsZWRNb2RlOiB0cnVlLFxuICAgICAgICAgICAgc3BhY2luZ0JvdHRvbTogMjUsXG4gICAgICAgICAgICBzcGFjaW5nUmlnaHQ6IDI1LFxuICAgICAgICAgICAgc3BhY2luZ0xlZnQ6IDEwLFxuICAgICAgICAgICAgc3BhY2luZ1RvcDogMjAsXG4gICAgICAgICAgICBhbmltYXRpb246IHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwMCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpZ25vcmVIaWRkZW5TZXJpZXM6IGZhbHNlXG4gICAgICAgIH0sIFxuICAgICAgICB0aXRsZToge1xuICAgICAgICAgICAgdGV4dDogbnVsbFxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBjc3ZVUkw6ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20va3NjaG1pZHQyL2dyb3ctaGlzdG9yaWNhbC1tb3J0Z2FnZXMvbWFzdGVyL2RhdGEvbWVkaWFuLWhvbWUtcHJpY2UuY3N2JyxcbiAgICAgICAgICAgIGVuZENvbHVtbjogMSxcbiAgICAgICAgICAgIHN0YXJ0Q29sdW1uOiAwXG4gICAgICAgIH0sXG4gICAgICAgIGFubm90YXRpb25zOiBbe1xuICAgICAgICB9XSxcbiAgICAgICAgLy8gZm9yIGJhciBjaGFydHMgb25seVxuICAgICAgICAvLyBwbG90T3B0aW9uczoge1xuICAgICAgICAvLyAgICAgc2VyaWVzOiB7XG4gICAgICAgIC8vICAgICAgICAgZ3JvdXBQYWRkaW5nOiAwLjFcbiAgICAgICAgLy8gICAgIH0gXG4gICAgICAgIC8vIH0sXG4gICAgICAgIC8vIGZvciBsaW5lIGNoYXJ0cyBvbmx5XG4gICAgICAgIHBsb3RPcHRpb25zOiB7XG4gICAgICAgICAgICBzZXJpZXM6IHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDEwMDAsXG4gICAgICAgICAgICAgICAgICAgIC8vIGRlZmVyOiAxMDAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBsaW5lV2lkdGg6IDEsXG4gICAgICAgICAgICAgICAgc3RhdGVzOiB7XG4gICAgICAgICAgICAgICAgICAgIGhvdmVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjbGlwOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtYXJrZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHN5bWJvbDogJ2NpcmNsZScsXG4gICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyNmZmZmZmYnLFxuICAgICAgICAgICAgICAgICAgICBzdGF0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvdmVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnI2ZmZmZmZidcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgbGVnZW5kOiB7XG4gICAgICAgICAgICAvLyBhbGlnbjogJ3JpZ2h0JyxcbiAgICAgICAgICAgIC8vIHN5bWJvbFJhZGl1czogMCxcbiAgICAgICAgICAgIC8vIHZlcnRpY2FsQWxpZ246ICd0b3AnLFxuICAgICAgICAgICAgLy8geDogMTAsXG4gICAgICAgICAgICAvLyBpdGVtTWFyZ2luVG9wOiAtMTBcbiAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIHhBeGlzOiB7XG4gICAgICAgICAgICBsYWJlbHM6IHtcbiAgICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgICB3aGl0ZVNwYWNlOiAnbm93cmFwJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aWNrTGVuZ3RoOiA1LFxuICAgICAgICAgICAgLy8gcGxvdEJhbmRzOiBbeyAvLyBtYXJrIHRoZSB3ZWVrZW5kXG4gICAgICAgICAgICAvLyAgICAgZnJvbTogRGF0ZS5VVEMoMjAyMCwgMSwgMSksXG4gICAgICAgICAgICAvLyAgICAgdG86IERhdGUuVVRDKDIwMjAsIDksIDMwKSxcbiAgICAgICAgICAgIC8vICAgICBsYWJlbDoge1xuICAgICAgICAgICAgLy8gICAgICAgICB0ZXh0OiAnUGFuZGVtaWMnLFxuICAgICAgICAgICAgLy8gICAgICAgICB0ZXh0QWxpZ246ICdjZW50ZXInXG4gICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgLy8gfV0sXG4gICAgICAgICAgICBtaW46IERhdGUuVVRDKDE5ODAsIDAsIDEpLFxuICAgICAgICAgICAgbWF4OiBEYXRlLlVUQygyMDIyLCAxMCwgMSlcbiAgICAgICAgICAgIC8vIGVkaXRzIHhBeGlzIHRpY2tzXG4gICAgICAgICAgICAvLyBkYXRlVGltZUxhYmVsRm9ybWF0czoge1xuICAgICAgICAgICAgLy8gICAgIHdlZWs6ICclYi4gJWUnLFxuICAgICAgICAgICAgLy8gfSxcbiAgICAgICAgICAgIC8vIHRpY2tJbnRlcnZhbDogMjQgKiAzNjAwICogMTAwMCAqIDdcbiAgICAgICAgfSxcbiAgICAgICAgeUF4aXM6IHtcbiAgICAgICAgICAgIHRpdGxlOiBmYWxzZSxcbiAgICAgICAgICAgIGxhYmVsczoge1xuICAgICAgICAgICAgICAgIHVzZUhUTUw6IHRydWUsXG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICdhbGxvdydcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICBtYXg6IDQwMDAwMCxcbiAgICAgICAgICAgIHRpY2tBbW91bnQ6NSxcbiAgICAgICAgICAgIC8vIHdpZHRoOiAwLFxuICAgICAgICAgICAgdGlja0xlbmd0aDogMjUsXG4gICAgICAgICAgICB0aWNrUG9zaXRpb246ICdpbnNpZGUnLFxuICAgICAgICAgICAgbGFiZWxzOiB7XG4gICAgICAgICAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbiAoKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICckJyArIHRoaXMudmFsdWUvMTAwMCArICdrJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwbG90QmFuZHM6IFt7XG4gICAgICAgICAgICAgICAgY29sb3I6ICcjRjVGNUY1JyxcbiAgICAgICAgICAgICAgICBmcm9tOiAyMDgwMDAsXG4gICAgICAgICAgICAgICAgdG86IDQwNTAwMCxcbiAgICAgICAgICAgICAgICBpZDogJ3Bsb3RiYW5kLTEnLFxuICAgICAgICAgICAgICAgIGxhYmVsOiB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICcrOTUlJyxcbiAgICAgICAgICAgICAgICAgICAgdXNlSFRNTDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdmVydGljYWxBbGlnbjogJ3RvcCcsXG4gICAgICAgICAgICAgICAgICAgIHk6IDUwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIC8vIGFkZHMgY29tbWFzIHRvIHRob3VzYW5kc1xuICAgICAgICAgICAgLy8gZm9ybWF0dGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyAgICAgcmV0dXJuIEhpZ2hjaGFydHMubnVtYmVyRm9ybWF0KHRoaXMudmFsdWUsMCwnLicsJywnKTtcbiAgICAgICAgICAgIC8vIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGNyZWRpdHM6IHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIHRvb2x0aXA6IHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGRlZnM6IHtcbiAgICAgICAgICAgIGdyYWRpZW50MDoge1xuICAgICAgICAgICAgICAgIHRhZ05hbWU6ICdsaW5lYXJHcmFkaWVudCcsXG4gICAgICAgICAgICAgICAgaWQ6ICdncmFkaWVudC0wJyxcbiAgICAgICAgICAgICAgICB4MTogMCxcbiAgICAgICAgICAgICAgICB5MTogMCxcbiAgICAgICAgICAgICAgICB4MjogMCxcbiAgICAgICAgICAgICAgICB5MjogMSxcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW3tcbiAgICAgICAgICAgICAgICAgICAgdGFnTmFtZTogJ3N0b3AnLFxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IDBcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIHRhZ05hbWU6ICdzdG9wJyxcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiAxXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVzcG9uc2l2ZToge1xuICAgICAgICAgICAgcnVsZXM6IFt7XG4gICAgICAgICAgICBjb25kaXRpb246IHtcbiAgICAgICAgICAgICAgICBtYXhXaWR0aDogNTAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2hhcnRPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgbGVnZW5kOiB7XG4gICAgICAgICAgICAgICAgICAgIGFsaWduOiAnbGVmdCcsXG4gICAgICAgICAgICAgICAgICAgIHg6IC0xOFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdG9vbHRpcDoge1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiBmYWxzZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1dXG4gICAgICAgIH1cbiAgICB9KVxufVxuXG5pZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJyB8fCBkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnaW50ZXJhY3RpdmUnKSB7XG4gICAgZHJhd0hpZ2hjaGFydHMoKTtcbn0gZWxzZSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZHJhd0hpZ2hjaGFydHMpO1xufSIsIi8qKiB2aW06IGV0OnRzPTQ6c3c9NDpzdHM9NFxuICogQGxpY2Vuc2UgUmVxdWlyZUpTIDIuMy42IENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzLlxuICogUmVsZWFzZWQgdW5kZXIgTUlUIGxpY2Vuc2UsIGh0dHBzOi8vZ2l0aHViLmNvbS9yZXF1aXJlanMvcmVxdWlyZWpzL2Jsb2IvbWFzdGVyL0xJQ0VOU0VcbiAqL1xuLy9Ob3QgdXNpbmcgc3RyaWN0OiB1bmV2ZW4gc3RyaWN0IHN1cHBvcnQgaW4gYnJvd3NlcnMsICMzOTIsIGFuZCBjYXVzZXNcbi8vcHJvYmxlbXMgd2l0aCByZXF1aXJlanMuZXhlYygpL3RyYW5zcGlsZXIgcGx1Z2lucyB0aGF0IG1heSBub3QgYmUgc3RyaWN0LlxuLypqc2xpbnQgcmVnZXhwOiB0cnVlLCBub21lbjogdHJ1ZSwgc2xvcHB5OiB0cnVlICovXG4vKmdsb2JhbCB3aW5kb3csIG5hdmlnYXRvciwgZG9jdW1lbnQsIGltcG9ydFNjcmlwdHMsIHNldFRpbWVvdXQsIG9wZXJhICovXG5cbnZhciByZXF1aXJlanMsIHJlcXVpcmUsIGRlZmluZTtcbihmdW5jdGlvbiAoZ2xvYmFsLCBzZXRUaW1lb3V0KSB7XG4gICAgdmFyIHJlcSwgcywgaGVhZCwgYmFzZUVsZW1lbnQsIGRhdGFNYWluLCBzcmMsXG4gICAgICAgIGludGVyYWN0aXZlU2NyaXB0LCBjdXJyZW50bHlBZGRpbmdTY3JpcHQsIG1haW5TY3JpcHQsIHN1YlBhdGgsXG4gICAgICAgIHZlcnNpb24gPSAnMi4zLjYnLFxuICAgICAgICBjb21tZW50UmVnRXhwID0gL1xcL1xcKltcXHNcXFNdKj9cXCpcXC98KFteOlwiJz1dfF4pXFwvXFwvLiokL21nLFxuICAgICAgICBjanNSZXF1aXJlUmVnRXhwID0gL1teLl1cXHMqcmVxdWlyZVxccypcXChcXHMqW1wiJ10oW14nXCJcXHNdKylbXCInXVxccypcXCkvZyxcbiAgICAgICAganNTdWZmaXhSZWdFeHAgPSAvXFwuanMkLyxcbiAgICAgICAgY3VyckRpclJlZ0V4cCA9IC9eXFwuXFwvLyxcbiAgICAgICAgb3AgPSBPYmplY3QucHJvdG90eXBlLFxuICAgICAgICBvc3RyaW5nID0gb3AudG9TdHJpbmcsXG4gICAgICAgIGhhc093biA9IG9wLmhhc093blByb3BlcnR5LFxuICAgICAgICBpc0Jyb3dzZXIgPSAhISh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuZG9jdW1lbnQpLFxuICAgICAgICBpc1dlYldvcmtlciA9ICFpc0Jyb3dzZXIgJiYgdHlwZW9mIGltcG9ydFNjcmlwdHMgIT09ICd1bmRlZmluZWQnLFxuICAgICAgICAvL1BTMyBpbmRpY2F0ZXMgbG9hZGVkIGFuZCBjb21wbGV0ZSwgYnV0IG5lZWQgdG8gd2FpdCBmb3IgY29tcGxldGVcbiAgICAgICAgLy9zcGVjaWZpY2FsbHkuIFNlcXVlbmNlIGlzICdsb2FkaW5nJywgJ2xvYWRlZCcsIGV4ZWN1dGlvbixcbiAgICAgICAgLy8gdGhlbiAnY29tcGxldGUnLiBUaGUgVUEgY2hlY2sgaXMgdW5mb3J0dW5hdGUsIGJ1dCBub3Qgc3VyZSBob3dcbiAgICAgICAgLy90byBmZWF0dXJlIHRlc3Qgdy9vIGNhdXNpbmcgcGVyZiBpc3N1ZXMuXG4gICAgICAgIHJlYWR5UmVnRXhwID0gaXNCcm93c2VyICYmIG5hdmlnYXRvci5wbGF0Zm9ybSA9PT0gJ1BMQVlTVEFUSU9OIDMnID9cbiAgICAgICAgICAgICAgICAgICAgICAvXmNvbXBsZXRlJC8gOiAvXihjb21wbGV0ZXxsb2FkZWQpJC8sXG4gICAgICAgIGRlZkNvbnRleHROYW1lID0gJ18nLFxuICAgICAgICAvL09oIHRoZSB0cmFnZWR5LCBkZXRlY3Rpbmcgb3BlcmEuIFNlZSB0aGUgdXNhZ2Ugb2YgaXNPcGVyYSBmb3IgcmVhc29uLlxuICAgICAgICBpc09wZXJhID0gdHlwZW9mIG9wZXJhICE9PSAndW5kZWZpbmVkJyAmJiBvcGVyYS50b1N0cmluZygpID09PSAnW29iamVjdCBPcGVyYV0nLFxuICAgICAgICBjb250ZXh0cyA9IHt9LFxuICAgICAgICBjZmcgPSB7fSxcbiAgICAgICAgZ2xvYmFsRGVmUXVldWUgPSBbXSxcbiAgICAgICAgdXNlSW50ZXJhY3RpdmUgPSBmYWxzZTtcblxuICAgIC8vQ291bGQgbWF0Y2ggc29tZXRoaW5nIGxpa2UgJykvL2NvbW1lbnQnLCBkbyBub3QgbG9zZSB0aGUgcHJlZml4IHRvIGNvbW1lbnQuXG4gICAgZnVuY3Rpb24gY29tbWVudFJlcGxhY2UobWF0Y2gsIHNpbmdsZVByZWZpeCkge1xuICAgICAgICByZXR1cm4gc2luZ2xlUHJlZml4IHx8ICcnO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzRnVuY3Rpb24oaXQpIHtcbiAgICAgICAgcmV0dXJuIG9zdHJpbmcuY2FsbChpdCkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNBcnJheShpdCkge1xuICAgICAgICByZXR1cm4gb3N0cmluZy5jYWxsKGl0KSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gZm9yIGl0ZXJhdGluZyBvdmVyIGFuIGFycmF5LiBJZiB0aGUgZnVuYyByZXR1cm5zXG4gICAgICogYSB0cnVlIHZhbHVlLCBpdCB3aWxsIGJyZWFrIG91dCBvZiB0aGUgbG9vcC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBlYWNoKGFyeSwgZnVuYykge1xuICAgICAgICBpZiAoYXJ5KSB7XG4gICAgICAgICAgICB2YXIgaTtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBhcnkubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJ5W2ldICYmIGZ1bmMoYXJ5W2ldLCBpLCBhcnkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhlbHBlciBmdW5jdGlvbiBmb3IgaXRlcmF0aW5nIG92ZXIgYW4gYXJyYXkgYmFja3dhcmRzLiBJZiB0aGUgZnVuY1xuICAgICAqIHJldHVybnMgYSB0cnVlIHZhbHVlLCBpdCB3aWxsIGJyZWFrIG91dCBvZiB0aGUgbG9vcC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBlYWNoUmV2ZXJzZShhcnksIGZ1bmMpIHtcbiAgICAgICAgaWYgKGFyeSkge1xuICAgICAgICAgICAgdmFyIGk7XG4gICAgICAgICAgICBmb3IgKGkgPSBhcnkubGVuZ3RoIC0gMTsgaSA+IC0xOyBpIC09IDEpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJ5W2ldICYmIGZ1bmMoYXJ5W2ldLCBpLCBhcnkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhc1Byb3Aob2JqLCBwcm9wKSB7XG4gICAgICAgIHJldHVybiBoYXNPd24uY2FsbChvYmosIHByb3ApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldE93bihvYmosIHByb3ApIHtcbiAgICAgICAgcmV0dXJuIGhhc1Byb3Aob2JqLCBwcm9wKSAmJiBvYmpbcHJvcF07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3ljbGVzIG92ZXIgcHJvcGVydGllcyBpbiBhbiBvYmplY3QgYW5kIGNhbGxzIGEgZnVuY3Rpb24gZm9yIGVhY2hcbiAgICAgKiBwcm9wZXJ0eSB2YWx1ZS4gSWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgYSB0cnV0aHkgdmFsdWUsIHRoZW4gdGhlXG4gICAgICogaXRlcmF0aW9uIGlzIHN0b3BwZWQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZWFjaFByb3Aob2JqLCBmdW5jKSB7XG4gICAgICAgIHZhciBwcm9wO1xuICAgICAgICBmb3IgKHByb3AgaW4gb2JqKSB7XG4gICAgICAgICAgICBpZiAoaGFzUHJvcChvYmosIHByb3ApKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZ1bmMob2JqW3Byb3BdLCBwcm9wKSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaW1wbGUgZnVuY3Rpb24gdG8gbWl4IGluIHByb3BlcnRpZXMgZnJvbSBzb3VyY2UgaW50byB0YXJnZXQsXG4gICAgICogYnV0IG9ubHkgaWYgdGFyZ2V0IGRvZXMgbm90IGFscmVhZHkgaGF2ZSBhIHByb3BlcnR5IG9mIHRoZSBzYW1lIG5hbWUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gbWl4aW4odGFyZ2V0LCBzb3VyY2UsIGZvcmNlLCBkZWVwU3RyaW5nTWl4aW4pIHtcbiAgICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICAgICAgZWFjaFByb3Aoc291cmNlLCBmdW5jdGlvbiAodmFsdWUsIHByb3ApIHtcbiAgICAgICAgICAgICAgICBpZiAoZm9yY2UgfHwgIWhhc1Byb3AodGFyZ2V0LCBwcm9wKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVlcFN0cmluZ01peGluICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICFpc0FycmF5KHZhbHVlKSAmJiAhaXNGdW5jdGlvbih2YWx1ZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICEodmFsdWUgaW5zdGFuY2VvZiBSZWdFeHApKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0W3Byb3BdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W3Byb3BdID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBtaXhpbih0YXJnZXRbcHJvcF0sIHZhbHVlLCBmb3JjZSwgZGVlcFN0cmluZ01peGluKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFtwcm9wXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9XG5cbiAgICAvL1NpbWlsYXIgdG8gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQsIGJ1dCB0aGUgJ3RoaXMnIG9iamVjdCBpcyBzcGVjaWZpZWRcbiAgICAvL2ZpcnN0LCBzaW5jZSBpdCBpcyBlYXNpZXIgdG8gcmVhZC9maWd1cmUgb3V0IHdoYXQgJ3RoaXMnIHdpbGwgYmUuXG4gICAgZnVuY3Rpb24gYmluZChvYmosIGZuKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZm4uYXBwbHkob2JqLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjcmlwdHMoKSB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0Jyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVmYXVsdE9uRXJyb3IoZXJyKSB7XG4gICAgICAgIHRocm93IGVycjtcbiAgICB9XG5cbiAgICAvL0FsbG93IGdldHRpbmcgYSBnbG9iYWwgdGhhdCBpcyBleHByZXNzZWQgaW5cbiAgICAvL2RvdCBub3RhdGlvbiwgbGlrZSAnYS5iLmMnLlxuICAgIGZ1bmN0aW9uIGdldEdsb2JhbCh2YWx1ZSkge1xuICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGcgPSBnbG9iYWw7XG4gICAgICAgIGVhY2godmFsdWUuc3BsaXQoJy4nKSwgZnVuY3Rpb24gKHBhcnQpIHtcbiAgICAgICAgICAgIGcgPSBnW3BhcnRdO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhbiBlcnJvciB3aXRoIGEgcG9pbnRlciB0byBhbiBVUkwgd2l0aCBtb3JlIGluZm9ybWF0aW9uLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBpZCB0aGUgZXJyb3IgSUQgdGhhdCBtYXBzIHRvIGFuIElEIG9uIGEgd2ViIHBhZ2UuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgaHVtYW4gcmVhZGFibGUgZXJyb3IuXG4gICAgICogQHBhcmFtIHtFcnJvcn0gW2Vycl0gdGhlIG9yaWdpbmFsIGVycm9yLCBpZiB0aGVyZSBpcyBvbmUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7RXJyb3J9XG4gICAgICovXG4gICAgZnVuY3Rpb24gbWFrZUVycm9yKGlkLCBtc2csIGVyciwgcmVxdWlyZU1vZHVsZXMpIHtcbiAgICAgICAgdmFyIGUgPSBuZXcgRXJyb3IobXNnICsgJ1xcbmh0dHBzOi8vcmVxdWlyZWpzLm9yZy9kb2NzL2Vycm9ycy5odG1sIycgKyBpZCk7XG4gICAgICAgIGUucmVxdWlyZVR5cGUgPSBpZDtcbiAgICAgICAgZS5yZXF1aXJlTW9kdWxlcyA9IHJlcXVpcmVNb2R1bGVzO1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBlLm9yaWdpbmFsRXJyb3IgPSBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8vSWYgYSBkZWZpbmUgaXMgYWxyZWFkeSBpbiBwbGF5IHZpYSBhbm90aGVyIEFNRCBsb2FkZXIsXG4gICAgICAgIC8vZG8gbm90IG92ZXJ3cml0ZS5cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgcmVxdWlyZWpzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihyZXF1aXJlanMpKSB7XG4gICAgICAgICAgICAvL0RvIG5vdCBvdmVyd3JpdGUgYW4gZXhpc3RpbmcgcmVxdWlyZWpzIGluc3RhbmNlLlxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNmZyA9IHJlcXVpcmVqcztcbiAgICAgICAgcmVxdWlyZWpzID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vQWxsb3cgZm9yIGEgcmVxdWlyZSBjb25maWcgb2JqZWN0XG4gICAgaWYgKHR5cGVvZiByZXF1aXJlICE9PSAndW5kZWZpbmVkJyAmJiAhaXNGdW5jdGlvbihyZXF1aXJlKSkge1xuICAgICAgICAvL2Fzc3VtZSBpdCBpcyBhIGNvbmZpZyBvYmplY3QuXG4gICAgICAgIGNmZyA9IHJlcXVpcmU7XG4gICAgICAgIHJlcXVpcmUgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbmV3Q29udGV4dChjb250ZXh0TmFtZSkge1xuICAgICAgICB2YXIgaW5DaGVja0xvYWRlZCwgTW9kdWxlLCBjb250ZXh0LCBoYW5kbGVycyxcbiAgICAgICAgICAgIGNoZWNrTG9hZGVkVGltZW91dElkLFxuICAgICAgICAgICAgY29uZmlnID0ge1xuICAgICAgICAgICAgICAgIC8vRGVmYXVsdHMuIERvIG5vdCBzZXQgYSBkZWZhdWx0IGZvciBtYXBcbiAgICAgICAgICAgICAgICAvL2NvbmZpZyB0byBzcGVlZCB1cCBub3JtYWxpemUoKSwgd2hpY2hcbiAgICAgICAgICAgICAgICAvL3dpbGwgcnVuIGZhc3RlciBpZiB0aGVyZSBpcyBubyBkZWZhdWx0LlxuICAgICAgICAgICAgICAgIHdhaXRTZWNvbmRzOiA3LFxuICAgICAgICAgICAgICAgIGJhc2VVcmw6ICcuLycsXG4gICAgICAgICAgICAgICAgcGF0aHM6IHt9LFxuICAgICAgICAgICAgICAgIGJ1bmRsZXM6IHt9LFxuICAgICAgICAgICAgICAgIHBrZ3M6IHt9LFxuICAgICAgICAgICAgICAgIHNoaW06IHt9LFxuICAgICAgICAgICAgICAgIGNvbmZpZzoge31cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZWdpc3RyeSA9IHt9LFxuICAgICAgICAgICAgLy9yZWdpc3RyeSBvZiBqdXN0IGVuYWJsZWQgbW9kdWxlcywgdG8gc3BlZWRcbiAgICAgICAgICAgIC8vY3ljbGUgYnJlYWtpbmcgY29kZSB3aGVuIGxvdHMgb2YgbW9kdWxlc1xuICAgICAgICAgICAgLy9hcmUgcmVnaXN0ZXJlZCwgYnV0IG5vdCBhY3RpdmF0ZWQuXG4gICAgICAgICAgICBlbmFibGVkUmVnaXN0cnkgPSB7fSxcbiAgICAgICAgICAgIHVuZGVmRXZlbnRzID0ge30sXG4gICAgICAgICAgICBkZWZRdWV1ZSA9IFtdLFxuICAgICAgICAgICAgZGVmaW5lZCA9IHt9LFxuICAgICAgICAgICAgdXJsRmV0Y2hlZCA9IHt9LFxuICAgICAgICAgICAgYnVuZGxlc01hcCA9IHt9LFxuICAgICAgICAgICAgcmVxdWlyZUNvdW50ZXIgPSAxLFxuICAgICAgICAgICAgdW5ub3JtYWxpemVkQ291bnRlciA9IDE7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRyaW1zIHRoZSAuIGFuZCAuLiBmcm9tIGFuIGFycmF5IG9mIHBhdGggc2VnbWVudHMuXG4gICAgICAgICAqIEl0IHdpbGwga2VlcCBhIGxlYWRpbmcgcGF0aCBzZWdtZW50IGlmIGEgLi4gd2lsbCBiZWNvbWVcbiAgICAgICAgICogdGhlIGZpcnN0IHBhdGggc2VnbWVudCwgdG8gaGVscCB3aXRoIG1vZHVsZSBuYW1lIGxvb2t1cHMsXG4gICAgICAgICAqIHdoaWNoIGFjdCBsaWtlIHBhdGhzLCBidXQgY2FuIGJlIHJlbWFwcGVkLiBCdXQgdGhlIGVuZCByZXN1bHQsXG4gICAgICAgICAqIGFsbCBwYXRocyB0aGF0IHVzZSB0aGlzIGZ1bmN0aW9uIHNob3VsZCBsb29rIG5vcm1hbGl6ZWQuXG4gICAgICAgICAqIE5PVEU6IHRoaXMgbWV0aG9kIE1PRElGSUVTIHRoZSBpbnB1dCBhcnJheS5cbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gYXJ5IHRoZSBhcnJheSBvZiBwYXRoIHNlZ21lbnRzLlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdHJpbURvdHMoYXJ5KSB7XG4gICAgICAgICAgICB2YXIgaSwgcGFydDtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBhcnkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBwYXJ0ID0gYXJ5W2ldO1xuICAgICAgICAgICAgICAgIGlmIChwYXJ0ID09PSAnLicpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJ5LnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgaSAtPSAxO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFydCA9PT0gJy4uJykge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiBhdCB0aGUgc3RhcnQsIG9yIHByZXZpb3VzIHZhbHVlIGlzIHN0aWxsIC4uLFxuICAgICAgICAgICAgICAgICAgICAvLyBrZWVwIHRoZW0gc28gdGhhdCB3aGVuIGNvbnZlcnRlZCB0byBhIHBhdGggaXQgbWF5XG4gICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIHdvcmsgd2hlbiBjb252ZXJ0ZWQgdG8gYSBwYXRoLCBldmVuIHRob3VnaFxuICAgICAgICAgICAgICAgICAgICAvLyBhcyBhbiBJRCBpdCBpcyBsZXNzIHRoYW4gaWRlYWwuIEluIGxhcmdlciBwb2ludFxuICAgICAgICAgICAgICAgICAgICAvLyByZWxlYXNlcywgbWF5IGJlIGJldHRlciB0byBqdXN0IGtpY2sgb3V0IGFuIGVycm9yLlxuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCAoaSA9PT0gMSAmJiBhcnlbMl0gPT09ICcuLicpIHx8IGFyeVtpIC0gMV0gPT09ICcuLicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnkuc3BsaWNlKGkgLSAxLCAyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgLT0gMjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHaXZlbiBhIHJlbGF0aXZlIG1vZHVsZSBuYW1lLCBsaWtlIC4vc29tZXRoaW5nLCBub3JtYWxpemUgaXQgdG9cbiAgICAgICAgICogYSByZWFsIG5hbWUgdGhhdCBjYW4gYmUgbWFwcGVkIHRvIGEgcGF0aC5cbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgdGhlIHJlbGF0aXZlIG5hbWVcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGJhc2VOYW1lIGEgcmVhbCBuYW1lIHRoYXQgdGhlIG5hbWUgYXJnIGlzIHJlbGF0aXZlXG4gICAgICAgICAqIHRvLlxuICAgICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGFwcGx5TWFwIGFwcGx5IHRoZSBtYXAgY29uZmlnIHRvIHRoZSB2YWx1ZS4gU2hvdWxkXG4gICAgICAgICAqIG9ubHkgYmUgZG9uZSBpZiB0aGlzIG5vcm1hbGl6YXRpb24gaXMgZm9yIGEgZGVwZW5kZW5jeSBJRC5cbiAgICAgICAgICogQHJldHVybnMge1N0cmluZ30gbm9ybWFsaXplZCBuYW1lXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBub3JtYWxpemUobmFtZSwgYmFzZU5hbWUsIGFwcGx5TWFwKSB7XG4gICAgICAgICAgICB2YXIgcGtnTWFpbiwgbWFwVmFsdWUsIG5hbWVQYXJ0cywgaSwgaiwgbmFtZVNlZ21lbnQsIGxhc3RJbmRleCxcbiAgICAgICAgICAgICAgICBmb3VuZE1hcCwgZm91bmRJLCBmb3VuZFN0YXJNYXAsIHN0YXJJLCBub3JtYWxpemVkQmFzZVBhcnRzLFxuICAgICAgICAgICAgICAgIGJhc2VQYXJ0cyA9IChiYXNlTmFtZSAmJiBiYXNlTmFtZS5zcGxpdCgnLycpKSxcbiAgICAgICAgICAgICAgICBtYXAgPSBjb25maWcubWFwLFxuICAgICAgICAgICAgICAgIHN0YXJNYXAgPSBtYXAgJiYgbWFwWycqJ107XG5cbiAgICAgICAgICAgIC8vQWRqdXN0IGFueSByZWxhdGl2ZSBwYXRocy5cbiAgICAgICAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgbmFtZSA9IG5hbWUuc3BsaXQoJy8nKTtcbiAgICAgICAgICAgICAgICBsYXN0SW5kZXggPSBuYW1lLmxlbmd0aCAtIDE7XG5cbiAgICAgICAgICAgICAgICAvLyBJZiB3YW50aW5nIG5vZGUgSUQgY29tcGF0aWJpbGl0eSwgc3RyaXAgLmpzIGZyb20gZW5kXG4gICAgICAgICAgICAgICAgLy8gb2YgSURzLiBIYXZlIHRvIGRvIHRoaXMgaGVyZSwgYW5kIG5vdCBpbiBuYW1lVG9VcmxcbiAgICAgICAgICAgICAgICAvLyBiZWNhdXNlIG5vZGUgYWxsb3dzIGVpdGhlciAuanMgb3Igbm9uIC5qcyB0byBtYXBcbiAgICAgICAgICAgICAgICAvLyB0byBzYW1lIGZpbGUuXG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5ub2RlSWRDb21wYXQgJiYganNTdWZmaXhSZWdFeHAudGVzdChuYW1lW2xhc3RJbmRleF0pKSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVbbGFzdEluZGV4XSA9IG5hbWVbbGFzdEluZGV4XS5yZXBsYWNlKGpzU3VmZml4UmVnRXhwLCAnJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gU3RhcnRzIHdpdGggYSAnLicgc28gbmVlZCB0aGUgYmFzZU5hbWVcbiAgICAgICAgICAgICAgICBpZiAobmFtZVswXS5jaGFyQXQoMCkgPT09ICcuJyAmJiBiYXNlUGFydHMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9Db252ZXJ0IGJhc2VOYW1lIHRvIGFycmF5LCBhbmQgbG9wIG9mZiB0aGUgbGFzdCBwYXJ0LFxuICAgICAgICAgICAgICAgICAgICAvL3NvIHRoYXQgLiBtYXRjaGVzIHRoYXQgJ2RpcmVjdG9yeScgYW5kIG5vdCBuYW1lIG9mIHRoZSBiYXNlTmFtZSdzXG4gICAgICAgICAgICAgICAgICAgIC8vbW9kdWxlLiBGb3IgaW5zdGFuY2UsIGJhc2VOYW1lIG9mICdvbmUvdHdvL3RocmVlJywgbWFwcyB0b1xuICAgICAgICAgICAgICAgICAgICAvLydvbmUvdHdvL3RocmVlLmpzJywgYnV0IHdlIHdhbnQgdGhlIGRpcmVjdG9yeSwgJ29uZS90d28nIGZvclxuICAgICAgICAgICAgICAgICAgICAvL3RoaXMgbm9ybWFsaXphdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZEJhc2VQYXJ0cyA9IGJhc2VQYXJ0cy5zbGljZSgwLCBiYXNlUGFydHMubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIG5hbWUgPSBub3JtYWxpemVkQmFzZVBhcnRzLmNvbmNhdChuYW1lKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0cmltRG90cyhuYW1lKTtcbiAgICAgICAgICAgICAgICBuYW1lID0gbmFtZS5qb2luKCcvJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vQXBwbHkgbWFwIGNvbmZpZyBpZiBhdmFpbGFibGUuXG4gICAgICAgICAgICBpZiAoYXBwbHlNYXAgJiYgbWFwICYmIChiYXNlUGFydHMgfHwgc3Rhck1hcCkpIHtcbiAgICAgICAgICAgICAgICBuYW1lUGFydHMgPSBuYW1lLnNwbGl0KCcvJyk7XG5cbiAgICAgICAgICAgICAgICBvdXRlckxvb3A6IGZvciAoaSA9IG5hbWVQYXJ0cy5sZW5ndGg7IGkgPiAwOyBpIC09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZVNlZ21lbnQgPSBuYW1lUGFydHMuc2xpY2UoMCwgaSkuam9pbignLycpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChiYXNlUGFydHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vRmluZCB0aGUgbG9uZ2VzdCBiYXNlTmFtZSBzZWdtZW50IG1hdGNoIGluIHRoZSBjb25maWcuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1NvLCBkbyBqb2lucyBvbiB0aGUgYmlnZ2VzdCB0byBzbWFsbGVzdCBsZW5ndGhzIG9mIGJhc2VQYXJ0cy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaiA9IGJhc2VQYXJ0cy5sZW5ndGg7IGogPiAwOyBqIC09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBWYWx1ZSA9IGdldE93bihtYXAsIGJhc2VQYXJ0cy5zbGljZSgwLCBqKS5qb2luKCcvJykpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9iYXNlTmFtZSBzZWdtZW50IGhhcyBjb25maWcsIGZpbmQgaWYgaXQgaGFzIG9uZSBmb3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RoaXMgbmFtZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFwVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwVmFsdWUgPSBnZXRPd24obWFwVmFsdWUsIG5hbWVTZWdtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hcFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL01hdGNoLCB1cGRhdGUgbmFtZSB0byB0aGUgbmV3IHZhbHVlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRNYXAgPSBtYXBWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kSSA9IGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhayBvdXRlckxvb3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvL0NoZWNrIGZvciBhIHN0YXIgbWFwIG1hdGNoLCBidXQganVzdCBob2xkIG9uIHRvIGl0LFxuICAgICAgICAgICAgICAgICAgICAvL2lmIHRoZXJlIGlzIGEgc2hvcnRlciBzZWdtZW50IG1hdGNoIGxhdGVyIGluIGEgbWF0Y2hpbmdcbiAgICAgICAgICAgICAgICAgICAgLy9jb25maWcsIHRoZW4gZmF2b3Igb3ZlciB0aGlzIHN0YXIgbWFwLlxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZvdW5kU3Rhck1hcCAmJiBzdGFyTWFwICYmIGdldE93bihzdGFyTWFwLCBuYW1lU2VnbWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kU3Rhck1hcCA9IGdldE93bihzdGFyTWFwLCBuYW1lU2VnbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFySSA9IGk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kTWFwICYmIGZvdW5kU3Rhck1hcCkge1xuICAgICAgICAgICAgICAgICAgICBmb3VuZE1hcCA9IGZvdW5kU3Rhck1hcDtcbiAgICAgICAgICAgICAgICAgICAgZm91bmRJID0gc3Rhckk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kTWFwKSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVQYXJ0cy5zcGxpY2UoMCwgZm91bmRJLCBmb3VuZE1hcCk7XG4gICAgICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lUGFydHMuam9pbignLycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSWYgdGhlIG5hbWUgcG9pbnRzIHRvIGEgcGFja2FnZSdzIG5hbWUsIHVzZVxuICAgICAgICAgICAgLy8gdGhlIHBhY2thZ2UgbWFpbiBpbnN0ZWFkLlxuICAgICAgICAgICAgcGtnTWFpbiA9IGdldE93bihjb25maWcucGtncywgbmFtZSk7XG5cbiAgICAgICAgICAgIHJldHVybiBwa2dNYWluID8gcGtnTWFpbiA6IG5hbWU7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZW1vdmVTY3JpcHQobmFtZSkge1xuICAgICAgICAgICAgaWYgKGlzQnJvd3Nlcikge1xuICAgICAgICAgICAgICAgIGVhY2goc2NyaXB0cygpLCBmdW5jdGlvbiAoc2NyaXB0Tm9kZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2NyaXB0Tm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtcmVxdWlyZW1vZHVsZScpID09PSBuYW1lICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NyaXB0Tm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtcmVxdWlyZWNvbnRleHQnKSA9PT0gY29udGV4dC5jb250ZXh0TmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NyaXB0Tm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNjcmlwdE5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGhhc1BhdGhGYWxsYmFjayhpZCkge1xuICAgICAgICAgICAgdmFyIHBhdGhDb25maWcgPSBnZXRPd24oY29uZmlnLnBhdGhzLCBpZCk7XG4gICAgICAgICAgICBpZiAocGF0aENvbmZpZyAmJiBpc0FycmF5KHBhdGhDb25maWcpICYmIHBhdGhDb25maWcubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIC8vUG9wIG9mZiB0aGUgZmlyc3QgYXJyYXkgdmFsdWUsIHNpbmNlIGl0IGZhaWxlZCwgYW5kXG4gICAgICAgICAgICAgICAgLy9yZXRyeVxuICAgICAgICAgICAgICAgIHBhdGhDb25maWcuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LnJlcXVpcmUudW5kZWYoaWQpO1xuXG4gICAgICAgICAgICAgICAgLy9DdXN0b20gcmVxdWlyZSB0aGF0IGRvZXMgbm90IGRvIG1hcCB0cmFuc2xhdGlvbiwgc2luY2VcbiAgICAgICAgICAgICAgICAvL0lEIGlzIFwiYWJzb2x1dGVcIiwgYWxyZWFkeSBtYXBwZWQvcmVzb2x2ZWQuXG4gICAgICAgICAgICAgICAgY29udGV4dC5tYWtlUmVxdWlyZShudWxsLCB7XG4gICAgICAgICAgICAgICAgICAgIHNraXBNYXA6IHRydWVcbiAgICAgICAgICAgICAgICB9KShbaWRdKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy9UdXJucyBhIHBsdWdpbiFyZXNvdXJjZSB0byBbcGx1Z2luLCByZXNvdXJjZV1cbiAgICAgICAgLy93aXRoIHRoZSBwbHVnaW4gYmVpbmcgdW5kZWZpbmVkIGlmIHRoZSBuYW1lXG4gICAgICAgIC8vZGlkIG5vdCBoYXZlIGEgcGx1Z2luIHByZWZpeC5cbiAgICAgICAgZnVuY3Rpb24gc3BsaXRQcmVmaXgobmFtZSkge1xuICAgICAgICAgICAgdmFyIHByZWZpeCxcbiAgICAgICAgICAgICAgICBpbmRleCA9IG5hbWUgPyBuYW1lLmluZGV4T2YoJyEnKSA6IC0xO1xuICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgICAgICBwcmVmaXggPSBuYW1lLnN1YnN0cmluZygwLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyaW5nKGluZGV4ICsgMSwgbmFtZS5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFtwcmVmaXgsIG5hbWVdO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSBtb2R1bGUgbWFwcGluZyB0aGF0IGluY2x1ZGVzIHBsdWdpbiBwcmVmaXgsIG1vZHVsZVxuICAgICAgICAgKiBuYW1lLCBhbmQgcGF0aC4gSWYgcGFyZW50TW9kdWxlTWFwIGlzIHByb3ZpZGVkIGl0IHdpbGxcbiAgICAgICAgICogYWxzbyBub3JtYWxpemUgdGhlIG5hbWUgdmlhIHJlcXVpcmUubm9ybWFsaXplKClcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgdGhlIG1vZHVsZSBuYW1lXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbcGFyZW50TW9kdWxlTWFwXSBwYXJlbnQgbW9kdWxlIG1hcFxuICAgICAgICAgKiBmb3IgdGhlIG1vZHVsZSBuYW1lLCB1c2VkIHRvIHJlc29sdmUgcmVsYXRpdmUgbmFtZXMuXG4gICAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNOb3JtYWxpemVkOiBpcyB0aGUgSUQgYWxyZWFkeSBub3JtYWxpemVkLlxuICAgICAgICAgKiBUaGlzIGlzIHRydWUgaWYgdGhpcyBjYWxsIGlzIGRvbmUgZm9yIGEgZGVmaW5lKCkgbW9kdWxlIElELlxuICAgICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGFwcGx5TWFwOiBhcHBseSB0aGUgbWFwIGNvbmZpZyB0byB0aGUgSUQuXG4gICAgICAgICAqIFNob3VsZCBvbmx5IGJlIHRydWUgaWYgdGhpcyBtYXAgaXMgZm9yIGEgZGVwZW5kZW5jeS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIG1ha2VNb2R1bGVNYXAobmFtZSwgcGFyZW50TW9kdWxlTWFwLCBpc05vcm1hbGl6ZWQsIGFwcGx5TWFwKSB7XG4gICAgICAgICAgICB2YXIgdXJsLCBwbHVnaW5Nb2R1bGUsIHN1ZmZpeCwgbmFtZVBhcnRzLFxuICAgICAgICAgICAgICAgIHByZWZpeCA9IG51bGwsXG4gICAgICAgICAgICAgICAgcGFyZW50TmFtZSA9IHBhcmVudE1vZHVsZU1hcCA/IHBhcmVudE1vZHVsZU1hcC5uYW1lIDogbnVsbCxcbiAgICAgICAgICAgICAgICBvcmlnaW5hbE5hbWUgPSBuYW1lLFxuICAgICAgICAgICAgICAgIGlzRGVmaW5lID0gdHJ1ZSxcbiAgICAgICAgICAgICAgICBub3JtYWxpemVkTmFtZSA9ICcnO1xuXG4gICAgICAgICAgICAvL0lmIG5vIG5hbWUsIHRoZW4gaXQgbWVhbnMgaXQgaXMgYSByZXF1aXJlIGNhbGwsIGdlbmVyYXRlIGFuXG4gICAgICAgICAgICAvL2ludGVybmFsIG5hbWUuXG4gICAgICAgICAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgICAgICAgICBpc0RlZmluZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIG5hbWUgPSAnX0ByJyArIChyZXF1aXJlQ291bnRlciArPSAxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbmFtZVBhcnRzID0gc3BsaXRQcmVmaXgobmFtZSk7XG4gICAgICAgICAgICBwcmVmaXggPSBuYW1lUGFydHNbMF07XG4gICAgICAgICAgICBuYW1lID0gbmFtZVBhcnRzWzFdO1xuXG4gICAgICAgICAgICBpZiAocHJlZml4KSB7XG4gICAgICAgICAgICAgICAgcHJlZml4ID0gbm9ybWFsaXplKHByZWZpeCwgcGFyZW50TmFtZSwgYXBwbHlNYXApO1xuICAgICAgICAgICAgICAgIHBsdWdpbk1vZHVsZSA9IGdldE93bihkZWZpbmVkLCBwcmVmaXgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL0FjY291bnQgZm9yIHJlbGF0aXZlIHBhdGhzIGlmIHRoZXJlIGlzIGEgYmFzZSBuYW1lLlxuICAgICAgICAgICAgaWYgKG5hbWUpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJlZml4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc05vcm1hbGl6ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWROYW1lID0gbmFtZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwbHVnaW5Nb2R1bGUgJiYgcGx1Z2luTW9kdWxlLm5vcm1hbGl6ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9QbHVnaW4gaXMgbG9hZGVkLCB1c2UgaXRzIG5vcm1hbGl6ZSBtZXRob2QuXG4gICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkTmFtZSA9IHBsdWdpbk1vZHVsZS5ub3JtYWxpemUobmFtZSwgZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9ybWFsaXplKG5hbWUsIHBhcmVudE5hbWUsIGFwcGx5TWFwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgbmVzdGVkIHBsdWdpbiByZWZlcmVuY2VzLCB0aGVuIGRvIG5vdCB0cnkgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vcm1hbGl6ZSwgYXMgaXQgd2lsbCBub3Qgbm9ybWFsaXplIGNvcnJlY3RseS4gVGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGxhY2VzIGEgcmVzdHJpY3Rpb24gb24gcmVzb3VyY2VJZHMsIGFuZCB0aGUgbG9uZ2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0ZXJtIHNvbHV0aW9uIGlzIG5vdCB0byBub3JtYWxpemUgdW50aWwgcGx1Z2lucyBhcmVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvYWRlZCBhbmQgYWxsIG5vcm1hbGl6YXRpb25zIHRvIGFsbG93IGZvciBhc3luY1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9hZGluZyBvZiBhIGxvYWRlciBwbHVnaW4uIEJ1dCBmb3Igbm93LCBmaXhlcyB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbW1vbiB1c2VzLiBEZXRhaWxzIGluICMxMTMxXG4gICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkTmFtZSA9IG5hbWUuaW5kZXhPZignIScpID09PSAtMSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZShuYW1lLCBwYXJlbnROYW1lLCBhcHBseU1hcCkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy9BIHJlZ3VsYXIgbW9kdWxlLlxuICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkTmFtZSA9IG5vcm1hbGl6ZShuYW1lLCBwYXJlbnROYW1lLCBhcHBseU1hcCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9Ob3JtYWxpemVkIG5hbWUgbWF5IGJlIGEgcGx1Z2luIElEIGR1ZSB0byBtYXAgY29uZmlnXG4gICAgICAgICAgICAgICAgICAgIC8vYXBwbGljYXRpb24gaW4gbm9ybWFsaXplLiBUaGUgbWFwIGNvbmZpZyB2YWx1ZXMgbXVzdFxuICAgICAgICAgICAgICAgICAgICAvL2FscmVhZHkgYmUgbm9ybWFsaXplZCwgc28gZG8gbm90IG5lZWQgdG8gcmVkbyB0aGF0IHBhcnQuXG4gICAgICAgICAgICAgICAgICAgIG5hbWVQYXJ0cyA9IHNwbGl0UHJlZml4KG5vcm1hbGl6ZWROYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgcHJlZml4ID0gbmFtZVBhcnRzWzBdO1xuICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkTmFtZSA9IG5hbWVQYXJ0c1sxXTtcbiAgICAgICAgICAgICAgICAgICAgaXNOb3JtYWxpemVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICB1cmwgPSBjb250ZXh0Lm5hbWVUb1VybChub3JtYWxpemVkTmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL0lmIHRoZSBpZCBpcyBhIHBsdWdpbiBpZCB0aGF0IGNhbm5vdCBiZSBkZXRlcm1pbmVkIGlmIGl0IG5lZWRzXG4gICAgICAgICAgICAvL25vcm1hbGl6YXRpb24sIHN0YW1wIGl0IHdpdGggYSB1bmlxdWUgSUQgc28gdHdvIG1hdGNoaW5nIHJlbGF0aXZlXG4gICAgICAgICAgICAvL2lkcyB0aGF0IG1heSBjb25mbGljdCBjYW4gYmUgc2VwYXJhdGUuXG4gICAgICAgICAgICBzdWZmaXggPSBwcmVmaXggJiYgIXBsdWdpbk1vZHVsZSAmJiAhaXNOb3JtYWxpemVkID9cbiAgICAgICAgICAgICAgICAgICAgICdfdW5ub3JtYWxpemVkJyArICh1bm5vcm1hbGl6ZWRDb3VudGVyICs9IDEpIDpcbiAgICAgICAgICAgICAgICAgICAgICcnO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHByZWZpeDogcHJlZml4LFxuICAgICAgICAgICAgICAgIG5hbWU6IG5vcm1hbGl6ZWROYW1lLFxuICAgICAgICAgICAgICAgIHBhcmVudE1hcDogcGFyZW50TW9kdWxlTWFwLFxuICAgICAgICAgICAgICAgIHVubm9ybWFsaXplZDogISFzdWZmaXgsXG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxOYW1lOiBvcmlnaW5hbE5hbWUsXG4gICAgICAgICAgICAgICAgaXNEZWZpbmU6IGlzRGVmaW5lLFxuICAgICAgICAgICAgICAgIGlkOiAocHJlZml4ID9cbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWZpeCArICchJyArIG5vcm1hbGl6ZWROYW1lIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWROYW1lKSArIHN1ZmZpeFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldE1vZHVsZShkZXBNYXApIHtcbiAgICAgICAgICAgIHZhciBpZCA9IGRlcE1hcC5pZCxcbiAgICAgICAgICAgICAgICBtb2QgPSBnZXRPd24ocmVnaXN0cnksIGlkKTtcblxuICAgICAgICAgICAgaWYgKCFtb2QpIHtcbiAgICAgICAgICAgICAgICBtb2QgPSByZWdpc3RyeVtpZF0gPSBuZXcgY29udGV4dC5Nb2R1bGUoZGVwTWFwKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG1vZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9uKGRlcE1hcCwgbmFtZSwgZm4pIHtcbiAgICAgICAgICAgIHZhciBpZCA9IGRlcE1hcC5pZCxcbiAgICAgICAgICAgICAgICBtb2QgPSBnZXRPd24ocmVnaXN0cnksIGlkKTtcblxuICAgICAgICAgICAgaWYgKGhhc1Byb3AoZGVmaW5lZCwgaWQpICYmXG4gICAgICAgICAgICAgICAgICAgICghbW9kIHx8IG1vZC5kZWZpbmVFbWl0Q29tcGxldGUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICdkZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICBmbihkZWZpbmVkW2lkXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBtb2QgPSBnZXRNb2R1bGUoZGVwTWFwKTtcbiAgICAgICAgICAgICAgICBpZiAobW9kLmVycm9yICYmIG5hbWUgPT09ICdlcnJvcicpIHtcbiAgICAgICAgICAgICAgICAgICAgZm4obW9kLmVycm9yKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtb2Qub24obmFtZSwgZm4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9uRXJyb3IoZXJyLCBlcnJiYWNrKSB7XG4gICAgICAgICAgICB2YXIgaWRzID0gZXJyLnJlcXVpcmVNb2R1bGVzLFxuICAgICAgICAgICAgICAgIG5vdGlmaWVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGlmIChlcnJiYWNrKSB7XG4gICAgICAgICAgICAgICAgZXJyYmFjayhlcnIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlYWNoKGlkcywgZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtb2QgPSBnZXRPd24ocmVnaXN0cnksIGlkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9TZXQgZXJyb3Igb24gbW9kdWxlLCBzbyBpdCBza2lwcyB0aW1lb3V0IGNoZWNrcy5cbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZC5lcnJvciA9IGVycjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2QuZXZlbnRzLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZC5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmICghbm90aWZpZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uRXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogSW50ZXJuYWwgbWV0aG9kIHRvIHRyYW5zZmVyIGdsb2JhbFF1ZXVlIGl0ZW1zIHRvIHRoaXMgY29udGV4dCdzXG4gICAgICAgICAqIGRlZlF1ZXVlLlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdGFrZUdsb2JhbFF1ZXVlKCkge1xuICAgICAgICAgICAgLy9QdXNoIGFsbCB0aGUgZ2xvYmFsRGVmUXVldWUgaXRlbXMgaW50byB0aGUgY29udGV4dCdzIGRlZlF1ZXVlXG4gICAgICAgICAgICBpZiAoZ2xvYmFsRGVmUXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgZWFjaChnbG9iYWxEZWZRdWV1ZSwgZnVuY3Rpb24ocXVldWVJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IHF1ZXVlSXRlbVswXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZGVmUXVldWVNYXBbaWRdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkZWZRdWV1ZS5wdXNoKHF1ZXVlSXRlbSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZ2xvYmFsRGVmUXVldWUgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGhhbmRsZXJzID0ge1xuICAgICAgICAgICAgJ3JlcXVpcmUnOiBmdW5jdGlvbiAobW9kKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1vZC5yZXF1aXJlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtb2QucmVxdWlyZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG1vZC5yZXF1aXJlID0gY29udGV4dC5tYWtlUmVxdWlyZShtb2QubWFwKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdleHBvcnRzJzogZnVuY3Rpb24gKG1vZCkge1xuICAgICAgICAgICAgICAgIG1vZC51c2luZ0V4cG9ydHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChtb2QubWFwLmlzRGVmaW5lKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2QuZXhwb3J0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChkZWZpbmVkW21vZC5tYXAuaWRdID0gbW9kLmV4cG9ydHMpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChtb2QuZXhwb3J0cyA9IGRlZmluZWRbbW9kLm1hcC5pZF0gPSB7fSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ21vZHVsZSc6IGZ1bmN0aW9uIChtb2QpIHtcbiAgICAgICAgICAgICAgICBpZiAobW9kLm1vZHVsZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbW9kLm1vZHVsZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG1vZC5tb2R1bGUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogbW9kLm1hcC5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVyaTogbW9kLm1hcC51cmwsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0T3duKGNvbmZpZy5jb25maWcsIG1vZC5tYXAuaWQpIHx8IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydHM6IG1vZC5leHBvcnRzIHx8IChtb2QuZXhwb3J0cyA9IHt9KVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gY2xlYW5SZWdpc3RyeShpZCkge1xuICAgICAgICAgICAgLy9DbGVhbiB1cCBtYWNoaW5lcnkgdXNlZCBmb3Igd2FpdGluZyBtb2R1bGVzLlxuICAgICAgICAgICAgZGVsZXRlIHJlZ2lzdHJ5W2lkXTtcbiAgICAgICAgICAgIGRlbGV0ZSBlbmFibGVkUmVnaXN0cnlbaWRdO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYnJlYWtDeWNsZShtb2QsIHRyYWNlZCwgcHJvY2Vzc2VkKSB7XG4gICAgICAgICAgICB2YXIgaWQgPSBtb2QubWFwLmlkO1xuXG4gICAgICAgICAgICBpZiAobW9kLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgbW9kLmVtaXQoJ2Vycm9yJywgbW9kLmVycm9yKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdHJhY2VkW2lkXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgZWFjaChtb2QuZGVwTWFwcywgZnVuY3Rpb24gKGRlcE1hcCwgaSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGVwSWQgPSBkZXBNYXAuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXAgPSBnZXRPd24ocmVnaXN0cnksIGRlcElkKTtcblxuICAgICAgICAgICAgICAgICAgICAvL09ubHkgZm9yY2UgdGhpbmdzIHRoYXQgaGF2ZSBub3QgY29tcGxldGVkXG4gICAgICAgICAgICAgICAgICAgIC8vYmVpbmcgZGVmaW5lZCwgc28gc3RpbGwgaW4gdGhlIHJlZ2lzdHJ5LFxuICAgICAgICAgICAgICAgICAgICAvL2FuZCBvbmx5IGlmIGl0IGhhcyBub3QgYmVlbiBtYXRjaGVkIHVwXG4gICAgICAgICAgICAgICAgICAgIC8vaW4gdGhlIG1vZHVsZSBhbHJlYWR5LlxuICAgICAgICAgICAgICAgICAgICBpZiAoZGVwICYmICFtb2QuZGVwTWF0Y2hlZFtpXSAmJiAhcHJvY2Vzc2VkW2RlcElkXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdldE93bih0cmFjZWQsIGRlcElkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZC5kZWZpbmVEZXAoaSwgZGVmaW5lZFtkZXBJZF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZC5jaGVjaygpOyAvL3Bhc3MgZmFsc2U/XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrQ3ljbGUoZGVwLCB0cmFjZWQsIHByb2Nlc3NlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBwcm9jZXNzZWRbaWRdID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNoZWNrTG9hZGVkKCkge1xuICAgICAgICAgICAgdmFyIGVyciwgdXNpbmdQYXRoRmFsbGJhY2ssXG4gICAgICAgICAgICAgICAgd2FpdEludGVydmFsID0gY29uZmlnLndhaXRTZWNvbmRzICogMTAwMCxcbiAgICAgICAgICAgICAgICAvL0l0IGlzIHBvc3NpYmxlIHRvIGRpc2FibGUgdGhlIHdhaXQgaW50ZXJ2YWwgYnkgdXNpbmcgd2FpdFNlY29uZHMgb2YgMC5cbiAgICAgICAgICAgICAgICBleHBpcmVkID0gd2FpdEludGVydmFsICYmIChjb250ZXh0LnN0YXJ0VGltZSArIHdhaXRJbnRlcnZhbCkgPCBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcbiAgICAgICAgICAgICAgICBub0xvYWRzID0gW10sXG4gICAgICAgICAgICAgICAgcmVxQ2FsbHMgPSBbXSxcbiAgICAgICAgICAgICAgICBzdGlsbExvYWRpbmcgPSBmYWxzZSxcbiAgICAgICAgICAgICAgICBuZWVkQ3ljbGVDaGVjayA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vRG8gbm90IGJvdGhlciBpZiB0aGlzIGNhbGwgd2FzIGEgcmVzdWx0IG9mIGEgY3ljbGUgYnJlYWsuXG4gICAgICAgICAgICBpZiAoaW5DaGVja0xvYWRlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaW5DaGVja0xvYWRlZCA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vRmlndXJlIG91dCB0aGUgc3RhdGUgb2YgYWxsIHRoZSBtb2R1bGVzLlxuICAgICAgICAgICAgZWFjaFByb3AoZW5hYmxlZFJlZ2lzdHJ5LCBmdW5jdGlvbiAobW9kKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hcCA9IG1vZC5tYXAsXG4gICAgICAgICAgICAgICAgICAgIG1vZElkID0gbWFwLmlkO1xuXG4gICAgICAgICAgICAgICAgLy9Ta2lwIHRoaW5ncyB0aGF0IGFyZSBub3QgZW5hYmxlZCBvciBpbiBlcnJvciBzdGF0ZS5cbiAgICAgICAgICAgICAgICBpZiAoIW1vZC5lbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIW1hcC5pc0RlZmluZSkge1xuICAgICAgICAgICAgICAgICAgICByZXFDYWxscy5wdXNoKG1vZCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCFtb2QuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9JZiB0aGUgbW9kdWxlIHNob3VsZCBiZSBleGVjdXRlZCwgYW5kIGl0IGhhcyBub3RcbiAgICAgICAgICAgICAgICAgICAgLy9iZWVuIGluaXRlZCBhbmQgdGltZSBpcyB1cCwgcmVtZW1iZXIgaXQuXG4gICAgICAgICAgICAgICAgICAgIGlmICghbW9kLmluaXRlZCAmJiBleHBpcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzUGF0aEZhbGxiYWNrKG1vZElkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzaW5nUGF0aEZhbGxiYWNrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGlsbExvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub0xvYWRzLnB1c2gobW9kSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZVNjcmlwdChtb2RJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIW1vZC5pbml0ZWQgJiYgbW9kLmZldGNoZWQgJiYgbWFwLmlzRGVmaW5lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGlsbExvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXAucHJlZml4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9ObyByZWFzb24gdG8ga2VlcCBsb29raW5nIGZvciB1bmZpbmlzaGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9sb2FkaW5nLiBJZiB0aGUgb25seSBzdGlsbExvYWRpbmcgaXMgYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcGx1Z2luIHJlc291cmNlIHRob3VnaCwga2VlcCBnb2luZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2JlY2F1c2UgaXQgbWF5IGJlIHRoYXQgYSBwbHVnaW4gcmVzb3VyY2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2lzIHdhaXRpbmcgb24gYSBub24tcGx1Z2luIGN5Y2xlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAobmVlZEN5Y2xlQ2hlY2sgPSBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKGV4cGlyZWQgJiYgbm9Mb2Fkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAvL0lmIHdhaXQgdGltZSBleHBpcmVkLCB0aHJvdyBlcnJvciBvZiB1bmxvYWRlZCBtb2R1bGVzLlxuICAgICAgICAgICAgICAgIGVyciA9IG1ha2VFcnJvcigndGltZW91dCcsICdMb2FkIHRpbWVvdXQgZm9yIG1vZHVsZXM6ICcgKyBub0xvYWRzLCBudWxsLCBub0xvYWRzKTtcbiAgICAgICAgICAgICAgICBlcnIuY29udGV4dE5hbWUgPSBjb250ZXh0LmNvbnRleHROYW1lO1xuICAgICAgICAgICAgICAgIHJldHVybiBvbkVycm9yKGVycik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vTm90IGV4cGlyZWQsIGNoZWNrIGZvciBhIGN5Y2xlLlxuICAgICAgICAgICAgaWYgKG5lZWRDeWNsZUNoZWNrKSB7XG4gICAgICAgICAgICAgICAgZWFjaChyZXFDYWxscywgZnVuY3Rpb24gKG1vZCkge1xuICAgICAgICAgICAgICAgICAgICBicmVha0N5Y2xlKG1vZCwge30sIHt9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9JZiBzdGlsbCB3YWl0aW5nIG9uIGxvYWRzLCBhbmQgdGhlIHdhaXRpbmcgbG9hZCBpcyBzb21ldGhpbmdcbiAgICAgICAgICAgIC8vb3RoZXIgdGhhbiBhIHBsdWdpbiByZXNvdXJjZSwgb3IgdGhlcmUgYXJlIHN0aWxsIG91dHN0YW5kaW5nXG4gICAgICAgICAgICAvL3NjcmlwdHMsIHRoZW4ganVzdCB0cnkgYmFjayBsYXRlci5cbiAgICAgICAgICAgIGlmICgoIWV4cGlyZWQgfHwgdXNpbmdQYXRoRmFsbGJhY2spICYmIHN0aWxsTG9hZGluZykge1xuICAgICAgICAgICAgICAgIC8vU29tZXRoaW5nIGlzIHN0aWxsIHdhaXRpbmcgdG8gbG9hZC4gV2FpdCBmb3IgaXQsIGJ1dCBvbmx5XG4gICAgICAgICAgICAgICAgLy9pZiBhIHRpbWVvdXQgaXMgbm90IGFscmVhZHkgaW4gZWZmZWN0LlxuICAgICAgICAgICAgICAgIGlmICgoaXNCcm93c2VyIHx8IGlzV2ViV29ya2VyKSAmJiAhY2hlY2tMb2FkZWRUaW1lb3V0SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tMb2FkZWRUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrTG9hZGVkVGltZW91dElkID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrTG9hZGVkKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDUwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGluQ2hlY2tMb2FkZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIE1vZHVsZSA9IGZ1bmN0aW9uIChtYXApIHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzID0gZ2V0T3duKHVuZGVmRXZlbnRzLCBtYXAuaWQpIHx8IHt9O1xuICAgICAgICAgICAgdGhpcy5tYXAgPSBtYXA7XG4gICAgICAgICAgICB0aGlzLnNoaW0gPSBnZXRPd24oY29uZmlnLnNoaW0sIG1hcC5pZCk7XG4gICAgICAgICAgICB0aGlzLmRlcEV4cG9ydHMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuZGVwTWFwcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5kZXBNYXRjaGVkID0gW107XG4gICAgICAgICAgICB0aGlzLnBsdWdpbk1hcHMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuZGVwQ291bnQgPSAwO1xuXG4gICAgICAgICAgICAvKiB0aGlzLmV4cG9ydHMgdGhpcy5mYWN0b3J5XG4gICAgICAgICAgICAgICB0aGlzLmRlcE1hcHMgPSBbXSxcbiAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlZCwgdGhpcy5mZXRjaGVkXG4gICAgICAgICAgICAqL1xuICAgICAgICB9O1xuXG4gICAgICAgIE1vZHVsZS5wcm90b3R5cGUgPSB7XG4gICAgICAgICAgICBpbml0OiBmdW5jdGlvbiAoZGVwTWFwcywgZmFjdG9yeSwgZXJyYmFjaywgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgICAgICAgICAgICAgLy9EbyBub3QgZG8gbW9yZSBpbml0cyBpZiBhbHJlYWR5IGRvbmUuIENhbiBoYXBwZW4gaWYgdGhlcmVcbiAgICAgICAgICAgICAgICAvL2FyZSBtdWx0aXBsZSBkZWZpbmUgY2FsbHMgZm9yIHRoZSBzYW1lIG1vZHVsZS4gVGhhdCBpcyBub3RcbiAgICAgICAgICAgICAgICAvL2Egbm9ybWFsLCBjb21tb24gY2FzZSwgYnV0IGl0IGlzIGFsc28gbm90IHVuZXhwZWN0ZWQuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5pdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLmZhY3RvcnkgPSBmYWN0b3J5O1xuXG4gICAgICAgICAgICAgICAgaWYgKGVycmJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgLy9SZWdpc3RlciBmb3IgZXJyb3JzIG9uIHRoaXMgbW9kdWxlLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uKCdlcnJvcicsIGVycmJhY2spO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5ldmVudHMuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9JZiBubyBlcnJiYWNrIGFscmVhZHksIGJ1dCB0aGVyZSBhcmUgZXJyb3IgbGlzdGVuZXJzXG4gICAgICAgICAgICAgICAgICAgIC8vb24gdGhpcyBtb2R1bGUsIHNldCB1cCBhbiBlcnJiYWNrIHRvIHBhc3MgdG8gdGhlIGRlcHMuXG4gICAgICAgICAgICAgICAgICAgIGVycmJhY2sgPSBiaW5kKHRoaXMsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL0RvIGEgY29weSBvZiB0aGUgZGVwZW5kZW5jeSBhcnJheSwgc28gdGhhdFxuICAgICAgICAgICAgICAgIC8vc291cmNlIGlucHV0cyBhcmUgbm90IG1vZGlmaWVkLiBGb3IgZXhhbXBsZVxuICAgICAgICAgICAgICAgIC8vXCJzaGltXCIgZGVwcyBhcmUgcGFzc2VkIGluIGhlcmUgZGlyZWN0bHksIGFuZFxuICAgICAgICAgICAgICAgIC8vZG9pbmcgYSBkaXJlY3QgbW9kaWZpY2F0aW9uIG9mIHRoZSBkZXBNYXBzIGFycmF5XG4gICAgICAgICAgICAgICAgLy93b3VsZCBhZmZlY3QgdGhhdCBjb25maWcuXG4gICAgICAgICAgICAgICAgdGhpcy5kZXBNYXBzID0gZGVwTWFwcyAmJiBkZXBNYXBzLnNsaWNlKDApO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5lcnJiYWNrID0gZXJyYmFjaztcblxuICAgICAgICAgICAgICAgIC8vSW5kaWNhdGUgdGhpcyBtb2R1bGUgaGFzIGJlIGluaXRpYWxpemVkXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5pZ25vcmUgPSBvcHRpb25zLmlnbm9yZTtcblxuICAgICAgICAgICAgICAgIC8vQ291bGQgaGF2ZSBvcHRpb24gdG8gaW5pdCB0aGlzIG1vZHVsZSBpbiBlbmFibGVkIG1vZGUsXG4gICAgICAgICAgICAgICAgLy9vciBjb3VsZCBoYXZlIGJlZW4gcHJldmlvdXNseSBtYXJrZWQgYXMgZW5hYmxlZC4gSG93ZXZlcixcbiAgICAgICAgICAgICAgICAvL3RoZSBkZXBlbmRlbmNpZXMgYXJlIG5vdCBrbm93biB1bnRpbCBpbml0IGlzIGNhbGxlZC4gU29cbiAgICAgICAgICAgICAgICAvL2lmIGVuYWJsZWQgcHJldmlvdXNseSwgbm93IHRyaWdnZXIgZGVwZW5kZW5jaWVzIGFzIGVuYWJsZWQuXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZW5hYmxlZCB8fCB0aGlzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9FbmFibGUgdGhpcyBtb2R1bGUgYW5kIGRlcGVuZGVuY2llcy5cbiAgICAgICAgICAgICAgICAgICAgLy9XaWxsIGNhbGwgdGhpcy5jaGVjaygpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVjaygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGRlZmluZURlcDogZnVuY3Rpb24gKGksIGRlcEV4cG9ydHMpIHtcbiAgICAgICAgICAgICAgICAvL0JlY2F1c2Ugb2YgY3ljbGVzLCBkZWZpbmVkIGNhbGxiYWNrIGZvciBhIGdpdmVuXG4gICAgICAgICAgICAgICAgLy9leHBvcnQgY2FuIGJlIGNhbGxlZCBtb3JlIHRoYW4gb25jZS5cbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZGVwTWF0Y2hlZFtpXSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlcE1hdGNoZWRbaV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlcENvdW50IC09IDE7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVwRXhwb3J0c1tpXSA9IGRlcEV4cG9ydHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgZmV0Y2g6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mZXRjaGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5mZXRjaGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIGNvbnRleHQuc3RhcnRUaW1lID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcblxuICAgICAgICAgICAgICAgIHZhciBtYXAgPSB0aGlzLm1hcDtcblxuICAgICAgICAgICAgICAgIC8vSWYgdGhlIG1hbmFnZXIgaXMgZm9yIGEgcGx1Z2luIG1hbmFnZWQgcmVzb3VyY2UsXG4gICAgICAgICAgICAgICAgLy9hc2sgdGhlIHBsdWdpbiB0byBsb2FkIGl0IG5vdy5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaGltKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQubWFrZVJlcXVpcmUodGhpcy5tYXAsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZUJ1aWxkQ2FsbGJhY2s6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSkodGhpcy5zaGltLmRlcHMgfHwgW10sIGJpbmQodGhpcywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcC5wcmVmaXggPyB0aGlzLmNhbGxQbHVnaW4oKSA6IHRoaXMubG9hZCgpO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy9SZWd1bGFyIGRlcGVuZGVuY3kuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXAucHJlZml4ID8gdGhpcy5jYWxsUGx1Z2luKCkgOiB0aGlzLmxvYWQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBsb2FkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHVybCA9IHRoaXMubWFwLnVybDtcblxuICAgICAgICAgICAgICAgIC8vUmVndWxhciBkZXBlbmRlbmN5LlxuICAgICAgICAgICAgICAgIGlmICghdXJsRmV0Y2hlZFt1cmxdKSB7XG4gICAgICAgICAgICAgICAgICAgIHVybEZldGNoZWRbdXJsXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQubG9hZCh0aGlzLm1hcC5pZCwgdXJsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENoZWNrcyBpZiB0aGUgbW9kdWxlIGlzIHJlYWR5IHRvIGRlZmluZSBpdHNlbGYsIGFuZCBpZiBzbyxcbiAgICAgICAgICAgICAqIGRlZmluZSBpdC5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgY2hlY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZCB8fCB0aGlzLmVuYWJsaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgZXJyLCBjanNNb2R1bGUsXG4gICAgICAgICAgICAgICAgICAgIGlkID0gdGhpcy5tYXAuaWQsXG4gICAgICAgICAgICAgICAgICAgIGRlcEV4cG9ydHMgPSB0aGlzLmRlcEV4cG9ydHMsXG4gICAgICAgICAgICAgICAgICAgIGV4cG9ydHMgPSB0aGlzLmV4cG9ydHMsXG4gICAgICAgICAgICAgICAgICAgIGZhY3RvcnkgPSB0aGlzLmZhY3Rvcnk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaW5pdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgZmV0Y2ggaWYgbm90IGFscmVhZHkgaW4gdGhlIGRlZlF1ZXVlLlxuICAgICAgICAgICAgICAgICAgICBpZiAoIWhhc1Byb3AoY29udGV4dC5kZWZRdWV1ZU1hcCwgaWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZldGNoKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHRoaXMuZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuZGVmaW5pbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9UaGUgZmFjdG9yeSBjb3VsZCB0cmlnZ2VyIGFub3RoZXIgcmVxdWlyZSBjYWxsXG4gICAgICAgICAgICAgICAgICAgIC8vdGhhdCB3b3VsZCByZXN1bHQgaW4gY2hlY2tpbmcgdGhpcyBtb2R1bGUgdG9cbiAgICAgICAgICAgICAgICAgICAgLy9kZWZpbmUgaXRzZWxmIGFnYWluLiBJZiBhbHJlYWR5IGluIHRoZSBwcm9jZXNzXG4gICAgICAgICAgICAgICAgICAgIC8vb2YgZG9pbmcgdGhhdCwgc2tpcCB0aGlzIHdvcmsuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmaW5pbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlcENvdW50IDwgMSAmJiAhdGhpcy5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihmYWN0b3J5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vSWYgdGhlcmUgaXMgYW4gZXJyb3IgbGlzdGVuZXIsIGZhdm9yIHBhc3NpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RvIHRoYXQgaW5zdGVhZCBvZiB0aHJvd2luZyBhbiBlcnJvci4gSG93ZXZlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL29ubHkgZG8gaXQgZm9yIGRlZmluZSgpJ2QgIG1vZHVsZXMuIHJlcXVpcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2VycmJhY2tzIHNob3VsZCBub3QgYmUgY2FsbGVkIGZvciBmYWlsdXJlcyBpblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhlaXIgY2FsbGJhY2tzICgjNjk5KS4gSG93ZXZlciBpZiBhIGdsb2JhbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vb25FcnJvciBpcyBzZXQsIHVzZSB0aGF0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodGhpcy5ldmVudHMuZXJyb3IgJiYgdGhpcy5tYXAuaXNEZWZpbmUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vbkVycm9yICE9PSBkZWZhdWx0T25FcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0cyA9IGNvbnRleHQuZXhlY0NiKGlkLCBmYWN0b3J5LCBkZXBFeHBvcnRzLCBleHBvcnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyID0gZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydHMgPSBjb250ZXh0LmV4ZWNDYihpZCwgZmFjdG9yeSwgZGVwRXhwb3J0cywgZXhwb3J0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmF2b3IgcmV0dXJuIHZhbHVlIG92ZXIgZXhwb3J0cy4gSWYgbm9kZS9janMgaW4gcGxheSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGVuIHdpbGwgbm90IGhhdmUgYSByZXR1cm4gdmFsdWUgYW55d2F5LiBGYXZvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1vZHVsZS5leHBvcnRzIGFzc2lnbm1lbnQgb3ZlciBleHBvcnRzIG9iamVjdC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tYXAuaXNEZWZpbmUgJiYgZXhwb3J0cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNqc01vZHVsZSA9IHRoaXMubW9kdWxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2pzTW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnRzID0gY2pzTW9kdWxlLmV4cG9ydHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy51c2luZ0V4cG9ydHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZXhwb3J0cyBhbHJlYWR5IHNldCB0aGUgZGVmaW5lZCB2YWx1ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydHMgPSB0aGlzLmV4cG9ydHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVyci5yZXF1aXJlTWFwID0gdGhpcy5tYXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVyci5yZXF1aXJlTW9kdWxlcyA9IHRoaXMubWFwLmlzRGVmaW5lID8gW3RoaXMubWFwLmlkXSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVyci5yZXF1aXJlVHlwZSA9IHRoaXMubWFwLmlzRGVmaW5lID8gJ2RlZmluZScgOiAncmVxdWlyZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvbkVycm9yKCh0aGlzLmVycm9yID0gZXJyKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vSnVzdCBhIGxpdGVyYWwgdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnRzID0gZmFjdG9yeTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBvcnRzID0gZXhwb3J0cztcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWFwLmlzRGVmaW5lICYmICF0aGlzLmlnbm9yZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluZWRbaWRdID0gZXhwb3J0cztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXEub25SZXNvdXJjZUxvYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc0xvYWRNYXBzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhY2godGhpcy5kZXBNYXBzLCBmdW5jdGlvbiAoZGVwTWFwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNMb2FkTWFwcy5wdXNoKGRlcE1hcC5ub3JtYWxpemVkTWFwIHx8IGRlcE1hcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEub25SZXNvdXJjZUxvYWQoY29udGV4dCwgdGhpcy5tYXAsIHJlc0xvYWRNYXBzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vQ2xlYW4gdXBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFuUmVnaXN0cnkoaWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmluZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy9GaW5pc2hlZCB0aGUgZGVmaW5lIHN0YWdlLiBBbGxvdyBjYWxsaW5nIGNoZWNrIGFnYWluXG4gICAgICAgICAgICAgICAgICAgIC8vdG8gYWxsb3cgZGVmaW5lIG5vdGlmaWNhdGlvbnMgYmVsb3cgaW4gdGhlIGNhc2Ugb2YgYVxuICAgICAgICAgICAgICAgICAgICAvL2N5Y2xlLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmluaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVmaW5lZCAmJiAhdGhpcy5kZWZpbmVFbWl0dGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmluZUVtaXR0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdkZWZpbmVkJywgdGhpcy5leHBvcnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmaW5lRW1pdENvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgY2FsbFBsdWdpbjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBtYXAgPSB0aGlzLm1hcCxcbiAgICAgICAgICAgICAgICAgICAgaWQgPSBtYXAuaWQsXG4gICAgICAgICAgICAgICAgICAgIC8vTWFwIGFscmVhZHkgbm9ybWFsaXplZCB0aGUgcHJlZml4LlxuICAgICAgICAgICAgICAgICAgICBwbHVnaW5NYXAgPSBtYWtlTW9kdWxlTWFwKG1hcC5wcmVmaXgpO1xuXG4gICAgICAgICAgICAgICAgLy9NYXJrIHRoaXMgYXMgYSBkZXBlbmRlbmN5IGZvciB0aGlzIHBsdWdpbiwgc28gaXRcbiAgICAgICAgICAgICAgICAvL2NhbiBiZSB0cmFjZWQgZm9yIGN5Y2xlcy5cbiAgICAgICAgICAgICAgICB0aGlzLmRlcE1hcHMucHVzaChwbHVnaW5NYXApO1xuXG4gICAgICAgICAgICAgICAgb24ocGx1Z2luTWFwLCAnZGVmaW5lZCcsIGJpbmQodGhpcywgZnVuY3Rpb24gKHBsdWdpbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbG9hZCwgbm9ybWFsaXplZE1hcCwgbm9ybWFsaXplZE1vZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1bmRsZUlkID0gZ2V0T3duKGJ1bmRsZXNNYXAsIHRoaXMubWFwLmlkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgPSB0aGlzLm1hcC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50TmFtZSA9IHRoaXMubWFwLnBhcmVudE1hcCA/IHRoaXMubWFwLnBhcmVudE1hcC5uYW1lIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsUmVxdWlyZSA9IGNvbnRleHQubWFrZVJlcXVpcmUobWFwLnBhcmVudE1hcCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZUJ1aWxkQ2FsbGJhY2s6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vSWYgY3VycmVudCBtYXAgaXMgbm90IG5vcm1hbGl6ZWQsIHdhaXQgZm9yIHRoYXRcbiAgICAgICAgICAgICAgICAgICAgLy9ub3JtYWxpemVkIG5hbWUgdG8gbG9hZCBpbnN0ZWFkIG9mIGNvbnRpbnVpbmcuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hcC51bm5vcm1hbGl6ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vTm9ybWFsaXplIHRoZSBJRCBpZiB0aGUgcGx1Z2luIGFsbG93cyBpdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwbHVnaW4ubm9ybWFsaXplKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IHBsdWdpbi5ub3JtYWxpemUobmFtZSwgZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZShuYW1lLCBwYXJlbnROYW1lLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSB8fCAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9wcmVmaXggYW5kIG5hbWUgc2hvdWxkIGFscmVhZHkgYmUgbm9ybWFsaXplZCwgbm8gbmVlZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy9mb3IgYXBwbHlpbmcgbWFwIGNvbmZpZyBhZ2FpbiBlaXRoZXIuXG4gICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkTWFwID0gbWFrZU1vZHVsZU1hcChtYXAucHJlZml4ICsgJyEnICsgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFwLnBhcmVudE1hcCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgb24obm9ybWFsaXplZE1hcCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGVmaW5lZCcsIGJpbmQodGhpcywgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFwLm5vcm1hbGl6ZWRNYXAgPSBub3JtYWxpemVkTWFwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXQoW10sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHZhbHVlOyB9LCBudWxsLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWdub3JlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZE1vZCA9IGdldE93bihyZWdpc3RyeSwgbm9ybWFsaXplZE1hcC5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9ybWFsaXplZE1vZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vTWFyayB0aGlzIGFzIGEgZGVwZW5kZW5jeSBmb3IgdGhpcyBwbHVnaW4sIHNvIGl0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jYW4gYmUgdHJhY2VkIGZvciBjeWNsZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXBNYXBzLnB1c2gobm9ybWFsaXplZE1hcCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ldmVudHMuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZE1vZC5vbignZXJyb3InLCBiaW5kKHRoaXMsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRNb2QuZW5hYmxlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vSWYgYSBwYXRocyBjb25maWcsIHRoZW4ganVzdCBsb2FkIHRoYXQgZmlsZSBpbnN0ZWFkIHRvXG4gICAgICAgICAgICAgICAgICAgIC8vcmVzb2x2ZSB0aGUgcGx1Z2luLCBhcyBpdCBpcyBidWlsdCBpbnRvIHRoYXQgcGF0aHMgbGF5ZXIuXG4gICAgICAgICAgICAgICAgICAgIGlmIChidW5kbGVJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXAudXJsID0gY29udGV4dC5uYW1lVG9VcmwoYnVuZGxlSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBsb2FkID0gYmluZCh0aGlzLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdChbXSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gdmFsdWU7IH0sIG51bGwsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgbG9hZC5lcnJvciA9IGJpbmQodGhpcywgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9IGVycjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVyci5yZXF1aXJlTW9kdWxlcyA9IFtpZF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vUmVtb3ZlIHRlbXAgdW5ub3JtYWxpemVkIG1vZHVsZXMgZm9yIHRoaXMgbW9kdWxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy9zaW5jZSB0aGV5IHdpbGwgbmV2ZXIgYmUgcmVzb2x2ZWQgb3RoZXJ3aXNlIG5vdy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGVhY2hQcm9wKHJlZ2lzdHJ5LCBmdW5jdGlvbiAobW9kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZC5tYXAuaWQuaW5kZXhPZihpZCArICdfdW5ub3JtYWxpemVkJykgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYW5SZWdpc3RyeShtb2QubWFwLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgb25FcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvL0FsbG93IHBsdWdpbnMgdG8gbG9hZCBvdGhlciBjb2RlIHdpdGhvdXQgaGF2aW5nIHRvIGtub3cgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vY29udGV4dCBvciBob3cgdG8gJ2NvbXBsZXRlJyB0aGUgbG9hZC5cbiAgICAgICAgICAgICAgICAgICAgbG9hZC5mcm9tVGV4dCA9IGJpbmQodGhpcywgZnVuY3Rpb24gKHRleHQsIHRleHRBbHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qanNsaW50IGV2aWw6IHRydWUgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtb2R1bGVOYW1lID0gbWFwLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlTWFwID0gbWFrZU1vZHVsZU1hcChtb2R1bGVOYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNJbnRlcmFjdGl2ZSA9IHVzZUludGVyYWN0aXZlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0FzIG9mIDIuMS4wLCBzdXBwb3J0IGp1c3QgcGFzc2luZyB0aGUgdGV4dCwgdG8gcmVpbmZvcmNlXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2Zyb21UZXh0IG9ubHkgYmVpbmcgY2FsbGVkIG9uY2UgcGVyIHJlc291cmNlLiBTdGlsbFxuICAgICAgICAgICAgICAgICAgICAgICAgLy9zdXBwb3J0IG9sZCBzdHlsZSBvZiBwYXNzaW5nIG1vZHVsZU5hbWUgYnV0IGRpc2NhcmRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhhdCBtb2R1bGVOYW1lIGluIGZhdm9yIG9mIHRoZSBpbnRlcm5hbCByZWYuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGV4dEFsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSB0ZXh0QWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1R1cm4gb2ZmIGludGVyYWN0aXZlIHNjcmlwdCBtYXRjaGluZyBmb3IgSUUgZm9yIGFueSBkZWZpbmVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY2FsbHMgaW4gdGhlIHRleHQsIHRoZW4gdHVybiBpdCBiYWNrIG9uIGF0IHRoZSBlbmQuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzSW50ZXJhY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VJbnRlcmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1ByaW1lIHRoZSBzeXN0ZW0gYnkgY3JlYXRpbmcgYSBtb2R1bGUgaW5zdGFuY2UgZm9yXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2l0LlxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0TW9kdWxlKG1vZHVsZU1hcCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vVHJhbnNmZXIgYW55IGNvbmZpZyB0byB0aGlzIG90aGVyIG1vZHVsZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNQcm9wKGNvbmZpZy5jb25maWcsIGlkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5jb25maWdbbW9kdWxlTmFtZV0gPSBjb25maWcuY29uZmlnW2lkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEuZXhlYyh0ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25FcnJvcihtYWtlRXJyb3IoJ2Zyb210ZXh0ZXZhbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZnJvbVRleHQgZXZhbCBmb3IgJyArIGlkICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyBmYWlsZWQ6ICcgKyBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtpZF0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc0ludGVyYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlSW50ZXJhY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL01hcmsgdGhpcyBhcyBhIGRlcGVuZGVuY3kgZm9yIHRoZSBwbHVnaW5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vcmVzb3VyY2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVwTWFwcy5wdXNoKG1vZHVsZU1hcCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vU3VwcG9ydCBhbm9ueW1vdXMgbW9kdWxlcy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY29tcGxldGVMb2FkKG1vZHVsZU5hbWUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0JpbmQgdGhlIHZhbHVlIG9mIHRoYXQgbW9kdWxlIHRvIHRoZSB2YWx1ZSBmb3IgdGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9yZXNvdXJjZSBJRC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsUmVxdWlyZShbbW9kdWxlTmFtZV0sIGxvYWQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvL1VzZSBwYXJlbnROYW1lIGhlcmUgc2luY2UgdGhlIHBsdWdpbidzIG5hbWUgaXMgbm90IHJlbGlhYmxlLFxuICAgICAgICAgICAgICAgICAgICAvL2NvdWxkIGJlIHNvbWUgd2VpcmQgc3RyaW5nIHdpdGggbm8gcGF0aCB0aGF0IGFjdHVhbGx5IHdhbnRzIHRvXG4gICAgICAgICAgICAgICAgICAgIC8vcmVmZXJlbmNlIHRoZSBwYXJlbnROYW1lJ3MgcGF0aC5cbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luLmxvYWQobWFwLm5hbWUsIGxvY2FsUmVxdWlyZSwgbG9hZCwgY29uZmlnKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBjb250ZXh0LmVuYWJsZShwbHVnaW5NYXAsIHRoaXMpO1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luTWFwc1twbHVnaW5NYXAuaWRdID0gcGx1Z2luTWFwO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgZW5hYmxlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZW5hYmxlZFJlZ2lzdHJ5W3RoaXMubWFwLmlkXSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIC8vU2V0IGZsYWcgbWVudGlvbmluZyB0aGF0IHRoZSBtb2R1bGUgaXMgZW5hYmxpbmcsXG4gICAgICAgICAgICAgICAgLy9zbyB0aGF0IGltbWVkaWF0ZSBjYWxscyB0byB0aGUgZGVmaW5lZCBjYWxsYmFja3NcbiAgICAgICAgICAgICAgICAvL2ZvciBkZXBlbmRlbmNpZXMgZG8gbm90IHRyaWdnZXIgaW5hZHZlcnRlbnQgbG9hZFxuICAgICAgICAgICAgICAgIC8vd2l0aCB0aGUgZGVwQ291bnQgc3RpbGwgYmVpbmcgemVyby5cbiAgICAgICAgICAgICAgICB0aGlzLmVuYWJsaW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIC8vRW5hYmxlIGVhY2ggZGVwZW5kZW5jeVxuICAgICAgICAgICAgICAgIGVhY2godGhpcy5kZXBNYXBzLCBiaW5kKHRoaXMsIGZ1bmN0aW9uIChkZXBNYXAsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkLCBtb2QsIGhhbmRsZXI7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkZXBNYXAgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL0RlcGVuZGVuY3kgbmVlZHMgdG8gYmUgY29udmVydGVkIHRvIGEgZGVwTWFwXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2FuZCB3aXJlZCB1cCB0byB0aGlzIG1vZHVsZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcE1hcCA9IG1ha2VNb2R1bGVNYXAoZGVwTWFwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5tYXAuaXNEZWZpbmUgPyB0aGlzLm1hcCA6IHRoaXMubWFwLnBhcmVudE1hcCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5za2lwTWFwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVwTWFwc1tpXSA9IGRlcE1hcDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlciA9IGdldE93bihoYW5kbGVycywgZGVwTWFwLmlkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlcEV4cG9ydHNbaV0gPSBoYW5kbGVyKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXBDb3VudCArPSAxO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBvbihkZXBNYXAsICdkZWZpbmVkJywgYmluZCh0aGlzLCBmdW5jdGlvbiAoZGVwRXhwb3J0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVuZGVmZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmluZURlcChpLCBkZXBFeHBvcnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVycmJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbihkZXBNYXAsICdlcnJvcicsIGJpbmQodGhpcywgdGhpcy5lcnJiYWNrKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZXZlbnRzLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gZGlyZWN0IGVycmJhY2sgb24gdGhpcyBtb2R1bGUsIGJ1dCBzb21ldGhpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbHNlIGlzIGxpc3RlbmluZyBmb3IgZXJyb3JzLCBzbyBiZSBzdXJlIHRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJvcGFnYXRlIHRoZSBlcnJvciBjb3JyZWN0bHkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb24oZGVwTWFwLCAnZXJyb3InLCBiaW5kKHRoaXMsIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZCA9IGRlcE1hcC5pZDtcbiAgICAgICAgICAgICAgICAgICAgbW9kID0gcmVnaXN0cnlbaWRdO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vU2tpcCBzcGVjaWFsIG1vZHVsZXMgbGlrZSAncmVxdWlyZScsICdleHBvcnRzJywgJ21vZHVsZSdcbiAgICAgICAgICAgICAgICAgICAgLy9BbHNvLCBkb24ndCBjYWxsIGVuYWJsZSBpZiBpdCBpcyBhbHJlYWR5IGVuYWJsZWQsXG4gICAgICAgICAgICAgICAgICAgIC8vaW1wb3J0YW50IGluIGNpcmN1bGFyIGRlcGVuZGVuY3kgY2FzZXMuXG4gICAgICAgICAgICAgICAgICAgIGlmICghaGFzUHJvcChoYW5kbGVycywgaWQpICYmIG1vZCAmJiAhbW9kLmVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZW5hYmxlKGRlcE1hcCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAvL0VuYWJsZSBlYWNoIHBsdWdpbiB0aGF0IGlzIHVzZWQgaW5cbiAgICAgICAgICAgICAgICAvL2EgZGVwZW5kZW5jeVxuICAgICAgICAgICAgICAgIGVhY2hQcm9wKHRoaXMucGx1Z2luTWFwcywgYmluZCh0aGlzLCBmdW5jdGlvbiAocGx1Z2luTWFwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtb2QgPSBnZXRPd24ocmVnaXN0cnksIHBsdWdpbk1hcC5pZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2QgJiYgIW1vZC5lbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmVuYWJsZShwbHVnaW5NYXAsIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5lbmFibGluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVjaygpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgb246IGZ1bmN0aW9uIChuYW1lLCBjYikge1xuICAgICAgICAgICAgICAgIHZhciBjYnMgPSB0aGlzLmV2ZW50c1tuYW1lXTtcbiAgICAgICAgICAgICAgICBpZiAoIWNicykge1xuICAgICAgICAgICAgICAgICAgICBjYnMgPSB0aGlzLmV2ZW50c1tuYW1lXSA9IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYnMucHVzaChjYik7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBlbWl0OiBmdW5jdGlvbiAobmFtZSwgZXZ0KSB7XG4gICAgICAgICAgICAgICAgZWFjaCh0aGlzLmV2ZW50c1tuYW1lXSwgZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKGV2dCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICdlcnJvcicpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9Ob3cgdGhhdCB0aGUgZXJyb3IgaGFuZGxlciB3YXMgdHJpZ2dlcmVkLCByZW1vdmVcbiAgICAgICAgICAgICAgICAgICAgLy90aGUgbGlzdGVuZXJzLCBzaW5jZSB0aGlzIGJyb2tlbiBNb2R1bGUgaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgICAgLy9jYW4gc3RheSBhcm91bmQgZm9yIGEgd2hpbGUgaW4gdGhlIHJlZ2lzdHJ5LlxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5ldmVudHNbbmFtZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGNhbGxHZXRNb2R1bGUoYXJncykge1xuICAgICAgICAgICAgLy9Ta2lwIG1vZHVsZXMgYWxyZWFkeSBkZWZpbmVkLlxuICAgICAgICAgICAgaWYgKCFoYXNQcm9wKGRlZmluZWQsIGFyZ3NbMF0pKSB7XG4gICAgICAgICAgICAgICAgZ2V0TW9kdWxlKG1ha2VNb2R1bGVNYXAoYXJnc1swXSwgbnVsbCwgdHJ1ZSkpLmluaXQoYXJnc1sxXSwgYXJnc1syXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcihub2RlLCBmdW5jLCBuYW1lLCBpZU5hbWUpIHtcbiAgICAgICAgICAgIC8vRmF2b3IgZGV0YWNoRXZlbnQgYmVjYXVzZSBvZiBJRTlcbiAgICAgICAgICAgIC8vaXNzdWUsIHNlZSBhdHRhY2hFdmVudC9hZGRFdmVudExpc3RlbmVyIGNvbW1lbnQgZWxzZXdoZXJlXG4gICAgICAgICAgICAvL2luIHRoaXMgZmlsZS5cbiAgICAgICAgICAgIGlmIChub2RlLmRldGFjaEV2ZW50ICYmICFpc09wZXJhKSB7XG4gICAgICAgICAgICAgICAgLy9Qcm9iYWJseSBJRS4gSWYgbm90IGl0IHdpbGwgdGhyb3cgYW4gZXJyb3IsIHdoaWNoIHdpbGwgYmVcbiAgICAgICAgICAgICAgICAvL3VzZWZ1bCB0byBrbm93LlxuICAgICAgICAgICAgICAgIGlmIChpZU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5kZXRhY2hFdmVudChpZU5hbWUsIGZ1bmMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKG5hbWUsIGZ1bmMsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHaXZlbiBhbiBldmVudCBmcm9tIGEgc2NyaXB0IG5vZGUsIGdldCB0aGUgcmVxdWlyZWpzIGluZm8gZnJvbSBpdCxcbiAgICAgICAgICogYW5kIHRoZW4gcmVtb3ZlcyB0aGUgZXZlbnQgbGlzdGVuZXJzIG9uIHRoZSBub2RlLlxuICAgICAgICAgKiBAcGFyYW0ge0V2ZW50fSBldnRcbiAgICAgICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdldFNjcmlwdERhdGEoZXZ0KSB7XG4gICAgICAgICAgICAvL1VzaW5nIGN1cnJlbnRUYXJnZXQgaW5zdGVhZCBvZiB0YXJnZXQgZm9yIEZpcmVmb3ggMi4wJ3Mgc2FrZS4gTm90XG4gICAgICAgICAgICAvL2FsbCBvbGQgYnJvd3NlcnMgd2lsbCBiZSBzdXBwb3J0ZWQsIGJ1dCB0aGlzIG9uZSB3YXMgZWFzeSBlbm91Z2hcbiAgICAgICAgICAgIC8vdG8gc3VwcG9ydCBhbmQgc3RpbGwgbWFrZXMgc2Vuc2UuXG4gICAgICAgICAgICB2YXIgbm9kZSA9IGV2dC5jdXJyZW50VGFyZ2V0IHx8IGV2dC5zcmNFbGVtZW50O1xuXG4gICAgICAgICAgICAvL1JlbW92ZSB0aGUgbGlzdGVuZXJzIG9uY2UgaGVyZS5cbiAgICAgICAgICAgIHJlbW92ZUxpc3RlbmVyKG5vZGUsIGNvbnRleHQub25TY3JpcHRMb2FkLCAnbG9hZCcsICdvbnJlYWR5c3RhdGVjaGFuZ2UnKTtcbiAgICAgICAgICAgIHJlbW92ZUxpc3RlbmVyKG5vZGUsIGNvbnRleHQub25TY3JpcHRFcnJvciwgJ2Vycm9yJyk7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbm9kZTogbm9kZSxcbiAgICAgICAgICAgICAgICBpZDogbm9kZSAmJiBub2RlLmdldEF0dHJpYnV0ZSgnZGF0YS1yZXF1aXJlbW9kdWxlJylcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpbnRha2VEZWZpbmVzKCkge1xuICAgICAgICAgICAgdmFyIGFyZ3M7XG5cbiAgICAgICAgICAgIC8vQW55IGRlZmluZWQgbW9kdWxlcyBpbiB0aGUgZ2xvYmFsIHF1ZXVlLCBpbnRha2UgdGhlbSBub3cuXG4gICAgICAgICAgICB0YWtlR2xvYmFsUXVldWUoKTtcblxuICAgICAgICAgICAgLy9NYWtlIHN1cmUgYW55IHJlbWFpbmluZyBkZWZRdWV1ZSBpdGVtcyBnZXQgcHJvcGVybHkgcHJvY2Vzc2VkLlxuICAgICAgICAgICAgd2hpbGUgKGRlZlF1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGFyZ3MgPSBkZWZRdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIGlmIChhcmdzWzBdID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvbkVycm9yKG1ha2VFcnJvcignbWlzbWF0Y2gnLCAnTWlzbWF0Y2hlZCBhbm9ueW1vdXMgZGVmaW5lKCkgbW9kdWxlOiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3NbYXJncy5sZW5ndGggLSAxXSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vYXJncyBhcmUgaWQsIGRlcHMsIGZhY3RvcnkuIFNob3VsZCBiZSBub3JtYWxpemVkIGJ5IHRoZVxuICAgICAgICAgICAgICAgICAgICAvL2RlZmluZSgpIGZ1bmN0aW9uLlxuICAgICAgICAgICAgICAgICAgICBjYWxsR2V0TW9kdWxlKGFyZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRleHQuZGVmUXVldWVNYXAgPSB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRleHQgPSB7XG4gICAgICAgICAgICBjb25maWc6IGNvbmZpZyxcbiAgICAgICAgICAgIGNvbnRleHROYW1lOiBjb250ZXh0TmFtZSxcbiAgICAgICAgICAgIHJlZ2lzdHJ5OiByZWdpc3RyeSxcbiAgICAgICAgICAgIGRlZmluZWQ6IGRlZmluZWQsXG4gICAgICAgICAgICB1cmxGZXRjaGVkOiB1cmxGZXRjaGVkLFxuICAgICAgICAgICAgZGVmUXVldWU6IGRlZlF1ZXVlLFxuICAgICAgICAgICAgZGVmUXVldWVNYXA6IHt9LFxuICAgICAgICAgICAgTW9kdWxlOiBNb2R1bGUsXG4gICAgICAgICAgICBtYWtlTW9kdWxlTWFwOiBtYWtlTW9kdWxlTWFwLFxuICAgICAgICAgICAgbmV4dFRpY2s6IHJlcS5uZXh0VGljayxcbiAgICAgICAgICAgIG9uRXJyb3I6IG9uRXJyb3IsXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogU2V0IGEgY29uZmlndXJhdGlvbiBmb3IgdGhlIGNvbnRleHQuXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gY2ZnIGNvbmZpZyBvYmplY3QgdG8gaW50ZWdyYXRlLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjb25maWd1cmU6IGZ1bmN0aW9uIChjZmcpIHtcbiAgICAgICAgICAgICAgICAvL01ha2Ugc3VyZSB0aGUgYmFzZVVybCBlbmRzIGluIGEgc2xhc2guXG4gICAgICAgICAgICAgICAgaWYgKGNmZy5iYXNlVXJsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjZmcuYmFzZVVybC5jaGFyQXQoY2ZnLmJhc2VVcmwubGVuZ3RoIC0gMSkgIT09ICcvJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2ZnLmJhc2VVcmwgKz0gJy8nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQ29udmVydCBvbGQgc3R5bGUgdXJsQXJncyBzdHJpbmcgdG8gYSBmdW5jdGlvbi5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNmZy51cmxBcmdzID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsQXJncyA9IGNmZy51cmxBcmdzO1xuICAgICAgICAgICAgICAgICAgICBjZmcudXJsQXJncyA9IGZ1bmN0aW9uKGlkLCB1cmwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAodXJsLmluZGV4T2YoJz8nKSA9PT0gLTEgPyAnPycgOiAnJicpICsgdXJsQXJncztcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL1NhdmUgb2ZmIHRoZSBwYXRocyBzaW5jZSB0aGV5IHJlcXVpcmUgc3BlY2lhbCBwcm9jZXNzaW5nLFxuICAgICAgICAgICAgICAgIC8vdGhleSBhcmUgYWRkaXRpdmUuXG4gICAgICAgICAgICAgICAgdmFyIHNoaW0gPSBjb25maWcuc2hpbSxcbiAgICAgICAgICAgICAgICAgICAgb2JqcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGhzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYnVuZGxlczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgZWFjaFByb3AoY2ZnLCBmdW5jdGlvbiAodmFsdWUsIHByb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9ianNbcHJvcF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29uZmlnW3Byb3BdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnW3Byb3BdID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBtaXhpbihjb25maWdbcHJvcF0sIHZhbHVlLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ1twcm9wXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvL1JldmVyc2UgbWFwIHRoZSBidW5kbGVzXG4gICAgICAgICAgICAgICAgaWYgKGNmZy5idW5kbGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGVhY2hQcm9wKGNmZy5idW5kbGVzLCBmdW5jdGlvbiAodmFsdWUsIHByb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhY2godmFsdWUsIGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYgIT09IHByb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVuZGxlc01hcFt2XSA9IHByb3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vTWVyZ2Ugc2hpbVxuICAgICAgICAgICAgICAgIGlmIChjZmcuc2hpbSkge1xuICAgICAgICAgICAgICAgICAgICBlYWNoUHJvcChjZmcuc2hpbSwgZnVuY3Rpb24gKHZhbHVlLCBpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9Ob3JtYWxpemUgdGhlIHN0cnVjdHVyZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcHM6IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUuZXhwb3J0cyB8fCB2YWx1ZS5pbml0KSAmJiAhdmFsdWUuZXhwb3J0c0ZuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuZXhwb3J0c0ZuID0gY29udGV4dC5tYWtlU2hpbUV4cG9ydHModmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc2hpbVtpZF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy5zaGltID0gc2hpbTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL0FkanVzdCBwYWNrYWdlcyBpZiBuZWNlc3NhcnkuXG4gICAgICAgICAgICAgICAgaWYgKGNmZy5wYWNrYWdlcykge1xuICAgICAgICAgICAgICAgICAgICBlYWNoKGNmZy5wYWNrYWdlcywgZnVuY3Rpb24gKHBrZ09iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxvY2F0aW9uLCBuYW1lO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBwa2dPYmogPSB0eXBlb2YgcGtnT2JqID09PSAnc3RyaW5nJyA/IHtuYW1lOiBwa2dPYmp9IDogcGtnT2JqO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gcGtnT2JqLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbiA9IHBrZ09iai5sb2NhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb2NhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5wYXRoc1tuYW1lXSA9IHBrZ09iai5sb2NhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9TYXZlIHBvaW50ZXIgdG8gbWFpbiBtb2R1bGUgSUQgZm9yIHBrZyBuYW1lLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy9SZW1vdmUgbGVhZGluZyBkb3QgaW4gbWFpbiwgc28gbWFpbiBwYXRocyBhcmUgbm9ybWFsaXplZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYW5kIHJlbW92ZSBhbnkgdHJhaWxpbmcgLmpzLCBzaW5jZSBkaWZmZXJlbnQgcGFja2FnZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9lbnZzIGhhdmUgZGlmZmVyZW50IGNvbnZlbnRpb25zOiBzb21lIHVzZSBhIG1vZHVsZSBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy9zb21lIHVzZSBhIGZpbGUgbmFtZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5wa2dzW25hbWVdID0gcGtnT2JqLm5hbWUgKyAnLycgKyAocGtnT2JqLm1haW4gfHwgJ21haW4nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKGN1cnJEaXJSZWdFeHAsICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKGpzU3VmZml4UmVnRXhwLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vSWYgdGhlcmUgYXJlIGFueSBcIndhaXRpbmcgdG8gZXhlY3V0ZVwiIG1vZHVsZXMgaW4gdGhlIHJlZ2lzdHJ5LFxuICAgICAgICAgICAgICAgIC8vdXBkYXRlIHRoZSBtYXBzIGZvciB0aGVtLCBzaW5jZSB0aGVpciBpbmZvLCBsaWtlIFVSTHMgdG8gbG9hZCxcbiAgICAgICAgICAgICAgICAvL21heSBoYXZlIGNoYW5nZWQuXG4gICAgICAgICAgICAgICAgZWFjaFByb3AocmVnaXN0cnksIGZ1bmN0aW9uIChtb2QsIGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vSWYgbW9kdWxlIGFscmVhZHkgaGFzIGluaXQgY2FsbGVkLCBzaW5jZSBpdCBpcyB0b29cbiAgICAgICAgICAgICAgICAgICAgLy9sYXRlIHRvIG1vZGlmeSB0aGVtLCBhbmQgaWdub3JlIHVubm9ybWFsaXplZCBvbmVzXG4gICAgICAgICAgICAgICAgICAgIC8vc2luY2UgdGhleSBhcmUgdHJhbnNpZW50LlxuICAgICAgICAgICAgICAgICAgICBpZiAoIW1vZC5pbml0ZWQgJiYgIW1vZC5tYXAudW5ub3JtYWxpemVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2QubWFwID0gbWFrZU1vZHVsZU1hcChpZCwgbnVsbCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vSWYgYSBkZXBzIGFycmF5IG9yIGEgY29uZmlnIGNhbGxiYWNrIGlzIHNwZWNpZmllZCwgdGhlbiBjYWxsXG4gICAgICAgICAgICAgICAgLy9yZXF1aXJlIHdpdGggdGhvc2UgYXJncy4gVGhpcyBpcyB1c2VmdWwgd2hlbiByZXF1aXJlIGlzIGRlZmluZWQgYXMgYVxuICAgICAgICAgICAgICAgIC8vY29uZmlnIG9iamVjdCBiZWZvcmUgcmVxdWlyZS5qcyBpcyBsb2FkZWQuXG4gICAgICAgICAgICAgICAgaWYgKGNmZy5kZXBzIHx8IGNmZy5jYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnJlcXVpcmUoY2ZnLmRlcHMgfHwgW10sIGNmZy5jYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgbWFrZVNoaW1FeHBvcnRzOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBmbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJldDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmluaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldCA9IHZhbHVlLmluaXQuYXBwbHkoZ2xvYmFsLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQgfHwgKHZhbHVlLmV4cG9ydHMgJiYgZ2V0R2xvYmFsKHZhbHVlLmV4cG9ydHMpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgbWFrZVJlcXVpcmU6IGZ1bmN0aW9uIChyZWxNYXAsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGxvY2FsUmVxdWlyZShkZXBzLCBjYWxsYmFjaywgZXJyYmFjaykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaWQsIG1hcCwgcmVxdWlyZU1vZDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5lbmFibGVCdWlsZENhbGxiYWNrICYmIGNhbGxiYWNrICYmIGlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5fX3JlcXVpcmVKc0J1aWxkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGVwcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vSW52YWxpZCBjYWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uRXJyb3IobWFrZUVycm9yKCdyZXF1aXJlYXJncycsICdJbnZhbGlkIHJlcXVpcmUgY2FsbCcpLCBlcnJiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9JZiByZXF1aXJlfGV4cG9ydHN8bW9kdWxlIGFyZSByZXF1ZXN0ZWQsIGdldCB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFsdWUgZm9yIHRoZW0gZnJvbSB0aGUgc3BlY2lhbCBoYW5kbGVycy4gQ2F2ZWF0OlxuICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzIG9ubHkgd29ya3Mgd2hpbGUgbW9kdWxlIGlzIGJlaW5nIGRlZmluZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVsTWFwICYmIGhhc1Byb3AoaGFuZGxlcnMsIGRlcHMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXJzW2RlcHNdKHJlZ2lzdHJ5W3JlbE1hcC5pZF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1N5bmNocm9ub3VzIGFjY2VzcyB0byBvbmUgbW9kdWxlLiBJZiByZXF1aXJlLmdldCBpc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9hdmFpbGFibGUgKGFzIGluIHRoZSBOb2RlIGFkYXB0ZXIpLCBwcmVmZXIgdGhhdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXEuZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcS5nZXQoY29udGV4dCwgZGVwcywgcmVsTWFwLCBsb2NhbFJlcXVpcmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL05vcm1hbGl6ZSBtb2R1bGUgbmFtZSwgaWYgaXQgY29udGFpbnMgLiBvciAuLlxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwID0gbWFrZU1vZHVsZU1hcChkZXBzLCByZWxNYXAsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkID0gbWFwLmlkO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhhc1Byb3AoZGVmaW5lZCwgaWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uRXJyb3IobWFrZUVycm9yKCdub3Rsb2FkZWQnLCAnTW9kdWxlIG5hbWUgXCInICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1wiIGhhcyBub3QgYmVlbiBsb2FkZWQgeWV0IGZvciBjb250ZXh0OiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0TmFtZSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHJlbE1hcCA/ICcnIDogJy4gVXNlIHJlcXVpcmUoW10pJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZpbmVkW2lkXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vR3JhYiBkZWZpbmVzIHdhaXRpbmcgaW4gdGhlIGdsb2JhbCBxdWV1ZS5cbiAgICAgICAgICAgICAgICAgICAgaW50YWtlRGVmaW5lcygpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vTWFyayBhbGwgdGhlIGRlcGVuZGVuY2llcyBhcyBuZWVkaW5nIHRvIGJlIGxvYWRlZC5cbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1NvbWUgZGVmaW5lcyBjb3VsZCBoYXZlIGJlZW4gYWRkZWQgc2luY2UgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3JlcXVpcmUgY2FsbCwgY29sbGVjdCB0aGVtLlxuICAgICAgICAgICAgICAgICAgICAgICAgaW50YWtlRGVmaW5lcygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlTW9kID0gZ2V0TW9kdWxlKG1ha2VNb2R1bGVNYXAobnVsbCwgcmVsTWFwKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vU3RvcmUgaWYgbWFwIGNvbmZpZyBzaG91bGQgYmUgYXBwbGllZCB0byB0aGlzIHJlcXVpcmVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY2FsbCBmb3IgZGVwZW5kZW5jaWVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZU1vZC5za2lwTWFwID0gb3B0aW9ucy5za2lwTWFwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlTW9kLmluaXQoZGVwcywgY2FsbGJhY2ssIGVycmJhY2ssIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tMb2FkZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvY2FsUmVxdWlyZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBtaXhpbihsb2NhbFJlcXVpcmUsIHtcbiAgICAgICAgICAgICAgICAgICAgaXNCcm93c2VyOiBpc0Jyb3dzZXIsXG5cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAqIENvbnZlcnRzIGEgbW9kdWxlIG5hbWUgKyAuZXh0ZW5zaW9uIGludG8gYW4gVVJMIHBhdGguXG4gICAgICAgICAgICAgICAgICAgICAqICpSZXF1aXJlcyogdGhlIHVzZSBvZiBhIG1vZHVsZSBuYW1lLiBJdCBkb2VzIG5vdCBzdXBwb3J0IHVzaW5nXG4gICAgICAgICAgICAgICAgICAgICAqIHBsYWluIFVSTHMgbGlrZSBuYW1lVG9VcmwuXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICB0b1VybDogZnVuY3Rpb24gKG1vZHVsZU5hbWVQbHVzRXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gbW9kdWxlTmFtZVBsdXNFeHQubGFzdEluZGV4T2YoJy4nKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50ID0gbW9kdWxlTmFtZVBsdXNFeHQuc3BsaXQoJy8nKVswXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1JlbGF0aXZlID0gc2VnbWVudCA9PT0gJy4nIHx8IHNlZ21lbnQgPT09ICcuLic7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vSGF2ZSBhIGZpbGUgZXh0ZW5zaW9uIGFsaWFzLCBhbmQgaXQgaXMgbm90IHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9kb3RzIGZyb20gYSByZWxhdGl2ZSBwYXRoLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSAmJiAoIWlzUmVsYXRpdmUgfHwgaW5kZXggPiAxKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dCA9IG1vZHVsZU5hbWVQbHVzRXh0LnN1YnN0cmluZyhpbmRleCwgbW9kdWxlTmFtZVBsdXNFeHQubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2R1bGVOYW1lUGx1c0V4dCA9IG1vZHVsZU5hbWVQbHVzRXh0LnN1YnN0cmluZygwLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0Lm5hbWVUb1VybChub3JtYWxpemUobW9kdWxlTmFtZVBsdXNFeHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxNYXAgJiYgcmVsTWFwLmlkLCB0cnVlKSwgZXh0LCAgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgZGVmaW5lZDogZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGFzUHJvcChkZWZpbmVkLCBtYWtlTW9kdWxlTWFwKGlkLCByZWxNYXAsIGZhbHNlLCB0cnVlKS5pZCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgc3BlY2lmaWVkOiBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkID0gbWFrZU1vZHVsZU1hcChpZCwgcmVsTWFwLCBmYWxzZSwgdHJ1ZSkuaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGFzUHJvcChkZWZpbmVkLCBpZCkgfHwgaGFzUHJvcChyZWdpc3RyeSwgaWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvL09ubHkgYWxsb3cgdW5kZWYgb24gdG9wIGxldmVsIHJlcXVpcmUgY2FsbHNcbiAgICAgICAgICAgICAgICBpZiAoIXJlbE1hcCkge1xuICAgICAgICAgICAgICAgICAgICBsb2NhbFJlcXVpcmUudW5kZWYgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vQmluZCBhbnkgd2FpdGluZyBkZWZpbmUoKSBjYWxscyB0byB0aGlzIGNvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2ZpeCBmb3IgIzQwOFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFrZUdsb2JhbFF1ZXVlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXAgPSBtYWtlTW9kdWxlTWFwKGlkLCByZWxNYXAsIHRydWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZCA9IGdldE93bihyZWdpc3RyeSwgaWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2QudW5kZWZlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVTY3JpcHQoaWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZGVmaW5lZFtpZF07XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdXJsRmV0Y2hlZFttYXAudXJsXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB1bmRlZkV2ZW50c1tpZF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vQ2xlYW4gcXVldWVkIGRlZmluZXMgdG9vLiBHbyBiYWNrd2FyZHNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaW4gYXJyYXkgc28gdGhhdCB0aGUgc3BsaWNlcyBkbyBub3RcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vbWVzcyB1cCB0aGUgaXRlcmF0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgZWFjaFJldmVyc2UoZGVmUXVldWUsIGZ1bmN0aW9uKGFyZ3MsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJnc1swXSA9PT0gaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmUXVldWUuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNvbnRleHQuZGVmUXVldWVNYXBbaWRdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9Ib2xkIG9uIHRvIGxpc3RlbmVycyBpbiBjYXNlIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbW9kdWxlIHdpbGwgYmUgYXR0ZW1wdGVkIHRvIGJlIHJlbG9hZGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy91c2luZyBhIGRpZmZlcmVudCBjb25maWcuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZC5ldmVudHMuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlZkV2ZW50c1tpZF0gPSBtb2QuZXZlbnRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFuUmVnaXN0cnkoaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBsb2NhbFJlcXVpcmU7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENhbGxlZCB0byBlbmFibGUgYSBtb2R1bGUgaWYgaXQgaXMgc3RpbGwgaW4gdGhlIHJlZ2lzdHJ5XG4gICAgICAgICAgICAgKiBhd2FpdGluZyBlbmFibGVtZW50LiBBIHNlY29uZCBhcmcsIHBhcmVudCwgdGhlIHBhcmVudCBtb2R1bGUsXG4gICAgICAgICAgICAgKiBpcyBwYXNzZWQgaW4gZm9yIGNvbnRleHQsIHdoZW4gdGhpcyBtZXRob2QgaXMgb3ZlcnJpZGRlbiBieVxuICAgICAgICAgICAgICogdGhlIG9wdGltaXplci4gTm90IHNob3duIGhlcmUgdG8ga2VlcCBjb2RlIGNvbXBhY3QuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGVuYWJsZTogZnVuY3Rpb24gKGRlcE1hcCkge1xuICAgICAgICAgICAgICAgIHZhciBtb2QgPSBnZXRPd24ocmVnaXN0cnksIGRlcE1hcC5pZCk7XG4gICAgICAgICAgICAgICAgaWYgKG1vZCkge1xuICAgICAgICAgICAgICAgICAgICBnZXRNb2R1bGUoZGVwTWFwKS5lbmFibGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEludGVybmFsIG1ldGhvZCB1c2VkIGJ5IGVudmlyb25tZW50IGFkYXB0ZXJzIHRvIGNvbXBsZXRlIGEgbG9hZCBldmVudC5cbiAgICAgICAgICAgICAqIEEgbG9hZCBldmVudCBjb3VsZCBiZSBhIHNjcmlwdCBsb2FkIG9yIGp1c3QgYSBsb2FkIHBhc3MgZnJvbSBhIHN5bmNocm9ub3VzXG4gICAgICAgICAgICAgKiBsb2FkIGNhbGwuXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gbW9kdWxlTmFtZSB0aGUgbmFtZSBvZiB0aGUgbW9kdWxlIHRvIHBvdGVudGlhbGx5IGNvbXBsZXRlLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjb21wbGV0ZUxvYWQ6IGZ1bmN0aW9uIChtb2R1bGVOYW1lKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZvdW5kLCBhcmdzLCBtb2QsXG4gICAgICAgICAgICAgICAgICAgIHNoaW0gPSBnZXRPd24oY29uZmlnLnNoaW0sIG1vZHVsZU5hbWUpIHx8IHt9LFxuICAgICAgICAgICAgICAgICAgICBzaEV4cG9ydHMgPSBzaGltLmV4cG9ydHM7XG5cbiAgICAgICAgICAgICAgICB0YWtlR2xvYmFsUXVldWUoKTtcblxuICAgICAgICAgICAgICAgIHdoaWxlIChkZWZRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJncyA9IGRlZlF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmdzWzBdID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzWzBdID0gbW9kdWxlTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vSWYgYWxyZWFkeSBmb3VuZCBhbiBhbm9ueW1vdXMgbW9kdWxlIGFuZCBib3VuZCBpdFxuICAgICAgICAgICAgICAgICAgICAgICAgLy90byB0aGlzIG5hbWUsIHRoZW4gdGhpcyBpcyBzb21lIG90aGVyIGFub24gbW9kdWxlXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3dhaXRpbmcgZm9yIGl0cyBjb21wbGV0ZUxvYWQgdG8gZmlyZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3VuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFyZ3NbMF0gPT09IG1vZHVsZU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vRm91bmQgbWF0Y2hpbmcgZGVmaW5lIGNhbGwgZm9yIHRoaXMgc2NyaXB0IVxuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgY2FsbEdldE1vZHVsZShhcmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udGV4dC5kZWZRdWV1ZU1hcCA9IHt9O1xuXG4gICAgICAgICAgICAgICAgLy9EbyB0aGlzIGFmdGVyIHRoZSBjeWNsZSBvZiBjYWxsR2V0TW9kdWxlIGluIGNhc2UgdGhlIHJlc3VsdFxuICAgICAgICAgICAgICAgIC8vb2YgdGhvc2UgY2FsbHMvaW5pdCBjYWxscyBjaGFuZ2VzIHRoZSByZWdpc3RyeS5cbiAgICAgICAgICAgICAgICBtb2QgPSBnZXRPd24ocmVnaXN0cnksIG1vZHVsZU5hbWUpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFmb3VuZCAmJiAhaGFzUHJvcChkZWZpbmVkLCBtb2R1bGVOYW1lKSAmJiBtb2QgJiYgIW1vZC5pbml0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5lbmZvcmNlRGVmaW5lICYmICghc2hFeHBvcnRzIHx8ICFnZXRHbG9iYWwoc2hFeHBvcnRzKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNQYXRoRmFsbGJhY2sobW9kdWxlTmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvbkVycm9yKG1ha2VFcnJvcignbm9kZWZpbmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ05vIGRlZmluZSBjYWxsIGZvciAnICsgbW9kdWxlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbW9kdWxlTmFtZV0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vQSBzY3JpcHQgdGhhdCBkb2VzIG5vdCBjYWxsIGRlZmluZSgpLCBzbyBqdXN0IHNpbXVsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3RoZSBjYWxsIGZvciBpdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxHZXRNb2R1bGUoW21vZHVsZU5hbWUsIChzaGltLmRlcHMgfHwgW10pLCBzaGltLmV4cG9ydHNGbl0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY2hlY2tMb2FkZWQoKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29udmVydHMgYSBtb2R1bGUgbmFtZSB0byBhIGZpbGUgcGF0aC4gU3VwcG9ydHMgY2FzZXMgd2hlcmVcbiAgICAgICAgICAgICAqIG1vZHVsZU5hbWUgbWF5IGFjdHVhbGx5IGJlIGp1c3QgYW4gVVJMLlxuICAgICAgICAgICAgICogTm90ZSB0aGF0IGl0ICoqZG9lcyBub3QqKiBjYWxsIG5vcm1hbGl6ZSBvbiB0aGUgbW9kdWxlTmFtZSxcbiAgICAgICAgICAgICAqIGl0IGlzIGFzc3VtZWQgdG8gaGF2ZSBhbHJlYWR5IGJlZW4gbm9ybWFsaXplZC4gVGhpcyBpcyBhblxuICAgICAgICAgICAgICogaW50ZXJuYWwgQVBJLCBub3QgYSBwdWJsaWMgb25lLiBVc2UgdG9VcmwgZm9yIHRoZSBwdWJsaWMgQVBJLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBuYW1lVG9Vcmw6IGZ1bmN0aW9uIChtb2R1bGVOYW1lLCBleHQsIHNraXBFeHQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGF0aHMsIHN5bXMsIGksIHBhcmVudE1vZHVsZSwgdXJsLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRQYXRoLCBidW5kbGVJZCxcbiAgICAgICAgICAgICAgICAgICAgcGtnTWFpbiA9IGdldE93bihjb25maWcucGtncywgbW9kdWxlTmFtZSk7XG5cbiAgICAgICAgICAgICAgICBpZiAocGtnTWFpbikge1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGVOYW1lID0gcGtnTWFpbjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBidW5kbGVJZCA9IGdldE93bihidW5kbGVzTWFwLCBtb2R1bGVOYW1lKTtcblxuICAgICAgICAgICAgICAgIGlmIChidW5kbGVJZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5uYW1lVG9VcmwoYnVuZGxlSWQsIGV4dCwgc2tpcEV4dCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9JZiBhIGNvbG9uIGlzIGluIHRoZSBVUkwsIGl0IGluZGljYXRlcyBhIHByb3RvY29sIGlzIHVzZWQgYW5kIGl0IGlzIGp1c3RcbiAgICAgICAgICAgICAgICAvL2FuIFVSTCB0byBhIGZpbGUsIG9yIGlmIGl0IHN0YXJ0cyB3aXRoIGEgc2xhc2gsIGNvbnRhaW5zIGEgcXVlcnkgYXJnIChpLmUuID8pXG4gICAgICAgICAgICAgICAgLy9vciBlbmRzIHdpdGggLmpzLCB0aGVuIGFzc3VtZSB0aGUgdXNlciBtZWFudCB0byB1c2UgYW4gdXJsIGFuZCBub3QgYSBtb2R1bGUgaWQuXG4gICAgICAgICAgICAgICAgLy9UaGUgc2xhc2ggaXMgaW1wb3J0YW50IGZvciBwcm90b2NvbC1sZXNzIFVSTHMgYXMgd2VsbCBhcyBmdWxsIHBhdGhzLlxuICAgICAgICAgICAgICAgIGlmIChyZXEuanNFeHRSZWdFeHAudGVzdChtb2R1bGVOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAvL0p1c3QgYSBwbGFpbiBwYXRoLCBub3QgbW9kdWxlIG5hbWUgbG9va3VwLCBzbyBqdXN0IHJldHVybiBpdC5cbiAgICAgICAgICAgICAgICAgICAgLy9BZGQgZXh0ZW5zaW9uIGlmIGl0IGlzIGluY2x1ZGVkLiBUaGlzIGlzIGEgYml0IHdvbmt5LCBvbmx5IG5vbi0uanMgdGhpbmdzIHBhc3NcbiAgICAgICAgICAgICAgICAgICAgLy9hbiBleHRlbnNpb24sIHRoaXMgbWV0aG9kIHByb2JhYmx5IG5lZWRzIHRvIGJlIHJld29ya2VkLlxuICAgICAgICAgICAgICAgICAgICB1cmwgPSBtb2R1bGVOYW1lICsgKGV4dCB8fCAnJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy9BIG1vZHVsZSB0aGF0IG5lZWRzIHRvIGJlIGNvbnZlcnRlZCB0byBhIHBhdGguXG4gICAgICAgICAgICAgICAgICAgIHBhdGhzID0gY29uZmlnLnBhdGhzO1xuXG4gICAgICAgICAgICAgICAgICAgIHN5bXMgPSBtb2R1bGVOYW1lLnNwbGl0KCcvJyk7XG4gICAgICAgICAgICAgICAgICAgIC8vRm9yIGVhY2ggbW9kdWxlIG5hbWUgc2VnbWVudCwgc2VlIGlmIHRoZXJlIGlzIGEgcGF0aFxuICAgICAgICAgICAgICAgICAgICAvL3JlZ2lzdGVyZWQgZm9yIGl0LiBTdGFydCB3aXRoIG1vc3Qgc3BlY2lmaWMgbmFtZVxuICAgICAgICAgICAgICAgICAgICAvL2FuZCB3b3JrIHVwIGZyb20gaXQuXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IHN5bXMubGVuZ3RoOyBpID4gMDsgaSAtPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRNb2R1bGUgPSBzeW1zLnNsaWNlKDAsIGkpLmpvaW4oJy8nKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50UGF0aCA9IGdldE93bihwYXRocywgcGFyZW50TW9kdWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnRQYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9JZiBhbiBhcnJheSwgaXQgbWVhbnMgdGhlcmUgYXJlIGEgZmV3IGNob2ljZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9DaG9vc2UgdGhlIG9uZSB0aGF0IGlzIGRlc2lyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNBcnJheShwYXJlbnRQYXRoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRQYXRoID0gcGFyZW50UGF0aFswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ltcy5zcGxpY2UoMCwgaSwgcGFyZW50UGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvL0pvaW4gdGhlIHBhdGggcGFydHMgdG9nZXRoZXIsIHRoZW4gZmlndXJlIG91dCBpZiBiYXNlVXJsIGlzIG5lZWRlZC5cbiAgICAgICAgICAgICAgICAgICAgdXJsID0gc3ltcy5qb2luKCcvJyk7XG4gICAgICAgICAgICAgICAgICAgIHVybCArPSAoZXh0IHx8ICgvXmRhdGFcXDp8XmJsb2JcXDp8XFw/Ly50ZXN0KHVybCkgfHwgc2tpcEV4dCA/ICcnIDogJy5qcycpKTtcbiAgICAgICAgICAgICAgICAgICAgdXJsID0gKHVybC5jaGFyQXQoMCkgPT09ICcvJyB8fCB1cmwubWF0Y2goL15bXFx3XFwrXFwuXFwtXSs6LykgPyAnJyA6IGNvbmZpZy5iYXNlVXJsKSArIHVybDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlnLnVybEFyZ3MgJiYgIS9eYmxvYlxcOi8udGVzdCh1cmwpID9cbiAgICAgICAgICAgICAgICAgICAgICAgdXJsICsgY29uZmlnLnVybEFyZ3MobW9kdWxlTmFtZSwgdXJsKSA6IHVybDtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8vRGVsZWdhdGVzIHRvIHJlcS5sb2FkLiBCcm9rZW4gb3V0IGFzIGEgc2VwYXJhdGUgZnVuY3Rpb24gdG9cbiAgICAgICAgICAgIC8vYWxsb3cgb3ZlcnJpZGluZyBpbiB0aGUgb3B0aW1pemVyLlxuICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24gKGlkLCB1cmwpIHtcbiAgICAgICAgICAgICAgICByZXEubG9hZChjb250ZXh0LCBpZCwgdXJsKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRXhlY3V0ZXMgYSBtb2R1bGUgY2FsbGJhY2sgZnVuY3Rpb24uIEJyb2tlbiBvdXQgYXMgYSBzZXBhcmF0ZSBmdW5jdGlvblxuICAgICAgICAgICAgICogc29sZWx5IHRvIGFsbG93IHRoZSBidWlsZCBzeXN0ZW0gdG8gc2VxdWVuY2UgdGhlIGZpbGVzIGluIHRoZSBidWlsdFxuICAgICAgICAgICAgICogbGF5ZXIgaW4gdGhlIHJpZ2h0IHNlcXVlbmNlLlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGV4ZWNDYjogZnVuY3Rpb24gKG5hbWUsIGNhbGxiYWNrLCBhcmdzLCBleHBvcnRzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KGV4cG9ydHMsIGFyZ3MpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBjYWxsYmFjayBmb3Igc2NyaXB0IGxvYWRzLCB1c2VkIHRvIGNoZWNrIHN0YXR1cyBvZiBsb2FkaW5nLlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2dCB0aGUgZXZlbnQgZnJvbSB0aGUgYnJvd3NlciBmb3IgdGhlIHNjcmlwdFxuICAgICAgICAgICAgICogdGhhdCB3YXMgbG9hZGVkLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBvblNjcmlwdExvYWQ6IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICAvL1VzaW5nIGN1cnJlbnRUYXJnZXQgaW5zdGVhZCBvZiB0YXJnZXQgZm9yIEZpcmVmb3ggMi4wJ3Mgc2FrZS4gTm90XG4gICAgICAgICAgICAgICAgLy9hbGwgb2xkIGJyb3dzZXJzIHdpbGwgYmUgc3VwcG9ydGVkLCBidXQgdGhpcyBvbmUgd2FzIGVhc3kgZW5vdWdoXG4gICAgICAgICAgICAgICAgLy90byBzdXBwb3J0IGFuZCBzdGlsbCBtYWtlcyBzZW5zZS5cbiAgICAgICAgICAgICAgICBpZiAoZXZ0LnR5cGUgPT09ICdsb2FkJyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKHJlYWR5UmVnRXhwLnRlc3QoKGV2dC5jdXJyZW50VGFyZ2V0IHx8IGV2dC5zcmNFbGVtZW50KS5yZWFkeVN0YXRlKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9SZXNldCBpbnRlcmFjdGl2ZSBzY3JpcHQgc28gYSBzY3JpcHQgbm9kZSBpcyBub3QgaGVsZCBvbnRvIGZvclxuICAgICAgICAgICAgICAgICAgICAvL3RvIGxvbmcuXG4gICAgICAgICAgICAgICAgICAgIGludGVyYWN0aXZlU2NyaXB0ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAvL1B1bGwgb3V0IHRoZSBuYW1lIG9mIHRoZSBtb2R1bGUgYW5kIHRoZSBjb250ZXh0LlxuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGdldFNjcmlwdERhdGEoZXZ0KTtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5jb21wbGV0ZUxvYWQoZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDYWxsYmFjayBmb3Igc2NyaXB0IGVycm9ycy5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgb25TY3JpcHRFcnJvcjogZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gZ2V0U2NyaXB0RGF0YShldnQpO1xuICAgICAgICAgICAgICAgIGlmICghaGFzUGF0aEZhbGxiYWNrKGRhdGEuaWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnRzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGVhY2hQcm9wKHJlZ2lzdHJ5LCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LmluZGV4T2YoJ19AcicpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFjaCh2YWx1ZS5kZXBNYXBzLCBmdW5jdGlvbihkZXBNYXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlcE1hcC5pZCA9PT0gZGF0YS5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50cy5wdXNoKGtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uRXJyb3IobWFrZUVycm9yKCdzY3JpcHRlcnJvcicsICdTY3JpcHQgZXJyb3IgZm9yIFwiJyArIGRhdGEuaWQgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHBhcmVudHMubGVuZ3RoID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcIiwgbmVlZGVkIGJ5OiAnICsgcGFyZW50cy5qb2luKCcsICcpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcIicpLCBldnQsIFtkYXRhLmlkXSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBjb250ZXh0LnJlcXVpcmUgPSBjb250ZXh0Lm1ha2VSZXF1aXJlKCk7XG4gICAgICAgIHJldHVybiBjb250ZXh0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1haW4gZW50cnkgcG9pbnQuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgb25seSBhcmd1bWVudCB0byByZXF1aXJlIGlzIGEgc3RyaW5nLCB0aGVuIHRoZSBtb2R1bGUgdGhhdFxuICAgICAqIGlzIHJlcHJlc2VudGVkIGJ5IHRoYXQgc3RyaW5nIGlzIGZldGNoZWQgZm9yIHRoZSBhcHByb3ByaWF0ZSBjb250ZXh0LlxuICAgICAqXG4gICAgICogSWYgdGhlIGZpcnN0IGFyZ3VtZW50IGlzIGFuIGFycmF5LCB0aGVuIGl0IHdpbGwgYmUgdHJlYXRlZCBhcyBhbiBhcnJheVxuICAgICAqIG9mIGRlcGVuZGVuY3kgc3RyaW5nIG5hbWVzIHRvIGZldGNoLiBBbiBvcHRpb25hbCBmdW5jdGlvbiBjYWxsYmFjayBjYW5cbiAgICAgKiBiZSBzcGVjaWZpZWQgdG8gZXhlY3V0ZSB3aGVuIGFsbCBvZiB0aG9zZSBkZXBlbmRlbmNpZXMgYXJlIGF2YWlsYWJsZS5cbiAgICAgKlxuICAgICAqIE1ha2UgYSBsb2NhbCByZXEgdmFyaWFibGUgdG8gaGVscCBDYWphIGNvbXBsaWFuY2UgKGl0IGFzc3VtZXMgdGhpbmdzXG4gICAgICogb24gYSByZXF1aXJlIHRoYXQgYXJlIG5vdCBzdGFuZGFyZGl6ZWQpLCBhbmQgdG8gZ2l2ZSBhIHNob3J0XG4gICAgICogbmFtZSBmb3IgbWluaWZpY2F0aW9uL2xvY2FsIHNjb3BlIHVzZS5cbiAgICAgKi9cbiAgICByZXEgPSByZXF1aXJlanMgPSBmdW5jdGlvbiAoZGVwcywgY2FsbGJhY2ssIGVycmJhY2ssIG9wdGlvbmFsKSB7XG5cbiAgICAgICAgLy9GaW5kIHRoZSByaWdodCBjb250ZXh0LCB1c2UgZGVmYXVsdFxuICAgICAgICB2YXIgY29udGV4dCwgY29uZmlnLFxuICAgICAgICAgICAgY29udGV4dE5hbWUgPSBkZWZDb250ZXh0TmFtZTtcblxuICAgICAgICAvLyBEZXRlcm1pbmUgaWYgaGF2ZSBjb25maWcgb2JqZWN0IGluIHRoZSBjYWxsLlxuICAgICAgICBpZiAoIWlzQXJyYXkoZGVwcykgJiYgdHlwZW9mIGRlcHMgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAvLyBkZXBzIGlzIGEgY29uZmlnIG9iamVjdFxuICAgICAgICAgICAgY29uZmlnID0gZGVwcztcbiAgICAgICAgICAgIGlmIChpc0FycmF5KGNhbGxiYWNrKSkge1xuICAgICAgICAgICAgICAgIC8vIEFkanVzdCBhcmdzIGlmIHRoZXJlIGFyZSBkZXBlbmRlbmNpZXNcbiAgICAgICAgICAgICAgICBkZXBzID0gY2FsbGJhY2s7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBlcnJiYWNrO1xuICAgICAgICAgICAgICAgIGVycmJhY2sgPSBvcHRpb25hbDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZGVwcyA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbmZpZyAmJiBjb25maWcuY29udGV4dCkge1xuICAgICAgICAgICAgY29udGV4dE5hbWUgPSBjb25maWcuY29udGV4dDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRleHQgPSBnZXRPd24oY29udGV4dHMsIGNvbnRleHROYW1lKTtcbiAgICAgICAgaWYgKCFjb250ZXh0KSB7XG4gICAgICAgICAgICBjb250ZXh0ID0gY29udGV4dHNbY29udGV4dE5hbWVdID0gcmVxLnMubmV3Q29udGV4dChjb250ZXh0TmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29uZmlnKSB7XG4gICAgICAgICAgICBjb250ZXh0LmNvbmZpZ3VyZShjb25maWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNvbnRleHQucmVxdWlyZShkZXBzLCBjYWxsYmFjaywgZXJyYmFjayk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFN1cHBvcnQgcmVxdWlyZS5jb25maWcoKSB0byBtYWtlIGl0IGVhc2llciB0byBjb29wZXJhdGUgd2l0aCBvdGhlclxuICAgICAqIEFNRCBsb2FkZXJzIG9uIGdsb2JhbGx5IGFncmVlZCBuYW1lcy5cbiAgICAgKi9cbiAgICByZXEuY29uZmlnID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gcmVxKGNvbmZpZyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGUgc29tZXRoaW5nIGFmdGVyIHRoZSBjdXJyZW50IHRpY2tcbiAgICAgKiBvZiB0aGUgZXZlbnQgbG9vcC4gT3ZlcnJpZGUgZm9yIG90aGVyIGVudnNcbiAgICAgKiB0aGF0IGhhdmUgYSBiZXR0ZXIgc29sdXRpb24gdGhhbiBzZXRUaW1lb3V0LlxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmbiBmdW5jdGlvbiB0byBleGVjdXRlIGxhdGVyLlxuICAgICAqL1xuICAgIHJlcS5uZXh0VGljayA9IHR5cGVvZiBzZXRUaW1lb3V0ICE9PSAndW5kZWZpbmVkJyA/IGZ1bmN0aW9uIChmbikge1xuICAgICAgICBzZXRUaW1lb3V0KGZuLCA0KTtcbiAgICB9IDogZnVuY3Rpb24gKGZuKSB7IGZuKCk7IH07XG5cbiAgICAvKipcbiAgICAgKiBFeHBvcnQgcmVxdWlyZSBhcyBhIGdsb2JhbCwgYnV0IG9ubHkgaWYgaXQgZG9lcyBub3QgYWxyZWFkeSBleGlzdC5cbiAgICAgKi9cbiAgICBpZiAoIXJlcXVpcmUpIHtcbiAgICAgICAgcmVxdWlyZSA9IHJlcTtcbiAgICB9XG5cbiAgICByZXEudmVyc2lvbiA9IHZlcnNpb247XG5cbiAgICAvL1VzZWQgdG8gZmlsdGVyIG91dCBkZXBlbmRlbmNpZXMgdGhhdCBhcmUgYWxyZWFkeSBwYXRocy5cbiAgICByZXEuanNFeHRSZWdFeHAgPSAvXlxcL3w6fFxcP3xcXC5qcyQvO1xuICAgIHJlcS5pc0Jyb3dzZXIgPSBpc0Jyb3dzZXI7XG4gICAgcyA9IHJlcS5zID0ge1xuICAgICAgICBjb250ZXh0czogY29udGV4dHMsXG4gICAgICAgIG5ld0NvbnRleHQ6IG5ld0NvbnRleHRcbiAgICB9O1xuXG4gICAgLy9DcmVhdGUgZGVmYXVsdCBjb250ZXh0LlxuICAgIHJlcSh7fSk7XG5cbiAgICAvL0V4cG9ydHMgc29tZSBjb250ZXh0LXNlbnNpdGl2ZSBtZXRob2RzIG9uIGdsb2JhbCByZXF1aXJlLlxuICAgIGVhY2goW1xuICAgICAgICAndG9VcmwnLFxuICAgICAgICAndW5kZWYnLFxuICAgICAgICAnZGVmaW5lZCcsXG4gICAgICAgICdzcGVjaWZpZWQnXG4gICAgXSwgZnVuY3Rpb24gKHByb3ApIHtcbiAgICAgICAgLy9SZWZlcmVuY2UgZnJvbSBjb250ZXh0cyBpbnN0ZWFkIG9mIGVhcmx5IGJpbmRpbmcgdG8gZGVmYXVsdCBjb250ZXh0LFxuICAgICAgICAvL3NvIHRoYXQgZHVyaW5nIGJ1aWxkcywgdGhlIGxhdGVzdCBpbnN0YW5jZSBvZiB0aGUgZGVmYXVsdCBjb250ZXh0XG4gICAgICAgIC8vd2l0aCBpdHMgY29uZmlnIGdldHMgdXNlZC5cbiAgICAgICAgcmVxW3Byb3BdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGN0eCA9IGNvbnRleHRzW2RlZkNvbnRleHROYW1lXTtcbiAgICAgICAgICAgIHJldHVybiBjdHgucmVxdWlyZVtwcm9wXS5hcHBseShjdHgsIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG4gICAgfSk7XG5cbiAgICBpZiAoaXNCcm93c2VyKSB7XG4gICAgICAgIGhlYWQgPSBzLmhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuICAgICAgICAvL0lmIEJBU0UgdGFnIGlzIGluIHBsYXksIHVzaW5nIGFwcGVuZENoaWxkIGlzIGEgcHJvYmxlbSBmb3IgSUU2LlxuICAgICAgICAvL1doZW4gdGhhdCBicm93c2VyIGRpZXMsIHRoaXMgY2FuIGJlIHJlbW92ZWQuIERldGFpbHMgaW4gdGhpcyBqUXVlcnkgYnVnOlxuICAgICAgICAvL2h0dHA6Ly9kZXYuanF1ZXJ5LmNvbS90aWNrZXQvMjcwOVxuICAgICAgICBiYXNlRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdiYXNlJylbMF07XG4gICAgICAgIGlmIChiYXNlRWxlbWVudCkge1xuICAgICAgICAgICAgaGVhZCA9IHMuaGVhZCA9IGJhc2VFbGVtZW50LnBhcmVudE5vZGU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbnkgZXJyb3JzIHRoYXQgcmVxdWlyZSBleHBsaWNpdGx5IGdlbmVyYXRlcyB3aWxsIGJlIHBhc3NlZCB0byB0aGlzXG4gICAgICogZnVuY3Rpb24uIEludGVyY2VwdC9vdmVycmlkZSBpdCBpZiB5b3Ugd2FudCBjdXN0b20gZXJyb3IgaGFuZGxpbmcuXG4gICAgICogQHBhcmFtIHtFcnJvcn0gZXJyIHRoZSBlcnJvciBvYmplY3QuXG4gICAgICovXG4gICAgcmVxLm9uRXJyb3IgPSBkZWZhdWx0T25FcnJvcjtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgdGhlIG5vZGUgZm9yIHRoZSBsb2FkIGNvbW1hbmQuIE9ubHkgdXNlZCBpbiBicm93c2VyIGVudnMuXG4gICAgICovXG4gICAgcmVxLmNyZWF0ZU5vZGUgPSBmdW5jdGlvbiAoY29uZmlnLCBtb2R1bGVOYW1lLCB1cmwpIHtcbiAgICAgICAgdmFyIG5vZGUgPSBjb25maWcueGh0bWwgP1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCcsICdodG1sOnNjcmlwdCcpIDpcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgICAgbm9kZS50eXBlID0gY29uZmlnLnNjcmlwdFR5cGUgfHwgJ3RleHQvamF2YXNjcmlwdCc7XG4gICAgICAgIG5vZGUuY2hhcnNldCA9ICd1dGYtOCc7XG4gICAgICAgIG5vZGUuYXN5bmMgPSB0cnVlO1xuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRG9lcyB0aGUgcmVxdWVzdCB0byBsb2FkIGEgbW9kdWxlIGZvciB0aGUgYnJvd3NlciBjYXNlLlxuICAgICAqIE1ha2UgdGhpcyBhIHNlcGFyYXRlIGZ1bmN0aW9uIHRvIGFsbG93IG90aGVyIGVudmlyb25tZW50c1xuICAgICAqIHRvIG92ZXJyaWRlIGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHQgdGhlIHJlcXVpcmUgY29udGV4dCB0byBmaW5kIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtb2R1bGVOYW1lIHRoZSBuYW1lIG9mIHRoZSBtb2R1bGUuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHVybCB0aGUgVVJMIHRvIHRoZSBtb2R1bGUuXG4gICAgICovXG4gICAgcmVxLmxvYWQgPSBmdW5jdGlvbiAoY29udGV4dCwgbW9kdWxlTmFtZSwgdXJsKSB7XG4gICAgICAgIHZhciBjb25maWcgPSAoY29udGV4dCAmJiBjb250ZXh0LmNvbmZpZykgfHwge30sXG4gICAgICAgICAgICBub2RlO1xuICAgICAgICBpZiAoaXNCcm93c2VyKSB7XG4gICAgICAgICAgICAvL0luIHRoZSBicm93c2VyIHNvIHVzZSBhIHNjcmlwdCB0YWdcbiAgICAgICAgICAgIG5vZGUgPSByZXEuY3JlYXRlTm9kZShjb25maWcsIG1vZHVsZU5hbWUsIHVybCk7XG5cbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdkYXRhLXJlcXVpcmVjb250ZXh0JywgY29udGV4dC5jb250ZXh0TmFtZSk7XG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnZGF0YS1yZXF1aXJlbW9kdWxlJywgbW9kdWxlTmFtZSk7XG5cbiAgICAgICAgICAgIC8vU2V0IHVwIGxvYWQgbGlzdGVuZXIuIFRlc3QgYXR0YWNoRXZlbnQgZmlyc3QgYmVjYXVzZSBJRTkgaGFzXG4gICAgICAgICAgICAvL2Egc3VidGxlIGlzc3VlIGluIGl0cyBhZGRFdmVudExpc3RlbmVyIGFuZCBzY3JpcHQgb25sb2FkIGZpcmluZ3NcbiAgICAgICAgICAgIC8vdGhhdCBkbyBub3QgbWF0Y2ggdGhlIGJlaGF2aW9yIG9mIGFsbCBvdGhlciBicm93c2VycyB3aXRoXG4gICAgICAgICAgICAvL2FkZEV2ZW50TGlzdGVuZXIgc3VwcG9ydCwgd2hpY2ggZmlyZSB0aGUgb25sb2FkIGV2ZW50IGZvciBhXG4gICAgICAgICAgICAvL3NjcmlwdCByaWdodCBhZnRlciB0aGUgc2NyaXB0IGV4ZWN1dGlvbi4gU2VlOlxuICAgICAgICAgICAgLy9odHRwczovL2Nvbm5lY3QubWljcm9zb2Z0LmNvbS9JRS9mZWVkYmFjay9kZXRhaWxzLzY0ODA1Ny9zY3JpcHQtb25sb2FkLWV2ZW50LWlzLW5vdC1maXJlZC1pbW1lZGlhdGVseS1hZnRlci1zY3JpcHQtZXhlY3V0aW9uXG4gICAgICAgICAgICAvL1VORk9SVFVOQVRFTFkgT3BlcmEgaW1wbGVtZW50cyBhdHRhY2hFdmVudCBidXQgZG9lcyBub3QgZm9sbG93IHRoZSBzY3JpcHRcbiAgICAgICAgICAgIC8vc2NyaXB0IGV4ZWN1dGlvbiBtb2RlLlxuICAgICAgICAgICAgaWYgKG5vZGUuYXR0YWNoRXZlbnQgJiZcbiAgICAgICAgICAgICAgICAgICAgLy9DaGVjayBpZiBub2RlLmF0dGFjaEV2ZW50IGlzIGFydGlmaWNpYWxseSBhZGRlZCBieSBjdXN0b20gc2NyaXB0IG9yXG4gICAgICAgICAgICAgICAgICAgIC8vbmF0aXZlbHkgc3VwcG9ydGVkIGJ5IGJyb3dzZXJcbiAgICAgICAgICAgICAgICAgICAgLy9yZWFkIGh0dHBzOi8vZ2l0aHViLmNvbS9yZXF1aXJlanMvcmVxdWlyZWpzL2lzc3Vlcy8xODdcbiAgICAgICAgICAgICAgICAgICAgLy9pZiB3ZSBjYW4gTk9UIGZpbmQgW25hdGl2ZSBjb2RlXSB0aGVuIGl0IG11c3QgTk9UIG5hdGl2ZWx5IHN1cHBvcnRlZC5cbiAgICAgICAgICAgICAgICAgICAgLy9pbiBJRTgsIG5vZGUuYXR0YWNoRXZlbnQgZG9lcyBub3QgaGF2ZSB0b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIC8vTm90ZSB0aGUgdGVzdCBmb3IgXCJbbmF0aXZlIGNvZGVcIiB3aXRoIG5vIGNsb3NpbmcgYnJhY2UsIHNlZTpcbiAgICAgICAgICAgICAgICAgICAgLy9odHRwczovL2dpdGh1Yi5jb20vcmVxdWlyZWpzL3JlcXVpcmVqcy9pc3N1ZXMvMjczXG4gICAgICAgICAgICAgICAgICAgICEobm9kZS5hdHRhY2hFdmVudC50b1N0cmluZyAmJiBub2RlLmF0dGFjaEV2ZW50LnRvU3RyaW5nKCkuaW5kZXhPZignW25hdGl2ZSBjb2RlJykgPCAwKSAmJlxuICAgICAgICAgICAgICAgICAgICAhaXNPcGVyYSkge1xuICAgICAgICAgICAgICAgIC8vUHJvYmFibHkgSUUuIElFIChhdCBsZWFzdCA2LTgpIGRvIG5vdCBmaXJlXG4gICAgICAgICAgICAgICAgLy9zY3JpcHQgb25sb2FkIHJpZ2h0IGFmdGVyIGV4ZWN1dGluZyB0aGUgc2NyaXB0LCBzb1xuICAgICAgICAgICAgICAgIC8vd2UgY2Fubm90IHRpZSB0aGUgYW5vbnltb3VzIGRlZmluZSBjYWxsIHRvIGEgbmFtZS5cbiAgICAgICAgICAgICAgICAvL0hvd2V2ZXIsIElFIHJlcG9ydHMgdGhlIHNjcmlwdCBhcyBiZWluZyBpbiAnaW50ZXJhY3RpdmUnXG4gICAgICAgICAgICAgICAgLy9yZWFkeVN0YXRlIGF0IHRoZSB0aW1lIG9mIHRoZSBkZWZpbmUgY2FsbC5cbiAgICAgICAgICAgICAgICB1c2VJbnRlcmFjdGl2ZSA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICBub2RlLmF0dGFjaEV2ZW50KCdvbnJlYWR5c3RhdGVjaGFuZ2UnLCBjb250ZXh0Lm9uU2NyaXB0TG9hZCk7XG4gICAgICAgICAgICAgICAgLy9JdCB3b3VsZCBiZSBncmVhdCB0byBhZGQgYW4gZXJyb3IgaGFuZGxlciBoZXJlIHRvIGNhdGNoXG4gICAgICAgICAgICAgICAgLy80MDRzIGluIElFOSsuIEhvd2V2ZXIsIG9ucmVhZHlzdGF0ZWNoYW5nZSB3aWxsIGZpcmUgYmVmb3JlXG4gICAgICAgICAgICAgICAgLy90aGUgZXJyb3IgaGFuZGxlciwgc28gdGhhdCBkb2VzIG5vdCBoZWxwLiBJZiBhZGRFdmVudExpc3RlbmVyXG4gICAgICAgICAgICAgICAgLy9pcyB1c2VkLCB0aGVuIElFIHdpbGwgZmlyZSBlcnJvciBiZWZvcmUgbG9hZCwgYnV0IHdlIGNhbm5vdFxuICAgICAgICAgICAgICAgIC8vdXNlIHRoYXQgcGF0aHdheSBnaXZlbiB0aGUgY29ubmVjdC5taWNyb3NvZnQuY29tIGlzc3VlXG4gICAgICAgICAgICAgICAgLy9tZW50aW9uZWQgYWJvdmUgYWJvdXQgbm90IGRvaW5nIHRoZSAnc2NyaXB0IGV4ZWN1dGUsXG4gICAgICAgICAgICAgICAgLy90aGVuIGZpcmUgdGhlIHNjcmlwdCBsb2FkIGV2ZW50IGxpc3RlbmVyIGJlZm9yZSBleGVjdXRlXG4gICAgICAgICAgICAgICAgLy9uZXh0IHNjcmlwdCcgdGhhdCBvdGhlciBicm93c2VycyBkby5cbiAgICAgICAgICAgICAgICAvL0Jlc3QgaG9wZTogSUUxMCBmaXhlcyB0aGUgaXNzdWVzLFxuICAgICAgICAgICAgICAgIC8vYW5kIHRoZW4gZGVzdHJveXMgYWxsIGluc3RhbGxzIG9mIElFIDYtOS5cbiAgICAgICAgICAgICAgICAvL25vZGUuYXR0YWNoRXZlbnQoJ29uZXJyb3InLCBjb250ZXh0Lm9uU2NyaXB0RXJyb3IpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBjb250ZXh0Lm9uU2NyaXB0TG9hZCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBjb250ZXh0Lm9uU2NyaXB0RXJyb3IsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGUuc3JjID0gdXJsO1xuXG4gICAgICAgICAgICAvL0NhbGxpbmcgb25Ob2RlQ3JlYXRlZCBhZnRlciBhbGwgcHJvcGVydGllcyBvbiB0aGUgbm9kZSBoYXZlIGJlZW5cbiAgICAgICAgICAgIC8vc2V0LCBidXQgYmVmb3JlIGl0IGlzIHBsYWNlZCBpbiB0aGUgRE9NLlxuICAgICAgICAgICAgaWYgKGNvbmZpZy5vbk5vZGVDcmVhdGVkKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLm9uTm9kZUNyZWF0ZWQobm9kZSwgY29uZmlnLCBtb2R1bGVOYW1lLCB1cmwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL0ZvciBzb21lIGNhY2hlIGNhc2VzIGluIElFIDYtOCwgdGhlIHNjcmlwdCBleGVjdXRlcyBiZWZvcmUgdGhlIGVuZFxuICAgICAgICAgICAgLy9vZiB0aGUgYXBwZW5kQ2hpbGQgZXhlY3V0aW9uLCBzbyB0byB0aWUgYW4gYW5vbnltb3VzIGRlZmluZVxuICAgICAgICAgICAgLy9jYWxsIHRvIHRoZSBtb2R1bGUgbmFtZSAod2hpY2ggaXMgc3RvcmVkIG9uIHRoZSBub2RlKSwgaG9sZCBvblxuICAgICAgICAgICAgLy90byBhIHJlZmVyZW5jZSB0byB0aGlzIG5vZGUsIGJ1dCBjbGVhciBhZnRlciB0aGUgRE9NIGluc2VydGlvbi5cbiAgICAgICAgICAgIGN1cnJlbnRseUFkZGluZ1NjcmlwdCA9IG5vZGU7XG4gICAgICAgICAgICBpZiAoYmFzZUVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBoZWFkLmluc2VydEJlZm9yZShub2RlLCBiYXNlRWxlbWVudCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGhlYWQuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyZW50bHlBZGRpbmdTY3JpcHQgPSBudWxsO1xuXG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfSBlbHNlIGlmIChpc1dlYldvcmtlcikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvL0luIGEgd2ViIHdvcmtlciwgdXNlIGltcG9ydFNjcmlwdHMuIFRoaXMgaXMgbm90IGEgdmVyeVxuICAgICAgICAgICAgICAgIC8vZWZmaWNpZW50IHVzZSBvZiBpbXBvcnRTY3JpcHRzLCBpbXBvcnRTY3JpcHRzIHdpbGwgYmxvY2sgdW50aWxcbiAgICAgICAgICAgICAgICAvL2l0cyBzY3JpcHQgaXMgZG93bmxvYWRlZCBhbmQgZXZhbHVhdGVkLiBIb3dldmVyLCBpZiB3ZWIgd29ya2Vyc1xuICAgICAgICAgICAgICAgIC8vYXJlIGluIHBsYXksIHRoZSBleHBlY3RhdGlvbiBpcyB0aGF0IGEgYnVpbGQgaGFzIGJlZW4gZG9uZSBzb1xuICAgICAgICAgICAgICAgIC8vdGhhdCBvbmx5IG9uZSBzY3JpcHQgbmVlZHMgdG8gYmUgbG9hZGVkIGFueXdheS4gVGhpcyBtYXkgbmVlZFxuICAgICAgICAgICAgICAgIC8vdG8gYmUgcmVldmFsdWF0ZWQgaWYgb3RoZXIgdXNlIGNhc2VzIGJlY29tZSBjb21tb24uXG5cbiAgICAgICAgICAgICAgICAvLyBQb3N0IGEgdGFzayB0byB0aGUgZXZlbnQgbG9vcCB0byB3b3JrIGFyb3VuZCBhIGJ1ZyBpbiBXZWJLaXRcbiAgICAgICAgICAgICAgICAvLyB3aGVyZSB0aGUgd29ya2VyIGdldHMgZ2FyYmFnZS1jb2xsZWN0ZWQgYWZ0ZXIgY2FsbGluZ1xuICAgICAgICAgICAgICAgIC8vIGltcG9ydFNjcmlwdHMoKTogaHR0cHM6Ly93ZWJraXQub3JnL2IvMTUzMzE3XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHt9LCAwKTtcbiAgICAgICAgICAgICAgICBpbXBvcnRTY3JpcHRzKHVybCk7XG5cbiAgICAgICAgICAgICAgICAvL0FjY291bnQgZm9yIGFub255bW91cyBtb2R1bGVzXG4gICAgICAgICAgICAgICAgY29udGV4dC5jb21wbGV0ZUxvYWQobW9kdWxlTmFtZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5vbkVycm9yKG1ha2VFcnJvcignaW1wb3J0c2NyaXB0cycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpbXBvcnRTY3JpcHRzIGZhaWxlZCBmb3IgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2R1bGVOYW1lICsgJyBhdCAnICsgdXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbW9kdWxlTmFtZV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBnZXRJbnRlcmFjdGl2ZVNjcmlwdCgpIHtcbiAgICAgICAgaWYgKGludGVyYWN0aXZlU2NyaXB0ICYmIGludGVyYWN0aXZlU2NyaXB0LnJlYWR5U3RhdGUgPT09ICdpbnRlcmFjdGl2ZScpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnRlcmFjdGl2ZVNjcmlwdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGVhY2hSZXZlcnNlKHNjcmlwdHMoKSwgZnVuY3Rpb24gKHNjcmlwdCkge1xuICAgICAgICAgICAgaWYgKHNjcmlwdC5yZWFkeVN0YXRlID09PSAnaW50ZXJhY3RpdmUnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChpbnRlcmFjdGl2ZVNjcmlwdCA9IHNjcmlwdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaW50ZXJhY3RpdmVTY3JpcHQ7XG4gICAgfVxuXG4gICAgLy9Mb29rIGZvciBhIGRhdGEtbWFpbiBzY3JpcHQgYXR0cmlidXRlLCB3aGljaCBjb3VsZCBhbHNvIGFkanVzdCB0aGUgYmFzZVVybC5cbiAgICBpZiAoaXNCcm93c2VyICYmICFjZmcuc2tpcERhdGFNYWluKSB7XG4gICAgICAgIC8vRmlndXJlIG91dCBiYXNlVXJsLiBHZXQgaXQgZnJvbSB0aGUgc2NyaXB0IHRhZyB3aXRoIHJlcXVpcmUuanMgaW4gaXQuXG4gICAgICAgIGVhY2hSZXZlcnNlKHNjcmlwdHMoKSwgZnVuY3Rpb24gKHNjcmlwdCkge1xuICAgICAgICAgICAgLy9TZXQgdGhlICdoZWFkJyB3aGVyZSB3ZSBjYW4gYXBwZW5kIGNoaWxkcmVuIGJ5XG4gICAgICAgICAgICAvL3VzaW5nIHRoZSBzY3JpcHQncyBwYXJlbnQuXG4gICAgICAgICAgICBpZiAoIWhlYWQpIHtcbiAgICAgICAgICAgICAgICBoZWFkID0gc2NyaXB0LnBhcmVudE5vZGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vTG9vayBmb3IgYSBkYXRhLW1haW4gYXR0cmlidXRlIHRvIHNldCBtYWluIHNjcmlwdCBmb3IgdGhlIHBhZ2VcbiAgICAgICAgICAgIC8vdG8gbG9hZC4gSWYgaXQgaXMgdGhlcmUsIHRoZSBwYXRoIHRvIGRhdGEgbWFpbiBiZWNvbWVzIHRoZVxuICAgICAgICAgICAgLy9iYXNlVXJsLCBpZiBpdCBpcyBub3QgYWxyZWFkeSBzZXQuXG4gICAgICAgICAgICBkYXRhTWFpbiA9IHNjcmlwdC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbWFpbicpO1xuICAgICAgICAgICAgaWYgKGRhdGFNYWluKSB7XG4gICAgICAgICAgICAgICAgLy9QcmVzZXJ2ZSBkYXRhTWFpbiBpbiBjYXNlIGl0IGlzIGEgcGF0aCAoaS5lLiBjb250YWlucyAnPycpXG4gICAgICAgICAgICAgICAgbWFpblNjcmlwdCA9IGRhdGFNYWluO1xuXG4gICAgICAgICAgICAgICAgLy9TZXQgZmluYWwgYmFzZVVybCBpZiB0aGVyZSBpcyBub3QgYWxyZWFkeSBhbiBleHBsaWNpdCBvbmUsXG4gICAgICAgICAgICAgICAgLy9idXQgb25seSBkbyBzbyBpZiB0aGUgZGF0YS1tYWluIHZhbHVlIGlzIG5vdCBhIGxvYWRlciBwbHVnaW5cbiAgICAgICAgICAgICAgICAvL21vZHVsZSBJRC5cbiAgICAgICAgICAgICAgICBpZiAoIWNmZy5iYXNlVXJsICYmIG1haW5TY3JpcHQuaW5kZXhPZignIScpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAvL1B1bGwgb2ZmIHRoZSBkaXJlY3Rvcnkgb2YgZGF0YS1tYWluIGZvciB1c2UgYXMgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vYmFzZVVybC5cbiAgICAgICAgICAgICAgICAgICAgc3JjID0gbWFpblNjcmlwdC5zcGxpdCgnLycpO1xuICAgICAgICAgICAgICAgICAgICBtYWluU2NyaXB0ID0gc3JjLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBzdWJQYXRoID0gc3JjLmxlbmd0aCA/IHNyYy5qb2luKCcvJykgICsgJy8nIDogJy4vJztcblxuICAgICAgICAgICAgICAgICAgICBjZmcuYmFzZVVybCA9IHN1YlBhdGg7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9TdHJpcCBvZmYgYW55IHRyYWlsaW5nIC5qcyBzaW5jZSBtYWluU2NyaXB0IGlzIG5vd1xuICAgICAgICAgICAgICAgIC8vbGlrZSBhIG1vZHVsZSBuYW1lLlxuICAgICAgICAgICAgICAgIG1haW5TY3JpcHQgPSBtYWluU2NyaXB0LnJlcGxhY2UoanNTdWZmaXhSZWdFeHAsICcnKTtcblxuICAgICAgICAgICAgICAgIC8vSWYgbWFpblNjcmlwdCBpcyBzdGlsbCBhIHBhdGgsIGZhbGwgYmFjayB0byBkYXRhTWFpblxuICAgICAgICAgICAgICAgIGlmIChyZXEuanNFeHRSZWdFeHAudGVzdChtYWluU2NyaXB0KSkge1xuICAgICAgICAgICAgICAgICAgICBtYWluU2NyaXB0ID0gZGF0YU1haW47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9QdXQgdGhlIGRhdGEtbWFpbiBzY3JpcHQgaW4gdGhlIGZpbGVzIHRvIGxvYWQuXG4gICAgICAgICAgICAgICAgY2ZnLmRlcHMgPSBjZmcuZGVwcyA/IGNmZy5kZXBzLmNvbmNhdChtYWluU2NyaXB0KSA6IFttYWluU2NyaXB0XTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZnVuY3Rpb24gdGhhdCBoYW5kbGVzIGRlZmluaXRpb25zIG9mIG1vZHVsZXMuIERpZmZlcnMgZnJvbVxuICAgICAqIHJlcXVpcmUoKSBpbiB0aGF0IGEgc3RyaW5nIGZvciB0aGUgbW9kdWxlIHNob3VsZCBiZSB0aGUgZmlyc3QgYXJndW1lbnQsXG4gICAgICogYW5kIHRoZSBmdW5jdGlvbiB0byBleGVjdXRlIGFmdGVyIGRlcGVuZGVuY2llcyBhcmUgbG9hZGVkIHNob3VsZFxuICAgICAqIHJldHVybiBhIHZhbHVlIHRvIGRlZmluZSB0aGUgbW9kdWxlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGZpcnN0IGFyZ3VtZW50J3NcbiAgICAgKiBuYW1lLlxuICAgICAqL1xuICAgIGRlZmluZSA9IGZ1bmN0aW9uIChuYW1lLCBkZXBzLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgbm9kZSwgY29udGV4dDtcblxuICAgICAgICAvL0FsbG93IGZvciBhbm9ueW1vdXMgbW9kdWxlc1xuICAgICAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAvL0FkanVzdCBhcmdzIGFwcHJvcHJpYXRlbHlcbiAgICAgICAgICAgIGNhbGxiYWNrID0gZGVwcztcbiAgICAgICAgICAgIGRlcHMgPSBuYW1lO1xuICAgICAgICAgICAgbmFtZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvL1RoaXMgbW9kdWxlIG1heSBub3QgaGF2ZSBkZXBlbmRlbmNpZXNcbiAgICAgICAgaWYgKCFpc0FycmF5KGRlcHMpKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IGRlcHM7XG4gICAgICAgICAgICBkZXBzID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vSWYgbm8gbmFtZSwgYW5kIGNhbGxiYWNrIGlzIGEgZnVuY3Rpb24sIHRoZW4gZmlndXJlIG91dCBpZiBpdCBhXG4gICAgICAgIC8vQ29tbW9uSlMgdGhpbmcgd2l0aCBkZXBlbmRlbmNpZXMuXG4gICAgICAgIGlmICghZGVwcyAmJiBpc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgICAgICAgICAgZGVwcyA9IFtdO1xuICAgICAgICAgICAgLy9SZW1vdmUgY29tbWVudHMgZnJvbSB0aGUgY2FsbGJhY2sgc3RyaW5nLFxuICAgICAgICAgICAgLy9sb29rIGZvciByZXF1aXJlIGNhbGxzLCBhbmQgcHVsbCB0aGVtIGludG8gdGhlIGRlcGVuZGVuY2llcyxcbiAgICAgICAgICAgIC8vYnV0IG9ubHkgaWYgdGhlcmUgYXJlIGZ1bmN0aW9uIGFyZ3MuXG4gICAgICAgICAgICBpZiAoY2FsbGJhY2subGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgLnRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoY29tbWVudFJlZ0V4cCwgY29tbWVudFJlcGxhY2UpXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKGNqc1JlcXVpcmVSZWdFeHAsIGZ1bmN0aW9uIChtYXRjaCwgZGVwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXBzLnB1c2goZGVwKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvL01heSBiZSBhIENvbW1vbkpTIHRoaW5nIGV2ZW4gd2l0aG91dCByZXF1aXJlIGNhbGxzLCBidXQgc3RpbGxcbiAgICAgICAgICAgICAgICAvL2NvdWxkIHVzZSBleHBvcnRzLCBhbmQgbW9kdWxlLiBBdm9pZCBkb2luZyBleHBvcnRzIGFuZCBtb2R1bGVcbiAgICAgICAgICAgICAgICAvL3dvcmsgdGhvdWdoIGlmIGl0IGp1c3QgbmVlZHMgcmVxdWlyZS5cbiAgICAgICAgICAgICAgICAvL1JFUVVJUkVTIHRoZSBmdW5jdGlvbiB0byBleHBlY3QgdGhlIENvbW1vbkpTIHZhcmlhYmxlcyBpbiB0aGVcbiAgICAgICAgICAgICAgICAvL29yZGVyIGxpc3RlZCBiZWxvdy5cbiAgICAgICAgICAgICAgICBkZXBzID0gKGNhbGxiYWNrLmxlbmd0aCA9PT0gMSA/IFsncmVxdWlyZSddIDogWydyZXF1aXJlJywgJ2V4cG9ydHMnLCAnbW9kdWxlJ10pLmNvbmNhdChkZXBzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vSWYgaW4gSUUgNi04IGFuZCBoaXQgYW4gYW5vbnltb3VzIGRlZmluZSgpIGNhbGwsIGRvIHRoZSBpbnRlcmFjdGl2ZVxuICAgICAgICAvL3dvcmsuXG4gICAgICAgIGlmICh1c2VJbnRlcmFjdGl2ZSkge1xuICAgICAgICAgICAgbm9kZSA9IGN1cnJlbnRseUFkZGluZ1NjcmlwdCB8fCBnZXRJbnRlcmFjdGl2ZVNjcmlwdCgpO1xuICAgICAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG5vZGUuZ2V0QXR0cmlidXRlKCdkYXRhLXJlcXVpcmVtb2R1bGUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udGV4dCA9IGNvbnRleHRzW25vZGUuZ2V0QXR0cmlidXRlKCdkYXRhLXJlcXVpcmVjb250ZXh0JyldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy9BbHdheXMgc2F2ZSBvZmYgZXZhbHVhdGluZyB0aGUgZGVmIGNhbGwgdW50aWwgdGhlIHNjcmlwdCBvbmxvYWQgaGFuZGxlci5cbiAgICAgICAgLy9UaGlzIGFsbG93cyBtdWx0aXBsZSBtb2R1bGVzIHRvIGJlIGluIGEgZmlsZSB3aXRob3V0IHByZW1hdHVyZWx5XG4gICAgICAgIC8vdHJhY2luZyBkZXBlbmRlbmNpZXMsIGFuZCBhbGxvd3MgZm9yIGFub255bW91cyBtb2R1bGUgc3VwcG9ydCxcbiAgICAgICAgLy93aGVyZSB0aGUgbW9kdWxlIG5hbWUgaXMgbm90IGtub3duIHVudGlsIHRoZSBzY3JpcHQgb25sb2FkIGV2ZW50XG4gICAgICAgIC8vb2NjdXJzLiBJZiBubyBjb250ZXh0LCB1c2UgdGhlIGdsb2JhbCBxdWV1ZSwgYW5kIGdldCBpdCBwcm9jZXNzZWRcbiAgICAgICAgLy9pbiB0aGUgb25zY3JpcHQgbG9hZCBjYWxsYmFjay5cbiAgICAgICAgaWYgKGNvbnRleHQpIHtcbiAgICAgICAgICAgIGNvbnRleHQuZGVmUXVldWUucHVzaChbbmFtZSwgZGVwcywgY2FsbGJhY2tdKTtcbiAgICAgICAgICAgIGNvbnRleHQuZGVmUXVldWVNYXBbbmFtZV0gPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2xvYmFsRGVmUXVldWUucHVzaChbbmFtZSwgZGVwcywgY2FsbGJhY2tdKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBkZWZpbmUuYW1kID0ge1xuICAgICAgICBqUXVlcnk6IHRydWVcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRXhlY3V0ZXMgdGhlIHRleHQuIE5vcm1hbGx5IGp1c3QgdXNlcyBldmFsLCBidXQgY2FuIGJlIG1vZGlmaWVkXG4gICAgICogdG8gdXNlIGEgYmV0dGVyLCBlbnZpcm9ubWVudC1zcGVjaWZpYyBjYWxsLiBPbmx5IHVzZWQgZm9yIHRyYW5zcGlsaW5nXG4gICAgICogbG9hZGVyIHBsdWdpbnMsIG5vdCBmb3IgcGxhaW4gSlMgbW9kdWxlcy5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCB0aGUgdGV4dCB0byBleGVjdXRlL2V2YWx1YXRlLlxuICAgICAqL1xuICAgIHJlcS5leGVjID0gZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgICAgLypqc2xpbnQgZXZpbDogdHJ1ZSAqL1xuICAgICAgICByZXR1cm4gZXZhbCh0ZXh0KTtcbiAgICB9O1xuXG4gICAgLy9TZXQgdXAgd2l0aCBjb25maWcgaW5mby5cbiAgICByZXEoY2ZnKTtcbn0odGhpcywgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IHNldFRpbWVvdXQpKSk7Il19
