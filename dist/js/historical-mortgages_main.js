let chart;!function(e,t,n){function i(e,t){return typeof e===t}var r=[],a=[],o={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){a.push({name:e,fn:t,options:n})},addAsyncTest:function(e){a.push({name:null,fn:e})}},s=function(){};s.prototype=o,(s=new s).addTest("devicemotion","DeviceMotionEvent"in e),s.addTest("deviceorientation","DeviceOrientationEvent"in e);var c=t.documentElement,u="svg"===c.nodeName.toLowerCase();(function(){var e,t,n,o,c,u;for(var d in a)if(a.hasOwnProperty(d)){if(e=[],(t=a[d]).name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(o=i(t.fn,"function")?t.fn():t.fn,c=0;c<e.length;c++)1===(u=e[c].split(".")).length?s[u[0]]=o:(!s[u[0]]||s[u[0]]instanceof Boolean||(s[u[0]]=new Boolean(s[u[0]])),s[u[0]][u[1]]=o),r.push((o?"":"no-")+u.join("-"))}})(),function(e){var t=c.className,n=s._config.classPrefix||"";if(u&&(t=t.baseVal),s._config.enableJSClass){var i=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(i,"$1"+n+"js$2")}s._config.enableClasses&&(t+=" "+n+e.join(" "+n),u?c.className.baseVal=t:c.className=t)}(r),delete o.addTest,delete o.addAsyncTest;for(var d=0;d<s._q.length;d++)s._q[d]();e.Modernizr=s}(window,document),Modernizr.devicemotion?console.log("supported"):console.log("not supported");let annotation1={id:"home-price-anno",shapes:[{point:{xAxis:0,yAxis:0,x:Date.UTC(1981,3,1),y:208e3},type:"circle",r:4}]};$(".chart-area").parent().css("overflow","visible"),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("TwoStep",[],t):"object"==typeof exports?exports.TwoStep=t():e.TwoStep=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return[40,32,39,34].indexOf(e)>-1?1:[37,38,33].indexOf(e)>-1?-1:0},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.instances=[]}return i(e,[{key:"register",value:function(e){return this.instances.push(e),this}},{key:"getActiveInstances",value:function(){return this.instances.filter(function(e){return e.enabled})}}]),e}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=i(n(0)),o=new(i(n(1)).default),s=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),0===t.elements.length)throw"Elements array is empty";if(t.narrative){if(t.elements.length!==t.narrative.length)throw"Elements and narrative are different lengths";if(!1==!t.narrative.filter(function(e){return"function"!=typeof e}).length)throw"Narrative contains non-functions";this.narrative=t.narrative}this.onChange=t.onChange,this.elements=Array.prototype.slice.call(t.elements),this.enabled=!0,this.offset=t.hasOwnProperty("offset")?t.offset:{down:"50%",up:"0"};var n=this.setWaypoints(this.elements,function(e){if("down"==e){var t=r.elements.indexOf(this.element);t!==this.index&&r.goTo(t,!1,e)}},t.continuous,this.offset.down),i=this.setWaypoints(this.elements,function(e){if("up"==e){var t=r.elements.indexOf(this.element);t!==this.index&&r.goTo(t,!1,e)}},t.continuous,this.offset.up);if(this.waypoints=[n,i],t.stick){if(void 0===$().fixTo)throw"fixTo is not present on the page, or may have been loaded in before jQuery.";$(t.stick).wrapInner('<div class="two-step-sticky-wrapper"></div>'),this.sticky=$(t.stick).find(".two-step-sticky-wrapper").fixTo($(t.stick))}this.setKeyboard(),this.index=-1,o.register(this),setInterval(function(){Waypoint.refreshAll()},1e3);var r=this}return r(e,[{key:"goTo",value:function(e,t,n){var i=this;if(!1===this.isValidIndex(e))throw e+" is not a valid index. Must be between 0 and "+(this.elements.length-1)+" (inclusive).";this.narrative&&this.narrative[e]({element:this.elements[e],index:e,direction:n}),this.onChange&&this.onChange({element:this.elements[e],index:e,direction:n}),this.index=e;var r=$(this.elements).eq(e);return $(this.elements).removeClass("active"),r.addClass("active"),!0===t?(this.disableWaypoints(),$("html, body").animate({scrollTop:r.offset().top-100},500).promise().then(function(){i.enableWaypoints()})):$.Deferred().resolve()}},{key:"setWaypoints",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments[3];return e.map(function(e){return new Waypoint({element:e,handler:t,continuous:n,offset:i})})}},{key:"setKeyboard",value:function(){var e=this;$(window).keydown(function(t){if(e.disabled)return!0;var n=(0,a.default)(t.keyCode),i=o.getActiveInstances();if(0!==n&&t.target===document.body&&!1===t.metaKey&&1===i.length){var r=e.index+n;return!e.isValidIndex(r)||(e.goTo(r,!0),t.preventDefault(),!1)}})}},{key:"isValidIndex",value:function(e){return e<this.elements.length&&e>-1}},{key:"disableWaypoints",value:function(){[].concat.apply([],this.waypoints).forEach(function(e){return e.disable()})}},{key:"enableWaypoints",value:function(){[].concat.apply([],this.waypoints).forEach(function(e){return e.enable()})}},{key:"disable",value:function(){this.disabled=!0,this.enabled=!1,this.disableWaypoints(),this.sticky&&this.sticky.fixTo("stop")}},{key:"enable",value:function(){this.disabled=!1,this.enabled=!0,this.enableWaypoints(),this.sticky&&this.sticky.fixTo("start")}}]),e}();t.default=s,e.exports=t.default}])});var ts=new TwoStep({elements:document.querySelectorAll(".parent .narrative-item"),onChange:function(e){console.log("Item "+e.index)},stick:document.querySelector(".parent .sticky-outer"),narrative:[function(e){setTimeout(function(){chart.addAnnotation(annotation1)},0)},function(e){$(".chart-title").text("Median home price 1981-present, in 2021 dollars"),$(".chart-source").text("Census Bureau and Department of Housing and Urban Development via FRED"),chart.removeAnnotation("home-price-anno"),chart.update({chart:{type:"area"},data:{csvURL:"https://raw.githubusercontent.com/kschmidt2/grow-historical-mortgages/master/data/median-home-price.csv",endRow:164},series:[{animation:{defer:0}}],yAxis:{min:1e5,max:4e5},xAxis:{min:Date.UTC(1980,0,1),max:Date.UTC(2021,10,1)}})},function(e){$(".chart-title").text("30-year, fixed-rate mortgage average, 1981-present"),$(".chart-source").text("Freddie Mac via FRED")},function(e){$(".chart-title").text("Monthly payment on a $205,000 home"),$(".chart-source").text("Freddie Mac via FRED (mortgage rate)")},function(e){$(".chart-title").text("Monthly payment on the median home"),$(".chart-source").text("Census Bureau and Department of Housing and Urban Development via FRED (home price); Freddie Mac via FRED (mortgage rate)")},function(e){$(".chart-title").text("Total interest paid on a median home at the average rate"),$(".chart-source").text("Census Bureau and Department of Housing and Urban Development via FRED (home price); Freddie Mac via FRED (mortgage rate)")}],offset:{up:"-10%",down:"100%"}}),requirejs,require,define;function drawHighcharts(){chart=Highcharts.chart("chart-container",{chart:{type:"line",styledMode:!0,spacingBottom:25,spacingRight:25,spacingLeft:10,spacingTop:20,animation:{duration:1e3},ignoreHiddenSeries:!1},title:{text:null},data:{csvURL:"https://raw.githubusercontent.com/kschmidt2/grow-historical-mortgages/master/data/median-home-price.csv",endRow:1},annotations:[{}],plotOptions:{series:{animation:{duration:1e3},lineWidth:1,states:{hover:{enabled:!1}},clip:!1,marker:{enabled:!1,symbol:"circle",fillColor:"#ffffff",states:{hover:{fillColor:"#ffffff"}}}}},legend:{enabled:!1},xAxis:{labels:{style:{whiteSpace:"nowrap"}},tickLength:5,min:Date.UTC(1980,0,1),max:Date.UTC(2021,10,1)},yAxis:{title:!1,labels:{useHTML:!0,overflow:"allow"},min:1e5,max:4e5,tickAmount:4,tickLength:25,tickPosition:"inside"},credits:{enabled:!1},tooltip:{enabled:!1},defs:{gradient0:{tagName:"linearGradient",id:"gradient-0",x1:0,y1:0,x2:0,y2:1,children:[{tagName:"stop",offset:0},{tagName:"stop",offset:1}]}},responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{align:"left",x:-18},tooltip:{enabled:!1}}}]}})}Highcharts.setOptions({lang:{thousandsSep:","}}),"complete"===document.readyState||"interactive"===document.readyState?drawHighcharts():document.addEventListener("DOMContentLoaded",drawHighcharts),function(global,setTimeout){var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.6",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;function commentReplace(e,t){return t||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){var n;if(e)for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}function eachReverse(e,t){var n;if(e)for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,i){return t&&eachProp(t,function(t,r){!n&&hasProp(e,r)||(!i||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[r]=t:(e[r]||(e[r]={}),mixin(e[r],t,n,i)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,i){var r=new Error(t+"\nhttps://requirejs.org/docs/errors.html#"+e);return r.requireType=e,r.requireModules=i,n&&(r.originalError=n),r}if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,i){var r,a,o=defContextName;return isArray(e)||"string"==typeof e||(a=e,isArray(t)?(e=t,t=n,n=i):e=[]),a&&a.context&&(o=a.context),(r=getOwn(contexts,o))||(r=contexts[o]=req.s.newContext(o)),a&&r.configure(a),r.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=void 0!==setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var i=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return i.type=e.scriptType||"text/javascript",i.charset="utf-8",i.async=!0,i},req.load=function(e,t,n){var i,r=e&&e.config||{};if(isBrowser)return(i=req.createNode(r,t,n)).setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),!i.attachEvent||i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0||isOpera?(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)),i.src=n,r.onNodeCreated&&r.onNodeCreated(i,r,t,n),currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{setTimeout(function(){},0),importScripts(n),e.completeLoad(t)}catch(i){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,i,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){if(head||(head=e.parentNode),dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,n){var i,r;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(i=currentlyAddingScript||getInteractiveScript())&&(e||(e=i.getAttribute("data-requiremodule")),r=contexts[i.getAttribute("data-requirecontext")]),r?(r.defQueue.push([e,t,n]),r.defQueueMap[e]=!0):globalDefQueue.push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}function newContext(e){var t,n,i,r,a,o={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},s={},c={},u={},d=[],l={},f={},p={},h=1,m=1;function g(e,t,n){var i,r,a,s,c,u,d,l,f,p,h=t&&t.split("/"),m=o.map,g=m&&m["*"];if(e&&(u=(e=e.split("/")).length-1,o.nodeIdCompat&&jsSuffixRegExp.test(e[u])&&(e[u]=e[u].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&h&&(e=h.slice(0,h.length-1).concat(e)),function(e){var t,n;for(t=0;t<e.length;t++)if("."===(n=e[t]))e.splice(t,1),t-=1;else if(".."===n){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}(e),e=e.join("/")),n&&m&&(h||g)){e:for(a=(r=e.split("/")).length;a>0;a-=1){if(c=r.slice(0,a).join("/"),h)for(s=h.length;s>0;s-=1)if((i=getOwn(m,h.slice(0,s).join("/")))&&(i=getOwn(i,c))){d=i,l=a;break e}!f&&g&&getOwn(g,c)&&(f=getOwn(g,c),p=a)}!d&&f&&(d=f,l=p),d&&(r.splice(0,l,d),e=r.join("/"))}return getOwn(o.pkgs,e)||e}function v(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===i.contextName)return t.parentNode.removeChild(t),!0})}function x(e){var t=getOwn(o.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),i.require.undef(e),i.makeRequire(null,{skipMap:!0})([e]),!0}function b(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function y(e,t,n,r){var a,o,s,c,u=null,d=t?t.name:null,f=e,p=!0,v="";return e||(p=!1,e="_@r"+(h+=1)),u=(c=b(e))[0],e=c[1],u&&(u=g(u,d,r),o=getOwn(l,u)),e&&(u?v=n?e:o&&o.normalize?o.normalize(e,function(e){return g(e,d,r)}):-1===e.indexOf("!")?g(e,d,r):e:(u=(c=b(v=g(e,d,r)))[0],v=c[1],n=!0,a=i.nameToUrl(v))),{prefix:u,name:v,parentMap:t,unnormalized:!!(s=!u||o||n?"":"_unnormalized"+(m+=1)),url:a,originalName:f,isDefine:p,id:(u?u+"!"+v:v)+s}}function w(e){var t=e.id,n=getOwn(s,t);return n||(n=s[t]=new i.Module(e)),n}function E(e,t,n){var i=e.id,r=getOwn(s,i);!hasProp(l,i)||r&&!r.defineEmitComplete?(r=w(e)).error&&"error"===t?n(r.error):r.on(t,n):"defined"===t&&n(l[i])}function q(e,t){var n=e.requireModules,i=!1;t?t(e):(each(n,function(t){var n=getOwn(s,t);n&&(n.error=e,n.events.error&&(i=!0,n.emit("error",e)))}),i||req.onError(e))}function k(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(i.defQueueMap[t]=!0),d.push(e)}),globalDefQueue=[])}function M(e){delete s[e],delete c[e]}function S(){var e,n,r=1e3*o.waitSeconds,u=r&&i.startTime+r<(new Date).getTime(),d=[],f=[],p=!1,h=!0;if(!t){if(t=!0,eachProp(c,function(e){var t=e.map,i=t.id;if(e.enabled&&(t.isDefine||f.push(e),!e.error))if(!e.inited&&u)x(i)?(n=!0,p=!0):(d.push(i),v(i));else if(!e.inited&&e.fetched&&t.isDefine&&(p=!0,!t.prefix))return h=!1}),u&&d.length)return(e=makeError("timeout","Load timeout for modules: "+d,null,d)).contextName=i.contextName,q(e);h&&each(f,function(e){!function e(t,n,i){var r=t.map.id;t.error?t.emit("error",t.error):(n[r]=!0,each(t.depMaps,function(r,a){var o=r.id,c=getOwn(s,o);!c||t.depMatched[a]||i[o]||(getOwn(n,o)?(t.defineDep(a,l[o]),t.check()):e(c,n,i))}),i[r]=!0)}(e,{},{})}),u&&!n||!p||!isBrowser&&!isWebWorker||a||(a=setTimeout(function(){a=0,S()},50)),t=!1}}function O(e){hasProp(l,e[0])||w(y(e[0],null,!0)).init(e[1],e[2])}function T(e,t,n,i){e.detachEvent&&!isOpera?i&&e.detachEvent(i,t):e.removeEventListener(n,t,!1)}function C(e){var t=e.currentTarget||e.srcElement;return T(t,i.onScriptLoad,"load","onreadystatechange"),T(t,i.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function j(){var e;for(k();d.length;){if(null===(e=d.shift())[0])return q(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));O(e)}i.defQueueMap={}}return r={require:function(e){return e.require?e.require:e.require=i.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?l[e.map.id]=e.exports:e.exports=l[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(o.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},(n=function(e){this.events=getOwn(u,e.id)||{},this.map=e,this.shim=getOwn(o.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0}).prototype={init:function(e,t,n,i){i=i||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,i.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();i.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;f[e]||(f[e]=!0,i.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,r=this.depExports,a=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{a=i.execCb(n,o,r,a)}catch(t){e=t}else a=i.execCb(n,o,r,a);if(this.map.isDefine&&void 0===a&&((t=this.module)?a=t.exports:this.usingExports&&(a=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",q(this.error=e)}else a=o;if(this.exports=a,this.map.isDefine&&!this.ignore&&(l[n]=a,req.onResourceLoad)){var s=[];each(this.depMaps,function(e){s.push(e.normalizedMap||e)}),req.onResourceLoad(i,this.map,s)}M(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(i.defQueueMap,n)||this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,n=y(e.prefix);this.depMaps.push(n),E(n,"defined",bind(this,function(n){var r,a,c,u=getOwn(p,this.map.id),d=this.map.name,l=this.map.parentMap?this.map.parentMap.name:null,f=i.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(n.normalize&&(d=n.normalize(d,function(e){return g(e,l,!0)})||""),E(a=y(e.prefix+"!"+d,this.map.parentMap,!0),"defined",bind(this,function(e){this.map.normalizedMap=a,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),void((c=getOwn(s,a.id))&&(this.depMaps.push(a),this.events.error&&c.on("error",bind(this,function(e){this.emit("error",e)})),c.enable()))):u?(this.map.url=i.nameToUrl(u),void this.load()):((r=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})})).error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(s,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&M(e.map.id)}),q(e)}),r.fromText=bind(this,function(n,a){var s=e.name,c=y(s),u=useInteractive;a&&(n=a),u&&(useInteractive=!1),w(c),hasProp(o.config,t)&&(o.config[s]=o.config[t]);try{req.exec(n)}catch(e){return q(makeError("fromtexteval","fromText eval for "+t+" failed: "+e,e,[t]))}u&&(useInteractive=!0),this.depMaps.push(c),i.completeLoad(s),f([s],r)}),void n.load(e.name,f,r,o))})),i.enable(n,this),this.pluginMaps[n.id]=n},enable:function(){c[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,a,o;if("string"==typeof e){if(e=y(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,o=getOwn(r,e.id))return void(this.depExports[t]=o(this));this.depCount+=1,E(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?E(e,"error",bind(this,this.errback)):this.events.error&&E(e,"error",bind(this,function(e){this.emit("error",e)}))}n=e.id,a=s[n],hasProp(r,n)||!a||a.enabled||i.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(s,e.id);t&&!t.enabled&&i.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},(i={config:o,contextName:e,registry:s,defined:l,urlFetched:f,defQueue:d,defQueueMap:{},Module:n,makeModuleMap:y,nextTick:req.nextTick,onError:q,configure:function(e){if(e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs){var t=e.urlArgs;e.urlArgs=function(e,n){return(-1===n.indexOf("?")?"?":"&")+t}}var n=o.shim,r={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){r[t]?(o[t]||(o[t]={}),mixin(o[t],e,!0,!0)):o[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(p[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=i.makeShimExports(e)),n[t]=e}),o.shim=n),e.packages&&each(e.packages,function(e){var t;t=(e="string"==typeof e?{name:e}:e).name,e.location&&(o.paths[t]=e.location),o.pkgs[t]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(s,function(e,t){e.inited||e.map.unnormalized||(e.map=y(t,null,!0))}),(e.deps||e.callback)&&i.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}},makeRequire:function(t,n){function a(o,c,u){var d,f;return n.enableBuildCallback&&c&&isFunction(c)&&(c.__requireJsBuild=!0),"string"==typeof o?isFunction(c)?q(makeError("requireargs","Invalid require call"),u):t&&hasProp(r,o)?r[o](s[t.id]):req.get?req.get(i,o,t,a):(d=y(o,t,!1,!0).id,hasProp(l,d)?l[d]:q(makeError("notloaded",'Module name "'+d+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(j(),i.nextTick(function(){j(),(f=w(y(null,t))).skipMap=n.skipMap,f.init(o,c,u,{enabled:!0}),S()}),a)}return n=n||{},mixin(a,{isBrowser:isBrowser,toUrl:function(e){var n,r=e.lastIndexOf("."),a=e.split("/")[0];return-1!==r&&(!("."===a||".."===a)||r>1)&&(n=e.substring(r,e.length),e=e.substring(0,r)),i.nameToUrl(g(e,t&&t.id,!0),n,!0)},defined:function(e){return hasProp(l,y(e,t,!1,!0).id)},specified:function(e){return e=y(e,t,!1,!0).id,hasProp(l,e)||hasProp(s,e)}}),t||(a.undef=function(e){k();var n=y(e,t,!0),r=getOwn(s,e);r.undefed=!0,v(e),delete l[e],delete f[n.url],delete u[e],eachReverse(d,function(t,n){t[0]===e&&d.splice(n,1)}),delete i.defQueueMap[e],r&&(r.events.defined&&(u[e]=r.events),M(e))}),a},enable:function(e){getOwn(s,e.id)&&w(e).enable()},completeLoad:function(e){var t,n,r,a=getOwn(o.shim,e)||{},c=a.exports;for(k();d.length;){if(null===(n=d.shift())[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);O(n)}if(i.defQueueMap={},r=getOwn(s,e),!t&&!hasProp(l,e)&&r&&!r.inited){if(!(!o.enforceDefine||c&&getGlobal(c)))return x(e)?void 0:q(makeError("nodefine","No define call for "+e,null,[e]));O([e,a.deps||[],a.exportsFn])}S()},nameToUrl:function(e,t,n){var r,a,s,c,u,d,l=getOwn(o.pkgs,e);if(l&&(e=l),d=getOwn(p,e))return i.nameToUrl(d,t,n);if(req.jsExtRegExp.test(e))c=e+(t||"");else{for(r=o.paths,s=(a=e.split("/")).length;s>0;s-=1)if(u=getOwn(r,a.slice(0,s).join("/"))){isArray(u)&&(u=u[0]),a.splice(0,s,u);break}c=a.join("/"),c=("/"===(c+=t||(/^data\:|^blob\:|\?/.test(c)||n?"":".js")).charAt(0)||c.match(/^[\w\+\.\-]+:/)?"":o.baseUrl)+c}return o.urlArgs&&!/^blob\:/.test(c)?c+o.urlArgs(e,c):c},load:function(e,t){req.load(i,e,t)},execCb:function(e,t,n,i){return t.apply(i,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=C(e);i.completeLoad(t.id)}},onScriptError:function(e){var t=C(e);if(!x(t.id)){var n=[];return eachProp(s,function(e,i){0!==i.indexOf("_@r")&&each(e.depMaps,function(e){if(e.id===t.id)return n.push(i),!0})}),q(makeError("scripterror",'Script error for "'+t.id+(n.length?'", needed by: '+n.join(", "):'"'),e,[t.id]))}}}).require=i.makeRequire(),i}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e}),interactiveScript)}}(this,"undefined"==typeof setTimeout?void 0:setTimeout);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJyZXF1aXJlLmpzIl0sIm5hbWVzIjpbImNoYXJ0IiwiZSIsIm4iLCJvIiwicyIsInQiLCJmIiwibCIsIl92ZXJzaW9uIiwiX2NvbmZpZyIsImNsYXNzUHJlZml4IiwiZW5hYmxlQ2xhc3NlcyIsImVuYWJsZUpTQ2xhc3MiLCJ1c2VQcmVmaXhlcyIsIl9xIiwib24iLCJ0aGlzIiwic2V0VGltZW91dCIsImFkZFRlc3QiLCJwdXNoIiwibmFtZSIsImZuIiwib3B0aW9ucyIsImFkZEFzeW5jVGVzdCIsIk1vZGVybml6ciIsInByb3RvdHlwZSIsInIiLCJkb2N1bWVudEVsZW1lbnQiLCJjIiwibm9kZU5hbWUiLCJ0b0xvd2VyQ2FzZSIsImEiLCJpIiwiaGFzT3duUHJvcGVydHkiLCJhbGlhc2VzIiwibGVuZ3RoIiwic3BsaXQiLCJCb29sZWFuIiwiam9pbiIsImNsYXNzTmFtZSIsImJhc2VWYWwiLCJSZWdFeHAiLCJyZXBsYWNlIiwiZCIsIndpbmRvdyIsImRvY3VtZW50IiwiZGV2aWNlbW90aW9uIiwiY29uc29sZSIsImxvZyIsImFubm90YXRpb24xIiwiaWQiLCJzaGFwZXMiLCJwb2ludCIsInhBeGlzIiwieUF4aXMiLCJ4IiwiRGF0ZSIsIlVUQyIsInkiLCJ0eXBlIiwiJCIsInBhcmVudCIsImNzcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJUd29TdGVwIiwiY2FsbCIsIm0iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInAiLCJ2YWx1ZSIsImluZGV4T2YiLCJ3cml0YWJsZSIsImtleSIsIlR5cGVFcnJvciIsImluc3RhbmNlcyIsImZpbHRlciIsImVuYWJsZWQiLCJlbGVtZW50cyIsIm5hcnJhdGl2ZSIsIm9uQ2hhbmdlIiwiQXJyYXkiLCJzbGljZSIsIm9mZnNldCIsImRvd24iLCJ1cCIsInNldFdheXBvaW50cyIsImVsZW1lbnQiLCJpbmRleCIsImdvVG8iLCJjb250aW51b3VzIiwid2F5cG9pbnRzIiwic3RpY2siLCJmaXhUbyIsIndyYXBJbm5lciIsInN0aWNreSIsImZpbmQiLCJzZXRLZXlib2FyZCIsInJlZ2lzdGVyIiwic2V0SW50ZXJ2YWwiLCJXYXlwb2ludCIsInJlZnJlc2hBbGwiLCJpc1ZhbGlkSW5kZXgiLCJkaXJlY3Rpb24iLCJlcSIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJkaXNhYmxlV2F5cG9pbnRzIiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsInRvcCIsInByb21pc2UiLCJ0aGVuIiwiZW5hYmxlV2F5cG9pbnRzIiwiRGVmZXJyZWQiLCJyZXNvbHZlIiwiYXJndW1lbnRzIiwibWFwIiwiaGFuZGxlciIsImtleWRvd24iLCJkaXNhYmxlZCIsImtleUNvZGUiLCJnZXRBY3RpdmVJbnN0YW5jZXMiLCJ0YXJnZXQiLCJib2R5IiwibWV0YUtleSIsInByZXZlbnREZWZhdWx0IiwiY29uY2F0IiwiYXBwbHkiLCJmb3JFYWNoIiwiZGlzYWJsZSIsImVuYWJsZSIsInRzIiwicXVlcnlTZWxlY3RvckFsbCIsImV2ZW50IiwicXVlcnlTZWxlY3RvciIsImFkZEFubm90YXRpb24iLCJ0ZXh0IiwicmVtb3ZlQW5ub3RhdGlvbiIsInVwZGF0ZSIsImRhdGEiLCJjc3ZVUkwiLCJlbmRSb3ciLCJzZXJpZXMiLCJhbmltYXRpb24iLCJkZWZlciIsIm1pbiIsIm1heCIsInJlcXVpcmVqcyIsInJlcXVpcmUiLCJkcmF3SGlnaGNoYXJ0cyIsIkhpZ2hjaGFydHMiLCJzdHlsZWRNb2RlIiwic3BhY2luZ0JvdHRvbSIsInNwYWNpbmdSaWdodCIsInNwYWNpbmdMZWZ0Iiwic3BhY2luZ1RvcCIsImR1cmF0aW9uIiwiaWdub3JlSGlkZGVuU2VyaWVzIiwidGl0bGUiLCJhbm5vdGF0aW9ucyIsInBsb3RPcHRpb25zIiwibGluZVdpZHRoIiwic3RhdGVzIiwiaG92ZXIiLCJjbGlwIiwibWFya2VyIiwic3ltYm9sIiwiZmlsbENvbG9yIiwibGVnZW5kIiwibGFiZWxzIiwic3R5bGUiLCJ3aGl0ZVNwYWNlIiwidGlja0xlbmd0aCIsInVzZUhUTUwiLCJvdmVyZmxvdyIsInRpY2tBbW91bnQiLCJ0aWNrUG9zaXRpb24iLCJjcmVkaXRzIiwidG9vbHRpcCIsImRlZnMiLCJncmFkaWVudDAiLCJ0YWdOYW1lIiwieDEiLCJ5MSIsIngyIiwieTIiLCJjaGlsZHJlbiIsInJlc3BvbnNpdmUiLCJydWxlcyIsImNvbmRpdGlvbiIsIm1heFdpZHRoIiwiY2hhcnRPcHRpb25zIiwiYWxpZ24iLCJzZXRPcHRpb25zIiwibGFuZyIsInRob3VzYW5kc1NlcCIsInJlYWR5U3RhdGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZ2xvYmFsIiwicmVxIiwiaGVhZCIsImJhc2VFbGVtZW50IiwiZGF0YU1haW4iLCJzcmMiLCJpbnRlcmFjdGl2ZVNjcmlwdCIsImN1cnJlbnRseUFkZGluZ1NjcmlwdCIsIm1haW5TY3JpcHQiLCJzdWJQYXRoIiwidmVyc2lvbiIsImNvbW1lbnRSZWdFeHAiLCJjanNSZXF1aXJlUmVnRXhwIiwianNTdWZmaXhSZWdFeHAiLCJjdXJyRGlyUmVnRXhwIiwib3AiLCJvc3RyaW5nIiwidG9TdHJpbmciLCJoYXNPd24iLCJpc0Jyb3dzZXIiLCJuYXZpZ2F0b3IiLCJpc1dlYldvcmtlciIsImltcG9ydFNjcmlwdHMiLCJyZWFkeVJlZ0V4cCIsInBsYXRmb3JtIiwiZGVmQ29udGV4dE5hbWUiLCJpc09wZXJhIiwib3BlcmEiLCJjb250ZXh0cyIsImNmZyIsImdsb2JhbERlZlF1ZXVlIiwidXNlSW50ZXJhY3RpdmUiLCJjb21tZW50UmVwbGFjZSIsIm1hdGNoIiwic2luZ2xlUHJlZml4IiwiaXNGdW5jdGlvbiIsIml0IiwiaXNBcnJheSIsImVhY2giLCJhcnkiLCJmdW5jIiwiZWFjaFJldmVyc2UiLCJoYXNQcm9wIiwib2JqIiwicHJvcCIsImdldE93biIsImVhY2hQcm9wIiwibWl4aW4iLCJzb3VyY2UiLCJmb3JjZSIsImRlZXBTdHJpbmdNaXhpbiIsImJpbmQiLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJkZWZhdWx0T25FcnJvciIsImVyciIsImdldEdsb2JhbCIsImciLCJwYXJ0IiwibWFrZUVycm9yIiwibXNnIiwicmVxdWlyZU1vZHVsZXMiLCJFcnJvciIsInJlcXVpcmVUeXBlIiwib3JpZ2luYWxFcnJvciIsInVuZGVmaW5lZCIsImRlcHMiLCJjYWxsYmFjayIsImVycmJhY2siLCJvcHRpb25hbCIsImNvbnRleHQiLCJjb25maWciLCJjb250ZXh0TmFtZSIsIm5ld0NvbnRleHQiLCJjb25maWd1cmUiLCJuZXh0VGljayIsImpzRXh0UmVnRXhwIiwiY3R4IiwicGFyZW50Tm9kZSIsIm9uRXJyb3IiLCJjcmVhdGVOb2RlIiwibW9kdWxlTmFtZSIsInVybCIsIm5vZGUiLCJ4aHRtbCIsImNyZWF0ZUVsZW1lbnROUyIsImNyZWF0ZUVsZW1lbnQiLCJzY3JpcHRUeXBlIiwiY2hhcnNldCIsImFzeW5jIiwibG9hZCIsInNldEF0dHJpYnV0ZSIsImF0dGFjaEV2ZW50Iiwib25TY3JpcHRMb2FkIiwib25TY3JpcHRFcnJvciIsIm9uTm9kZUNyZWF0ZWQiLCJpbnNlcnRCZWZvcmUiLCJhcHBlbmRDaGlsZCIsImNvbXBsZXRlTG9hZCIsInNraXBEYXRhTWFpbiIsInNjcmlwdCIsImdldEF0dHJpYnV0ZSIsImJhc2VVcmwiLCJwb3AiLCJ0ZXN0IiwiZGVwIiwiZ2V0SW50ZXJhY3RpdmVTY3JpcHQiLCJkZWZRdWV1ZSIsImRlZlF1ZXVlTWFwIiwialF1ZXJ5IiwiZXhlYyIsImV2YWwiLCJpbkNoZWNrTG9hZGVkIiwiTW9kdWxlIiwiaGFuZGxlcnMiLCJjaGVja0xvYWRlZFRpbWVvdXRJZCIsIndhaXRTZWNvbmRzIiwicGF0aHMiLCJidW5kbGVzIiwicGtncyIsInNoaW0iLCJyZWdpc3RyeSIsImVuYWJsZWRSZWdpc3RyeSIsInVuZGVmRXZlbnRzIiwiZGVmaW5lZCIsInVybEZldGNoZWQiLCJidW5kbGVzTWFwIiwicmVxdWlyZUNvdW50ZXIiLCJ1bm5vcm1hbGl6ZWRDb3VudGVyIiwibm9ybWFsaXplIiwiYmFzZU5hbWUiLCJhcHBseU1hcCIsIm1hcFZhbHVlIiwibmFtZVBhcnRzIiwiaiIsIm5hbWVTZWdtZW50IiwibGFzdEluZGV4IiwiZm91bmRNYXAiLCJmb3VuZEkiLCJmb3VuZFN0YXJNYXAiLCJzdGFySSIsImJhc2VQYXJ0cyIsInN0YXJNYXAiLCJub2RlSWRDb21wYXQiLCJjaGFyQXQiLCJzcGxpY2UiLCJ0cmltRG90cyIsIm91dGVyTG9vcCIsInJlbW92ZVNjcmlwdCIsInNjcmlwdE5vZGUiLCJyZW1vdmVDaGlsZCIsImhhc1BhdGhGYWxsYmFjayIsInBhdGhDb25maWciLCJzaGlmdCIsInVuZGVmIiwibWFrZVJlcXVpcmUiLCJza2lwTWFwIiwic3BsaXRQcmVmaXgiLCJwcmVmaXgiLCJzdWJzdHJpbmciLCJtYWtlTW9kdWxlTWFwIiwicGFyZW50TW9kdWxlTWFwIiwiaXNOb3JtYWxpemVkIiwicGx1Z2luTW9kdWxlIiwic3VmZml4IiwicGFyZW50TmFtZSIsIm9yaWdpbmFsTmFtZSIsImlzRGVmaW5lIiwibm9ybWFsaXplZE5hbWUiLCJuYW1lVG9VcmwiLCJwYXJlbnRNYXAiLCJ1bm5vcm1hbGl6ZWQiLCJnZXRNb2R1bGUiLCJkZXBNYXAiLCJtb2QiLCJkZWZpbmVFbWl0Q29tcGxldGUiLCJlcnJvciIsImlkcyIsIm5vdGlmaWVkIiwiZXZlbnRzIiwiZW1pdCIsInRha2VHbG9iYWxRdWV1ZSIsInF1ZXVlSXRlbSIsImNsZWFuUmVnaXN0cnkiLCJjaGVja0xvYWRlZCIsInVzaW5nUGF0aEZhbGxiYWNrIiwid2FpdEludGVydmFsIiwiZXhwaXJlZCIsInN0YXJ0VGltZSIsImdldFRpbWUiLCJub0xvYWRzIiwicmVxQ2FsbHMiLCJzdGlsbExvYWRpbmciLCJuZWVkQ3ljbGVDaGVjayIsIm1vZElkIiwiaW5pdGVkIiwiZmV0Y2hlZCIsImJyZWFrQ3ljbGUiLCJ0cmFjZWQiLCJwcm9jZXNzZWQiLCJkZXBNYXBzIiwiZGVwSWQiLCJkZXBNYXRjaGVkIiwiZGVmaW5lRGVwIiwiY2hlY2siLCJjYWxsR2V0TW9kdWxlIiwiYXJncyIsImluaXQiLCJyZW1vdmVMaXN0ZW5lciIsImllTmFtZSIsImRldGFjaEV2ZW50IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImdldFNjcmlwdERhdGEiLCJldnQiLCJjdXJyZW50VGFyZ2V0Iiwic3JjRWxlbWVudCIsImludGFrZURlZmluZXMiLCJ1c2luZ0V4cG9ydHMiLCJ1cmkiLCJkZXBFeHBvcnRzIiwicGx1Z2luTWFwcyIsImRlcENvdW50IiwiZmFjdG9yeSIsImlnbm9yZSIsImZldGNoIiwiY2FsbFBsdWdpbiIsImVuYWJsZUJ1aWxkQ2FsbGJhY2siLCJlbmFibGluZyIsImNqc01vZHVsZSIsImRlZmluaW5nIiwiZXhlY0NiIiwicmVxdWlyZU1hcCIsIm9uUmVzb3VyY2VMb2FkIiwicmVzTG9hZE1hcHMiLCJub3JtYWxpemVkTWFwIiwiZGVmaW5lRW1pdHRlZCIsInBsdWdpbk1hcCIsInBsdWdpbiIsIm5vcm1hbGl6ZWRNb2QiLCJidW5kbGVJZCIsImxvY2FsUmVxdWlyZSIsImZyb21UZXh0IiwidGV4dEFsdCIsIm1vZHVsZU1hcCIsImhhc0ludGVyYWN0aXZlIiwidW5kZWZlZCIsImNiIiwiY2JzIiwidXJsQXJncyIsIm9ianMiLCJ2IiwiZXhwb3J0c0ZuIiwibWFrZVNoaW1FeHBvcnRzIiwicGFja2FnZXMiLCJwa2dPYmoiLCJsb2NhdGlvbiIsIm1haW4iLCJyZXQiLCJyZWxNYXAiLCJyZXF1aXJlTW9kIiwiX19yZXF1aXJlSnNCdWlsZCIsInRvVXJsIiwibW9kdWxlTmFtZVBsdXNFeHQiLCJleHQiLCJsYXN0SW5kZXhPZiIsInNlZ21lbnQiLCJzcGVjaWZpZWQiLCJmb3VuZCIsInNoRXhwb3J0cyIsImVuZm9yY2VEZWZpbmUiLCJza2lwRXh0Iiwic3ltcyIsInBhcmVudFBhdGgiLCJwa2dNYWluIiwicGFyZW50cyJdLCJtYXBwaW5ncyI6IkFBa0JBLElBQUFBLE9BVkEsU0FBQUMs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QUE4UCxFQUFBMkksRUFBQTlWLEdBQ0EsT0FBQW1OLEVBQUExSSxNQUFBekUsRUFBQThWLElBU0FqSCxhQUFBLFNBQUF3SCxHQUlBLEdBQUEsU0FBQUEsRUFBQXpXLE1BQ0EySyxZQUFBaUYsTUFBQTZHLEVBQUFDLGVBQUFELEVBQUFFLFlBQUF6TixZQUFBLENBR0FRLGtCQUFBLEtBR0EsSUFBQWpFLEVBQUErUSxFQUFBQyxHQUNBL0ksRUFBQTRCLGFBQUE3SixFQUFBbEcsTUFPQTJQLGNBQUEsU0FBQXVILEdBQ0EsSUFBQWhSLEVBQUErUSxFQUFBQyxHQUNBLElBQUE5RCxFQUFBbE4sRUFBQWxHLElBQUEsQ0FDQSxJQUFBK2EsRUFBQSxHQVdBLE9BVkFwTyxTQUFBMkUsRUFBQSxTQUFBMVAsRUFBQUcsR0FDQSxJQUFBQSxFQUFBRixRQUFBLFFBQ0FzSyxLQUFBdkssRUFBQXlVLFFBQUEsU0FBQTNCLEdBQ0EsR0FBQUEsRUFBQTFVLEtBQUFrRyxFQUFBbEcsR0FFQSxPQURBK2EsRUFBQTljLEtBQUE4RCxJQUNBLE1BS0E2TSxFQUFBcEIsVUFBQSxjQUFBLHFCQUFBdEgsRUFBQWxHLElBQ0ErYSxFQUFBOWIsT0FDQSxpQkFBQThiLEVBQUEzYixLQUFBLE1BQ0EsS0FBQThYLEVBQUEsQ0FBQWhSLEVBQUFsRyxVQUtBMkcsUUFBQXdILEVBQUFxRixjQUNBckYsRUFzUEEsU0FBQW9DLHVCQUNBLE9BQUFwRyxtQkFBQSxnQkFBQUEsa0JBQUFSLFdBQ0FRLG1CQUdBbUMsWUFBQVcsVUFBQSxTQUFBZ0QsR0FDQSxHQUFBLGdCQUFBQSxFQUFBdEcsV0FDQSxPQUFBUSxrQkFBQThGLElBR0E5RixvQkF4OERBLENBc2xFQXJNLEtBQUEsb0JBQUFDLGdCQUFBK1AsRUFBQS9QIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBhZGRzIHNvY2lhbCBjbGFzcyB0byBnZXQgc29jaWFsIGNoYXJ0XG4vLyBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjaGFydC1hcmVhXCIpO1xuLy8gZm9yKHZhciBpID0gMDsgaSA8IGVsZW1lbnQubGVuZ3RoOyBpKyspXG4vLyB7XG4vLyAgICAgZWxlbWVudFtpXS5jbGFzc05hbWUgKz0gXCIgc29jaWFsXCI7XG4vLyB9XG4vKiEgbW9kZXJuaXpyIDMuNi4wIChDdXN0b20gQnVpbGQpIHwgTUlUICpcbiAqIGh0dHBzOi8vbW9kZXJuaXpyLmNvbS9kb3dubG9hZC8/LWRldmljZW1vdGlvbl9kZXZpY2VvcmllbnRhdGlvbi1zZXRjbGFzc2VzICEqL1xuICFmdW5jdGlvbihlLG4sbyl7ZnVuY3Rpb24gcyhlLG4pe3JldHVybiB0eXBlb2YgZT09PW59ZnVuY3Rpb24gYSgpe3ZhciBlLG4sbyxhLGksbCxyO2Zvcih2YXIgYyBpbiBmKWlmKGYuaGFzT3duUHJvcGVydHkoYykpe2lmKGU9W10sbj1mW2NdLG4ubmFtZSYmKGUucHVzaChuLm5hbWUudG9Mb3dlckNhc2UoKSksbi5vcHRpb25zJiZuLm9wdGlvbnMuYWxpYXNlcyYmbi5vcHRpb25zLmFsaWFzZXMubGVuZ3RoKSlmb3Iobz0wO288bi5vcHRpb25zLmFsaWFzZXMubGVuZ3RoO28rKyllLnB1c2gobi5vcHRpb25zLmFsaWFzZXNbb10udG9Mb3dlckNhc2UoKSk7Zm9yKGE9cyhuLmZuLFwiZnVuY3Rpb25cIik/bi5mbigpOm4uZm4saT0wO2k8ZS5sZW5ndGg7aSsrKWw9ZVtpXSxyPWwuc3BsaXQoXCIuXCIpLDE9PT1yLmxlbmd0aD9Nb2Rlcm5penJbclswXV09YTooIU1vZGVybml6cltyWzBdXXx8TW9kZXJuaXpyW3JbMF1daW5zdGFuY2VvZiBCb29sZWFufHwoTW9kZXJuaXpyW3JbMF1dPW5ldyBCb29sZWFuKE1vZGVybml6cltyWzBdXSkpLE1vZGVybml6cltyWzBdXVtyWzFdXT1hKSx0LnB1c2goKGE/XCJcIjpcIm5vLVwiKStyLmpvaW4oXCItXCIpKX19ZnVuY3Rpb24gaShlKXt2YXIgbj1yLmNsYXNzTmFtZSxvPU1vZGVybml6ci5fY29uZmlnLmNsYXNzUHJlZml4fHxcIlwiO2lmKGMmJihuPW4uYmFzZVZhbCksTW9kZXJuaXpyLl9jb25maWcuZW5hYmxlSlNDbGFzcyl7dmFyIHM9bmV3IFJlZ0V4cChcIihefFxcXFxzKVwiK28rXCJuby1qcyhcXFxcc3wkKVwiKTtuPW4ucmVwbGFjZShzLFwiJDFcIitvK1wianMkMlwiKX1Nb2Rlcm5penIuX2NvbmZpZy5lbmFibGVDbGFzc2VzJiYobis9XCIgXCIrbytlLmpvaW4oXCIgXCIrbyksYz9yLmNsYXNzTmFtZS5iYXNlVmFsPW46ci5jbGFzc05hbWU9bil9dmFyIHQ9W10sZj1bXSxsPXtfdmVyc2lvbjpcIjMuNi4wXCIsX2NvbmZpZzp7Y2xhc3NQcmVmaXg6XCJcIixlbmFibGVDbGFzc2VzOiEwLGVuYWJsZUpTQ2xhc3M6ITAsdXNlUHJlZml4ZXM6ITB9LF9xOltdLG9uOmZ1bmN0aW9uKGUsbil7dmFyIG89dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bihvW2VdKX0sMCl9LGFkZFRlc3Q6ZnVuY3Rpb24oZSxuLG8pe2YucHVzaCh7bmFtZTplLGZuOm4sb3B0aW9uczpvfSl9LGFkZEFzeW5jVGVzdDpmdW5jdGlvbihlKXtmLnB1c2goe25hbWU6bnVsbCxmbjplfSl9fSxNb2Rlcm5penI9ZnVuY3Rpb24oKXt9O01vZGVybml6ci5wcm90b3R5cGU9bCxNb2Rlcm5penI9bmV3IE1vZGVybml6cixNb2Rlcm5penIuYWRkVGVzdChcImRldmljZW1vdGlvblwiLFwiRGV2aWNlTW90aW9uRXZlbnRcImluIGUpLE1vZGVybml6ci5hZGRUZXN0KFwiZGV2aWNlb3JpZW50YXRpb25cIixcIkRldmljZU9yaWVudGF0aW9uRXZlbnRcImluIGUpO3ZhciByPW4uZG9jdW1lbnRFbGVtZW50LGM9XCJzdmdcIj09PXIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTthKCksaSh0KSxkZWxldGUgbC5hZGRUZXN0LGRlbGV0ZSBsLmFkZEFzeW5jVGVzdDtmb3IodmFyIGQ9MDtkPE1vZGVybml6ci5fcS5sZW5ndGg7ZCsrKU1vZGVybml6ci5fcVtkXSgpO2UuTW9kZXJuaXpyPU1vZGVybml6cn0od2luZG93LGRvY3VtZW50KTtcblxuICBpZiAoTW9kZXJuaXpyLmRldmljZW1vdGlvbikge1xuICAgIC8vIHN1cHBvcnRlZFxuICAgICAgICBjb25zb2xlLmxvZyhcInN1cHBvcnRlZFwiKVxuICB9IGVsc2Uge1xuICAgIC8vIG5vdC1zdXBwb3J0ZWRcbiAgICBjb25zb2xlLmxvZyhcIm5vdCBzdXBwb3J0ZWRcIilcbiAgfVxuXG4gIGxldCBjaGFydDtcblxuICBsZXQgYW5ub3RhdGlvbjEgPSB7XG4gICAgaWQ6ICdob21lLXByaWNlLWFubm8nLFxuICAgIHNoYXBlczogW3tcbiAgICAgICAgcG9pbnQ6IHtcbiAgICAgICAgICAgIHhBeGlzOiAwLFxuICAgICAgICAgICAgeUF4aXM6IDAsXG4gICAgICAgICAgICB4OiBEYXRlLlVUQygxOTgxLCAzLCAxKSxcbiAgICAgICAgICAgIHk6IDIwODAwMCBcbiAgICAgICAgfSxcbiAgICAgICAgdHlwZTogJ2NpcmNsZScsXG4gICAgICAgIHI6IDRcbiAgICB9XSxcbn07XG5cblxuJCggXCIuY2hhcnQtYXJlYVwiICkucGFyZW50KCkuY3NzKCBcIm92ZXJmbG93XCIsIFwidmlzaWJsZVwiIClcbiFmdW5jdGlvbihlLHQpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPXQoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiVHdvU3RlcFwiLFtdLHQpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuVHdvU3RlcD10KCk6ZS5Ud29TdGVwPXQoKX0odGhpcyxmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGkpe2lmKG5baV0pcmV0dXJuIG5baV0uZXhwb3J0czt2YXIgbz1uW2ldPXtpOmksbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gZVtpXS5jYWxsKG8uZXhwb3J0cyxvLG8uZXhwb3J0cyx0KSxvLmw9ITAsby5leHBvcnRzfXZhciBuPXt9O3JldHVybiB0Lm09ZSx0LmM9bix0Lmk9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LHQuZD1mdW5jdGlvbihlLG4saSl7dC5vKGUsbil8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4se2NvbmZpZ3VyYWJsZTohMSxlbnVtZXJhYmxlOiEwLGdldDppfSl9LHQubj1mdW5jdGlvbihlKXt2YXIgbj1lJiZlLl9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gZS5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiBlfTtyZXR1cm4gdC5kKG4sXCJhXCIsbiksbn0sdC5vPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfSx0LnA9XCJcIix0KHQucz0yKX0oW2Z1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKGUpe3ZhciB0PVs0MCwzMiwzOSwzNF0sbj1bMzcsMzgsMzNdO3JldHVybiB0LmluZGV4T2YoZSk+LTE/MTpuLmluZGV4T2YoZSk+LTE/LTE6MH1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSx0LmRlZmF1bHQ9aSxlLmV4cG9ydHM9dC5kZWZhdWx0fSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaShlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciBpPXRbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24odCxuLGkpe3JldHVybiBuJiZlKHQucHJvdG90eXBlLG4pLGkmJmUodCxpKSx0fX0oKSxyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe2kodGhpcyxlKSx0aGlzLmluc3RhbmNlcz1bXX1yZXR1cm4gbyhlLFt7a2V5OlwicmVnaXN0ZXJcIix2YWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5pbnN0YW5jZXMucHVzaChlKSx0aGlzfX0se2tleTpcImdldEFjdGl2ZUluc3RhbmNlc1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5zdGFuY2VzLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gZS5lbmFibGVkfSl9fV0pLGV9KCk7dC5kZWZhdWx0PXIsZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fWZ1bmN0aW9uIG8oZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgaT10W25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKHQsbixpKXtyZXR1cm4gbiYmZSh0LnByb3RvdHlwZSxuKSxpJiZlKHQsaSksdH19KCkscz1uKDApLGE9aShzKSx1PW4oMSksZj1pKHUpLGw9bmV3IGYuZGVmYXVsdCxjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXtmdW5jdGlvbiBuKGUpe2lmKFwidXBcIj09ZSl7dmFyIHQ9YS5lbGVtZW50cy5pbmRleE9mKHRoaXMuZWxlbWVudCk7dCE9PXRoaXMuaW5kZXgmJmEuZ29Ubyh0LCExLGUpfX1mdW5jdGlvbiBpKGUpe2lmKFwiZG93blwiPT1lKXt2YXIgdD1hLmVsZW1lbnRzLmluZGV4T2YodGhpcy5lbGVtZW50KTt0IT09dGhpcy5pbmRleCYmYS5nb1RvKHQsITEsZSl9fWlmKG8odGhpcyxlKSwwPT09dC5lbGVtZW50cy5sZW5ndGgpdGhyb3dcIkVsZW1lbnRzIGFycmF5IGlzIGVtcHR5XCI7aWYodC5uYXJyYXRpdmUpe2lmKHQuZWxlbWVudHMubGVuZ3RoIT09dC5uYXJyYXRpdmUubGVuZ3RoKXRocm93XCJFbGVtZW50cyBhbmQgbmFycmF0aXZlIGFyZSBkaWZmZXJlbnQgbGVuZ3Roc1wiO2lmKCF0Lm5hcnJhdGl2ZS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJmdW5jdGlvblwiIT10eXBlb2YgZX0pLmxlbmd0aD09PSExKXRocm93XCJOYXJyYXRpdmUgY29udGFpbnMgbm9uLWZ1bmN0aW9uc1wiO3RoaXMubmFycmF0aXZlPXQubmFycmF0aXZlfXRoaXMub25DaGFuZ2U9dC5vbkNoYW5nZSx0aGlzLmVsZW1lbnRzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQuZWxlbWVudHMpLHRoaXMuZW5hYmxlZD0hMCx0aGlzLm9mZnNldD10Lmhhc093blByb3BlcnR5KFwib2Zmc2V0XCIpP3Qub2Zmc2V0Ontkb3duOlwiNTAlXCIsdXA6XCIwXCJ9O3ZhciByPXRoaXMuc2V0V2F5cG9pbnRzKHRoaXMuZWxlbWVudHMsaSx0LmNvbnRpbnVvdXMsdGhpcy5vZmZzZXQuZG93bikscz10aGlzLnNldFdheXBvaW50cyh0aGlzLmVsZW1lbnRzLG4sdC5jb250aW51b3VzLHRoaXMub2Zmc2V0LnVwKTtpZih0aGlzLndheXBvaW50cz1bcixzXSx0LnN0aWNrKXtpZih2b2lkIDA9PT0kKCkuZml4VG8pdGhyb3dcImZpeFRvIGlzIG5vdCBwcmVzZW50IG9uIHRoZSBwYWdlLCBvciBtYXkgaGF2ZSBiZWVuIGxvYWRlZCBpbiBiZWZvcmUgalF1ZXJ5LlwiOyQodC5zdGljaykud3JhcElubmVyKCc8ZGl2IGNsYXNzPVwidHdvLXN0ZXAtc3RpY2t5LXdyYXBwZXJcIj48L2Rpdj4nKSx0aGlzLnN0aWNreT0kKHQuc3RpY2spLmZpbmQoXCIudHdvLXN0ZXAtc3RpY2t5LXdyYXBwZXJcIikuZml4VG8oJCh0LnN0aWNrKSl9dGhpcy5zZXRLZXlib2FyZCgpLHRoaXMuaW5kZXg9LTEsbC5yZWdpc3Rlcih0aGlzKSxzZXRJbnRlcnZhbChmdW5jdGlvbigpe1dheXBvaW50LnJlZnJlc2hBbGwoKX0sMWUzKTt2YXIgYT10aGlzfXJldHVybiByKGUsW3trZXk6XCJnb1RvXCIsdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXM7aWYodGhpcy5pc1ZhbGlkSW5kZXgoZSk9PT0hMSl0aHJvdyBlK1wiIGlzIG5vdCBhIHZhbGlkIGluZGV4LiBNdXN0IGJlIGJldHdlZW4gMCBhbmQgXCIrKHRoaXMuZWxlbWVudHMubGVuZ3RoLTEpK1wiIChpbmNsdXNpdmUpLlwiO3RoaXMubmFycmF0aXZlJiZ0aGlzLm5hcnJhdGl2ZVtlXSh7ZWxlbWVudDp0aGlzLmVsZW1lbnRzW2VdLGluZGV4OmUsZGlyZWN0aW9uOm59KSx0aGlzLm9uQ2hhbmdlJiZ0aGlzLm9uQ2hhbmdlKHtlbGVtZW50OnRoaXMuZWxlbWVudHNbZV0saW5kZXg6ZSxkaXJlY3Rpb246bn0pLHRoaXMuaW5kZXg9ZTt2YXIgbz0kKHRoaXMuZWxlbWVudHMpLmVxKGUpO3JldHVybiAkKHRoaXMuZWxlbWVudHMpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLG8uYWRkQ2xhc3MoXCJhY3RpdmVcIiksdD09PSEwPyh0aGlzLmRpc2FibGVXYXlwb2ludHMoKSwkKFwiaHRtbCwgYm9keVwiKS5hbmltYXRlKHtzY3JvbGxUb3A6by5vZmZzZXQoKS50b3AtMTAwfSw1MDApLnByb21pc2UoKS50aGVuKGZ1bmN0aW9uKCl7aS5lbmFibGVXYXlwb2ludHMoKX0pKTokLkRlZmVycmVkKCkucmVzb2x2ZSgpfX0se2tleTpcInNldFdheXBvaW50c1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCl7dmFyIG49IShhcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXSl8fGFyZ3VtZW50c1syXSxpPWFyZ3VtZW50c1szXTtyZXR1cm4gZS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBXYXlwb2ludCh7ZWxlbWVudDplLGhhbmRsZXI6dCxjb250aW51b3VzOm4sb2Zmc2V0Oml9KX0pfX0se2tleTpcInNldEtleWJvYXJkXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzOyQod2luZG93KS5rZXlkb3duKGZ1bmN0aW9uKHQpe2lmKGUuZGlzYWJsZWQpcmV0dXJuITA7dmFyIG49KDAsYS5kZWZhdWx0KSh0LmtleUNvZGUpLGk9bC5nZXRBY3RpdmVJbnN0YW5jZXMoKTtpZigwIT09biYmdC50YXJnZXQ9PT1kb2N1bWVudC5ib2R5JiZ0Lm1ldGFLZXk9PT0hMSYmMT09PWkubGVuZ3RoKXt2YXIgbz1lLmluZGV4K247cmV0dXJuIWUuaXNWYWxpZEluZGV4KG8pfHwoZS5nb1RvKG8sITApLHQucHJldmVudERlZmF1bHQoKSwhMSl9fSl9fSx7a2V5OlwiaXNWYWxpZEluZGV4XCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGU8dGhpcy5lbGVtZW50cy5sZW5ndGgmJmU+LTF9fSx7a2V5OlwiZGlzYWJsZVdheXBvaW50c1wiLHZhbHVlOmZ1bmN0aW9uKCl7W10uY29uY2F0LmFwcGx5KFtdLHRoaXMud2F5cG9pbnRzKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmRpc2FibGUoKX0pfX0se2tleTpcImVuYWJsZVdheXBvaW50c1wiLHZhbHVlOmZ1bmN0aW9uKCl7W10uY29uY2F0LmFwcGx5KFtdLHRoaXMud2F5cG9pbnRzKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmVuYWJsZSgpfSl9fSx7a2V5OlwiZGlzYWJsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZD0hMCx0aGlzLmVuYWJsZWQ9ITEsdGhpcy5kaXNhYmxlV2F5cG9pbnRzKCksdGhpcy5zdGlja3kmJnRoaXMuc3RpY2t5LmZpeFRvKFwic3RvcFwiKX19LHtrZXk6XCJlbmFibGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZGlzYWJsZWQ9ITEsdGhpcy5lbmFibGVkPSEwLHRoaXMuZW5hYmxlV2F5cG9pbnRzKCksdGhpcy5zdGlja3kmJnRoaXMuc3RpY2t5LmZpeFRvKFwic3RhcnRcIil9fV0pLGV9KCk7dC5kZWZhdWx0PWMsZS5leHBvcnRzPXQuZGVmYXVsdH1dKX0pO1xuXG52YXIgdHMgPSBuZXcgVHdvU3RlcCh7XG4gIGVsZW1lbnRzOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGFyZW50IC5uYXJyYXRpdmUtaXRlbScpLFxuICBvbkNoYW5nZTogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdJdGVtICcrZXZlbnQuaW5kZXgpO1xuICB9LFxuICBzdGljazogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhcmVudCAuc3RpY2t5LW91dGVyJyksXG4gIG5hcnJhdGl2ZTogW1xuICAgICAgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgLy8gY2hhcnQucmVtb3ZlQW5ub3RhdGlvbignZ2VuZGVyLWFubm8nKTtcbiAgICAgICAgLy8gY2hhcnQucmVtb3ZlQW5ub3RhdGlvbigncGFyZW50LWFubm8nKTtcbiAgICAgICAgLy8gY2hhcnQucmVtb3ZlQW5ub3RhdGlvbignbGZwLWFubm8nKTtcbiAgICAgICAgLy8gY2hhcnQucmVtb3ZlQW5ub3RhdGlvbignZS1wLWFubm8nKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe2NoYXJ0LmFkZEFubm90YXRpb24oYW5ub3RhdGlvbjEpfSwwKTtcbiAgICAgIH0sXG4gICAgICBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAkKCcuY2hhcnQtdGl0bGUnKS50ZXh0KCdNZWRpYW4gaG9tZSBwcmljZSAxOTgxLXByZXNlbnQsIGluIDIwMjEgZG9sbGFycycpO1xuICAgICAgICAkKCcuY2hhcnQtc291cmNlJykudGV4dCgnQ2Vuc3VzIEJ1cmVhdSBhbmQgRGVwYXJ0bWVudCBvZiBIb3VzaW5nIGFuZCBVcmJhbiBEZXZlbG9wbWVudCB2aWEgRlJFRCcpO1xuICAgICAgICBjaGFydC5yZW1vdmVBbm5vdGF0aW9uKCdob21lLXByaWNlLWFubm8nKTtcbiAgICAgICAgLy8gY2hhcnQucmVtb3ZlQW5ub3RhdGlvbigncGFyZW50LWFubm8nKTtcbiAgICAgICAgLy8gY2hhcnQucmVtb3ZlQW5ub3RhdGlvbignbGZwLWFubm8nKTtcbiAgICAgICAgLy8gc2V0VGltZW91dChmdW5jdGlvbigpe2NoYXJ0LmFkZEFubm90YXRpb24oYW5ub3RhdGlvbjEpfSw1MDApO1xuICAgICAgICBjaGFydC51cGRhdGUoe1xuICAgICAgICAgICAgY2hhcnQ6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnYXJlYScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGNzdlVSTDogJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9rc2NobWlkdDIvZ3Jvdy1oaXN0b3JpY2FsLW1vcnRnYWdlcy9tYXN0ZXIvZGF0YS9tZWRpYW4taG9tZS1wcmljZS5jc3YnLFxuICAgICAgICAgICAgICAgIGVuZFJvdzogMTY0XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2VyaWVzOiBbe1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcjogMCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHlBeGlzOiB7XG4gICAgICAgICAgICAgICAgbWluOiAxMDAwMDAsXG4gICAgICAgICAgICAgICAgbWF4OiA0MDAwMDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB4QXhpczoge1xuICAgICAgICAgICAgICAgIG1pbjogRGF0ZS5VVEMoMTk4MCwgMCwgMSksXG4gICAgICAgICAgICAgICAgbWF4OiBEYXRlLlVUQygyMDIxLCAxMCwgMSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgLy8gY2hhcnQucmVtb3ZlQW5ub3RhdGlvbigncGFyZW50LWFubm8nKTtcbiAgICAgICAgLy8gY2hhcnQucmVtb3ZlQW5ub3RhdGlvbignbGZwLWFubm8nKTtcbiAgICAgICAgLy8gY2hhcnQucmVtb3ZlQW5ub3RhdGlvbignZS1wLWFubm8nKTtcbiAgICAgICAgLy8gc2V0VGltZW91dChmdW5jdGlvbigpe2NoYXJ0LmFkZEFubm90YXRpb24oYW5ub3RhdGlvbjIpfSw1MDApLFxuICAgICAgICAkKCcuY2hhcnQtdGl0bGUnKS50ZXh0KCczMC15ZWFyLCBmaXhlZC1yYXRlIG1vcnRnYWdlIGF2ZXJhZ2UsIDE5ODEtcHJlc2VudCcpO1xuICAgICAgICAkKCcuY2hhcnQtc291cmNlJykudGV4dCgnRnJlZGRpZSBNYWMgdmlhIEZSRUQnKTtcbiAgICAgICAgLy8gY2hhcnQudXBkYXRlKHtcbiAgICAgICAgLy8gICAgIGNoYXJ0OiB7XG4gICAgICAgIC8vICAgICAgICAgdHlwZTogJ2xpbmUnLFxuICAgICAgICAvLyAgICAgICAgIHNwYWNpbmdMZWZ0OiAxMFxuICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgLy8gICAgIGRhdGE6IHtcbiAgICAgICAgLy8gICAgICAgICB0YWJsZTogJ2RhdGF0YWJsZTInXG4gICAgICAgIC8vICAgICB9LFxuICAgICAgICAvLyAgICAgeUF4aXM6IHtcbiAgICAgICAgLy8gICAgICAgICBtaW46IDQ1LFxuICAgICAgICAvLyAgICAgICAgIG1heDogNzBcbiAgICAgICAgLy8gICAgIH0sXG4gICAgICAgIC8vICAgICB4QXhpczoge1xuICAgICAgICAvLyAgICAgICAgIG1pbjogRGF0ZS5VVEMoMjAxOSwgMCwgMSlcbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gfSk7XG4gICAgICAgIC8vIGNoYXJ0LnVwZGF0ZUZyb21EYXRhKCk7XG4gICAgICB9LFxuICAgICAgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgLy8gY2hhcnQucmVtb3ZlQW5ub3RhdGlvbignZ2VuZGVyLWFubm8nKTtcbiAgICAgICAgLy8gY2hhcnQucmVtb3ZlQW5ub3RhdGlvbignZS1wLWFubm8nKTtcbiAgICAgICAgLy8gY2hhcnQucmVtb3ZlQW5ub3RhdGlvbignbGZwLWFubm8nKTtcbiAgICAgICAgLy8gc2V0VGltZW91dChmdW5jdGlvbigpe2NoYXJ0LmFkZEFubm90YXRpb24oYW5ub3RhdGlvbjMpOyQoJy5oaWdoY2hhcnRzLWFubm90YXRpb24tbGFiZWwtYm94JykuY3NzKCdmaWxsJywgJ3doaXRlJyl9LDUwMCksXG4gICAgICAgICQoJy5jaGFydC10aXRsZScpLnRleHQoJ01vbnRobHkgcGF5bWVudCBvbiBhICQyMDUsMDAwIGhvbWUnKTtcbiAgICAgICAgJCgnLmNoYXJ0LXNvdXJjZScpLnRleHQoJ0ZyZWRkaWUgTWFjIHZpYSBGUkVEIChtb3J0Z2FnZSByYXRlKScpO1xuICAgICAgICAvLyBjaGFydC51cGRhdGUoe1xuICAgICAgICAvLyAgICAgY2hhcnQ6IHtcbiAgICAgICAgLy8gICAgICAgICB0eXBlOiAnbGluZScsXG4gICAgICAgIC8vICAgICAgICAgc3BhY2luZ0xlZnQ6IC05XG4gICAgICAgIC8vICAgICB9LFxuICAgICAgICAvLyAgICAgZGF0YToge1xuICAgICAgICAvLyAgICAgICAgIHRhYmxlOiAnZGF0YXRhYmxlMydcbiAgICAgICAgLy8gICAgIH0sXG4gICAgICAgIC8vICAgICB5QXhpczoge1xuICAgICAgICAvLyAgICAgICAgIG1pbjogNTAsXG4gICAgICAgIC8vICAgICAgICAgbWF4OiAxMDBcbiAgICAgICAgLy8gICAgIH0sXG4gICAgICAgIC8vICAgICB4QXhpczoge1xuICAgICAgICAvLyAgICAgICAgIG1pbjogRGF0ZS5VVEMoMjAxOSwgMCwgMSlcbiAgICAgICAgLy8gICAgIH0sXG4gICAgICAgIC8vIH0pO1xuICAgICAgfSxcbiAgICAgIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIC8vIGNoYXJ0LnJlbW92ZUFubm90YXRpb24oJ2dlbmRlci1hbm5vJyk7XG4gICAgICAgIC8vIGNoYXJ0LnJlbW92ZUFubm90YXRpb24oJ3BhcmVudC1hbm5vJyk7XG4gICAgICAgIC8vIGNoYXJ0LnJlbW92ZUFubm90YXRpb24oJ2UtcC1hbm5vJyk7XG4gICAgICAgIC8vIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtjaGFydC5hZGRBbm5vdGF0aW9uKGFubm90YXRpb240KTskKCcuaGlnaGNoYXJ0cy1hbm5vdGF0aW9uLWxhYmVsLWJveCcpLmNzcygnZmlsbCcsICdub25lJyk7JCgnLmhpZ2hjaGFydHMteWF4aXMtZ3JpZCBwYXRoOmVxKDQpJykuY3NzKCdzdHJva2UnLCAnYmxhY2snKTt9LDUwMCk7XG4gICAgICAgICQoJy5jaGFydC10aXRsZScpLnRleHQoJ01vbnRobHkgcGF5bWVudCBvbiB0aGUgbWVkaWFuIGhvbWUnKTtcbiAgICAgICAgJCgnLmNoYXJ0LXNvdXJjZScpLnRleHQoJ0NlbnN1cyBCdXJlYXUgYW5kIERlcGFydG1lbnQgb2YgSG91c2luZyBhbmQgVXJiYW4gRGV2ZWxvcG1lbnQgdmlhIEZSRUQgKGhvbWUgcHJpY2UpOyBGcmVkZGllIE1hYyB2aWEgRlJFRCAobW9ydGdhZ2UgcmF0ZSknKTtcbiAgICAvLyAgICAgY2hhcnQudXBkYXRlKHtcbiAgICAvLyAgICAgICAgIGNoYXJ0OiB7XG4gICAgLy8gICAgICAgICAgICAgdHlwZTogJ2xpbmUnLFxuICAgIC8vICAgICAgICAgICAgIHNwYWNpbmdMZWZ0OiAxMFxuICAgIC8vICAgICAgICAgfSxcbiAgICAvLyAgICAgICAgIGRhdGE6IHtcbiAgICAvLyAgICAgICAgICAgICB0YWJsZTogJ2RhdGF0YWJsZTQnXG4gICAgLy8gICAgICAgICB9LFxuICAgIC8vICAgICAgICAgeUF4aXM6IHtcbiAgICAvLyAgICAgICAgICAgICBtaW46IC04LFxuICAgIC8vICAgICAgICAgICAgIG1heDogMlxuICAgIC8vICAgICAgICAgfSxcbiAgICAvLyAgICAgICAgIHhBeGlzOiB7XG4gICAgLy8gICAgICAgICAgICAgbWluOiBEYXRlLlVUQygyMDIwLCAxLCAxKVxuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9KTtcbiAgICAvLyAgICAgLy8gc2V0VGltZW91dChmdW5jdGlvbigpe2NoYXJ0LnVwZGF0ZSh7ZGF0YTp7Y3N2VVJMOiAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2tzY2htaWR0Mi9ncm93LXdvbWVucy1yZWNlc3Npb24taW50cm8vbWFzdGVyL2FwcC9kYXRhL2xmbC1nZW5kZXIuY3N2J319KX0sNSk7XG4gICAgICB9LFxuICAgICAgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgJCgnLmNoYXJ0LXRpdGxlJykudGV4dCgnVG90YWwgaW50ZXJlc3QgcGFpZCBvbiBhIG1lZGlhbiBob21lIGF0IHRoZSBhdmVyYWdlIHJhdGUnKTtcbiAgICAgICAgJCgnLmNoYXJ0LXNvdXJjZScpLnRleHQoJ0NlbnN1cyBCdXJlYXUgYW5kIERlcGFydG1lbnQgb2YgSG91c2luZyBhbmQgVXJiYW4gRGV2ZWxvcG1lbnQgdmlhIEZSRUQgKGhvbWUgcHJpY2UpOyBGcmVkZGllIE1hYyB2aWEgRlJFRCAobW9ydGdhZ2UgcmF0ZSknKTtcbiAgICAgIH1cbiAgXSxcbiAgb2Zmc2V0OiB7XG4gICAgICB1cDogJy0xMCUnLFxuICAgICAgZG93bjogJzEwMCUnXG4gIH1cbn0pO1xuXG5cbkhpZ2hjaGFydHMuc2V0T3B0aW9ucyh7XG4gICAgbGFuZzoge1xuICAgICAgdGhvdXNhbmRzU2VwOiAnLCdcbiAgICB9XG59KTtcblxuXG5cblxuZnVuY3Rpb24gZHJhd0hpZ2hjaGFydHMoKSB7XG4gICAgY2hhcnQgPSBIaWdoY2hhcnRzLmNoYXJ0KCdjaGFydC1jb250YWluZXInLCB7XG4gICAgICAgIGNoYXJ0OiB7XG4gICAgICAgICAgICB0eXBlOiAnbGluZScsXG4gICAgICAgICAgICBzdHlsZWRNb2RlOiB0cnVlLFxuICAgICAgICAgICAgc3BhY2luZ0JvdHRvbTogMjUsXG4gICAgICAgICAgICBzcGFjaW5nUmlnaHQ6IDI1LFxuICAgICAgICAgICAgc3BhY2luZ0xlZnQ6IDEwLFxuICAgICAgICAgICAgc3BhY2luZ1RvcDogMjAsXG4gICAgICAgICAgICBhbmltYXRpb246IHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwMCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpZ25vcmVIaWRkZW5TZXJpZXM6IGZhbHNlXG4gICAgICAgIH0sIFxuICAgICAgICB0aXRsZToge1xuICAgICAgICAgICAgdGV4dDogbnVsbFxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBjc3ZVUkw6ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20va3NjaG1pZHQyL2dyb3ctaGlzdG9yaWNhbC1tb3J0Z2FnZXMvbWFzdGVyL2RhdGEvbWVkaWFuLWhvbWUtcHJpY2UuY3N2JyxcbiAgICAgICAgICAgIGVuZFJvdzogMVxuICAgICAgICB9LFxuICAgICAgICBhbm5vdGF0aW9uczogW3tcbiAgICAgICAgfV0sXG4gICAgICAgIC8vIGZvciBiYXIgY2hhcnRzIG9ubHlcbiAgICAgICAgLy8gcGxvdE9wdGlvbnM6IHtcbiAgICAgICAgLy8gICAgIHNlcmllczoge1xuICAgICAgICAvLyAgICAgICAgIGdyb3VwUGFkZGluZzogMC4xXG4gICAgICAgIC8vICAgICB9IFxuICAgICAgICAvLyB9LFxuICAgICAgICAvLyBmb3IgbGluZSBjaGFydHMgb25seVxuICAgICAgICBwbG90T3B0aW9uczoge1xuICAgICAgICAgICAgc2VyaWVzOiB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwLFxuICAgICAgICAgICAgICAgICAgICAvLyBkZWZlcjogMTAwMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbGluZVdpZHRoOiAxLFxuICAgICAgICAgICAgICAgIHN0YXRlczoge1xuICAgICAgICAgICAgICAgICAgICBob3Zlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2xpcDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbWFya2VyOiB7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBzeW1ib2w6ICdjaXJjbGUnLFxuICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjZmZmZmZmJyxcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBob3Zlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogJyNmZmZmZmYnXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGxlZ2VuZDoge1xuICAgICAgICAgICAgLy8gYWxpZ246ICdyaWdodCcsXG4gICAgICAgICAgICAvLyBzeW1ib2xSYWRpdXM6IDAsXG4gICAgICAgICAgICAvLyB2ZXJ0aWNhbEFsaWduOiAndG9wJyxcbiAgICAgICAgICAgIC8vIHg6IDEwLFxuICAgICAgICAgICAgLy8gaXRlbU1hcmdpblRvcDogLTEwXG4gICAgICAgICAgICBlbmFibGVkOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICB4QXhpczoge1xuICAgICAgICAgICAgbGFiZWxzOiB7XG4gICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgd2hpdGVTcGFjZTogJ25vd3JhcCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGlja0xlbmd0aDogNSxcbiAgICAgICAgICAgIC8vIHBsb3RCYW5kczogW3sgLy8gbWFyayB0aGUgd2Vla2VuZFxuICAgICAgICAgICAgLy8gICAgIGZyb206IERhdGUuVVRDKDIwMjAsIDEsIDEpLFxuICAgICAgICAgICAgLy8gICAgIHRvOiBEYXRlLlVUQygyMDIwLCA5LCAzMCksXG4gICAgICAgICAgICAvLyAgICAgbGFiZWw6IHtcbiAgICAgICAgICAgIC8vICAgICAgICAgdGV4dDogJ1BhbmRlbWljJyxcbiAgICAgICAgICAgIC8vICAgICAgICAgdGV4dEFsaWduOiAnY2VudGVyJ1xuICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgIC8vIH1dLFxuICAgICAgICAgICAgbWluOiBEYXRlLlVUQygxOTgwLCAwLCAxKSxcbiAgICAgICAgICAgIG1heDogRGF0ZS5VVEMoMjAyMSwgMTAsIDEpXG4gICAgICAgICAgICAvLyBlZGl0cyB4QXhpcyB0aWNrc1xuICAgICAgICAgICAgLy8gZGF0ZVRpbWVMYWJlbEZvcm1hdHM6IHtcbiAgICAgICAgICAgIC8vICAgICB3ZWVrOiAnJWIuICVlJyxcbiAgICAgICAgICAgIC8vIH0sXG4gICAgICAgICAgICAvLyB0aWNrSW50ZXJ2YWw6IDI0ICogMzYwMCAqIDEwMDAgKiA3XG4gICAgICAgIH0sXG4gICAgICAgIHlBeGlzOiB7XG4gICAgICAgICAgICB0aXRsZTogZmFsc2UsXG4gICAgICAgICAgICBsYWJlbHM6IHtcbiAgICAgICAgICAgICAgICB1c2VIVE1MOiB0cnVlLFxuICAgICAgICAgICAgICAgIG92ZXJmbG93OiAnYWxsb3cnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWluOiAxMDAwMDAsXG4gICAgICAgICAgICBtYXg6IDQwMDAwMCxcbiAgICAgICAgICAgIHRpY2tBbW91bnQ6NCxcbiAgICAgICAgICAgIC8vIHdpZHRoOiAwLFxuICAgICAgICAgICAgdGlja0xlbmd0aDogMjUsXG4gICAgICAgICAgICB0aWNrUG9zaXRpb246ICdpbnNpZGUnXG4gICAgICAgICAgICAvLyBhZGRzIGNvbW1hcyB0byB0aG91c2FuZHNcbiAgICAgICAgICAgIC8vIGZvcm1hdHRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gICAgIHJldHVybiBIaWdoY2hhcnRzLm51bWJlckZvcm1hdCh0aGlzLnZhbHVlLDAsJy4nLCcsJyk7XG4gICAgICAgICAgICAvLyB9LFxuICAgICAgICB9LFxuICAgICAgICBjcmVkaXRzOiB7XG4gICAgICAgICAgICBlbmFibGVkOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICB0b29sdGlwOiB7XG4gICAgICAgICAgICBlbmFibGVkOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICBkZWZzOiB7XG4gICAgICAgICAgICBncmFkaWVudDA6IHtcbiAgICAgICAgICAgICAgICB0YWdOYW1lOiAnbGluZWFyR3JhZGllbnQnLFxuICAgICAgICAgICAgICAgIGlkOiAnZ3JhZGllbnQtMCcsXG4gICAgICAgICAgICAgICAgeDE6IDAsXG4gICAgICAgICAgICAgICAgeTE6IDAsXG4gICAgICAgICAgICAgICAgeDI6IDAsXG4gICAgICAgICAgICAgICAgeTI6IDEsXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFt7XG4gICAgICAgICAgICAgICAgICAgIHRhZ05hbWU6ICdzdG9wJyxcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiAwXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICB0YWdOYW1lOiAnc3RvcCcsXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldDogMVxuICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlc3BvbnNpdmU6IHtcbiAgICAgICAgICAgIHJ1bGVzOiBbe1xuICAgICAgICAgICAgY29uZGl0aW9uOiB7XG4gICAgICAgICAgICAgICAgbWF4V2lkdGg6IDUwMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNoYXJ0T3B0aW9uczoge1xuICAgICAgICAgICAgICAgIGxlZ2VuZDoge1xuICAgICAgICAgICAgICAgICAgICBhbGlnbjogJ2xlZnQnLFxuICAgICAgICAgICAgICAgICAgICB4OiAtMThcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRvb2x0aXA6IHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB9XVxuICAgICAgICB9XG4gICAgfSlcbn1cblxuaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScgfHwgZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2ludGVyYWN0aXZlJykge1xuICAgIGRyYXdIaWdoY2hhcnRzKCk7XG59IGVsc2Uge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGRyYXdIaWdoY2hhcnRzKTtcbn0iLCIvKiogdmltOiBldDp0cz00OnN3PTQ6c3RzPTRcbiAqIEBsaWNlbnNlIFJlcXVpcmVKUyAyLjMuNiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycy5cbiAqIFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlLCBodHRwczovL2dpdGh1Yi5jb20vcmVxdWlyZWpzL3JlcXVpcmVqcy9ibG9iL21hc3Rlci9MSUNFTlNFXG4gKi9cbi8vTm90IHVzaW5nIHN0cmljdDogdW5ldmVuIHN0cmljdCBzdXBwb3J0IGluIGJyb3dzZXJzLCAjMzkyLCBhbmQgY2F1c2VzXG4vL3Byb2JsZW1zIHdpdGggcmVxdWlyZWpzLmV4ZWMoKS90cmFuc3BpbGVyIHBsdWdpbnMgdGhhdCBtYXkgbm90IGJlIHN0cmljdC5cbi8qanNsaW50IHJlZ2V4cDogdHJ1ZSwgbm9tZW46IHRydWUsIHNsb3BweTogdHJ1ZSAqL1xuLypnbG9iYWwgd2luZG93LCBuYXZpZ2F0b3IsIGRvY3VtZW50LCBpbXBvcnRTY3JpcHRzLCBzZXRUaW1lb3V0LCBvcGVyYSAqL1xuXG52YXIgcmVxdWlyZWpzLCByZXF1aXJlLCBkZWZpbmU7XG4oZnVuY3Rpb24gKGdsb2JhbCwgc2V0VGltZW91dCkge1xuICAgIHZhciByZXEsIHMsIGhlYWQsIGJhc2VFbGVtZW50LCBkYXRhTWFpbiwgc3JjLFxuICAgICAgICBpbnRlcmFjdGl2ZVNjcmlwdCwgY3VycmVudGx5QWRkaW5nU2NyaXB0LCBtYWluU2NyaXB0LCBzdWJQYXRoLFxuICAgICAgICB2ZXJzaW9uID0gJzIuMy42JyxcbiAgICAgICAgY29tbWVudFJlZ0V4cCA9IC9cXC9cXCpbXFxzXFxTXSo/XFwqXFwvfChbXjpcIic9XXxeKVxcL1xcLy4qJC9tZyxcbiAgICAgICAgY2pzUmVxdWlyZVJlZ0V4cCA9IC9bXi5dXFxzKnJlcXVpcmVcXHMqXFwoXFxzKltcIiddKFteJ1wiXFxzXSspW1wiJ11cXHMqXFwpL2csXG4gICAgICAgIGpzU3VmZml4UmVnRXhwID0gL1xcLmpzJC8sXG4gICAgICAgIGN1cnJEaXJSZWdFeHAgPSAvXlxcLlxcLy8sXG4gICAgICAgIG9wID0gT2JqZWN0LnByb3RvdHlwZSxcbiAgICAgICAgb3N0cmluZyA9IG9wLnRvU3RyaW5nLFxuICAgICAgICBoYXNPd24gPSBvcC5oYXNPd25Qcm9wZXJ0eSxcbiAgICAgICAgaXNCcm93c2VyID0gISEodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmRvY3VtZW50KSxcbiAgICAgICAgaXNXZWJXb3JrZXIgPSAhaXNCcm93c2VyICYmIHR5cGVvZiBpbXBvcnRTY3JpcHRzICE9PSAndW5kZWZpbmVkJyxcbiAgICAgICAgLy9QUzMgaW5kaWNhdGVzIGxvYWRlZCBhbmQgY29tcGxldGUsIGJ1dCBuZWVkIHRvIHdhaXQgZm9yIGNvbXBsZXRlXG4gICAgICAgIC8vc3BlY2lmaWNhbGx5LiBTZXF1ZW5jZSBpcyAnbG9hZGluZycsICdsb2FkZWQnLCBleGVjdXRpb24sXG4gICAgICAgIC8vIHRoZW4gJ2NvbXBsZXRlJy4gVGhlIFVBIGNoZWNrIGlzIHVuZm9ydHVuYXRlLCBidXQgbm90IHN1cmUgaG93XG4gICAgICAgIC8vdG8gZmVhdHVyZSB0ZXN0IHcvbyBjYXVzaW5nIHBlcmYgaXNzdWVzLlxuICAgICAgICByZWFkeVJlZ0V4cCA9IGlzQnJvd3NlciAmJiBuYXZpZ2F0b3IucGxhdGZvcm0gPT09ICdQTEFZU1RBVElPTiAzJyA/XG4gICAgICAgICAgICAgICAgICAgICAgL15jb21wbGV0ZSQvIDogL14oY29tcGxldGV8bG9hZGVkKSQvLFxuICAgICAgICBkZWZDb250ZXh0TmFtZSA9ICdfJyxcbiAgICAgICAgLy9PaCB0aGUgdHJhZ2VkeSwgZGV0ZWN0aW5nIG9wZXJhLiBTZWUgdGhlIHVzYWdlIG9mIGlzT3BlcmEgZm9yIHJlYXNvbi5cbiAgICAgICAgaXNPcGVyYSA9IHR5cGVvZiBvcGVyYSAhPT0gJ3VuZGVmaW5lZCcgJiYgb3BlcmEudG9TdHJpbmcoKSA9PT0gJ1tvYmplY3QgT3BlcmFdJyxcbiAgICAgICAgY29udGV4dHMgPSB7fSxcbiAgICAgICAgY2ZnID0ge30sXG4gICAgICAgIGdsb2JhbERlZlF1ZXVlID0gW10sXG4gICAgICAgIHVzZUludGVyYWN0aXZlID0gZmFsc2U7XG5cbiAgICAvL0NvdWxkIG1hdGNoIHNvbWV0aGluZyBsaWtlICcpLy9jb21tZW50JywgZG8gbm90IGxvc2UgdGhlIHByZWZpeCB0byBjb21tZW50LlxuICAgIGZ1bmN0aW9uIGNvbW1lbnRSZXBsYWNlKG1hdGNoLCBzaW5nbGVQcmVmaXgpIHtcbiAgICAgICAgcmV0dXJuIHNpbmdsZVByZWZpeCB8fCAnJztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0Z1bmN0aW9uKGl0KSB7XG4gICAgICAgIHJldHVybiBvc3RyaW5nLmNhbGwoaXQpID09PSAnW29iamVjdCBGdW5jdGlvbl0nO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzQXJyYXkoaXQpIHtcbiAgICAgICAgcmV0dXJuIG9zdHJpbmcuY2FsbChpdCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIGZvciBpdGVyYXRpbmcgb3ZlciBhbiBhcnJheS4gSWYgdGhlIGZ1bmMgcmV0dXJuc1xuICAgICAqIGEgdHJ1ZSB2YWx1ZSwgaXQgd2lsbCBicmVhayBvdXQgb2YgdGhlIGxvb3AuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZWFjaChhcnksIGZ1bmMpIHtcbiAgICAgICAgaWYgKGFyeSkge1xuICAgICAgICAgICAgdmFyIGk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYXJ5Lmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFyeVtpXSAmJiBmdW5jKGFyeVtpXSwgaSwgYXJ5KSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gZm9yIGl0ZXJhdGluZyBvdmVyIGFuIGFycmF5IGJhY2t3YXJkcy4gSWYgdGhlIGZ1bmNcbiAgICAgKiByZXR1cm5zIGEgdHJ1ZSB2YWx1ZSwgaXQgd2lsbCBicmVhayBvdXQgb2YgdGhlIGxvb3AuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZWFjaFJldmVyc2UoYXJ5LCBmdW5jKSB7XG4gICAgICAgIGlmIChhcnkpIHtcbiAgICAgICAgICAgIHZhciBpO1xuICAgICAgICAgICAgZm9yIChpID0gYXJ5Lmxlbmd0aCAtIDE7IGkgPiAtMTsgaSAtPSAxKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFyeVtpXSAmJiBmdW5jKGFyeVtpXSwgaSwgYXJ5KSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoYXNQcm9wKG9iaiwgcHJvcCkge1xuICAgICAgICByZXR1cm4gaGFzT3duLmNhbGwob2JqLCBwcm9wKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRPd24ob2JqLCBwcm9wKSB7XG4gICAgICAgIHJldHVybiBoYXNQcm9wKG9iaiwgcHJvcCkgJiYgb2JqW3Byb3BdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEN5Y2xlcyBvdmVyIHByb3BlcnRpZXMgaW4gYW4gb2JqZWN0IGFuZCBjYWxscyBhIGZ1bmN0aW9uIGZvciBlYWNoXG4gICAgICogcHJvcGVydHkgdmFsdWUuIElmIHRoZSBmdW5jdGlvbiByZXR1cm5zIGEgdHJ1dGh5IHZhbHVlLCB0aGVuIHRoZVxuICAgICAqIGl0ZXJhdGlvbiBpcyBzdG9wcGVkLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGVhY2hQcm9wKG9iaiwgZnVuYykge1xuICAgICAgICB2YXIgcHJvcDtcbiAgICAgICAgZm9yIChwcm9wIGluIG9iaikge1xuICAgICAgICAgICAgaWYgKGhhc1Byb3Aob2JqLCBwcm9wKSkge1xuICAgICAgICAgICAgICAgIGlmIChmdW5jKG9ialtwcm9wXSwgcHJvcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2ltcGxlIGZ1bmN0aW9uIHRvIG1peCBpbiBwcm9wZXJ0aWVzIGZyb20gc291cmNlIGludG8gdGFyZ2V0LFxuICAgICAqIGJ1dCBvbmx5IGlmIHRhcmdldCBkb2VzIG5vdCBhbHJlYWR5IGhhdmUgYSBwcm9wZXJ0eSBvZiB0aGUgc2FtZSBuYW1lLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1peGluKHRhcmdldCwgc291cmNlLCBmb3JjZSwgZGVlcFN0cmluZ01peGluKSB7XG4gICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICAgIGVhY2hQcm9wKHNvdXJjZSwgZnVuY3Rpb24gKHZhbHVlLCBwcm9wKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZvcmNlIHx8ICFoYXNQcm9wKHRhcmdldCwgcHJvcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlZXBTdHJpbmdNaXhpbiAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAhaXNBcnJheSh2YWx1ZSkgJiYgIWlzRnVuY3Rpb24odmFsdWUpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAhKHZhbHVlIGluc3RhbmNlb2YgUmVnRXhwKSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldFtwcm9wXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFtwcm9wXSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbWl4aW4odGFyZ2V0W3Byb3BdLCB2YWx1ZSwgZm9yY2UsIGRlZXBTdHJpbmdNaXhpbik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuXG4gICAgLy9TaW1pbGFyIHRvIEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLCBidXQgdGhlICd0aGlzJyBvYmplY3QgaXMgc3BlY2lmaWVkXG4gICAgLy9maXJzdCwgc2luY2UgaXQgaXMgZWFzaWVyIHRvIHJlYWQvZmlndXJlIG91dCB3aGF0ICd0aGlzJyB3aWxsIGJlLlxuICAgIGZ1bmN0aW9uIGJpbmQob2JqLCBmbikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KG9iaiwgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY3JpcHRzKCkge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlZmF1bHRPbkVycm9yKGVycikge1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgfVxuXG4gICAgLy9BbGxvdyBnZXR0aW5nIGEgZ2xvYmFsIHRoYXQgaXMgZXhwcmVzc2VkIGluXG4gICAgLy9kb3Qgbm90YXRpb24sIGxpa2UgJ2EuYi5jJy5cbiAgICBmdW5jdGlvbiBnZXRHbG9iYWwodmFsdWUpIHtcbiAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBnID0gZ2xvYmFsO1xuICAgICAgICBlYWNoKHZhbHVlLnNwbGl0KCcuJyksIGZ1bmN0aW9uIChwYXJ0KSB7XG4gICAgICAgICAgICBnID0gZ1twYXJ0XTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYW4gZXJyb3Igd2l0aCBhIHBvaW50ZXIgdG8gYW4gVVJMIHdpdGggbW9yZSBpbmZvcm1hdGlvbi5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gaWQgdGhlIGVycm9yIElEIHRoYXQgbWFwcyB0byBhbiBJRCBvbiBhIHdlYiBwYWdlLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIGh1bWFuIHJlYWRhYmxlIGVycm9yLlxuICAgICAqIEBwYXJhbSB7RXJyb3J9IFtlcnJdIHRoZSBvcmlnaW5hbCBlcnJvciwgaWYgdGhlcmUgaXMgb25lLlxuICAgICAqXG4gICAgICogQHJldHVybnMge0Vycm9yfVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIG1ha2VFcnJvcihpZCwgbXNnLCBlcnIsIHJlcXVpcmVNb2R1bGVzKSB7XG4gICAgICAgIHZhciBlID0gbmV3IEVycm9yKG1zZyArICdcXG5odHRwczovL3JlcXVpcmVqcy5vcmcvZG9jcy9lcnJvcnMuaHRtbCMnICsgaWQpO1xuICAgICAgICBlLnJlcXVpcmVUeXBlID0gaWQ7XG4gICAgICAgIGUucmVxdWlyZU1vZHVsZXMgPSByZXF1aXJlTW9kdWxlcztcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgZS5vcmlnaW5hbEVycm9yID0gZXJyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZGVmaW5lICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvL0lmIGEgZGVmaW5lIGlzIGFscmVhZHkgaW4gcGxheSB2aWEgYW5vdGhlciBBTUQgbG9hZGVyLFxuICAgICAgICAvL2RvIG5vdCBvdmVyd3JpdGUuXG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHJlcXVpcmVqcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24ocmVxdWlyZWpzKSkge1xuICAgICAgICAgICAgLy9EbyBub3Qgb3ZlcndyaXRlIGFuIGV4aXN0aW5nIHJlcXVpcmVqcyBpbnN0YW5jZS5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjZmcgPSByZXF1aXJlanM7XG4gICAgICAgIHJlcXVpcmVqcyA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvL0FsbG93IGZvciBhIHJlcXVpcmUgY29uZmlnIG9iamVjdFxuICAgIGlmICh0eXBlb2YgcmVxdWlyZSAhPT0gJ3VuZGVmaW5lZCcgJiYgIWlzRnVuY3Rpb24ocmVxdWlyZSkpIHtcbiAgICAgICAgLy9hc3N1bWUgaXQgaXMgYSBjb25maWcgb2JqZWN0LlxuICAgICAgICBjZmcgPSByZXF1aXJlO1xuICAgICAgICByZXF1aXJlID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5ld0NvbnRleHQoY29udGV4dE5hbWUpIHtcbiAgICAgICAgdmFyIGluQ2hlY2tMb2FkZWQsIE1vZHVsZSwgY29udGV4dCwgaGFuZGxlcnMsXG4gICAgICAgICAgICBjaGVja0xvYWRlZFRpbWVvdXRJZCxcbiAgICAgICAgICAgIGNvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAvL0RlZmF1bHRzLiBEbyBub3Qgc2V0IGEgZGVmYXVsdCBmb3IgbWFwXG4gICAgICAgICAgICAgICAgLy9jb25maWcgdG8gc3BlZWQgdXAgbm9ybWFsaXplKCksIHdoaWNoXG4gICAgICAgICAgICAgICAgLy93aWxsIHJ1biBmYXN0ZXIgaWYgdGhlcmUgaXMgbm8gZGVmYXVsdC5cbiAgICAgICAgICAgICAgICB3YWl0U2Vjb25kczogNyxcbiAgICAgICAgICAgICAgICBiYXNlVXJsOiAnLi8nLFxuICAgICAgICAgICAgICAgIHBhdGhzOiB7fSxcbiAgICAgICAgICAgICAgICBidW5kbGVzOiB7fSxcbiAgICAgICAgICAgICAgICBwa2dzOiB7fSxcbiAgICAgICAgICAgICAgICBzaGltOiB7fSxcbiAgICAgICAgICAgICAgICBjb25maWc6IHt9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVnaXN0cnkgPSB7fSxcbiAgICAgICAgICAgIC8vcmVnaXN0cnkgb2YganVzdCBlbmFibGVkIG1vZHVsZXMsIHRvIHNwZWVkXG4gICAgICAgICAgICAvL2N5Y2xlIGJyZWFraW5nIGNvZGUgd2hlbiBsb3RzIG9mIG1vZHVsZXNcbiAgICAgICAgICAgIC8vYXJlIHJlZ2lzdGVyZWQsIGJ1dCBub3QgYWN0aXZhdGVkLlxuICAgICAgICAgICAgZW5hYmxlZFJlZ2lzdHJ5ID0ge30sXG4gICAgICAgICAgICB1bmRlZkV2ZW50cyA9IHt9LFxuICAgICAgICAgICAgZGVmUXVldWUgPSBbXSxcbiAgICAgICAgICAgIGRlZmluZWQgPSB7fSxcbiAgICAgICAgICAgIHVybEZldGNoZWQgPSB7fSxcbiAgICAgICAgICAgIGJ1bmRsZXNNYXAgPSB7fSxcbiAgICAgICAgICAgIHJlcXVpcmVDb3VudGVyID0gMSxcbiAgICAgICAgICAgIHVubm9ybWFsaXplZENvdW50ZXIgPSAxO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcmltcyB0aGUgLiBhbmQgLi4gZnJvbSBhbiBhcnJheSBvZiBwYXRoIHNlZ21lbnRzLlxuICAgICAgICAgKiBJdCB3aWxsIGtlZXAgYSBsZWFkaW5nIHBhdGggc2VnbWVudCBpZiBhIC4uIHdpbGwgYmVjb21lXG4gICAgICAgICAqIHRoZSBmaXJzdCBwYXRoIHNlZ21lbnQsIHRvIGhlbHAgd2l0aCBtb2R1bGUgbmFtZSBsb29rdXBzLFxuICAgICAgICAgKiB3aGljaCBhY3QgbGlrZSBwYXRocywgYnV0IGNhbiBiZSByZW1hcHBlZC4gQnV0IHRoZSBlbmQgcmVzdWx0LFxuICAgICAgICAgKiBhbGwgcGF0aHMgdGhhdCB1c2UgdGhpcyBmdW5jdGlvbiBzaG91bGQgbG9vayBub3JtYWxpemVkLlxuICAgICAgICAgKiBOT1RFOiB0aGlzIG1ldGhvZCBNT0RJRklFUyB0aGUgaW5wdXQgYXJyYXkuXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGFyeSB0aGUgYXJyYXkgb2YgcGF0aCBzZWdtZW50cy5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHRyaW1Eb3RzKGFyeSkge1xuICAgICAgICAgICAgdmFyIGksIHBhcnQ7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYXJ5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcGFydCA9IGFyeVtpXTtcbiAgICAgICAgICAgICAgICBpZiAocGFydCA9PT0gJy4nKSB7XG4gICAgICAgICAgICAgICAgICAgIGFyeS5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGkgLT0gMTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnQgPT09ICcuLicpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgYXQgdGhlIHN0YXJ0LCBvciBwcmV2aW91cyB2YWx1ZSBpcyBzdGlsbCAuLixcbiAgICAgICAgICAgICAgICAgICAgLy8ga2VlcCB0aGVtIHNvIHRoYXQgd2hlbiBjb252ZXJ0ZWQgdG8gYSBwYXRoIGl0IG1heVxuICAgICAgICAgICAgICAgICAgICAvLyBzdGlsbCB3b3JrIHdoZW4gY29udmVydGVkIHRvIGEgcGF0aCwgZXZlbiB0aG91Z2hcbiAgICAgICAgICAgICAgICAgICAgLy8gYXMgYW4gSUQgaXQgaXMgbGVzcyB0aGFuIGlkZWFsLiBJbiBsYXJnZXIgcG9pbnRcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVsZWFzZXMsIG1heSBiZSBiZXR0ZXIgdG8ganVzdCBraWNrIG91dCBhbiBlcnJvci5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IDAgfHwgKGkgPT09IDEgJiYgYXJ5WzJdID09PSAnLi4nKSB8fCBhcnlbaSAtIDFdID09PSAnLi4nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJ5LnNwbGljZShpIC0gMSwgMik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpIC09IDI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogR2l2ZW4gYSByZWxhdGl2ZSBtb2R1bGUgbmFtZSwgbGlrZSAuL3NvbWV0aGluZywgbm9ybWFsaXplIGl0IHRvXG4gICAgICAgICAqIGEgcmVhbCBuYW1lIHRoYXQgY2FuIGJlIG1hcHBlZCB0byBhIHBhdGguXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIHRoZSByZWxhdGl2ZSBuYW1lXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBiYXNlTmFtZSBhIHJlYWwgbmFtZSB0aGF0IHRoZSBuYW1lIGFyZyBpcyByZWxhdGl2ZVxuICAgICAgICAgKiB0by5cbiAgICAgICAgICogQHBhcmFtIHtCb29sZWFufSBhcHBseU1hcCBhcHBseSB0aGUgbWFwIGNvbmZpZyB0byB0aGUgdmFsdWUuIFNob3VsZFxuICAgICAgICAgKiBvbmx5IGJlIGRvbmUgaWYgdGhpcyBub3JtYWxpemF0aW9uIGlzIGZvciBhIGRlcGVuZGVuY3kgSUQuXG4gICAgICAgICAqIEByZXR1cm5zIHtTdHJpbmd9IG5vcm1hbGl6ZWQgbmFtZVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gbm9ybWFsaXplKG5hbWUsIGJhc2VOYW1lLCBhcHBseU1hcCkge1xuICAgICAgICAgICAgdmFyIHBrZ01haW4sIG1hcFZhbHVlLCBuYW1lUGFydHMsIGksIGosIG5hbWVTZWdtZW50LCBsYXN0SW5kZXgsXG4gICAgICAgICAgICAgICAgZm91bmRNYXAsIGZvdW5kSSwgZm91bmRTdGFyTWFwLCBzdGFySSwgbm9ybWFsaXplZEJhc2VQYXJ0cyxcbiAgICAgICAgICAgICAgICBiYXNlUGFydHMgPSAoYmFzZU5hbWUgJiYgYmFzZU5hbWUuc3BsaXQoJy8nKSksXG4gICAgICAgICAgICAgICAgbWFwID0gY29uZmlnLm1hcCxcbiAgICAgICAgICAgICAgICBzdGFyTWFwID0gbWFwICYmIG1hcFsnKiddO1xuXG4gICAgICAgICAgICAvL0FkanVzdCBhbnkgcmVsYXRpdmUgcGF0aHMuXG4gICAgICAgICAgICBpZiAobmFtZSkge1xuICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lLnNwbGl0KCcvJyk7XG4gICAgICAgICAgICAgICAgbGFzdEluZGV4ID0gbmFtZS5sZW5ndGggLSAxO1xuXG4gICAgICAgICAgICAgICAgLy8gSWYgd2FudGluZyBub2RlIElEIGNvbXBhdGliaWxpdHksIHN0cmlwIC5qcyBmcm9tIGVuZFxuICAgICAgICAgICAgICAgIC8vIG9mIElEcy4gSGF2ZSB0byBkbyB0aGlzIGhlcmUsIGFuZCBub3QgaW4gbmFtZVRvVXJsXG4gICAgICAgICAgICAgICAgLy8gYmVjYXVzZSBub2RlIGFsbG93cyBlaXRoZXIgLmpzIG9yIG5vbiAuanMgdG8gbWFwXG4gICAgICAgICAgICAgICAgLy8gdG8gc2FtZSBmaWxlLlxuICAgICAgICAgICAgICAgIGlmIChjb25maWcubm9kZUlkQ29tcGF0ICYmIGpzU3VmZml4UmVnRXhwLnRlc3QobmFtZVtsYXN0SW5kZXhdKSkge1xuICAgICAgICAgICAgICAgICAgICBuYW1lW2xhc3RJbmRleF0gPSBuYW1lW2xhc3RJbmRleF0ucmVwbGFjZShqc1N1ZmZpeFJlZ0V4cCwgJycpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFN0YXJ0cyB3aXRoIGEgJy4nIHNvIG5lZWQgdGhlIGJhc2VOYW1lXG4gICAgICAgICAgICAgICAgaWYgKG5hbWVbMF0uY2hhckF0KDApID09PSAnLicgJiYgYmFzZVBhcnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vQ29udmVydCBiYXNlTmFtZSB0byBhcnJheSwgYW5kIGxvcCBvZmYgdGhlIGxhc3QgcGFydCxcbiAgICAgICAgICAgICAgICAgICAgLy9zbyB0aGF0IC4gbWF0Y2hlcyB0aGF0ICdkaXJlY3RvcnknIGFuZCBub3QgbmFtZSBvZiB0aGUgYmFzZU5hbWUnc1xuICAgICAgICAgICAgICAgICAgICAvL21vZHVsZS4gRm9yIGluc3RhbmNlLCBiYXNlTmFtZSBvZiAnb25lL3R3by90aHJlZScsIG1hcHMgdG9cbiAgICAgICAgICAgICAgICAgICAgLy8nb25lL3R3by90aHJlZS5qcycsIGJ1dCB3ZSB3YW50IHRoZSBkaXJlY3RvcnksICdvbmUvdHdvJyBmb3JcbiAgICAgICAgICAgICAgICAgICAgLy90aGlzIG5vcm1hbGl6YXRpb24uXG4gICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRCYXNlUGFydHMgPSBiYXNlUGFydHMuc2xpY2UoMCwgYmFzZVBhcnRzLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICAgICAgICBuYW1lID0gbm9ybWFsaXplZEJhc2VQYXJ0cy5jb25jYXQobmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdHJpbURvdHMobmFtZSk7XG4gICAgICAgICAgICAgICAgbmFtZSA9IG5hbWUuam9pbignLycpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL0FwcGx5IG1hcCBjb25maWcgaWYgYXZhaWxhYmxlLlxuICAgICAgICAgICAgaWYgKGFwcGx5TWFwICYmIG1hcCAmJiAoYmFzZVBhcnRzIHx8IHN0YXJNYXApKSB7XG4gICAgICAgICAgICAgICAgbmFtZVBhcnRzID0gbmFtZS5zcGxpdCgnLycpO1xuXG4gICAgICAgICAgICAgICAgb3V0ZXJMb29wOiBmb3IgKGkgPSBuYW1lUGFydHMubGVuZ3RoOyBpID4gMDsgaSAtPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVTZWdtZW50ID0gbmFtZVBhcnRzLnNsaWNlKDAsIGkpLmpvaW4oJy8nKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoYmFzZVBhcnRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL0ZpbmQgdGhlIGxvbmdlc3QgYmFzZU5hbWUgc2VnbWVudCBtYXRjaCBpbiB0aGUgY29uZmlnLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy9TbywgZG8gam9pbnMgb24gdGhlIGJpZ2dlc3QgdG8gc21hbGxlc3QgbGVuZ3RocyBvZiBiYXNlUGFydHMuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGogPSBiYXNlUGFydHMubGVuZ3RoOyBqID4gMDsgaiAtPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwVmFsdWUgPSBnZXRPd24obWFwLCBiYXNlUGFydHMuc2xpY2UoMCwgaikuam9pbignLycpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYmFzZU5hbWUgc2VnbWVudCBoYXMgY29uZmlnLCBmaW5kIGlmIGl0IGhhcyBvbmUgZm9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzIG5hbWUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hcFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcFZhbHVlID0gZ2V0T3duKG1hcFZhbHVlLCBuYW1lU2VnbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXBWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9NYXRjaCwgdXBkYXRlIG5hbWUgdG8gdGhlIG5ldyB2YWx1ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kTWFwID0gbWFwVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3VuZEkgPSBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgb3V0ZXJMb29wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy9DaGVjayBmb3IgYSBzdGFyIG1hcCBtYXRjaCwgYnV0IGp1c3QgaG9sZCBvbiB0byBpdCxcbiAgICAgICAgICAgICAgICAgICAgLy9pZiB0aGVyZSBpcyBhIHNob3J0ZXIgc2VnbWVudCBtYXRjaCBsYXRlciBpbiBhIG1hdGNoaW5nXG4gICAgICAgICAgICAgICAgICAgIC8vY29uZmlnLCB0aGVuIGZhdm9yIG92ZXIgdGhpcyBzdGFyIG1hcC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmb3VuZFN0YXJNYXAgJiYgc3Rhck1hcCAmJiBnZXRPd24oc3Rhck1hcCwgbmFtZVNlZ21lbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZFN0YXJNYXAgPSBnZXRPd24oc3Rhck1hcCwgbmFtZVNlZ21lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhckkgPSBpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCFmb3VuZE1hcCAmJiBmb3VuZFN0YXJNYXApIHtcbiAgICAgICAgICAgICAgICAgICAgZm91bmRNYXAgPSBmb3VuZFN0YXJNYXA7XG4gICAgICAgICAgICAgICAgICAgIGZvdW5kSSA9IHN0YXJJO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChmb3VuZE1hcCkge1xuICAgICAgICAgICAgICAgICAgICBuYW1lUGFydHMuc3BsaWNlKDAsIGZvdW5kSSwgZm91bmRNYXApO1xuICAgICAgICAgICAgICAgICAgICBuYW1lID0gbmFtZVBhcnRzLmpvaW4oJy8nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIElmIHRoZSBuYW1lIHBvaW50cyB0byBhIHBhY2thZ2UncyBuYW1lLCB1c2VcbiAgICAgICAgICAgIC8vIHRoZSBwYWNrYWdlIG1haW4gaW5zdGVhZC5cbiAgICAgICAgICAgIHBrZ01haW4gPSBnZXRPd24oY29uZmlnLnBrZ3MsIG5hbWUpO1xuXG4gICAgICAgICAgICByZXR1cm4gcGtnTWFpbiA/IHBrZ01haW4gOiBuYW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlU2NyaXB0KG5hbWUpIHtcbiAgICAgICAgICAgIGlmIChpc0Jyb3dzZXIpIHtcbiAgICAgICAgICAgICAgICBlYWNoKHNjcmlwdHMoKSwgZnVuY3Rpb24gKHNjcmlwdE5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNjcmlwdE5vZGUuZ2V0QXR0cmlidXRlKCdkYXRhLXJlcXVpcmVtb2R1bGUnKSA9PT0gbmFtZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcmlwdE5vZGUuZ2V0QXR0cmlidXRlKCdkYXRhLXJlcXVpcmVjb250ZXh0JykgPT09IGNvbnRleHQuY29udGV4dE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcmlwdE5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzY3JpcHROb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBoYXNQYXRoRmFsbGJhY2soaWQpIHtcbiAgICAgICAgICAgIHZhciBwYXRoQ29uZmlnID0gZ2V0T3duKGNvbmZpZy5wYXRocywgaWQpO1xuICAgICAgICAgICAgaWYgKHBhdGhDb25maWcgJiYgaXNBcnJheShwYXRoQ29uZmlnKSAmJiBwYXRoQ29uZmlnLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAvL1BvcCBvZmYgdGhlIGZpcnN0IGFycmF5IHZhbHVlLCBzaW5jZSBpdCBmYWlsZWQsIGFuZFxuICAgICAgICAgICAgICAgIC8vcmV0cnlcbiAgICAgICAgICAgICAgICBwYXRoQ29uZmlnLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgY29udGV4dC5yZXF1aXJlLnVuZGVmKGlkKTtcblxuICAgICAgICAgICAgICAgIC8vQ3VzdG9tIHJlcXVpcmUgdGhhdCBkb2VzIG5vdCBkbyBtYXAgdHJhbnNsYXRpb24sIHNpbmNlXG4gICAgICAgICAgICAgICAgLy9JRCBpcyBcImFic29sdXRlXCIsIGFscmVhZHkgbWFwcGVkL3Jlc29sdmVkLlxuICAgICAgICAgICAgICAgIGNvbnRleHQubWFrZVJlcXVpcmUobnVsbCwge1xuICAgICAgICAgICAgICAgICAgICBza2lwTWFwOiB0cnVlXG4gICAgICAgICAgICAgICAgfSkoW2lkXSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vVHVybnMgYSBwbHVnaW4hcmVzb3VyY2UgdG8gW3BsdWdpbiwgcmVzb3VyY2VdXG4gICAgICAgIC8vd2l0aCB0aGUgcGx1Z2luIGJlaW5nIHVuZGVmaW5lZCBpZiB0aGUgbmFtZVxuICAgICAgICAvL2RpZCBub3QgaGF2ZSBhIHBsdWdpbiBwcmVmaXguXG4gICAgICAgIGZ1bmN0aW9uIHNwbGl0UHJlZml4KG5hbWUpIHtcbiAgICAgICAgICAgIHZhciBwcmVmaXgsXG4gICAgICAgICAgICAgICAgaW5kZXggPSBuYW1lID8gbmFtZS5pbmRleE9mKCchJykgOiAtMTtcbiAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgcHJlZml4ID0gbmFtZS5zdWJzdHJpbmcoMCwgaW5kZXgpO1xuICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cmluZyhpbmRleCArIDEsIG5hbWUubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBbcHJlZml4LCBuYW1lXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGEgbW9kdWxlIG1hcHBpbmcgdGhhdCBpbmNsdWRlcyBwbHVnaW4gcHJlZml4LCBtb2R1bGVcbiAgICAgICAgICogbmFtZSwgYW5kIHBhdGguIElmIHBhcmVudE1vZHVsZU1hcCBpcyBwcm92aWRlZCBpdCB3aWxsXG4gICAgICAgICAqIGFsc28gbm9ybWFsaXplIHRoZSBuYW1lIHZpYSByZXF1aXJlLm5vcm1hbGl6ZSgpXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIHRoZSBtb2R1bGUgbmFtZVxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gW3BhcmVudE1vZHVsZU1hcF0gcGFyZW50IG1vZHVsZSBtYXBcbiAgICAgICAgICogZm9yIHRoZSBtb2R1bGUgbmFtZSwgdXNlZCB0byByZXNvbHZlIHJlbGF0aXZlIG5hbWVzLlxuICAgICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlzTm9ybWFsaXplZDogaXMgdGhlIElEIGFscmVhZHkgbm9ybWFsaXplZC5cbiAgICAgICAgICogVGhpcyBpcyB0cnVlIGlmIHRoaXMgY2FsbCBpcyBkb25lIGZvciBhIGRlZmluZSgpIG1vZHVsZSBJRC5cbiAgICAgICAgICogQHBhcmFtIHtCb29sZWFufSBhcHBseU1hcDogYXBwbHkgdGhlIG1hcCBjb25maWcgdG8gdGhlIElELlxuICAgICAgICAgKiBTaG91bGQgb25seSBiZSB0cnVlIGlmIHRoaXMgbWFwIGlzIGZvciBhIGRlcGVuZGVuY3kuXG4gICAgICAgICAqXG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBtYWtlTW9kdWxlTWFwKG5hbWUsIHBhcmVudE1vZHVsZU1hcCwgaXNOb3JtYWxpemVkLCBhcHBseU1hcCkge1xuICAgICAgICAgICAgdmFyIHVybCwgcGx1Z2luTW9kdWxlLCBzdWZmaXgsIG5hbWVQYXJ0cyxcbiAgICAgICAgICAgICAgICBwcmVmaXggPSBudWxsLFxuICAgICAgICAgICAgICAgIHBhcmVudE5hbWUgPSBwYXJlbnRNb2R1bGVNYXAgPyBwYXJlbnRNb2R1bGVNYXAubmFtZSA6IG51bGwsXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxOYW1lID0gbmFtZSxcbiAgICAgICAgICAgICAgICBpc0RlZmluZSA9IHRydWUsXG4gICAgICAgICAgICAgICAgbm9ybWFsaXplZE5hbWUgPSAnJztcblxuICAgICAgICAgICAgLy9JZiBubyBuYW1lLCB0aGVuIGl0IG1lYW5zIGl0IGlzIGEgcmVxdWlyZSBjYWxsLCBnZW5lcmF0ZSBhblxuICAgICAgICAgICAgLy9pbnRlcm5hbCBuYW1lLlxuICAgICAgICAgICAgaWYgKCFuYW1lKSB7XG4gICAgICAgICAgICAgICAgaXNEZWZpbmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBuYW1lID0gJ19AcicgKyAocmVxdWlyZUNvdW50ZXIgKz0gMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5hbWVQYXJ0cyA9IHNwbGl0UHJlZml4KG5hbWUpO1xuICAgICAgICAgICAgcHJlZml4ID0gbmFtZVBhcnRzWzBdO1xuICAgICAgICAgICAgbmFtZSA9IG5hbWVQYXJ0c1sxXTtcblxuICAgICAgICAgICAgaWYgKHByZWZpeCkge1xuICAgICAgICAgICAgICAgIHByZWZpeCA9IG5vcm1hbGl6ZShwcmVmaXgsIHBhcmVudE5hbWUsIGFwcGx5TWFwKTtcbiAgICAgICAgICAgICAgICBwbHVnaW5Nb2R1bGUgPSBnZXRPd24oZGVmaW5lZCwgcHJlZml4KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9BY2NvdW50IGZvciByZWxhdGl2ZSBwYXRocyBpZiB0aGVyZSBpcyBhIGJhc2UgbmFtZS5cbiAgICAgICAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByZWZpeCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNOb3JtYWxpemVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkTmFtZSA9IG5hbWU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGx1Z2luTW9kdWxlICYmIHBsdWdpbk1vZHVsZS5ub3JtYWxpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vUGx1Z2luIGlzIGxvYWRlZCwgdXNlIGl0cyBub3JtYWxpemUgbWV0aG9kLlxuICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZE5hbWUgPSBwbHVnaW5Nb2R1bGUubm9ybWFsaXplKG5hbWUsIGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZShuYW1lLCBwYXJlbnROYW1lLCBhcHBseU1hcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIG5lc3RlZCBwbHVnaW4gcmVmZXJlbmNlcywgdGhlbiBkbyBub3QgdHJ5IHRvXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBub3JtYWxpemUsIGFzIGl0IHdpbGwgbm90IG5vcm1hbGl6ZSBjb3JyZWN0bHkuIFRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBsYWNlcyBhIHJlc3RyaWN0aW9uIG9uIHJlc291cmNlSWRzLCBhbmQgdGhlIGxvbmdlclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGVybSBzb2x1dGlvbiBpcyBub3QgdG8gbm9ybWFsaXplIHVudGlsIHBsdWdpbnMgYXJlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsb2FkZWQgYW5kIGFsbCBub3JtYWxpemF0aW9ucyB0byBhbGxvdyBmb3IgYXN5bmNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvYWRpbmcgb2YgYSBsb2FkZXIgcGx1Z2luLiBCdXQgZm9yIG5vdywgZml4ZXMgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb21tb24gdXNlcy4gRGV0YWlscyBpbiAjMTEzMVxuICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZE5hbWUgPSBuYW1lLmluZGV4T2YoJyEnKSA9PT0gLTEgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxpemUobmFtZSwgcGFyZW50TmFtZSwgYXBwbHlNYXApIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vQSByZWd1bGFyIG1vZHVsZS5cbiAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZE5hbWUgPSBub3JtYWxpemUobmFtZSwgcGFyZW50TmFtZSwgYXBwbHlNYXApO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vTm9ybWFsaXplZCBuYW1lIG1heSBiZSBhIHBsdWdpbiBJRCBkdWUgdG8gbWFwIGNvbmZpZ1xuICAgICAgICAgICAgICAgICAgICAvL2FwcGxpY2F0aW9uIGluIG5vcm1hbGl6ZS4gVGhlIG1hcCBjb25maWcgdmFsdWVzIG11c3RcbiAgICAgICAgICAgICAgICAgICAgLy9hbHJlYWR5IGJlIG5vcm1hbGl6ZWQsIHNvIGRvIG5vdCBuZWVkIHRvIHJlZG8gdGhhdCBwYXJ0LlxuICAgICAgICAgICAgICAgICAgICBuYW1lUGFydHMgPSBzcGxpdFByZWZpeChub3JtYWxpemVkTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHByZWZpeCA9IG5hbWVQYXJ0c1swXTtcbiAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZE5hbWUgPSBuYW1lUGFydHNbMV07XG4gICAgICAgICAgICAgICAgICAgIGlzTm9ybWFsaXplZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgdXJsID0gY29udGV4dC5uYW1lVG9Vcmwobm9ybWFsaXplZE5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9JZiB0aGUgaWQgaXMgYSBwbHVnaW4gaWQgdGhhdCBjYW5ub3QgYmUgZGV0ZXJtaW5lZCBpZiBpdCBuZWVkc1xuICAgICAgICAgICAgLy9ub3JtYWxpemF0aW9uLCBzdGFtcCBpdCB3aXRoIGEgdW5pcXVlIElEIHNvIHR3byBtYXRjaGluZyByZWxhdGl2ZVxuICAgICAgICAgICAgLy9pZHMgdGhhdCBtYXkgY29uZmxpY3QgY2FuIGJlIHNlcGFyYXRlLlxuICAgICAgICAgICAgc3VmZml4ID0gcHJlZml4ICYmICFwbHVnaW5Nb2R1bGUgJiYgIWlzTm9ybWFsaXplZCA/XG4gICAgICAgICAgICAgICAgICAgICAnX3Vubm9ybWFsaXplZCcgKyAodW5ub3JtYWxpemVkQ291bnRlciArPSAxKSA6XG4gICAgICAgICAgICAgICAgICAgICAnJztcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBwcmVmaXg6IHByZWZpeCxcbiAgICAgICAgICAgICAgICBuYW1lOiBub3JtYWxpemVkTmFtZSxcbiAgICAgICAgICAgICAgICBwYXJlbnRNYXA6IHBhcmVudE1vZHVsZU1hcCxcbiAgICAgICAgICAgICAgICB1bm5vcm1hbGl6ZWQ6ICEhc3VmZml4LFxuICAgICAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgICAgIG9yaWdpbmFsTmFtZTogb3JpZ2luYWxOYW1lLFxuICAgICAgICAgICAgICAgIGlzRGVmaW5lOiBpc0RlZmluZSxcbiAgICAgICAgICAgICAgICBpZDogKHByZWZpeCA/XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVmaXggKyAnIScgKyBub3JtYWxpemVkTmFtZSA6XG4gICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkTmFtZSkgKyBzdWZmaXhcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRNb2R1bGUoZGVwTWFwKSB7XG4gICAgICAgICAgICB2YXIgaWQgPSBkZXBNYXAuaWQsXG4gICAgICAgICAgICAgICAgbW9kID0gZ2V0T3duKHJlZ2lzdHJ5LCBpZCk7XG5cbiAgICAgICAgICAgIGlmICghbW9kKSB7XG4gICAgICAgICAgICAgICAgbW9kID0gcmVnaXN0cnlbaWRdID0gbmV3IGNvbnRleHQuTW9kdWxlKGRlcE1hcCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBtb2Q7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvbihkZXBNYXAsIG5hbWUsIGZuKSB7XG4gICAgICAgICAgICB2YXIgaWQgPSBkZXBNYXAuaWQsXG4gICAgICAgICAgICAgICAgbW9kID0gZ2V0T3duKHJlZ2lzdHJ5LCBpZCk7XG5cbiAgICAgICAgICAgIGlmIChoYXNQcm9wKGRlZmluZWQsIGlkKSAmJlxuICAgICAgICAgICAgICAgICAgICAoIW1vZCB8fCBtb2QuZGVmaW5lRW1pdENvbXBsZXRlKSkge1xuICAgICAgICAgICAgICAgIGlmIChuYW1lID09PSAnZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgZm4oZGVmaW5lZFtpZF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbW9kID0gZ2V0TW9kdWxlKGRlcE1hcCk7XG4gICAgICAgICAgICAgICAgaWYgKG1vZC5lcnJvciAmJiBuYW1lID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICAgICAgICAgIGZuKG1vZC5lcnJvcik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kLm9uKG5hbWUsIGZuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvbkVycm9yKGVyciwgZXJyYmFjaykge1xuICAgICAgICAgICAgdmFyIGlkcyA9IGVyci5yZXF1aXJlTW9kdWxlcyxcbiAgICAgICAgICAgICAgICBub3RpZmllZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICBpZiAoZXJyYmFjaykge1xuICAgICAgICAgICAgICAgIGVycmJhY2soZXJyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZWFjaChpZHMsIGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbW9kID0gZ2V0T3duKHJlZ2lzdHJ5LCBpZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vU2V0IGVycm9yIG9uIG1vZHVsZSwgc28gaXQgc2tpcHMgdGltZW91dCBjaGVja3MuXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2QuZXJyb3IgPSBlcnI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kLmV2ZW50cy5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2QuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIW5vdGlmaWVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbkVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEludGVybmFsIG1ldGhvZCB0byB0cmFuc2ZlciBnbG9iYWxRdWV1ZSBpdGVtcyB0byB0aGlzIGNvbnRleHQnc1xuICAgICAgICAgKiBkZWZRdWV1ZS5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHRha2VHbG9iYWxRdWV1ZSgpIHtcbiAgICAgICAgICAgIC8vUHVzaCBhbGwgdGhlIGdsb2JhbERlZlF1ZXVlIGl0ZW1zIGludG8gdGhlIGNvbnRleHQncyBkZWZRdWV1ZVxuICAgICAgICAgICAgaWYgKGdsb2JhbERlZlF1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGVhY2goZ2xvYmFsRGVmUXVldWUsIGZ1bmN0aW9uKHF1ZXVlSXRlbSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSBxdWV1ZUl0ZW1bMF07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmRlZlF1ZXVlTWFwW2lkXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGVmUXVldWUucHVzaChxdWV1ZUl0ZW0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGdsb2JhbERlZlF1ZXVlID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBoYW5kbGVycyA9IHtcbiAgICAgICAgICAgICdyZXF1aXJlJzogZnVuY3Rpb24gKG1vZCkge1xuICAgICAgICAgICAgICAgIGlmIChtb2QucmVxdWlyZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbW9kLnJlcXVpcmU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChtb2QucmVxdWlyZSA9IGNvbnRleHQubWFrZVJlcXVpcmUobW9kLm1hcCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnZXhwb3J0cyc6IGZ1bmN0aW9uIChtb2QpIHtcbiAgICAgICAgICAgICAgICBtb2QudXNpbmdFeHBvcnRzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAobW9kLm1hcC5pc0RlZmluZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobW9kLmV4cG9ydHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoZGVmaW5lZFttb2QubWFwLmlkXSA9IG1vZC5leHBvcnRzKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAobW9kLmV4cG9ydHMgPSBkZWZpbmVkW21vZC5tYXAuaWRdID0ge30pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdtb2R1bGUnOiBmdW5jdGlvbiAobW9kKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1vZC5tb2R1bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vZC5tb2R1bGU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChtb2QubW9kdWxlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG1vZC5tYXAuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmk6IG1vZC5tYXAudXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldE93bihjb25maWcuY29uZmlnLCBtb2QubWFwLmlkKSB8fCB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBvcnRzOiBtb2QuZXhwb3J0cyB8fCAobW9kLmV4cG9ydHMgPSB7fSlcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGNsZWFuUmVnaXN0cnkoaWQpIHtcbiAgICAgICAgICAgIC8vQ2xlYW4gdXAgbWFjaGluZXJ5IHVzZWQgZm9yIHdhaXRpbmcgbW9kdWxlcy5cbiAgICAgICAgICAgIGRlbGV0ZSByZWdpc3RyeVtpZF07XG4gICAgICAgICAgICBkZWxldGUgZW5hYmxlZFJlZ2lzdHJ5W2lkXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGJyZWFrQ3ljbGUobW9kLCB0cmFjZWQsIHByb2Nlc3NlZCkge1xuICAgICAgICAgICAgdmFyIGlkID0gbW9kLm1hcC5pZDtcblxuICAgICAgICAgICAgaWYgKG1vZC5lcnJvcikge1xuICAgICAgICAgICAgICAgIG1vZC5lbWl0KCdlcnJvcicsIG1vZC5lcnJvcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRyYWNlZFtpZF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIGVhY2gobW9kLmRlcE1hcHMsIGZ1bmN0aW9uIChkZXBNYXAsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlcElkID0gZGVwTWFwLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVwID0gZ2V0T3duKHJlZ2lzdHJ5LCBkZXBJZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9Pbmx5IGZvcmNlIHRoaW5ncyB0aGF0IGhhdmUgbm90IGNvbXBsZXRlZFxuICAgICAgICAgICAgICAgICAgICAvL2JlaW5nIGRlZmluZWQsIHNvIHN0aWxsIGluIHRoZSByZWdpc3RyeSxcbiAgICAgICAgICAgICAgICAgICAgLy9hbmQgb25seSBpZiBpdCBoYXMgbm90IGJlZW4gbWF0Y2hlZCB1cFxuICAgICAgICAgICAgICAgICAgICAvL2luIHRoZSBtb2R1bGUgYWxyZWFkeS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlcCAmJiAhbW9kLmRlcE1hdGNoZWRbaV0gJiYgIXByb2Nlc3NlZFtkZXBJZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnZXRPd24odHJhY2VkLCBkZXBJZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2QuZGVmaW5lRGVwKGksIGRlZmluZWRbZGVwSWRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2QuY2hlY2soKTsgLy9wYXNzIGZhbHNlP1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha0N5Y2xlKGRlcCwgdHJhY2VkLCBwcm9jZXNzZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkW2lkXSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjaGVja0xvYWRlZCgpIHtcbiAgICAgICAgICAgIHZhciBlcnIsIHVzaW5nUGF0aEZhbGxiYWNrLFxuICAgICAgICAgICAgICAgIHdhaXRJbnRlcnZhbCA9IGNvbmZpZy53YWl0U2Vjb25kcyAqIDEwMDAsXG4gICAgICAgICAgICAgICAgLy9JdCBpcyBwb3NzaWJsZSB0byBkaXNhYmxlIHRoZSB3YWl0IGludGVydmFsIGJ5IHVzaW5nIHdhaXRTZWNvbmRzIG9mIDAuXG4gICAgICAgICAgICAgICAgZXhwaXJlZCA9IHdhaXRJbnRlcnZhbCAmJiAoY29udGV4dC5zdGFydFRpbWUgKyB3YWl0SW50ZXJ2YWwpIDwgbmV3IERhdGUoKS5nZXRUaW1lKCksXG4gICAgICAgICAgICAgICAgbm9Mb2FkcyA9IFtdLFxuICAgICAgICAgICAgICAgIHJlcUNhbGxzID0gW10sXG4gICAgICAgICAgICAgICAgc3RpbGxMb2FkaW5nID0gZmFsc2UsXG4gICAgICAgICAgICAgICAgbmVlZEN5Y2xlQ2hlY2sgPSB0cnVlO1xuXG4gICAgICAgICAgICAvL0RvIG5vdCBib3RoZXIgaWYgdGhpcyBjYWxsIHdhcyBhIHJlc3VsdCBvZiBhIGN5Y2xlIGJyZWFrLlxuICAgICAgICAgICAgaWYgKGluQ2hlY2tMb2FkZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGluQ2hlY2tMb2FkZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAvL0ZpZ3VyZSBvdXQgdGhlIHN0YXRlIG9mIGFsbCB0aGUgbW9kdWxlcy5cbiAgICAgICAgICAgIGVhY2hQcm9wKGVuYWJsZWRSZWdpc3RyeSwgZnVuY3Rpb24gKG1vZCkge1xuICAgICAgICAgICAgICAgIHZhciBtYXAgPSBtb2QubWFwLFxuICAgICAgICAgICAgICAgICAgICBtb2RJZCA9IG1hcC5pZDtcblxuICAgICAgICAgICAgICAgIC8vU2tpcCB0aGluZ3MgdGhhdCBhcmUgbm90IGVuYWJsZWQgb3IgaW4gZXJyb3Igc3RhdGUuXG4gICAgICAgICAgICAgICAgaWYgKCFtb2QuZW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCFtYXAuaXNEZWZpbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxQ2FsbHMucHVzaChtb2QpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICghbW9kLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vSWYgdGhlIG1vZHVsZSBzaG91bGQgYmUgZXhlY3V0ZWQsIGFuZCBpdCBoYXMgbm90XG4gICAgICAgICAgICAgICAgICAgIC8vYmVlbiBpbml0ZWQgYW5kIHRpbWUgaXMgdXAsIHJlbWVtYmVyIGl0LlxuICAgICAgICAgICAgICAgICAgICBpZiAoIW1vZC5pbml0ZWQgJiYgZXhwaXJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc1BhdGhGYWxsYmFjayhtb2RJZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2luZ1BhdGhGYWxsYmFjayA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RpbGxMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9Mb2Fkcy5wdXNoKG1vZElkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVTY3JpcHQobW9kSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFtb2QuaW5pdGVkICYmIG1vZC5mZXRjaGVkICYmIG1hcC5pc0RlZmluZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RpbGxMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWFwLnByZWZpeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vTm8gcmVhc29uIHRvIGtlZXAgbG9va2luZyBmb3IgdW5maW5pc2hlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbG9hZGluZy4gSWYgdGhlIG9ubHkgc3RpbGxMb2FkaW5nIGlzIGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3BsdWdpbiByZXNvdXJjZSB0aG91Z2gsIGtlZXAgZ29pbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9iZWNhdXNlIGl0IG1heSBiZSB0aGF0IGEgcGx1Z2luIHJlc291cmNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pcyB3YWl0aW5nIG9uIGEgbm9uLXBsdWdpbiBjeWNsZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG5lZWRDeWNsZUNoZWNrID0gZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChleHBpcmVkICYmIG5vTG9hZHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgLy9JZiB3YWl0IHRpbWUgZXhwaXJlZCwgdGhyb3cgZXJyb3Igb2YgdW5sb2FkZWQgbW9kdWxlcy5cbiAgICAgICAgICAgICAgICBlcnIgPSBtYWtlRXJyb3IoJ3RpbWVvdXQnLCAnTG9hZCB0aW1lb3V0IGZvciBtb2R1bGVzOiAnICsgbm9Mb2FkcywgbnVsbCwgbm9Mb2Fkcyk7XG4gICAgICAgICAgICAgICAgZXJyLmNvbnRleHROYW1lID0gY29udGV4dC5jb250ZXh0TmFtZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb25FcnJvcihlcnIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL05vdCBleHBpcmVkLCBjaGVjayBmb3IgYSBjeWNsZS5cbiAgICAgICAgICAgIGlmIChuZWVkQ3ljbGVDaGVjaykge1xuICAgICAgICAgICAgICAgIGVhY2gocmVxQ2FsbHMsIGZ1bmN0aW9uIChtb2QpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtDeWNsZShtb2QsIHt9LCB7fSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vSWYgc3RpbGwgd2FpdGluZyBvbiBsb2FkcywgYW5kIHRoZSB3YWl0aW5nIGxvYWQgaXMgc29tZXRoaW5nXG4gICAgICAgICAgICAvL290aGVyIHRoYW4gYSBwbHVnaW4gcmVzb3VyY2UsIG9yIHRoZXJlIGFyZSBzdGlsbCBvdXRzdGFuZGluZ1xuICAgICAgICAgICAgLy9zY3JpcHRzLCB0aGVuIGp1c3QgdHJ5IGJhY2sgbGF0ZXIuXG4gICAgICAgICAgICBpZiAoKCFleHBpcmVkIHx8IHVzaW5nUGF0aEZhbGxiYWNrKSAmJiBzdGlsbExvYWRpbmcpIHtcbiAgICAgICAgICAgICAgICAvL1NvbWV0aGluZyBpcyBzdGlsbCB3YWl0aW5nIHRvIGxvYWQuIFdhaXQgZm9yIGl0LCBidXQgb25seVxuICAgICAgICAgICAgICAgIC8vaWYgYSB0aW1lb3V0IGlzIG5vdCBhbHJlYWR5IGluIGVmZmVjdC5cbiAgICAgICAgICAgICAgICBpZiAoKGlzQnJvd3NlciB8fCBpc1dlYldvcmtlcikgJiYgIWNoZWNrTG9hZGVkVGltZW91dElkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrTG9hZGVkVGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0xvYWRlZFRpbWVvdXRJZCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0xvYWRlZCgpO1xuICAgICAgICAgICAgICAgICAgICB9LCA1MCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpbkNoZWNrTG9hZGVkID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBNb2R1bGUgPSBmdW5jdGlvbiAobWFwKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cyA9IGdldE93bih1bmRlZkV2ZW50cywgbWFwLmlkKSB8fCB7fTtcbiAgICAgICAgICAgIHRoaXMubWFwID0gbWFwO1xuICAgICAgICAgICAgdGhpcy5zaGltID0gZ2V0T3duKGNvbmZpZy5zaGltLCBtYXAuaWQpO1xuICAgICAgICAgICAgdGhpcy5kZXBFeHBvcnRzID0gW107XG4gICAgICAgICAgICB0aGlzLmRlcE1hcHMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuZGVwTWF0Y2hlZCA9IFtdO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW5NYXBzID0ge307XG4gICAgICAgICAgICB0aGlzLmRlcENvdW50ID0gMDtcblxuICAgICAgICAgICAgLyogdGhpcy5leHBvcnRzIHRoaXMuZmFjdG9yeVxuICAgICAgICAgICAgICAgdGhpcy5kZXBNYXBzID0gW10sXG4gICAgICAgICAgICAgICB0aGlzLmVuYWJsZWQsIHRoaXMuZmV0Y2hlZFxuICAgICAgICAgICAgKi9cbiAgICAgICAgfTtcblxuICAgICAgICBNb2R1bGUucHJvdG90eXBlID0ge1xuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24gKGRlcE1hcHMsIGZhY3RvcnksIGVycmJhY2ssIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICAgICAgICAgIC8vRG8gbm90IGRvIG1vcmUgaW5pdHMgaWYgYWxyZWFkeSBkb25lLiBDYW4gaGFwcGVuIGlmIHRoZXJlXG4gICAgICAgICAgICAgICAgLy9hcmUgbXVsdGlwbGUgZGVmaW5lIGNhbGxzIGZvciB0aGUgc2FtZSBtb2R1bGUuIFRoYXQgaXMgbm90XG4gICAgICAgICAgICAgICAgLy9hIG5vcm1hbCwgY29tbW9uIGNhc2UsIGJ1dCBpdCBpcyBhbHNvIG5vdCB1bmV4cGVjdGVkLlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmluaXRlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5mYWN0b3J5ID0gZmFjdG9yeTtcblxuICAgICAgICAgICAgICAgIGlmIChlcnJiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vUmVnaXN0ZXIgZm9yIGVycm9ycyBvbiB0aGlzIG1vZHVsZS5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbignZXJyb3InLCBlcnJiYWNrKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZXZlbnRzLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vSWYgbm8gZXJyYmFjayBhbHJlYWR5LCBidXQgdGhlcmUgYXJlIGVycm9yIGxpc3RlbmVyc1xuICAgICAgICAgICAgICAgICAgICAvL29uIHRoaXMgbW9kdWxlLCBzZXQgdXAgYW4gZXJyYmFjayB0byBwYXNzIHRvIHRoZSBkZXBzLlxuICAgICAgICAgICAgICAgICAgICBlcnJiYWNrID0gYmluZCh0aGlzLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9EbyBhIGNvcHkgb2YgdGhlIGRlcGVuZGVuY3kgYXJyYXksIHNvIHRoYXRcbiAgICAgICAgICAgICAgICAvL3NvdXJjZSBpbnB1dHMgYXJlIG5vdCBtb2RpZmllZC4gRm9yIGV4YW1wbGVcbiAgICAgICAgICAgICAgICAvL1wic2hpbVwiIGRlcHMgYXJlIHBhc3NlZCBpbiBoZXJlIGRpcmVjdGx5LCBhbmRcbiAgICAgICAgICAgICAgICAvL2RvaW5nIGEgZGlyZWN0IG1vZGlmaWNhdGlvbiBvZiB0aGUgZGVwTWFwcyBhcnJheVxuICAgICAgICAgICAgICAgIC8vd291bGQgYWZmZWN0IHRoYXQgY29uZmlnLlxuICAgICAgICAgICAgICAgIHRoaXMuZGVwTWFwcyA9IGRlcE1hcHMgJiYgZGVwTWFwcy5zbGljZSgwKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZXJyYmFjayA9IGVycmJhY2s7XG5cbiAgICAgICAgICAgICAgICAvL0luZGljYXRlIHRoaXMgbW9kdWxlIGhhcyBiZSBpbml0aWFsaXplZFxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIHRoaXMuaWdub3JlID0gb3B0aW9ucy5pZ25vcmU7XG5cbiAgICAgICAgICAgICAgICAvL0NvdWxkIGhhdmUgb3B0aW9uIHRvIGluaXQgdGhpcyBtb2R1bGUgaW4gZW5hYmxlZCBtb2RlLFxuICAgICAgICAgICAgICAgIC8vb3IgY291bGQgaGF2ZSBiZWVuIHByZXZpb3VzbHkgbWFya2VkIGFzIGVuYWJsZWQuIEhvd2V2ZXIsXG4gICAgICAgICAgICAgICAgLy90aGUgZGVwZW5kZW5jaWVzIGFyZSBub3Qga25vd24gdW50aWwgaW5pdCBpcyBjYWxsZWQuIFNvXG4gICAgICAgICAgICAgICAgLy9pZiBlbmFibGVkIHByZXZpb3VzbHksIG5vdyB0cmlnZ2VyIGRlcGVuZGVuY2llcyBhcyBlbmFibGVkLlxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmVuYWJsZWQgfHwgdGhpcy5lbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vRW5hYmxlIHRoaXMgbW9kdWxlIGFuZCBkZXBlbmRlbmNpZXMuXG4gICAgICAgICAgICAgICAgICAgIC8vV2lsbCBjYWxsIHRoaXMuY2hlY2soKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2soKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBkZWZpbmVEZXA6IGZ1bmN0aW9uIChpLCBkZXBFeHBvcnRzKSB7XG4gICAgICAgICAgICAgICAgLy9CZWNhdXNlIG9mIGN5Y2xlcywgZGVmaW5lZCBjYWxsYmFjayBmb3IgYSBnaXZlblxuICAgICAgICAgICAgICAgIC8vZXhwb3J0IGNhbiBiZSBjYWxsZWQgbW9yZSB0aGFuIG9uY2UuXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmRlcE1hdGNoZWRbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXBNYXRjaGVkW2ldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXBDb3VudCAtPSAxO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlcEV4cG9ydHNbaV0gPSBkZXBFeHBvcnRzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGZldGNoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZmV0Y2hlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hlZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICBjb250ZXh0LnN0YXJ0VGltZSA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgbWFwID0gdGhpcy5tYXA7XG5cbiAgICAgICAgICAgICAgICAvL0lmIHRoZSBtYW5hZ2VyIGlzIGZvciBhIHBsdWdpbiBtYW5hZ2VkIHJlc291cmNlLFxuICAgICAgICAgICAgICAgIC8vYXNrIHRoZSBwbHVnaW4gdG8gbG9hZCBpdCBub3cuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2hpbSkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0Lm1ha2VSZXF1aXJlKHRoaXMubWFwLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVCdWlsZENhbGxiYWNrOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH0pKHRoaXMuc2hpbS5kZXBzIHx8IFtdLCBiaW5kKHRoaXMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXAucHJlZml4ID8gdGhpcy5jYWxsUGx1Z2luKCkgOiB0aGlzLmxvYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vUmVndWxhciBkZXBlbmRlbmN5LlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFwLnByZWZpeCA/IHRoaXMuY2FsbFBsdWdpbigpIDogdGhpcy5sb2FkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciB1cmwgPSB0aGlzLm1hcC51cmw7XG5cbiAgICAgICAgICAgICAgICAvL1JlZ3VsYXIgZGVwZW5kZW5jeS5cbiAgICAgICAgICAgICAgICBpZiAoIXVybEZldGNoZWRbdXJsXSkge1xuICAgICAgICAgICAgICAgICAgICB1cmxGZXRjaGVkW3VybF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxvYWQodGhpcy5tYXAuaWQsIHVybCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDaGVja3MgaWYgdGhlIG1vZHVsZSBpcyByZWFkeSB0byBkZWZpbmUgaXRzZWxmLCBhbmQgaWYgc28sXG4gICAgICAgICAgICAgKiBkZWZpbmUgaXQuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNoZWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWQgfHwgdGhpcy5lbmFibGluZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGVyciwgY2pzTW9kdWxlLFxuICAgICAgICAgICAgICAgICAgICBpZCA9IHRoaXMubWFwLmlkLFxuICAgICAgICAgICAgICAgICAgICBkZXBFeHBvcnRzID0gdGhpcy5kZXBFeHBvcnRzLFxuICAgICAgICAgICAgICAgICAgICBleHBvcnRzID0gdGhpcy5leHBvcnRzLFxuICAgICAgICAgICAgICAgICAgICBmYWN0b3J5ID0gdGhpcy5mYWN0b3J5O1xuXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmluaXRlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IGZldGNoIGlmIG5vdCBhbHJlYWR5IGluIHRoZSBkZWZRdWV1ZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFoYXNQcm9wKGNvbnRleHQuZGVmUXVldWVNYXAsIGlkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mZXRjaCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB0aGlzLmVycm9yKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmRlZmluaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vVGhlIGZhY3RvcnkgY291bGQgdHJpZ2dlciBhbm90aGVyIHJlcXVpcmUgY2FsbFxuICAgICAgICAgICAgICAgICAgICAvL3RoYXQgd291bGQgcmVzdWx0IGluIGNoZWNraW5nIHRoaXMgbW9kdWxlIHRvXG4gICAgICAgICAgICAgICAgICAgIC8vZGVmaW5lIGl0c2VsZiBhZ2Fpbi4gSWYgYWxyZWFkeSBpbiB0aGUgcHJvY2Vzc1xuICAgICAgICAgICAgICAgICAgICAvL29mIGRvaW5nIHRoYXQsIHNraXAgdGhpcyB3b3JrLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmluaW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kZXBDb3VudCA8IDEgJiYgIXRoaXMuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oZmFjdG9yeSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0lmIHRoZXJlIGlzIGFuIGVycm9yIGxpc3RlbmVyLCBmYXZvciBwYXNzaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90byB0aGF0IGluc3RlYWQgb2YgdGhyb3dpbmcgYW4gZXJyb3IuIEhvd2V2ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9vbmx5IGRvIGl0IGZvciBkZWZpbmUoKSdkICBtb2R1bGVzLiByZXF1aXJlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9lcnJiYWNrcyBzaG91bGQgbm90IGJlIGNhbGxlZCBmb3IgZmFpbHVyZXMgaW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RoZWlyIGNhbGxiYWNrcyAoIzY5OSkuIEhvd2V2ZXIgaWYgYSBnbG9iYWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL29uRXJyb3IgaXMgc2V0LCB1c2UgdGhhdC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHRoaXMuZXZlbnRzLmVycm9yICYmIHRoaXMubWFwLmlzRGVmaW5lKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEub25FcnJvciAhPT0gZGVmYXVsdE9uRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydHMgPSBjb250ZXh0LmV4ZWNDYihpZCwgZmFjdG9yeSwgZGVwRXhwb3J0cywgZXhwb3J0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVyciA9IGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnRzID0gY29udGV4dC5leGVjQ2IoaWQsIGZhY3RvcnksIGRlcEV4cG9ydHMsIGV4cG9ydHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZhdm9yIHJldHVybiB2YWx1ZSBvdmVyIGV4cG9ydHMuIElmIG5vZGUvY2pzIGluIHBsYXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlbiB3aWxsIG5vdCBoYXZlIGEgcmV0dXJuIHZhbHVlIGFueXdheS4gRmF2b3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtb2R1bGUuZXhwb3J0cyBhc3NpZ25tZW50IG92ZXIgZXhwb3J0cyBvYmplY3QuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWFwLmlzRGVmaW5lICYmIGV4cG9ydHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjanNNb2R1bGUgPSB0aGlzLm1vZHVsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNqc01vZHVsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0cyA9IGNqc01vZHVsZS5leHBvcnRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMudXNpbmdFeHBvcnRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2V4cG9ydHMgYWxyZWFkeSBzZXQgdGhlIGRlZmluZWQgdmFsdWUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnRzID0gdGhpcy5leHBvcnRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnIucmVxdWlyZU1hcCA9IHRoaXMubWFwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnIucmVxdWlyZU1vZHVsZXMgPSB0aGlzLm1hcC5pc0RlZmluZSA/IFt0aGlzLm1hcC5pZF0gOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnIucmVxdWlyZVR5cGUgPSB0aGlzLm1hcC5pc0RlZmluZSA/ICdkZWZpbmUnIDogJ3JlcXVpcmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25FcnJvcigodGhpcy5lcnJvciA9IGVycikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0p1c3QgYSBsaXRlcmFsIHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0cyA9IGZhY3Rvcnk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXhwb3J0cyA9IGV4cG9ydHM7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hcC5pc0RlZmluZSAmJiAhdGhpcy5pZ25vcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZpbmVkW2lkXSA9IGV4cG9ydHM7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxLm9uUmVzb3VyY2VMb2FkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXNMb2FkTWFwcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYWNoKHRoaXMuZGVwTWFwcywgZnVuY3Rpb24gKGRlcE1hcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzTG9hZE1hcHMucHVzaChkZXBNYXAubm9ybWFsaXplZE1hcCB8fCBkZXBNYXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uUmVzb3VyY2VMb2FkKGNvbnRleHQsIHRoaXMubWFwLCByZXNMb2FkTWFwcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0NsZWFuIHVwXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhblJlZ2lzdHJ5KGlkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZpbmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vRmluaXNoZWQgdGhlIGRlZmluZSBzdGFnZS4gQWxsb3cgY2FsbGluZyBjaGVjayBhZ2FpblxuICAgICAgICAgICAgICAgICAgICAvL3RvIGFsbG93IGRlZmluZSBub3RpZmljYXRpb25zIGJlbG93IGluIHRoZSBjYXNlIG9mIGFcbiAgICAgICAgICAgICAgICAgICAgLy9jeWNsZS5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZpbmluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlZmluZWQgJiYgIXRoaXMuZGVmaW5lRW1pdHRlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZpbmVFbWl0dGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZGVmaW5lZCcsIHRoaXMuZXhwb3J0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmluZUVtaXRDb21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGNhbGxQbHVnaW46IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWFwID0gdGhpcy5tYXAsXG4gICAgICAgICAgICAgICAgICAgIGlkID0gbWFwLmlkLFxuICAgICAgICAgICAgICAgICAgICAvL01hcCBhbHJlYWR5IG5vcm1hbGl6ZWQgdGhlIHByZWZpeC5cbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luTWFwID0gbWFrZU1vZHVsZU1hcChtYXAucHJlZml4KTtcblxuICAgICAgICAgICAgICAgIC8vTWFyayB0aGlzIGFzIGEgZGVwZW5kZW5jeSBmb3IgdGhpcyBwbHVnaW4sIHNvIGl0XG4gICAgICAgICAgICAgICAgLy9jYW4gYmUgdHJhY2VkIGZvciBjeWNsZXMuXG4gICAgICAgICAgICAgICAgdGhpcy5kZXBNYXBzLnB1c2gocGx1Z2luTWFwKTtcblxuICAgICAgICAgICAgICAgIG9uKHBsdWdpbk1hcCwgJ2RlZmluZWQnLCBiaW5kKHRoaXMsIGZ1bmN0aW9uIChwbHVnaW4pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvYWQsIG5vcm1hbGl6ZWRNYXAsIG5vcm1hbGl6ZWRNb2QsXG4gICAgICAgICAgICAgICAgICAgICAgICBidW5kbGVJZCA9IGdldE93bihidW5kbGVzTWFwLCB0aGlzLm1hcC5pZCksXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gdGhpcy5tYXAubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudE5hbWUgPSB0aGlzLm1hcC5wYXJlbnRNYXAgPyB0aGlzLm1hcC5wYXJlbnRNYXAubmFtZSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFJlcXVpcmUgPSBjb250ZXh0Lm1ha2VSZXF1aXJlKG1hcC5wYXJlbnRNYXAsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVCdWlsZENhbGxiYWNrOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvL0lmIGN1cnJlbnQgbWFwIGlzIG5vdCBub3JtYWxpemVkLCB3YWl0IGZvciB0aGF0XG4gICAgICAgICAgICAgICAgICAgIC8vbm9ybWFsaXplZCBuYW1lIHRvIGxvYWQgaW5zdGVhZCBvZiBjb250aW51aW5nLlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tYXAudW5ub3JtYWxpemVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL05vcm1hbGl6ZSB0aGUgSUQgaWYgdGhlIHBsdWdpbiBhbGxvd3MgaXQuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGx1Z2luLm5vcm1hbGl6ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgPSBwbHVnaW4ubm9ybWFsaXplKG5hbWUsIGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBub3JtYWxpemUobmFtZSwgcGFyZW50TmFtZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkgfHwgJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vcHJlZml4IGFuZCBuYW1lIHNob3VsZCBhbHJlYWR5IGJlIG5vcm1hbGl6ZWQsIG5vIG5lZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZm9yIGFwcGx5aW5nIG1hcCBjb25maWcgYWdhaW4gZWl0aGVyLlxuICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZE1hcCA9IG1ha2VNb2R1bGVNYXAobWFwLnByZWZpeCArICchJyArIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcC5wYXJlbnRNYXAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uKG5vcm1hbGl6ZWRNYXAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RlZmluZWQnLCBiaW5kKHRoaXMsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcC5ub3JtYWxpemVkTWFwID0gbm9ybWFsaXplZE1hcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0KFtdLCBmdW5jdGlvbiAoKSB7IHJldHVybiB2YWx1ZTsgfSwgbnVsbCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlnbm9yZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRNb2QgPSBnZXRPd24ocmVnaXN0cnksIG5vcm1hbGl6ZWRNYXAuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWRNb2QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL01hcmsgdGhpcyBhcyBhIGRlcGVuZGVuY3kgZm9yIHRoaXMgcGx1Z2luLCBzbyBpdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY2FuIGJlIHRyYWNlZCBmb3IgY3ljbGVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVwTWFwcy5wdXNoKG5vcm1hbGl6ZWRNYXApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZXZlbnRzLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRNb2Qub24oJ2Vycm9yJywgYmluZCh0aGlzLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkTW9kLmVuYWJsZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvL0lmIGEgcGF0aHMgY29uZmlnLCB0aGVuIGp1c3QgbG9hZCB0aGF0IGZpbGUgaW5zdGVhZCB0b1xuICAgICAgICAgICAgICAgICAgICAvL3Jlc29sdmUgdGhlIHBsdWdpbiwgYXMgaXQgaXMgYnVpbHQgaW50byB0aGF0IHBhdGhzIGxheWVyLlxuICAgICAgICAgICAgICAgICAgICBpZiAoYnVuZGxlSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFwLnVybCA9IGNvbnRleHQubmFtZVRvVXJsKGJ1bmRsZUlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgbG9hZCA9IGJpbmQodGhpcywgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXQoW10sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHZhbHVlOyB9LCBudWxsLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGxvYWQuZXJyb3IgPSBiaW5kKHRoaXMsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBlcnI7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnIucmVxdWlyZU1vZHVsZXMgPSBbaWRdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1JlbW92ZSB0ZW1wIHVubm9ybWFsaXplZCBtb2R1bGVzIGZvciB0aGlzIG1vZHVsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vc2luY2UgdGhleSB3aWxsIG5ldmVyIGJlIHJlc29sdmVkIG90aGVyd2lzZSBub3cuXG4gICAgICAgICAgICAgICAgICAgICAgICBlYWNoUHJvcChyZWdpc3RyeSwgZnVuY3Rpb24gKG1vZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2QubWFwLmlkLmluZGV4T2YoaWQgKyAnX3Vubm9ybWFsaXplZCcpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFuUmVnaXN0cnkobW9kLm1hcC5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9BbGxvdyBwbHVnaW5zIHRvIGxvYWQgb3RoZXIgY29kZSB3aXRob3V0IGhhdmluZyB0byBrbm93IHRoZVxuICAgICAgICAgICAgICAgICAgICAvL2NvbnRleHQgb3IgaG93IHRvICdjb21wbGV0ZScgdGhlIGxvYWQuXG4gICAgICAgICAgICAgICAgICAgIGxvYWQuZnJvbVRleHQgPSBiaW5kKHRoaXMsIGZ1bmN0aW9uICh0ZXh0LCB0ZXh0QWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKmpzbGludCBldmlsOiB0cnVlICovXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW9kdWxlTmFtZSA9IG1hcC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZU1hcCA9IG1ha2VNb2R1bGVNYXAobW9kdWxlTmFtZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzSW50ZXJhY3RpdmUgPSB1c2VJbnRlcmFjdGl2ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9BcyBvZiAyLjEuMCwgc3VwcG9ydCBqdXN0IHBhc3NpbmcgdGhlIHRleHQsIHRvIHJlaW5mb3JjZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9mcm9tVGV4dCBvbmx5IGJlaW5nIGNhbGxlZCBvbmNlIHBlciByZXNvdXJjZS4gU3RpbGxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vc3VwcG9ydCBvbGQgc3R5bGUgb2YgcGFzc2luZyBtb2R1bGVOYW1lIGJ1dCBkaXNjYXJkXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3RoYXQgbW9kdWxlTmFtZSBpbiBmYXZvciBvZiB0aGUgaW50ZXJuYWwgcmVmLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRleHRBbHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gdGV4dEFsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9UdXJuIG9mZiBpbnRlcmFjdGl2ZSBzY3JpcHQgbWF0Y2hpbmcgZm9yIElFIGZvciBhbnkgZGVmaW5lXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NhbGxzIGluIHRoZSB0ZXh0LCB0aGVuIHR1cm4gaXQgYmFjayBvbiBhdCB0aGUgZW5kLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc0ludGVyYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlSW50ZXJhY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9QcmltZSB0aGUgc3lzdGVtIGJ5IGNyZWF0aW5nIGEgbW9kdWxlIGluc3RhbmNlIGZvclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9pdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGdldE1vZHVsZShtb2R1bGVNYXApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1RyYW5zZmVyIGFueSBjb25maWcgdG8gdGhpcyBvdGhlciBtb2R1bGUuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzUHJvcChjb25maWcuY29uZmlnLCBpZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcuY29uZmlnW21vZHVsZU5hbWVdID0gY29uZmlnLmNvbmZpZ1tpZF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLmV4ZWModGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uRXJyb3IobWFrZUVycm9yKCdmcm9tdGV4dGV2YWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Zyb21UZXh0IGV2YWwgZm9yICcgKyBpZCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgZmFpbGVkOiAnICsgZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbaWRdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNJbnRlcmFjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZUludGVyYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9NYXJrIHRoaXMgYXMgYSBkZXBlbmRlbmN5IGZvciB0aGUgcGx1Z2luXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3Jlc291cmNlXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlcE1hcHMucHVzaChtb2R1bGVNYXApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1N1cHBvcnQgYW5vbnltb3VzIG1vZHVsZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNvbXBsZXRlTG9hZChtb2R1bGVOYW1lKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9CaW5kIHRoZSB2YWx1ZSBvZiB0aGF0IG1vZHVsZSB0byB0aGUgdmFsdWUgZm9yIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vcmVzb3VyY2UgSUQuXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFJlcXVpcmUoW21vZHVsZU5hbWVdLCBsb2FkKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9Vc2UgcGFyZW50TmFtZSBoZXJlIHNpbmNlIHRoZSBwbHVnaW4ncyBuYW1lIGlzIG5vdCByZWxpYWJsZSxcbiAgICAgICAgICAgICAgICAgICAgLy9jb3VsZCBiZSBzb21lIHdlaXJkIHN0cmluZyB3aXRoIG5vIHBhdGggdGhhdCBhY3R1YWxseSB3YW50cyB0b1xuICAgICAgICAgICAgICAgICAgICAvL3JlZmVyZW5jZSB0aGUgcGFyZW50TmFtZSdzIHBhdGguXG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbi5sb2FkKG1hcC5uYW1lLCBsb2NhbFJlcXVpcmUsIGxvYWQsIGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgY29udGV4dC5lbmFibGUocGx1Z2luTWFwLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbk1hcHNbcGx1Z2luTWFwLmlkXSA9IHBsdWdpbk1hcDtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGVuYWJsZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGVuYWJsZWRSZWdpc3RyeVt0aGlzLm1hcC5pZF0gPSB0aGlzO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAvL1NldCBmbGFnIG1lbnRpb25pbmcgdGhhdCB0aGUgbW9kdWxlIGlzIGVuYWJsaW5nLFxuICAgICAgICAgICAgICAgIC8vc28gdGhhdCBpbW1lZGlhdGUgY2FsbHMgdG8gdGhlIGRlZmluZWQgY2FsbGJhY2tzXG4gICAgICAgICAgICAgICAgLy9mb3IgZGVwZW5kZW5jaWVzIGRvIG5vdCB0cmlnZ2VyIGluYWR2ZXJ0ZW50IGxvYWRcbiAgICAgICAgICAgICAgICAvL3dpdGggdGhlIGRlcENvdW50IHN0aWxsIGJlaW5nIHplcm8uXG4gICAgICAgICAgICAgICAgdGhpcy5lbmFibGluZyA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAvL0VuYWJsZSBlYWNoIGRlcGVuZGVuY3lcbiAgICAgICAgICAgICAgICBlYWNoKHRoaXMuZGVwTWFwcywgYmluZCh0aGlzLCBmdW5jdGlvbiAoZGVwTWFwLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpZCwgbW9kLCBoYW5kbGVyO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGVwTWFwID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9EZXBlbmRlbmN5IG5lZWRzIHRvIGJlIGNvbnZlcnRlZCB0byBhIGRlcE1hcFxuICAgICAgICAgICAgICAgICAgICAgICAgLy9hbmQgd2lyZWQgdXAgdG8gdGhpcyBtb2R1bGUuXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXBNYXAgPSBtYWtlTW9kdWxlTWFwKGRlcE1hcCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMubWFwLmlzRGVmaW5lID8gdGhpcy5tYXAgOiB0aGlzLm1hcC5wYXJlbnRNYXApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMuc2tpcE1hcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlcE1hcHNbaV0gPSBkZXBNYXA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXIgPSBnZXRPd24oaGFuZGxlcnMsIGRlcE1hcC5pZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXBFeHBvcnRzW2ldID0gaGFuZGxlcih0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVwQ291bnQgKz0gMTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgb24oZGVwTWFwLCAnZGVmaW5lZCcsIGJpbmQodGhpcywgZnVuY3Rpb24gKGRlcEV4cG9ydHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bmRlZmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZpbmVEZXAoaSwgZGVwRXhwb3J0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVjaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lcnJiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb24oZGVwTWFwLCAnZXJyb3InLCBiaW5kKHRoaXMsIHRoaXMuZXJyYmFjaykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmV2ZW50cy5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGRpcmVjdCBlcnJiYWNrIG9uIHRoaXMgbW9kdWxlLCBidXQgc29tZXRoaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWxzZSBpcyBsaXN0ZW5pbmcgZm9yIGVycm9ycywgc28gYmUgc3VyZSB0b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByb3BhZ2F0ZSB0aGUgZXJyb3IgY29ycmVjdGx5LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uKGRlcE1hcCwgJ2Vycm9yJywgYmluZCh0aGlzLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWQgPSBkZXBNYXAuaWQ7XG4gICAgICAgICAgICAgICAgICAgIG1vZCA9IHJlZ2lzdHJ5W2lkXTtcblxuICAgICAgICAgICAgICAgICAgICAvL1NraXAgc3BlY2lhbCBtb2R1bGVzIGxpa2UgJ3JlcXVpcmUnLCAnZXhwb3J0cycsICdtb2R1bGUnXG4gICAgICAgICAgICAgICAgICAgIC8vQWxzbywgZG9uJ3QgY2FsbCBlbmFibGUgaWYgaXQgaXMgYWxyZWFkeSBlbmFibGVkLFxuICAgICAgICAgICAgICAgICAgICAvL2ltcG9ydGFudCBpbiBjaXJjdWxhciBkZXBlbmRlbmN5IGNhc2VzLlxuICAgICAgICAgICAgICAgICAgICBpZiAoIWhhc1Byb3AoaGFuZGxlcnMsIGlkKSAmJiBtb2QgJiYgIW1vZC5lbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmVuYWJsZShkZXBNYXAsIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy9FbmFibGUgZWFjaCBwbHVnaW4gdGhhdCBpcyB1c2VkIGluXG4gICAgICAgICAgICAgICAgLy9hIGRlcGVuZGVuY3lcbiAgICAgICAgICAgICAgICBlYWNoUHJvcCh0aGlzLnBsdWdpbk1hcHMsIGJpbmQodGhpcywgZnVuY3Rpb24gKHBsdWdpbk1hcCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbW9kID0gZ2V0T3duKHJlZ2lzdHJ5LCBwbHVnaW5NYXAuaWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobW9kICYmICFtb2QuZW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5lbmFibGUocGx1Z2luTWFwLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxpbmcgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2soKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIG9uOiBmdW5jdGlvbiAobmFtZSwgY2IpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2JzID0gdGhpcy5ldmVudHNbbmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKCFjYnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY2JzID0gdGhpcy5ldmVudHNbbmFtZV0gPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2JzLnB1c2goY2IpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgZW1pdDogZnVuY3Rpb24gKG5hbWUsIGV2dCkge1xuICAgICAgICAgICAgICAgIGVhY2godGhpcy5ldmVudHNbbmFtZV0sIGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgICAgICAgICBjYihldnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChuYW1lID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vTm93IHRoYXQgdGhlIGVycm9yIGhhbmRsZXIgd2FzIHRyaWdnZXJlZCwgcmVtb3ZlXG4gICAgICAgICAgICAgICAgICAgIC8vdGhlIGxpc3RlbmVycywgc2luY2UgdGhpcyBicm9rZW4gTW9kdWxlIGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICAgIC8vY2FuIHN0YXkgYXJvdW5kIGZvciBhIHdoaWxlIGluIHRoZSByZWdpc3RyeS5cbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuZXZlbnRzW25hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBjYWxsR2V0TW9kdWxlKGFyZ3MpIHtcbiAgICAgICAgICAgIC8vU2tpcCBtb2R1bGVzIGFscmVhZHkgZGVmaW5lZC5cbiAgICAgICAgICAgIGlmICghaGFzUHJvcChkZWZpbmVkLCBhcmdzWzBdKSkge1xuICAgICAgICAgICAgICAgIGdldE1vZHVsZShtYWtlTW9kdWxlTWFwKGFyZ3NbMF0sIG51bGwsIHRydWUpKS5pbml0KGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIobm9kZSwgZnVuYywgbmFtZSwgaWVOYW1lKSB7XG4gICAgICAgICAgICAvL0Zhdm9yIGRldGFjaEV2ZW50IGJlY2F1c2Ugb2YgSUU5XG4gICAgICAgICAgICAvL2lzc3VlLCBzZWUgYXR0YWNoRXZlbnQvYWRkRXZlbnRMaXN0ZW5lciBjb21tZW50IGVsc2V3aGVyZVxuICAgICAgICAgICAgLy9pbiB0aGlzIGZpbGUuXG4gICAgICAgICAgICBpZiAobm9kZS5kZXRhY2hFdmVudCAmJiAhaXNPcGVyYSkge1xuICAgICAgICAgICAgICAgIC8vUHJvYmFibHkgSUUuIElmIG5vdCBpdCB3aWxsIHRocm93IGFuIGVycm9yLCB3aGljaCB3aWxsIGJlXG4gICAgICAgICAgICAgICAgLy91c2VmdWwgdG8ga25vdy5cbiAgICAgICAgICAgICAgICBpZiAoaWVOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuZGV0YWNoRXZlbnQoaWVOYW1lLCBmdW5jKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihuYW1lLCBmdW5jLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogR2l2ZW4gYW4gZXZlbnQgZnJvbSBhIHNjcmlwdCBub2RlLCBnZXQgdGhlIHJlcXVpcmVqcyBpbmZvIGZyb20gaXQsXG4gICAgICAgICAqIGFuZCB0aGVuIHJlbW92ZXMgdGhlIGV2ZW50IGxpc3RlbmVycyBvbiB0aGUgbm9kZS5cbiAgICAgICAgICogQHBhcmFtIHtFdmVudH0gZXZ0XG4gICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBnZXRTY3JpcHREYXRhKGV2dCkge1xuICAgICAgICAgICAgLy9Vc2luZyBjdXJyZW50VGFyZ2V0IGluc3RlYWQgb2YgdGFyZ2V0IGZvciBGaXJlZm94IDIuMCdzIHNha2UuIE5vdFxuICAgICAgICAgICAgLy9hbGwgb2xkIGJyb3dzZXJzIHdpbGwgYmUgc3VwcG9ydGVkLCBidXQgdGhpcyBvbmUgd2FzIGVhc3kgZW5vdWdoXG4gICAgICAgICAgICAvL3RvIHN1cHBvcnQgYW5kIHN0aWxsIG1ha2VzIHNlbnNlLlxuICAgICAgICAgICAgdmFyIG5vZGUgPSBldnQuY3VycmVudFRhcmdldCB8fCBldnQuc3JjRWxlbWVudDtcblxuICAgICAgICAgICAgLy9SZW1vdmUgdGhlIGxpc3RlbmVycyBvbmNlIGhlcmUuXG4gICAgICAgICAgICByZW1vdmVMaXN0ZW5lcihub2RlLCBjb250ZXh0Lm9uU2NyaXB0TG9hZCwgJ2xvYWQnLCAnb25yZWFkeXN0YXRlY2hhbmdlJyk7XG4gICAgICAgICAgICByZW1vdmVMaXN0ZW5lcihub2RlLCBjb250ZXh0Lm9uU2NyaXB0RXJyb3IsICdlcnJvcicpO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5vZGU6IG5vZGUsXG4gICAgICAgICAgICAgICAgaWQ6IG5vZGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtcmVxdWlyZW1vZHVsZScpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaW50YWtlRGVmaW5lcygpIHtcbiAgICAgICAgICAgIHZhciBhcmdzO1xuXG4gICAgICAgICAgICAvL0FueSBkZWZpbmVkIG1vZHVsZXMgaW4gdGhlIGdsb2JhbCBxdWV1ZSwgaW50YWtlIHRoZW0gbm93LlxuICAgICAgICAgICAgdGFrZUdsb2JhbFF1ZXVlKCk7XG5cbiAgICAgICAgICAgIC8vTWFrZSBzdXJlIGFueSByZW1haW5pbmcgZGVmUXVldWUgaXRlbXMgZ2V0IHByb3Blcmx5IHByb2Nlc3NlZC5cbiAgICAgICAgICAgIHdoaWxlIChkZWZRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBhcmdzID0gZGVmUXVldWUuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICBpZiAoYXJnc1swXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25FcnJvcihtYWtlRXJyb3IoJ21pc21hdGNoJywgJ01pc21hdGNoZWQgYW5vbnltb3VzIGRlZmluZSgpIG1vZHVsZTogJyArXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzW2FyZ3MubGVuZ3RoIC0gMV0pKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL2FyZ3MgYXJlIGlkLCBkZXBzLCBmYWN0b3J5LiBTaG91bGQgYmUgbm9ybWFsaXplZCBieSB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy9kZWZpbmUoKSBmdW5jdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgY2FsbEdldE1vZHVsZShhcmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250ZXh0LmRlZlF1ZXVlTWFwID0ge307XG4gICAgICAgIH1cblxuICAgICAgICBjb250ZXh0ID0ge1xuICAgICAgICAgICAgY29uZmlnOiBjb25maWcsXG4gICAgICAgICAgICBjb250ZXh0TmFtZTogY29udGV4dE5hbWUsXG4gICAgICAgICAgICByZWdpc3RyeTogcmVnaXN0cnksXG4gICAgICAgICAgICBkZWZpbmVkOiBkZWZpbmVkLFxuICAgICAgICAgICAgdXJsRmV0Y2hlZDogdXJsRmV0Y2hlZCxcbiAgICAgICAgICAgIGRlZlF1ZXVlOiBkZWZRdWV1ZSxcbiAgICAgICAgICAgIGRlZlF1ZXVlTWFwOiB7fSxcbiAgICAgICAgICAgIE1vZHVsZTogTW9kdWxlLFxuICAgICAgICAgICAgbWFrZU1vZHVsZU1hcDogbWFrZU1vZHVsZU1hcCxcbiAgICAgICAgICAgIG5leHRUaWNrOiByZXEubmV4dFRpY2ssXG4gICAgICAgICAgICBvbkVycm9yOiBvbkVycm9yLFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFNldCBhIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBjb250ZXh0LlxuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGNmZyBjb25maWcgb2JqZWN0IHRvIGludGVncmF0ZS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgY29uZmlndXJlOiBmdW5jdGlvbiAoY2ZnKSB7XG4gICAgICAgICAgICAgICAgLy9NYWtlIHN1cmUgdGhlIGJhc2VVcmwgZW5kcyBpbiBhIHNsYXNoLlxuICAgICAgICAgICAgICAgIGlmIChjZmcuYmFzZVVybCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2ZnLmJhc2VVcmwuY2hhckF0KGNmZy5iYXNlVXJsLmxlbmd0aCAtIDEpICE9PSAnLycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNmZy5iYXNlVXJsICs9ICcvJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgb2xkIHN0eWxlIHVybEFyZ3Mgc3RyaW5nIHRvIGEgZnVuY3Rpb24uXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjZmcudXJsQXJncyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybEFyZ3MgPSBjZmcudXJsQXJncztcbiAgICAgICAgICAgICAgICAgICAgY2ZnLnVybEFyZ3MgPSBmdW5jdGlvbihpZCwgdXJsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHVybC5pbmRleE9mKCc/JykgPT09IC0xID8gJz8nIDogJyYnKSArIHVybEFyZ3M7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9TYXZlIG9mZiB0aGUgcGF0aHMgc2luY2UgdGhleSByZXF1aXJlIHNwZWNpYWwgcHJvY2Vzc2luZyxcbiAgICAgICAgICAgICAgICAvL3RoZXkgYXJlIGFkZGl0aXZlLlxuICAgICAgICAgICAgICAgIHZhciBzaGltID0gY29uZmlnLnNoaW0sXG4gICAgICAgICAgICAgICAgICAgIG9ianMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1bmRsZXM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWc6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXA6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGVhY2hQcm9wKGNmZywgZnVuY3Rpb24gKHZhbHVlLCBwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmpzW3Byb3BdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbmZpZ1twcm9wXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ1twcm9wXSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbWl4aW4oY29uZmlnW3Byb3BdLCB2YWx1ZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWdbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy9SZXZlcnNlIG1hcCB0aGUgYnVuZGxlc1xuICAgICAgICAgICAgICAgIGlmIChjZmcuYnVuZGxlcykge1xuICAgICAgICAgICAgICAgICAgICBlYWNoUHJvcChjZmcuYnVuZGxlcywgZnVuY3Rpb24gKHZhbHVlLCBwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlYWNoKHZhbHVlLCBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ICE9PSBwcm9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1bmRsZXNNYXBbdl0gPSBwcm9wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL01lcmdlIHNoaW1cbiAgICAgICAgICAgICAgICBpZiAoY2ZnLnNoaW0pIHtcbiAgICAgICAgICAgICAgICAgICAgZWFjaFByb3AoY2ZnLnNoaW0sIGZ1bmN0aW9uICh2YWx1ZSwgaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vTm9ybWFsaXplIHRoZSBzdHJ1Y3R1cmVcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXBzOiB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHZhbHVlLmV4cG9ydHMgfHwgdmFsdWUuaW5pdCkgJiYgIXZhbHVlLmV4cG9ydHNGbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLmV4cG9ydHNGbiA9IGNvbnRleHQubWFrZVNoaW1FeHBvcnRzKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNoaW1baWRdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25maWcuc2hpbSA9IHNoaW07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9BZGp1c3QgcGFja2FnZXMgaWYgbmVjZXNzYXJ5LlxuICAgICAgICAgICAgICAgIGlmIChjZmcucGFja2FnZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgZWFjaChjZmcucGFja2FnZXMsIGZ1bmN0aW9uIChwa2dPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbiwgbmFtZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcGtnT2JqID0gdHlwZW9mIHBrZ09iaiA9PT0gJ3N0cmluZycgPyB7bmFtZTogcGtnT2JqfSA6IHBrZ09iajtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IHBrZ09iai5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24gPSBwa2dPYmoubG9jYXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcucGF0aHNbbmFtZV0gPSBwa2dPYmoubG9jYXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vU2F2ZSBwb2ludGVyIHRvIG1haW4gbW9kdWxlIElEIGZvciBwa2cgbmFtZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vUmVtb3ZlIGxlYWRpbmcgZG90IGluIG1haW4sIHNvIG1haW4gcGF0aHMgYXJlIG5vcm1hbGl6ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2FuZCByZW1vdmUgYW55IHRyYWlsaW5nIC5qcywgc2luY2UgZGlmZmVyZW50IHBhY2thZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZW52cyBoYXZlIGRpZmZlcmVudCBjb252ZW50aW9uczogc29tZSB1c2UgYSBtb2R1bGUgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vc29tZSB1c2UgYSBmaWxlIG5hbWUuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWcucGtnc1tuYW1lXSA9IHBrZ09iai5uYW1lICsgJy8nICsgKHBrZ09iai5tYWluIHx8ICdtYWluJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZShjdXJyRGlyUmVnRXhwLCAnJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZShqc1N1ZmZpeFJlZ0V4cCwgJycpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL0lmIHRoZXJlIGFyZSBhbnkgXCJ3YWl0aW5nIHRvIGV4ZWN1dGVcIiBtb2R1bGVzIGluIHRoZSByZWdpc3RyeSxcbiAgICAgICAgICAgICAgICAvL3VwZGF0ZSB0aGUgbWFwcyBmb3IgdGhlbSwgc2luY2UgdGhlaXIgaW5mbywgbGlrZSBVUkxzIHRvIGxvYWQsXG4gICAgICAgICAgICAgICAgLy9tYXkgaGF2ZSBjaGFuZ2VkLlxuICAgICAgICAgICAgICAgIGVhY2hQcm9wKHJlZ2lzdHJ5LCBmdW5jdGlvbiAobW9kLCBpZCkge1xuICAgICAgICAgICAgICAgICAgICAvL0lmIG1vZHVsZSBhbHJlYWR5IGhhcyBpbml0IGNhbGxlZCwgc2luY2UgaXQgaXMgdG9vXG4gICAgICAgICAgICAgICAgICAgIC8vbGF0ZSB0byBtb2RpZnkgdGhlbSwgYW5kIGlnbm9yZSB1bm5vcm1hbGl6ZWQgb25lc1xuICAgICAgICAgICAgICAgICAgICAvL3NpbmNlIHRoZXkgYXJlIHRyYW5zaWVudC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtb2QuaW5pdGVkICYmICFtb2QubWFwLnVubm9ybWFsaXplZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kLm1hcCA9IG1ha2VNb2R1bGVNYXAoaWQsIG51bGwsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvL0lmIGEgZGVwcyBhcnJheSBvciBhIGNvbmZpZyBjYWxsYmFjayBpcyBzcGVjaWZpZWQsIHRoZW4gY2FsbFxuICAgICAgICAgICAgICAgIC8vcmVxdWlyZSB3aXRoIHRob3NlIGFyZ3MuIFRoaXMgaXMgdXNlZnVsIHdoZW4gcmVxdWlyZSBpcyBkZWZpbmVkIGFzIGFcbiAgICAgICAgICAgICAgICAvL2NvbmZpZyBvYmplY3QgYmVmb3JlIHJlcXVpcmUuanMgaXMgbG9hZGVkLlxuICAgICAgICAgICAgICAgIGlmIChjZmcuZGVwcyB8fCBjZmcuY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5yZXF1aXJlKGNmZy5kZXBzIHx8IFtdLCBjZmcuY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIG1ha2VTaGltRXhwb3J0czogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZm4oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5pbml0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXQgPSB2YWx1ZS5pbml0LmFwcGx5KGdsb2JhbCwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0IHx8ICh2YWx1ZS5leHBvcnRzICYmIGdldEdsb2JhbCh2YWx1ZS5leHBvcnRzKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmbjtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIG1ha2VSZXF1aXJlOiBmdW5jdGlvbiAocmVsTWFwLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBsb2NhbFJlcXVpcmUoZGVwcywgY2FsbGJhY2ssIGVycmJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkLCBtYXAsIHJlcXVpcmVNb2Q7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZW5hYmxlQnVpbGRDYWxsYmFjayAmJiBjYWxsYmFjayAmJiBpc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suX19yZXF1aXJlSnNCdWlsZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGRlcHMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0ludmFsaWQgY2FsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvbkVycm9yKG1ha2VFcnJvcigncmVxdWlyZWFyZ3MnLCAnSW52YWxpZCByZXF1aXJlIGNhbGwnKSwgZXJyYmFjayk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vSWYgcmVxdWlyZXxleHBvcnRzfG1vZHVsZSBhcmUgcmVxdWVzdGVkLCBnZXQgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3ZhbHVlIGZvciB0aGVtIGZyb20gdGhlIHNwZWNpYWwgaGFuZGxlcnMuIENhdmVhdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcyBvbmx5IHdvcmtzIHdoaWxlIG1vZHVsZSBpcyBiZWluZyBkZWZpbmVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbE1hcCAmJiBoYXNQcm9wKGhhbmRsZXJzLCBkZXBzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVyc1tkZXBzXShyZWdpc3RyeVtyZWxNYXAuaWRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9TeW5jaHJvbm91cyBhY2Nlc3MgdG8gb25lIG1vZHVsZS4gSWYgcmVxdWlyZS5nZXQgaXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYXZhaWxhYmxlIChhcyBpbiB0aGUgTm9kZSBhZGFwdGVyKSwgcHJlZmVyIHRoYXQuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxLmdldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXEuZ2V0KGNvbnRleHQsIGRlcHMsIHJlbE1hcCwgbG9jYWxSZXF1aXJlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9Ob3JtYWxpemUgbW9kdWxlIG5hbWUsIGlmIGl0IGNvbnRhaW5zIC4gb3IgLi5cbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcCA9IG1ha2VNb2R1bGVNYXAoZGVwcywgcmVsTWFwLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZCA9IG1hcC5pZDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoYXNQcm9wKGRlZmluZWQsIGlkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvbkVycm9yKG1ha2VFcnJvcignbm90bG9hZGVkJywgJ01vZHVsZSBuYW1lIFwiJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcIiBoYXMgbm90IGJlZW4gbG9hZGVkIHlldCBmb3IgY29udGV4dDogJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dE5hbWUgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyZWxNYXAgPyAnJyA6ICcuIFVzZSByZXF1aXJlKFtdKScpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVmaW5lZFtpZF07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvL0dyYWIgZGVmaW5lcyB3YWl0aW5nIGluIHRoZSBnbG9iYWwgcXVldWUuXG4gICAgICAgICAgICAgICAgICAgIGludGFrZURlZmluZXMoKTtcblxuICAgICAgICAgICAgICAgICAgICAvL01hcmsgYWxsIHRoZSBkZXBlbmRlbmNpZXMgYXMgbmVlZGluZyB0byBiZSBsb2FkZWQuXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9Tb21lIGRlZmluZXMgY291bGQgaGF2ZSBiZWVuIGFkZGVkIHNpbmNlIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9yZXF1aXJlIGNhbGwsIGNvbGxlY3QgdGhlbS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGludGFrZURlZmluZXMoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZU1vZCA9IGdldE1vZHVsZShtYWtlTW9kdWxlTWFwKG51bGwsIHJlbE1hcCkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1N0b3JlIGlmIG1hcCBjb25maWcgc2hvdWxkIGJlIGFwcGxpZWQgdG8gdGhpcyByZXF1aXJlXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NhbGwgZm9yIGRlcGVuZGVuY2llcy5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVNb2Quc2tpcE1hcCA9IG9wdGlvbnMuc2tpcE1hcDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZU1vZC5pbml0KGRlcHMsIGNhbGxiYWNrLCBlcnJiYWNrLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrTG9hZGVkKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2NhbFJlcXVpcmU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbWl4aW4obG9jYWxSZXF1aXJlLCB7XG4gICAgICAgICAgICAgICAgICAgIGlzQnJvd3NlcjogaXNCcm93c2VyLFxuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiBDb252ZXJ0cyBhIG1vZHVsZSBuYW1lICsgLmV4dGVuc2lvbiBpbnRvIGFuIFVSTCBwYXRoLlxuICAgICAgICAgICAgICAgICAgICAgKiAqUmVxdWlyZXMqIHRoZSB1c2Ugb2YgYSBtb2R1bGUgbmFtZS4gSXQgZG9lcyBub3Qgc3VwcG9ydCB1c2luZ1xuICAgICAgICAgICAgICAgICAgICAgKiBwbGFpbiBVUkxzIGxpa2UgbmFtZVRvVXJsLlxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgdG9Vcmw6IGZ1bmN0aW9uIChtb2R1bGVOYW1lUGx1c0V4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IG1vZHVsZU5hbWVQbHVzRXh0Lmxhc3RJbmRleE9mKCcuJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudCA9IG1vZHVsZU5hbWVQbHVzRXh0LnNwbGl0KCcvJylbMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNSZWxhdGl2ZSA9IHNlZ21lbnQgPT09ICcuJyB8fCBzZWdtZW50ID09PSAnLi4nO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0hhdmUgYSBmaWxlIGV4dGVuc2lvbiBhbGlhcywgYW5kIGl0IGlzIG5vdCB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZG90cyBmcm9tIGEgcmVsYXRpdmUgcGF0aC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEgJiYgKCFpc1JlbGF0aXZlIHx8IGluZGV4ID4gMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHQgPSBtb2R1bGVOYW1lUGx1c0V4dC5zdWJzdHJpbmcoaW5kZXgsIG1vZHVsZU5hbWVQbHVzRXh0Lmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlTmFtZVBsdXNFeHQgPSBtb2R1bGVOYW1lUGx1c0V4dC5zdWJzdHJpbmcoMCwgaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5uYW1lVG9Vcmwobm9ybWFsaXplKG1vZHVsZU5hbWVQbHVzRXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsTWFwICYmIHJlbE1hcC5pZCwgdHJ1ZSksIGV4dCwgIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIGRlZmluZWQ6IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhc1Byb3AoZGVmaW5lZCwgbWFrZU1vZHVsZU1hcChpZCwgcmVsTWFwLCBmYWxzZSwgdHJ1ZSkuaWQpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIHNwZWNpZmllZDogZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZCA9IG1ha2VNb2R1bGVNYXAoaWQsIHJlbE1hcCwgZmFsc2UsIHRydWUpLmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhc1Byb3AoZGVmaW5lZCwgaWQpIHx8IGhhc1Byb3AocmVnaXN0cnksIGlkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy9Pbmx5IGFsbG93IHVuZGVmIG9uIHRvcCBsZXZlbCByZXF1aXJlIGNhbGxzXG4gICAgICAgICAgICAgICAgaWYgKCFyZWxNYXApIHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxSZXF1aXJlLnVuZGVmID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL0JpbmQgYW55IHdhaXRpbmcgZGVmaW5lKCkgY2FsbHMgdG8gdGhpcyBjb250ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgLy9maXggZm9yICM0MDhcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VHbG9iYWxRdWV1ZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWFwID0gbWFrZU1vZHVsZU1hcChpZCwgcmVsTWFwLCB0cnVlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2QgPSBnZXRPd24ocmVnaXN0cnksIGlkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kLnVuZGVmZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlU2NyaXB0KGlkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGRlZmluZWRbaWRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHVybEZldGNoZWRbbWFwLnVybF07XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdW5kZWZFdmVudHNbaWRdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0NsZWFuIHF1ZXVlZCBkZWZpbmVzIHRvby4gR28gYmFja3dhcmRzXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2luIGFycmF5IHNvIHRoYXQgdGhlIHNwbGljZXMgZG8gbm90XG4gICAgICAgICAgICAgICAgICAgICAgICAvL21lc3MgdXAgdGhlIGl0ZXJhdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgICAgIGVhY2hSZXZlcnNlKGRlZlF1ZXVlLCBmdW5jdGlvbihhcmdzLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3NbMF0gPT09IGlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZlF1ZXVlLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjb250ZXh0LmRlZlF1ZXVlTWFwW2lkXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vSG9sZCBvbiB0byBsaXN0ZW5lcnMgaW4gY2FzZSB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL21vZHVsZSB3aWxsIGJlIGF0dGVtcHRlZCB0byBiZSByZWxvYWRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdXNpbmcgYSBkaWZmZXJlbnQgY29uZmlnLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2QuZXZlbnRzLmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZFdmVudHNbaWRdID0gbW9kLmV2ZW50cztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhblJlZ2lzdHJ5KGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gbG9jYWxSZXF1aXJlO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDYWxsZWQgdG8gZW5hYmxlIGEgbW9kdWxlIGlmIGl0IGlzIHN0aWxsIGluIHRoZSByZWdpc3RyeVxuICAgICAgICAgICAgICogYXdhaXRpbmcgZW5hYmxlbWVudC4gQSBzZWNvbmQgYXJnLCBwYXJlbnQsIHRoZSBwYXJlbnQgbW9kdWxlLFxuICAgICAgICAgICAgICogaXMgcGFzc2VkIGluIGZvciBjb250ZXh0LCB3aGVuIHRoaXMgbWV0aG9kIGlzIG92ZXJyaWRkZW4gYnlcbiAgICAgICAgICAgICAqIHRoZSBvcHRpbWl6ZXIuIE5vdCBzaG93biBoZXJlIHRvIGtlZXAgY29kZSBjb21wYWN0LlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBlbmFibGU6IGZ1bmN0aW9uIChkZXBNYXApIHtcbiAgICAgICAgICAgICAgICB2YXIgbW9kID0gZ2V0T3duKHJlZ2lzdHJ5LCBkZXBNYXAuaWQpO1xuICAgICAgICAgICAgICAgIGlmIChtb2QpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0TW9kdWxlKGRlcE1hcCkuZW5hYmxlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJbnRlcm5hbCBtZXRob2QgdXNlZCBieSBlbnZpcm9ubWVudCBhZGFwdGVycyB0byBjb21wbGV0ZSBhIGxvYWQgZXZlbnQuXG4gICAgICAgICAgICAgKiBBIGxvYWQgZXZlbnQgY291bGQgYmUgYSBzY3JpcHQgbG9hZCBvciBqdXN0IGEgbG9hZCBwYXNzIGZyb20gYSBzeW5jaHJvbm91c1xuICAgICAgICAgICAgICogbG9hZCBjYWxsLlxuICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG1vZHVsZU5hbWUgdGhlIG5hbWUgb2YgdGhlIG1vZHVsZSB0byBwb3RlbnRpYWxseSBjb21wbGV0ZS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgY29tcGxldGVMb2FkOiBmdW5jdGlvbiAobW9kdWxlTmFtZSkge1xuICAgICAgICAgICAgICAgIHZhciBmb3VuZCwgYXJncywgbW9kLFxuICAgICAgICAgICAgICAgICAgICBzaGltID0gZ2V0T3duKGNvbmZpZy5zaGltLCBtb2R1bGVOYW1lKSB8fCB7fSxcbiAgICAgICAgICAgICAgICAgICAgc2hFeHBvcnRzID0gc2hpbS5leHBvcnRzO1xuXG4gICAgICAgICAgICAgICAgdGFrZUdsb2JhbFF1ZXVlKCk7XG5cbiAgICAgICAgICAgICAgICB3aGlsZSAoZGVmUXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGFyZ3MgPSBkZWZRdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJnc1swXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJnc1swXSA9IG1vZHVsZU5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL0lmIGFscmVhZHkgZm91bmQgYW4gYW5vbnltb3VzIG1vZHVsZSBhbmQgYm91bmQgaXRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdG8gdGhpcyBuYW1lLCB0aGVuIHRoaXMgaXMgc29tZSBvdGhlciBhbm9uIG1vZHVsZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy93YWl0aW5nIGZvciBpdHMgY29tcGxldGVMb2FkIHRvIGZpcmUuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhcmdzWzBdID09PSBtb2R1bGVOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL0ZvdW5kIG1hdGNoaW5nIGRlZmluZSBjYWxsIGZvciB0aGlzIHNjcmlwdCFcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNhbGxHZXRNb2R1bGUoYXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRleHQuZGVmUXVldWVNYXAgPSB7fTtcblxuICAgICAgICAgICAgICAgIC8vRG8gdGhpcyBhZnRlciB0aGUgY3ljbGUgb2YgY2FsbEdldE1vZHVsZSBpbiBjYXNlIHRoZSByZXN1bHRcbiAgICAgICAgICAgICAgICAvL29mIHRob3NlIGNhbGxzL2luaXQgY2FsbHMgY2hhbmdlcyB0aGUgcmVnaXN0cnkuXG4gICAgICAgICAgICAgICAgbW9kID0gZ2V0T3duKHJlZ2lzdHJ5LCBtb2R1bGVOYW1lKTtcblxuICAgICAgICAgICAgICAgIGlmICghZm91bmQgJiYgIWhhc1Byb3AoZGVmaW5lZCwgbW9kdWxlTmFtZSkgJiYgbW9kICYmICFtb2QuaW5pdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25maWcuZW5mb3JjZURlZmluZSAmJiAoIXNoRXhwb3J0cyB8fCAhZ2V0R2xvYmFsKHNoRXhwb3J0cykpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzUGF0aEZhbGxiYWNrKG1vZHVsZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25FcnJvcihtYWtlRXJyb3IoJ25vZGVmaW5lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdObyBkZWZpbmUgY2FsbCBmb3IgJyArIG1vZHVsZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW21vZHVsZU5hbWVdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL0Egc2NyaXB0IHRoYXQgZG9lcyBub3QgY2FsbCBkZWZpbmUoKSwgc28ganVzdCBzaW11bGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy90aGUgY2FsbCBmb3IgaXQuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsR2V0TW9kdWxlKFttb2R1bGVOYW1lLCAoc2hpbS5kZXBzIHx8IFtdKSwgc2hpbS5leHBvcnRzRm5dKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNoZWNrTG9hZGVkKCk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbnZlcnRzIGEgbW9kdWxlIG5hbWUgdG8gYSBmaWxlIHBhdGguIFN1cHBvcnRzIGNhc2VzIHdoZXJlXG4gICAgICAgICAgICAgKiBtb2R1bGVOYW1lIG1heSBhY3R1YWxseSBiZSBqdXN0IGFuIFVSTC5cbiAgICAgICAgICAgICAqIE5vdGUgdGhhdCBpdCAqKmRvZXMgbm90KiogY2FsbCBub3JtYWxpemUgb24gdGhlIG1vZHVsZU5hbWUsXG4gICAgICAgICAgICAgKiBpdCBpcyBhc3N1bWVkIHRvIGhhdmUgYWxyZWFkeSBiZWVuIG5vcm1hbGl6ZWQuIFRoaXMgaXMgYW5cbiAgICAgICAgICAgICAqIGludGVybmFsIEFQSSwgbm90IGEgcHVibGljIG9uZS4gVXNlIHRvVXJsIGZvciB0aGUgcHVibGljIEFQSS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgbmFtZVRvVXJsOiBmdW5jdGlvbiAobW9kdWxlTmFtZSwgZXh0LCBza2lwRXh0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhdGhzLCBzeW1zLCBpLCBwYXJlbnRNb2R1bGUsIHVybCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50UGF0aCwgYnVuZGxlSWQsXG4gICAgICAgICAgICAgICAgICAgIHBrZ01haW4gPSBnZXRPd24oY29uZmlnLnBrZ3MsIG1vZHVsZU5hbWUpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHBrZ01haW4pIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlTmFtZSA9IHBrZ01haW47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYnVuZGxlSWQgPSBnZXRPd24oYnVuZGxlc01hcCwgbW9kdWxlTmFtZSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoYnVuZGxlSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQubmFtZVRvVXJsKGJ1bmRsZUlkLCBleHQsIHNraXBFeHQpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vSWYgYSBjb2xvbiBpcyBpbiB0aGUgVVJMLCBpdCBpbmRpY2F0ZXMgYSBwcm90b2NvbCBpcyB1c2VkIGFuZCBpdCBpcyBqdXN0XG4gICAgICAgICAgICAgICAgLy9hbiBVUkwgdG8gYSBmaWxlLCBvciBpZiBpdCBzdGFydHMgd2l0aCBhIHNsYXNoLCBjb250YWlucyBhIHF1ZXJ5IGFyZyAoaS5lLiA/KVxuICAgICAgICAgICAgICAgIC8vb3IgZW5kcyB3aXRoIC5qcywgdGhlbiBhc3N1bWUgdGhlIHVzZXIgbWVhbnQgdG8gdXNlIGFuIHVybCBhbmQgbm90IGEgbW9kdWxlIGlkLlxuICAgICAgICAgICAgICAgIC8vVGhlIHNsYXNoIGlzIGltcG9ydGFudCBmb3IgcHJvdG9jb2wtbGVzcyBVUkxzIGFzIHdlbGwgYXMgZnVsbCBwYXRocy5cbiAgICAgICAgICAgICAgICBpZiAocmVxLmpzRXh0UmVnRXhwLnRlc3QobW9kdWxlTmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9KdXN0IGEgcGxhaW4gcGF0aCwgbm90IG1vZHVsZSBuYW1lIGxvb2t1cCwgc28ganVzdCByZXR1cm4gaXQuXG4gICAgICAgICAgICAgICAgICAgIC8vQWRkIGV4dGVuc2lvbiBpZiBpdCBpcyBpbmNsdWRlZC4gVGhpcyBpcyBhIGJpdCB3b25reSwgb25seSBub24tLmpzIHRoaW5ncyBwYXNzXG4gICAgICAgICAgICAgICAgICAgIC8vYW4gZXh0ZW5zaW9uLCB0aGlzIG1ldGhvZCBwcm9iYWJseSBuZWVkcyB0byBiZSByZXdvcmtlZC5cbiAgICAgICAgICAgICAgICAgICAgdXJsID0gbW9kdWxlTmFtZSArIChleHQgfHwgJycpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vQSBtb2R1bGUgdGhhdCBuZWVkcyB0byBiZSBjb252ZXJ0ZWQgdG8gYSBwYXRoLlxuICAgICAgICAgICAgICAgICAgICBwYXRocyA9IGNvbmZpZy5wYXRocztcblxuICAgICAgICAgICAgICAgICAgICBzeW1zID0gbW9kdWxlTmFtZS5zcGxpdCgnLycpO1xuICAgICAgICAgICAgICAgICAgICAvL0ZvciBlYWNoIG1vZHVsZSBuYW1lIHNlZ21lbnQsIHNlZSBpZiB0aGVyZSBpcyBhIHBhdGhcbiAgICAgICAgICAgICAgICAgICAgLy9yZWdpc3RlcmVkIGZvciBpdC4gU3RhcnQgd2l0aCBtb3N0IHNwZWNpZmljIG5hbWVcbiAgICAgICAgICAgICAgICAgICAgLy9hbmQgd29yayB1cCBmcm9tIGl0LlxuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSBzeW1zLmxlbmd0aDsgaSA+IDA7IGkgLT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50TW9kdWxlID0gc3ltcy5zbGljZSgwLCBpKS5qb2luKCcvJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudFBhdGggPSBnZXRPd24ocGF0aHMsIHBhcmVudE1vZHVsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50UGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vSWYgYW4gYXJyYXksIGl0IG1lYW5zIHRoZXJlIGFyZSBhIGZldyBjaG9pY2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vQ2hvb3NlIHRoZSBvbmUgdGhhdCBpcyBkZXNpcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkocGFyZW50UGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50UGF0aCA9IHBhcmVudFBhdGhbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5bXMuc3BsaWNlKDAsIGksIHBhcmVudFBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy9Kb2luIHRoZSBwYXRoIHBhcnRzIHRvZ2V0aGVyLCB0aGVuIGZpZ3VyZSBvdXQgaWYgYmFzZVVybCBpcyBuZWVkZWQuXG4gICAgICAgICAgICAgICAgICAgIHVybCA9IHN5bXMuam9pbignLycpO1xuICAgICAgICAgICAgICAgICAgICB1cmwgKz0gKGV4dCB8fCAoL15kYXRhXFw6fF5ibG9iXFw6fFxcPy8udGVzdCh1cmwpIHx8IHNraXBFeHQgPyAnJyA6ICcuanMnKSk7XG4gICAgICAgICAgICAgICAgICAgIHVybCA9ICh1cmwuY2hhckF0KDApID09PSAnLycgfHwgdXJsLm1hdGNoKC9eW1xcd1xcK1xcLlxcLV0rOi8pID8gJycgOiBjb25maWcuYmFzZVVybCkgKyB1cmw7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpZy51cmxBcmdzICYmICEvXmJsb2JcXDovLnRlc3QodXJsKSA/XG4gICAgICAgICAgICAgICAgICAgICAgIHVybCArIGNvbmZpZy51cmxBcmdzKG1vZHVsZU5hbWUsIHVybCkgOiB1cmw7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvL0RlbGVnYXRlcyB0byByZXEubG9hZC4gQnJva2VuIG91dCBhcyBhIHNlcGFyYXRlIGZ1bmN0aW9uIHRvXG4gICAgICAgICAgICAvL2FsbG93IG92ZXJyaWRpbmcgaW4gdGhlIG9wdGltaXplci5cbiAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uIChpZCwgdXJsKSB7XG4gICAgICAgICAgICAgICAgcmVxLmxvYWQoY29udGV4dCwgaWQsIHVybCk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEV4ZWN1dGVzIGEgbW9kdWxlIGNhbGxiYWNrIGZ1bmN0aW9uLiBCcm9rZW4gb3V0IGFzIGEgc2VwYXJhdGUgZnVuY3Rpb25cbiAgICAgICAgICAgICAqIHNvbGVseSB0byBhbGxvdyB0aGUgYnVpbGQgc3lzdGVtIHRvIHNlcXVlbmNlIHRoZSBmaWxlcyBpbiB0aGUgYnVpbHRcbiAgICAgICAgICAgICAqIGxheWVyIGluIHRoZSByaWdodCBzZXF1ZW5jZS5cbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBleGVjQ2I6IGZ1bmN0aW9uIChuYW1lLCBjYWxsYmFjaywgYXJncywgZXhwb3J0cykge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjay5hcHBseShleHBvcnRzLCBhcmdzKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogY2FsbGJhY2sgZm9yIHNjcmlwdCBsb2FkcywgdXNlZCB0byBjaGVjayBzdGF0dXMgb2YgbG9hZGluZy5cbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0V2ZW50fSBldnQgdGhlIGV2ZW50IGZyb20gdGhlIGJyb3dzZXIgZm9yIHRoZSBzY3JpcHRcbiAgICAgICAgICAgICAqIHRoYXQgd2FzIGxvYWRlZC5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgb25TY3JpcHRMb2FkOiBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgLy9Vc2luZyBjdXJyZW50VGFyZ2V0IGluc3RlYWQgb2YgdGFyZ2V0IGZvciBGaXJlZm94IDIuMCdzIHNha2UuIE5vdFxuICAgICAgICAgICAgICAgIC8vYWxsIG9sZCBicm93c2VycyB3aWxsIGJlIHN1cHBvcnRlZCwgYnV0IHRoaXMgb25lIHdhcyBlYXN5IGVub3VnaFxuICAgICAgICAgICAgICAgIC8vdG8gc3VwcG9ydCBhbmQgc3RpbGwgbWFrZXMgc2Vuc2UuXG4gICAgICAgICAgICAgICAgaWYgKGV2dC50eXBlID09PSAnbG9hZCcgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIChyZWFkeVJlZ0V4cC50ZXN0KChldnQuY3VycmVudFRhcmdldCB8fCBldnQuc3JjRWxlbWVudCkucmVhZHlTdGF0ZSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vUmVzZXQgaW50ZXJhY3RpdmUgc2NyaXB0IHNvIGEgc2NyaXB0IG5vZGUgaXMgbm90IGhlbGQgb250byBmb3JcbiAgICAgICAgICAgICAgICAgICAgLy90byBsb25nLlxuICAgICAgICAgICAgICAgICAgICBpbnRlcmFjdGl2ZVNjcmlwdCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9QdWxsIG91dCB0aGUgbmFtZSBvZiB0aGUgbW9kdWxlIGFuZCB0aGUgY29udGV4dC5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBnZXRTY3JpcHREYXRhKGV2dCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY29tcGxldGVMb2FkKGRhdGEuaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ2FsbGJhY2sgZm9yIHNjcmlwdCBlcnJvcnMuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIG9uU2NyaXB0RXJyb3I6IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGdldFNjcmlwdERhdGEoZXZ0KTtcbiAgICAgICAgICAgICAgICBpZiAoIWhhc1BhdGhGYWxsYmFjayhkYXRhLmlkKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBlYWNoUHJvcChyZWdpc3RyeSwgZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleS5pbmRleE9mKCdfQHInKSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhY2godmFsdWUuZGVwTWFwcywgZnVuY3Rpb24oZGVwTWFwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXBNYXAuaWQgPT09IGRhdGEuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudHMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvbkVycm9yKG1ha2VFcnJvcignc2NyaXB0ZXJyb3InLCAnU2NyaXB0IGVycm9yIGZvciBcIicgKyBkYXRhLmlkICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwYXJlbnRzLmxlbmd0aCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXCIsIG5lZWRlZCBieTogJyArIHBhcmVudHMuam9pbignLCAnKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXCInKSwgZXZ0LCBbZGF0YS5pZF0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgY29udGV4dC5yZXF1aXJlID0gY29udGV4dC5tYWtlUmVxdWlyZSgpO1xuICAgICAgICByZXR1cm4gY29udGV4dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYWluIGVudHJ5IHBvaW50LlxuICAgICAqXG4gICAgICogSWYgdGhlIG9ubHkgYXJndW1lbnQgdG8gcmVxdWlyZSBpcyBhIHN0cmluZywgdGhlbiB0aGUgbW9kdWxlIHRoYXRcbiAgICAgKiBpcyByZXByZXNlbnRlZCBieSB0aGF0IHN0cmluZyBpcyBmZXRjaGVkIGZvciB0aGUgYXBwcm9wcmlhdGUgY29udGV4dC5cbiAgICAgKlxuICAgICAqIElmIHRoZSBmaXJzdCBhcmd1bWVudCBpcyBhbiBhcnJheSwgdGhlbiBpdCB3aWxsIGJlIHRyZWF0ZWQgYXMgYW4gYXJyYXlcbiAgICAgKiBvZiBkZXBlbmRlbmN5IHN0cmluZyBuYW1lcyB0byBmZXRjaC4gQW4gb3B0aW9uYWwgZnVuY3Rpb24gY2FsbGJhY2sgY2FuXG4gICAgICogYmUgc3BlY2lmaWVkIHRvIGV4ZWN1dGUgd2hlbiBhbGwgb2YgdGhvc2UgZGVwZW5kZW5jaWVzIGFyZSBhdmFpbGFibGUuXG4gICAgICpcbiAgICAgKiBNYWtlIGEgbG9jYWwgcmVxIHZhcmlhYmxlIHRvIGhlbHAgQ2FqYSBjb21wbGlhbmNlIChpdCBhc3N1bWVzIHRoaW5nc1xuICAgICAqIG9uIGEgcmVxdWlyZSB0aGF0IGFyZSBub3Qgc3RhbmRhcmRpemVkKSwgYW5kIHRvIGdpdmUgYSBzaG9ydFxuICAgICAqIG5hbWUgZm9yIG1pbmlmaWNhdGlvbi9sb2NhbCBzY29wZSB1c2UuXG4gICAgICovXG4gICAgcmVxID0gcmVxdWlyZWpzID0gZnVuY3Rpb24gKGRlcHMsIGNhbGxiYWNrLCBlcnJiYWNrLCBvcHRpb25hbCkge1xuXG4gICAgICAgIC8vRmluZCB0aGUgcmlnaHQgY29udGV4dCwgdXNlIGRlZmF1bHRcbiAgICAgICAgdmFyIGNvbnRleHQsIGNvbmZpZyxcbiAgICAgICAgICAgIGNvbnRleHROYW1lID0gZGVmQ29udGV4dE5hbWU7XG5cbiAgICAgICAgLy8gRGV0ZXJtaW5lIGlmIGhhdmUgY29uZmlnIG9iamVjdCBpbiB0aGUgY2FsbC5cbiAgICAgICAgaWYgKCFpc0FycmF5KGRlcHMpICYmIHR5cGVvZiBkZXBzICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgLy8gZGVwcyBpcyBhIGNvbmZpZyBvYmplY3RcbiAgICAgICAgICAgIGNvbmZpZyA9IGRlcHM7XG4gICAgICAgICAgICBpZiAoaXNBcnJheShjYWxsYmFjaykpIHtcbiAgICAgICAgICAgICAgICAvLyBBZGp1c3QgYXJncyBpZiB0aGVyZSBhcmUgZGVwZW5kZW5jaWVzXG4gICAgICAgICAgICAgICAgZGVwcyA9IGNhbGxiYWNrO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gZXJyYmFjaztcbiAgICAgICAgICAgICAgICBlcnJiYWNrID0gb3B0aW9uYWw7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRlcHMgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb25maWcgJiYgY29uZmlnLmNvbnRleHQpIHtcbiAgICAgICAgICAgIGNvbnRleHROYW1lID0gY29uZmlnLmNvbnRleHQ7XG4gICAgICAgIH1cblxuICAgICAgICBjb250ZXh0ID0gZ2V0T3duKGNvbnRleHRzLCBjb250ZXh0TmFtZSk7XG4gICAgICAgIGlmICghY29udGV4dCkge1xuICAgICAgICAgICAgY29udGV4dCA9IGNvbnRleHRzW2NvbnRleHROYW1lXSA9IHJlcS5zLm5ld0NvbnRleHQoY29udGV4dE5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbmZpZykge1xuICAgICAgICAgICAgY29udGV4dC5jb25maWd1cmUoY29uZmlnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjb250ZXh0LnJlcXVpcmUoZGVwcywgY2FsbGJhY2ssIGVycmJhY2spO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTdXBwb3J0IHJlcXVpcmUuY29uZmlnKCkgdG8gbWFrZSBpdCBlYXNpZXIgdG8gY29vcGVyYXRlIHdpdGggb3RoZXJcbiAgICAgKiBBTUQgbG9hZGVycyBvbiBnbG9iYWxseSBhZ3JlZWQgbmFtZXMuXG4gICAgICovXG4gICAgcmVxLmNvbmZpZyA9IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIHJlcShjb25maWcpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlIHNvbWV0aGluZyBhZnRlciB0aGUgY3VycmVudCB0aWNrXG4gICAgICogb2YgdGhlIGV2ZW50IGxvb3AuIE92ZXJyaWRlIGZvciBvdGhlciBlbnZzXG4gICAgICogdGhhdCBoYXZlIGEgYmV0dGVyIHNvbHV0aW9uIHRoYW4gc2V0VGltZW91dC5cbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gZm4gZnVuY3Rpb24gdG8gZXhlY3V0ZSBsYXRlci5cbiAgICAgKi9cbiAgICByZXEubmV4dFRpY2sgPSB0eXBlb2Ygc2V0VGltZW91dCAhPT0gJ3VuZGVmaW5lZCcgPyBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgc2V0VGltZW91dChmbiwgNCk7XG4gICAgfSA6IGZ1bmN0aW9uIChmbikgeyBmbigpOyB9O1xuXG4gICAgLyoqXG4gICAgICogRXhwb3J0IHJlcXVpcmUgYXMgYSBnbG9iYWwsIGJ1dCBvbmx5IGlmIGl0IGRvZXMgbm90IGFscmVhZHkgZXhpc3QuXG4gICAgICovXG4gICAgaWYgKCFyZXF1aXJlKSB7XG4gICAgICAgIHJlcXVpcmUgPSByZXE7XG4gICAgfVxuXG4gICAgcmVxLnZlcnNpb24gPSB2ZXJzaW9uO1xuXG4gICAgLy9Vc2VkIHRvIGZpbHRlciBvdXQgZGVwZW5kZW5jaWVzIHRoYXQgYXJlIGFscmVhZHkgcGF0aHMuXG4gICAgcmVxLmpzRXh0UmVnRXhwID0gL15cXC98OnxcXD98XFwuanMkLztcbiAgICByZXEuaXNCcm93c2VyID0gaXNCcm93c2VyO1xuICAgIHMgPSByZXEucyA9IHtcbiAgICAgICAgY29udGV4dHM6IGNvbnRleHRzLFxuICAgICAgICBuZXdDb250ZXh0OiBuZXdDb250ZXh0XG4gICAgfTtcblxuICAgIC8vQ3JlYXRlIGRlZmF1bHQgY29udGV4dC5cbiAgICByZXEoe30pO1xuXG4gICAgLy9FeHBvcnRzIHNvbWUgY29udGV4dC1zZW5zaXRpdmUgbWV0aG9kcyBvbiBnbG9iYWwgcmVxdWlyZS5cbiAgICBlYWNoKFtcbiAgICAgICAgJ3RvVXJsJyxcbiAgICAgICAgJ3VuZGVmJyxcbiAgICAgICAgJ2RlZmluZWQnLFxuICAgICAgICAnc3BlY2lmaWVkJ1xuICAgIF0sIGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICAgIC8vUmVmZXJlbmNlIGZyb20gY29udGV4dHMgaW5zdGVhZCBvZiBlYXJseSBiaW5kaW5nIHRvIGRlZmF1bHQgY29udGV4dCxcbiAgICAgICAgLy9zbyB0aGF0IGR1cmluZyBidWlsZHMsIHRoZSBsYXRlc3QgaW5zdGFuY2Ugb2YgdGhlIGRlZmF1bHQgY29udGV4dFxuICAgICAgICAvL3dpdGggaXRzIGNvbmZpZyBnZXRzIHVzZWQuXG4gICAgICAgIHJlcVtwcm9wXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjdHggPSBjb250ZXh0c1tkZWZDb250ZXh0TmFtZV07XG4gICAgICAgICAgICByZXR1cm4gY3R4LnJlcXVpcmVbcHJvcF0uYXBwbHkoY3R4LCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgIH0pO1xuXG4gICAgaWYgKGlzQnJvd3Nlcikge1xuICAgICAgICBoZWFkID0gcy5oZWFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcbiAgICAgICAgLy9JZiBCQVNFIHRhZyBpcyBpbiBwbGF5LCB1c2luZyBhcHBlbmRDaGlsZCBpcyBhIHByb2JsZW0gZm9yIElFNi5cbiAgICAgICAgLy9XaGVuIHRoYXQgYnJvd3NlciBkaWVzLCB0aGlzIGNhbiBiZSByZW1vdmVkLiBEZXRhaWxzIGluIHRoaXMgalF1ZXJ5IGJ1ZzpcbiAgICAgICAgLy9odHRwOi8vZGV2LmpxdWVyeS5jb20vdGlja2V0LzI3MDlcbiAgICAgICAgYmFzZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYmFzZScpWzBdO1xuICAgICAgICBpZiAoYmFzZUVsZW1lbnQpIHtcbiAgICAgICAgICAgIGhlYWQgPSBzLmhlYWQgPSBiYXNlRWxlbWVudC5wYXJlbnROb2RlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQW55IGVycm9ycyB0aGF0IHJlcXVpcmUgZXhwbGljaXRseSBnZW5lcmF0ZXMgd2lsbCBiZSBwYXNzZWQgdG8gdGhpc1xuICAgICAqIGZ1bmN0aW9uLiBJbnRlcmNlcHQvb3ZlcnJpZGUgaXQgaWYgeW91IHdhbnQgY3VzdG9tIGVycm9yIGhhbmRsaW5nLlxuICAgICAqIEBwYXJhbSB7RXJyb3J9IGVyciB0aGUgZXJyb3Igb2JqZWN0LlxuICAgICAqL1xuICAgIHJlcS5vbkVycm9yID0gZGVmYXVsdE9uRXJyb3I7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIHRoZSBub2RlIGZvciB0aGUgbG9hZCBjb21tYW5kLiBPbmx5IHVzZWQgaW4gYnJvd3NlciBlbnZzLlxuICAgICAqL1xuICAgIHJlcS5jcmVhdGVOb2RlID0gZnVuY3Rpb24gKGNvbmZpZywgbW9kdWxlTmFtZSwgdXJsKSB7XG4gICAgICAgIHZhciBub2RlID0gY29uZmlnLnhodG1sID9cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwnLCAnaHRtbDpzY3JpcHQnKSA6XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICAgIG5vZGUudHlwZSA9IGNvbmZpZy5zY3JpcHRUeXBlIHx8ICd0ZXh0L2phdmFzY3JpcHQnO1xuICAgICAgICBub2RlLmNoYXJzZXQgPSAndXRmLTgnO1xuICAgICAgICBub2RlLmFzeW5jID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERvZXMgdGhlIHJlcXVlc3QgdG8gbG9hZCBhIG1vZHVsZSBmb3IgdGhlIGJyb3dzZXIgY2FzZS5cbiAgICAgKiBNYWtlIHRoaXMgYSBzZXBhcmF0ZSBmdW5jdGlvbiB0byBhbGxvdyBvdGhlciBlbnZpcm9ubWVudHNcbiAgICAgKiB0byBvdmVycmlkZSBpdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0IHRoZSByZXF1aXJlIGNvbnRleHQgdG8gZmluZCBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbW9kdWxlTmFtZSB0aGUgbmFtZSBvZiB0aGUgbW9kdWxlLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSB1cmwgdGhlIFVSTCB0byB0aGUgbW9kdWxlLlxuICAgICAqL1xuICAgIHJlcS5sb2FkID0gZnVuY3Rpb24gKGNvbnRleHQsIG1vZHVsZU5hbWUsIHVybCkge1xuICAgICAgICB2YXIgY29uZmlnID0gKGNvbnRleHQgJiYgY29udGV4dC5jb25maWcpIHx8IHt9LFxuICAgICAgICAgICAgbm9kZTtcbiAgICAgICAgaWYgKGlzQnJvd3Nlcikge1xuICAgICAgICAgICAgLy9JbiB0aGUgYnJvd3NlciBzbyB1c2UgYSBzY3JpcHQgdGFnXG4gICAgICAgICAgICBub2RlID0gcmVxLmNyZWF0ZU5vZGUoY29uZmlnLCBtb2R1bGVOYW1lLCB1cmwpO1xuXG4gICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnZGF0YS1yZXF1aXJlY29udGV4dCcsIGNvbnRleHQuY29udGV4dE5hbWUpO1xuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtcmVxdWlyZW1vZHVsZScsIG1vZHVsZU5hbWUpO1xuXG4gICAgICAgICAgICAvL1NldCB1cCBsb2FkIGxpc3RlbmVyLiBUZXN0IGF0dGFjaEV2ZW50IGZpcnN0IGJlY2F1c2UgSUU5IGhhc1xuICAgICAgICAgICAgLy9hIHN1YnRsZSBpc3N1ZSBpbiBpdHMgYWRkRXZlbnRMaXN0ZW5lciBhbmQgc2NyaXB0IG9ubG9hZCBmaXJpbmdzXG4gICAgICAgICAgICAvL3RoYXQgZG8gbm90IG1hdGNoIHRoZSBiZWhhdmlvciBvZiBhbGwgb3RoZXIgYnJvd3NlcnMgd2l0aFxuICAgICAgICAgICAgLy9hZGRFdmVudExpc3RlbmVyIHN1cHBvcnQsIHdoaWNoIGZpcmUgdGhlIG9ubG9hZCBldmVudCBmb3IgYVxuICAgICAgICAgICAgLy9zY3JpcHQgcmlnaHQgYWZ0ZXIgdGhlIHNjcmlwdCBleGVjdXRpb24uIFNlZTpcbiAgICAgICAgICAgIC8vaHR0cHM6Ly9jb25uZWN0Lm1pY3Jvc29mdC5jb20vSUUvZmVlZGJhY2svZGV0YWlscy82NDgwNTcvc2NyaXB0LW9ubG9hZC1ldmVudC1pcy1ub3QtZmlyZWQtaW1tZWRpYXRlbHktYWZ0ZXItc2NyaXB0LWV4ZWN1dGlvblxuICAgICAgICAgICAgLy9VTkZPUlRVTkFURUxZIE9wZXJhIGltcGxlbWVudHMgYXR0YWNoRXZlbnQgYnV0IGRvZXMgbm90IGZvbGxvdyB0aGUgc2NyaXB0XG4gICAgICAgICAgICAvL3NjcmlwdCBleGVjdXRpb24gbW9kZS5cbiAgICAgICAgICAgIGlmIChub2RlLmF0dGFjaEV2ZW50ICYmXG4gICAgICAgICAgICAgICAgICAgIC8vQ2hlY2sgaWYgbm9kZS5hdHRhY2hFdmVudCBpcyBhcnRpZmljaWFsbHkgYWRkZWQgYnkgY3VzdG9tIHNjcmlwdCBvclxuICAgICAgICAgICAgICAgICAgICAvL25hdGl2ZWx5IHN1cHBvcnRlZCBieSBicm93c2VyXG4gICAgICAgICAgICAgICAgICAgIC8vcmVhZCBodHRwczovL2dpdGh1Yi5jb20vcmVxdWlyZWpzL3JlcXVpcmVqcy9pc3N1ZXMvMTg3XG4gICAgICAgICAgICAgICAgICAgIC8vaWYgd2UgY2FuIE5PVCBmaW5kIFtuYXRpdmUgY29kZV0gdGhlbiBpdCBtdXN0IE5PVCBuYXRpdmVseSBzdXBwb3J0ZWQuXG4gICAgICAgICAgICAgICAgICAgIC8vaW4gSUU4LCBub2RlLmF0dGFjaEV2ZW50IGRvZXMgbm90IGhhdmUgdG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAvL05vdGUgdGhlIHRlc3QgZm9yIFwiW25hdGl2ZSBjb2RlXCIgd2l0aCBubyBjbG9zaW5nIGJyYWNlLCBzZWU6XG4gICAgICAgICAgICAgICAgICAgIC8vaHR0cHM6Ly9naXRodWIuY29tL3JlcXVpcmVqcy9yZXF1aXJlanMvaXNzdWVzLzI3M1xuICAgICAgICAgICAgICAgICAgICAhKG5vZGUuYXR0YWNoRXZlbnQudG9TdHJpbmcgJiYgbm9kZS5hdHRhY2hFdmVudC50b1N0cmluZygpLmluZGV4T2YoJ1tuYXRpdmUgY29kZScpIDwgMCkgJiZcbiAgICAgICAgICAgICAgICAgICAgIWlzT3BlcmEpIHtcbiAgICAgICAgICAgICAgICAvL1Byb2JhYmx5IElFLiBJRSAoYXQgbGVhc3QgNi04KSBkbyBub3QgZmlyZVxuICAgICAgICAgICAgICAgIC8vc2NyaXB0IG9ubG9hZCByaWdodCBhZnRlciBleGVjdXRpbmcgdGhlIHNjcmlwdCwgc29cbiAgICAgICAgICAgICAgICAvL3dlIGNhbm5vdCB0aWUgdGhlIGFub255bW91cyBkZWZpbmUgY2FsbCB0byBhIG5hbWUuXG4gICAgICAgICAgICAgICAgLy9Ib3dldmVyLCBJRSByZXBvcnRzIHRoZSBzY3JpcHQgYXMgYmVpbmcgaW4gJ2ludGVyYWN0aXZlJ1xuICAgICAgICAgICAgICAgIC8vcmVhZHlTdGF0ZSBhdCB0aGUgdGltZSBvZiB0aGUgZGVmaW5lIGNhbGwuXG4gICAgICAgICAgICAgICAgdXNlSW50ZXJhY3RpdmUgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgbm9kZS5hdHRhY2hFdmVudCgnb25yZWFkeXN0YXRlY2hhbmdlJywgY29udGV4dC5vblNjcmlwdExvYWQpO1xuICAgICAgICAgICAgICAgIC8vSXQgd291bGQgYmUgZ3JlYXQgdG8gYWRkIGFuIGVycm9yIGhhbmRsZXIgaGVyZSB0byBjYXRjaFxuICAgICAgICAgICAgICAgIC8vNDA0cyBpbiBJRTkrLiBIb3dldmVyLCBvbnJlYWR5c3RhdGVjaGFuZ2Ugd2lsbCBmaXJlIGJlZm9yZVxuICAgICAgICAgICAgICAgIC8vdGhlIGVycm9yIGhhbmRsZXIsIHNvIHRoYXQgZG9lcyBub3QgaGVscC4gSWYgYWRkRXZlbnRMaXN0ZW5lclxuICAgICAgICAgICAgICAgIC8vaXMgdXNlZCwgdGhlbiBJRSB3aWxsIGZpcmUgZXJyb3IgYmVmb3JlIGxvYWQsIGJ1dCB3ZSBjYW5ub3RcbiAgICAgICAgICAgICAgICAvL3VzZSB0aGF0IHBhdGh3YXkgZ2l2ZW4gdGhlIGNvbm5lY3QubWljcm9zb2Z0LmNvbSBpc3N1ZVxuICAgICAgICAgICAgICAgIC8vbWVudGlvbmVkIGFib3ZlIGFib3V0IG5vdCBkb2luZyB0aGUgJ3NjcmlwdCBleGVjdXRlLFxuICAgICAgICAgICAgICAgIC8vdGhlbiBmaXJlIHRoZSBzY3JpcHQgbG9hZCBldmVudCBsaXN0ZW5lciBiZWZvcmUgZXhlY3V0ZVxuICAgICAgICAgICAgICAgIC8vbmV4dCBzY3JpcHQnIHRoYXQgb3RoZXIgYnJvd3NlcnMgZG8uXG4gICAgICAgICAgICAgICAgLy9CZXN0IGhvcGU6IElFMTAgZml4ZXMgdGhlIGlzc3VlcyxcbiAgICAgICAgICAgICAgICAvL2FuZCB0aGVuIGRlc3Ryb3lzIGFsbCBpbnN0YWxscyBvZiBJRSA2LTkuXG4gICAgICAgICAgICAgICAgLy9ub2RlLmF0dGFjaEV2ZW50KCdvbmVycm9yJywgY29udGV4dC5vblNjcmlwdEVycm9yKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgY29udGV4dC5vblNjcmlwdExvYWQsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgY29udGV4dC5vblNjcmlwdEVycm9yLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2RlLnNyYyA9IHVybDtcblxuICAgICAgICAgICAgLy9DYWxsaW5nIG9uTm9kZUNyZWF0ZWQgYWZ0ZXIgYWxsIHByb3BlcnRpZXMgb24gdGhlIG5vZGUgaGF2ZSBiZWVuXG4gICAgICAgICAgICAvL3NldCwgYnV0IGJlZm9yZSBpdCBpcyBwbGFjZWQgaW4gdGhlIERPTS5cbiAgICAgICAgICAgIGlmIChjb25maWcub25Ob2RlQ3JlYXRlZCkge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5vbk5vZGVDcmVhdGVkKG5vZGUsIGNvbmZpZywgbW9kdWxlTmFtZSwgdXJsKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9Gb3Igc29tZSBjYWNoZSBjYXNlcyBpbiBJRSA2LTgsIHRoZSBzY3JpcHQgZXhlY3V0ZXMgYmVmb3JlIHRoZSBlbmRcbiAgICAgICAgICAgIC8vb2YgdGhlIGFwcGVuZENoaWxkIGV4ZWN1dGlvbiwgc28gdG8gdGllIGFuIGFub255bW91cyBkZWZpbmVcbiAgICAgICAgICAgIC8vY2FsbCB0byB0aGUgbW9kdWxlIG5hbWUgKHdoaWNoIGlzIHN0b3JlZCBvbiB0aGUgbm9kZSksIGhvbGQgb25cbiAgICAgICAgICAgIC8vdG8gYSByZWZlcmVuY2UgdG8gdGhpcyBub2RlLCBidXQgY2xlYXIgYWZ0ZXIgdGhlIERPTSBpbnNlcnRpb24uXG4gICAgICAgICAgICBjdXJyZW50bHlBZGRpbmdTY3JpcHQgPSBub2RlO1xuICAgICAgICAgICAgaWYgKGJhc2VFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgaGVhZC5pbnNlcnRCZWZvcmUobm9kZSwgYmFzZUVsZW1lbnQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBoZWFkLmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudGx5QWRkaW5nU2NyaXB0ID0gbnVsbDtcblxuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNXZWJXb3JrZXIpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy9JbiBhIHdlYiB3b3JrZXIsIHVzZSBpbXBvcnRTY3JpcHRzLiBUaGlzIGlzIG5vdCBhIHZlcnlcbiAgICAgICAgICAgICAgICAvL2VmZmljaWVudCB1c2Ugb2YgaW1wb3J0U2NyaXB0cywgaW1wb3J0U2NyaXB0cyB3aWxsIGJsb2NrIHVudGlsXG4gICAgICAgICAgICAgICAgLy9pdHMgc2NyaXB0IGlzIGRvd25sb2FkZWQgYW5kIGV2YWx1YXRlZC4gSG93ZXZlciwgaWYgd2ViIHdvcmtlcnNcbiAgICAgICAgICAgICAgICAvL2FyZSBpbiBwbGF5LCB0aGUgZXhwZWN0YXRpb24gaXMgdGhhdCBhIGJ1aWxkIGhhcyBiZWVuIGRvbmUgc29cbiAgICAgICAgICAgICAgICAvL3RoYXQgb25seSBvbmUgc2NyaXB0IG5lZWRzIHRvIGJlIGxvYWRlZCBhbnl3YXkuIFRoaXMgbWF5IG5lZWRcbiAgICAgICAgICAgICAgICAvL3RvIGJlIHJlZXZhbHVhdGVkIGlmIG90aGVyIHVzZSBjYXNlcyBiZWNvbWUgY29tbW9uLlxuXG4gICAgICAgICAgICAgICAgLy8gUG9zdCBhIHRhc2sgdG8gdGhlIGV2ZW50IGxvb3AgdG8gd29yayBhcm91bmQgYSBidWcgaW4gV2ViS2l0XG4gICAgICAgICAgICAgICAgLy8gd2hlcmUgdGhlIHdvcmtlciBnZXRzIGdhcmJhZ2UtY29sbGVjdGVkIGFmdGVyIGNhbGxpbmdcbiAgICAgICAgICAgICAgICAvLyBpbXBvcnRTY3JpcHRzKCk6IGh0dHBzOi8vd2Via2l0Lm9yZy9iLzE1MzMxN1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7fSwgMCk7XG4gICAgICAgICAgICAgICAgaW1wb3J0U2NyaXB0cyh1cmwpO1xuXG4gICAgICAgICAgICAgICAgLy9BY2NvdW50IGZvciBhbm9ueW1vdXMgbW9kdWxlc1xuICAgICAgICAgICAgICAgIGNvbnRleHQuY29tcGxldGVMb2FkKG1vZHVsZU5hbWUpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQub25FcnJvcihtYWtlRXJyb3IoJ2ltcG9ydHNjcmlwdHMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaW1wb3J0U2NyaXB0cyBmYWlsZWQgZm9yICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlTmFtZSArICcgYXQgJyArIHVybCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW21vZHVsZU5hbWVdKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gZ2V0SW50ZXJhY3RpdmVTY3JpcHQoKSB7XG4gICAgICAgIGlmIChpbnRlcmFjdGl2ZVNjcmlwdCAmJiBpbnRlcmFjdGl2ZVNjcmlwdC5yZWFkeVN0YXRlID09PSAnaW50ZXJhY3RpdmUnKSB7XG4gICAgICAgICAgICByZXR1cm4gaW50ZXJhY3RpdmVTY3JpcHQ7XG4gICAgICAgIH1cblxuICAgICAgICBlYWNoUmV2ZXJzZShzY3JpcHRzKCksIGZ1bmN0aW9uIChzY3JpcHQpIHtcbiAgICAgICAgICAgIGlmIChzY3JpcHQucmVhZHlTdGF0ZSA9PT0gJ2ludGVyYWN0aXZlJykge1xuICAgICAgICAgICAgICAgIHJldHVybiAoaW50ZXJhY3RpdmVTY3JpcHQgPSBzY3JpcHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGludGVyYWN0aXZlU2NyaXB0O1xuICAgIH1cblxuICAgIC8vTG9vayBmb3IgYSBkYXRhLW1haW4gc2NyaXB0IGF0dHJpYnV0ZSwgd2hpY2ggY291bGQgYWxzbyBhZGp1c3QgdGhlIGJhc2VVcmwuXG4gICAgaWYgKGlzQnJvd3NlciAmJiAhY2ZnLnNraXBEYXRhTWFpbikge1xuICAgICAgICAvL0ZpZ3VyZSBvdXQgYmFzZVVybC4gR2V0IGl0IGZyb20gdGhlIHNjcmlwdCB0YWcgd2l0aCByZXF1aXJlLmpzIGluIGl0LlxuICAgICAgICBlYWNoUmV2ZXJzZShzY3JpcHRzKCksIGZ1bmN0aW9uIChzY3JpcHQpIHtcbiAgICAgICAgICAgIC8vU2V0IHRoZSAnaGVhZCcgd2hlcmUgd2UgY2FuIGFwcGVuZCBjaGlsZHJlbiBieVxuICAgICAgICAgICAgLy91c2luZyB0aGUgc2NyaXB0J3MgcGFyZW50LlxuICAgICAgICAgICAgaWYgKCFoZWFkKSB7XG4gICAgICAgICAgICAgICAgaGVhZCA9IHNjcmlwdC5wYXJlbnROb2RlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL0xvb2sgZm9yIGEgZGF0YS1tYWluIGF0dHJpYnV0ZSB0byBzZXQgbWFpbiBzY3JpcHQgZm9yIHRoZSBwYWdlXG4gICAgICAgICAgICAvL3RvIGxvYWQuIElmIGl0IGlzIHRoZXJlLCB0aGUgcGF0aCB0byBkYXRhIG1haW4gYmVjb21lcyB0aGVcbiAgICAgICAgICAgIC8vYmFzZVVybCwgaWYgaXQgaXMgbm90IGFscmVhZHkgc2V0LlxuICAgICAgICAgICAgZGF0YU1haW4gPSBzY3JpcHQuZ2V0QXR0cmlidXRlKCdkYXRhLW1haW4nKTtcbiAgICAgICAgICAgIGlmIChkYXRhTWFpbikge1xuICAgICAgICAgICAgICAgIC8vUHJlc2VydmUgZGF0YU1haW4gaW4gY2FzZSBpdCBpcyBhIHBhdGggKGkuZS4gY29udGFpbnMgJz8nKVxuICAgICAgICAgICAgICAgIG1haW5TY3JpcHQgPSBkYXRhTWFpbjtcblxuICAgICAgICAgICAgICAgIC8vU2V0IGZpbmFsIGJhc2VVcmwgaWYgdGhlcmUgaXMgbm90IGFscmVhZHkgYW4gZXhwbGljaXQgb25lLFxuICAgICAgICAgICAgICAgIC8vYnV0IG9ubHkgZG8gc28gaWYgdGhlIGRhdGEtbWFpbiB2YWx1ZSBpcyBub3QgYSBsb2FkZXIgcGx1Z2luXG4gICAgICAgICAgICAgICAgLy9tb2R1bGUgSUQuXG4gICAgICAgICAgICAgICAgaWYgKCFjZmcuYmFzZVVybCAmJiBtYWluU2NyaXB0LmluZGV4T2YoJyEnKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9QdWxsIG9mZiB0aGUgZGlyZWN0b3J5IG9mIGRhdGEtbWFpbiBmb3IgdXNlIGFzIHRoZVxuICAgICAgICAgICAgICAgICAgICAvL2Jhc2VVcmwuXG4gICAgICAgICAgICAgICAgICAgIHNyYyA9IG1haW5TY3JpcHQuc3BsaXQoJy8nKTtcbiAgICAgICAgICAgICAgICAgICAgbWFpblNjcmlwdCA9IHNyYy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgc3ViUGF0aCA9IHNyYy5sZW5ndGggPyBzcmMuam9pbignLycpICArICcvJyA6ICcuLyc7XG5cbiAgICAgICAgICAgICAgICAgICAgY2ZnLmJhc2VVcmwgPSBzdWJQYXRoO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vU3RyaXAgb2ZmIGFueSB0cmFpbGluZyAuanMgc2luY2UgbWFpblNjcmlwdCBpcyBub3dcbiAgICAgICAgICAgICAgICAvL2xpa2UgYSBtb2R1bGUgbmFtZS5cbiAgICAgICAgICAgICAgICBtYWluU2NyaXB0ID0gbWFpblNjcmlwdC5yZXBsYWNlKGpzU3VmZml4UmVnRXhwLCAnJyk7XG5cbiAgICAgICAgICAgICAgICAvL0lmIG1haW5TY3JpcHQgaXMgc3RpbGwgYSBwYXRoLCBmYWxsIGJhY2sgdG8gZGF0YU1haW5cbiAgICAgICAgICAgICAgICBpZiAocmVxLmpzRXh0UmVnRXhwLnRlc3QobWFpblNjcmlwdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFpblNjcmlwdCA9IGRhdGFNYWluO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vUHV0IHRoZSBkYXRhLW1haW4gc2NyaXB0IGluIHRoZSBmaWxlcyB0byBsb2FkLlxuICAgICAgICAgICAgICAgIGNmZy5kZXBzID0gY2ZnLmRlcHMgPyBjZmcuZGVwcy5jb25jYXQobWFpblNjcmlwdCkgOiBbbWFpblNjcmlwdF07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGZ1bmN0aW9uIHRoYXQgaGFuZGxlcyBkZWZpbml0aW9ucyBvZiBtb2R1bGVzLiBEaWZmZXJzIGZyb21cbiAgICAgKiByZXF1aXJlKCkgaW4gdGhhdCBhIHN0cmluZyBmb3IgdGhlIG1vZHVsZSBzaG91bGQgYmUgdGhlIGZpcnN0IGFyZ3VtZW50LFxuICAgICAqIGFuZCB0aGUgZnVuY3Rpb24gdG8gZXhlY3V0ZSBhZnRlciBkZXBlbmRlbmNpZXMgYXJlIGxvYWRlZCBzaG91bGRcbiAgICAgKiByZXR1cm4gYSB2YWx1ZSB0byBkZWZpbmUgdGhlIG1vZHVsZSBjb3JyZXNwb25kaW5nIHRvIHRoZSBmaXJzdCBhcmd1bWVudCdzXG4gICAgICogbmFtZS5cbiAgICAgKi9cbiAgICBkZWZpbmUgPSBmdW5jdGlvbiAobmFtZSwgZGVwcywgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIG5vZGUsIGNvbnRleHQ7XG5cbiAgICAgICAgLy9BbGxvdyBmb3IgYW5vbnltb3VzIG1vZHVsZXNcbiAgICAgICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgLy9BZGp1c3QgYXJncyBhcHByb3ByaWF0ZWx5XG4gICAgICAgICAgICBjYWxsYmFjayA9IGRlcHM7XG4gICAgICAgICAgICBkZXBzID0gbmFtZTtcbiAgICAgICAgICAgIG5hbWUgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9UaGlzIG1vZHVsZSBtYXkgbm90IGhhdmUgZGVwZW5kZW5jaWVzXG4gICAgICAgIGlmICghaXNBcnJheShkZXBzKSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBkZXBzO1xuICAgICAgICAgICAgZGVwcyA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvL0lmIG5vIG5hbWUsIGFuZCBjYWxsYmFjayBpcyBhIGZ1bmN0aW9uLCB0aGVuIGZpZ3VyZSBvdXQgaWYgaXQgYVxuICAgICAgICAvL0NvbW1vbkpTIHRoaW5nIHdpdGggZGVwZW5kZW5jaWVzLlxuICAgICAgICBpZiAoIWRlcHMgJiYgaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcbiAgICAgICAgICAgIGRlcHMgPSBbXTtcbiAgICAgICAgICAgIC8vUmVtb3ZlIGNvbW1lbnRzIGZyb20gdGhlIGNhbGxiYWNrIHN0cmluZyxcbiAgICAgICAgICAgIC8vbG9vayBmb3IgcmVxdWlyZSBjYWxscywgYW5kIHB1bGwgdGhlbSBpbnRvIHRoZSBkZXBlbmRlbmNpZXMsXG4gICAgICAgICAgICAvL2J1dCBvbmx5IGlmIHRoZXJlIGFyZSBmdW5jdGlvbiBhcmdzLlxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgIC50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKGNvbW1lbnRSZWdFeHAsIGNvbW1lbnRSZXBsYWNlKVxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZShjanNSZXF1aXJlUmVnRXhwLCBmdW5jdGlvbiAobWF0Y2gsIGRlcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVwcy5wdXNoKGRlcCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy9NYXkgYmUgYSBDb21tb25KUyB0aGluZyBldmVuIHdpdGhvdXQgcmVxdWlyZSBjYWxscywgYnV0IHN0aWxsXG4gICAgICAgICAgICAgICAgLy9jb3VsZCB1c2UgZXhwb3J0cywgYW5kIG1vZHVsZS4gQXZvaWQgZG9pbmcgZXhwb3J0cyBhbmQgbW9kdWxlXG4gICAgICAgICAgICAgICAgLy93b3JrIHRob3VnaCBpZiBpdCBqdXN0IG5lZWRzIHJlcXVpcmUuXG4gICAgICAgICAgICAgICAgLy9SRVFVSVJFUyB0aGUgZnVuY3Rpb24gdG8gZXhwZWN0IHRoZSBDb21tb25KUyB2YXJpYWJsZXMgaW4gdGhlXG4gICAgICAgICAgICAgICAgLy9vcmRlciBsaXN0ZWQgYmVsb3cuXG4gICAgICAgICAgICAgICAgZGVwcyA9IChjYWxsYmFjay5sZW5ndGggPT09IDEgPyBbJ3JlcXVpcmUnXSA6IFsncmVxdWlyZScsICdleHBvcnRzJywgJ21vZHVsZSddKS5jb25jYXQoZGVwcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvL0lmIGluIElFIDYtOCBhbmQgaGl0IGFuIGFub255bW91cyBkZWZpbmUoKSBjYWxsLCBkbyB0aGUgaW50ZXJhY3RpdmVcbiAgICAgICAgLy93b3JrLlxuICAgICAgICBpZiAodXNlSW50ZXJhY3RpdmUpIHtcbiAgICAgICAgICAgIG5vZGUgPSBjdXJyZW50bHlBZGRpbmdTY3JpcHQgfHwgZ2V0SW50ZXJhY3RpdmVTY3JpcHQoKTtcbiAgICAgICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWUgPSBub2RlLmdldEF0dHJpYnV0ZSgnZGF0YS1yZXF1aXJlbW9kdWxlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRleHQgPSBjb250ZXh0c1tub2RlLmdldEF0dHJpYnV0ZSgnZGF0YS1yZXF1aXJlY29udGV4dCcpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vQWx3YXlzIHNhdmUgb2ZmIGV2YWx1YXRpbmcgdGhlIGRlZiBjYWxsIHVudGlsIHRoZSBzY3JpcHQgb25sb2FkIGhhbmRsZXIuXG4gICAgICAgIC8vVGhpcyBhbGxvd3MgbXVsdGlwbGUgbW9kdWxlcyB0byBiZSBpbiBhIGZpbGUgd2l0aG91dCBwcmVtYXR1cmVseVxuICAgICAgICAvL3RyYWNpbmcgZGVwZW5kZW5jaWVzLCBhbmQgYWxsb3dzIGZvciBhbm9ueW1vdXMgbW9kdWxlIHN1cHBvcnQsXG4gICAgICAgIC8vd2hlcmUgdGhlIG1vZHVsZSBuYW1lIGlzIG5vdCBrbm93biB1bnRpbCB0aGUgc2NyaXB0IG9ubG9hZCBldmVudFxuICAgICAgICAvL29jY3Vycy4gSWYgbm8gY29udGV4dCwgdXNlIHRoZSBnbG9iYWwgcXVldWUsIGFuZCBnZXQgaXQgcHJvY2Vzc2VkXG4gICAgICAgIC8vaW4gdGhlIG9uc2NyaXB0IGxvYWQgY2FsbGJhY2suXG4gICAgICAgIGlmIChjb250ZXh0KSB7XG4gICAgICAgICAgICBjb250ZXh0LmRlZlF1ZXVlLnB1c2goW25hbWUsIGRlcHMsIGNhbGxiYWNrXSk7XG4gICAgICAgICAgICBjb250ZXh0LmRlZlF1ZXVlTWFwW25hbWVdID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdsb2JhbERlZlF1ZXVlLnB1c2goW25hbWUsIGRlcHMsIGNhbGxiYWNrXSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZGVmaW5lLmFtZCA9IHtcbiAgICAgICAgalF1ZXJ5OiB0cnVlXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEV4ZWN1dGVzIHRoZSB0ZXh0LiBOb3JtYWxseSBqdXN0IHVzZXMgZXZhbCwgYnV0IGNhbiBiZSBtb2RpZmllZFxuICAgICAqIHRvIHVzZSBhIGJldHRlciwgZW52aXJvbm1lbnQtc3BlY2lmaWMgY2FsbC4gT25seSB1c2VkIGZvciB0cmFuc3BpbGluZ1xuICAgICAqIGxvYWRlciBwbHVnaW5zLCBub3QgZm9yIHBsYWluIEpTIG1vZHVsZXMuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRleHQgdGhlIHRleHQgdG8gZXhlY3V0ZS9ldmFsdWF0ZS5cbiAgICAgKi9cbiAgICByZXEuZXhlYyA9IGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgICAgIC8qanNsaW50IGV2aWw6IHRydWUgKi9cbiAgICAgICAgcmV0dXJuIGV2YWwodGV4dCk7XG4gICAgfTtcblxuICAgIC8vU2V0IHVwIHdpdGggY29uZmlnIGluZm8uXG4gICAgcmVxKGNmZyk7XG59KHRoaXMsICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ3VuZGVmaW5lZCcgPyB1bmRlZmluZWQgOiBzZXRUaW1lb3V0KSkpOyJdfQ==
