let chart;!function(e,t,n){function i(e,t){return typeof e===t}var r=[],o=[],a={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){o.push({name:e,fn:t,options:n})},addAsyncTest:function(e){o.push({name:null,fn:e})}},s=function(){};s.prototype=a,(s=new s).addTest("devicemotion","DeviceMotionEvent"in e),s.addTest("deviceorientation","DeviceOrientationEvent"in e);var c=t.documentElement,u="svg"===c.nodeName.toLowerCase();(function(){var e,t,n,a,c,u;for(var d in o)if(o.hasOwnProperty(d)){if(e=[],(t=o[d]).name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(a=i(t.fn,"function")?t.fn():t.fn,c=0;c<e.length;c++)1===(u=e[c].split(".")).length?s[u[0]]=a:(!s[u[0]]||s[u[0]]instanceof Boolean||(s[u[0]]=new Boolean(s[u[0]])),s[u[0]][u[1]]=a),r.push((a?"":"no-")+u.join("-"))}})(),function(e){var t=c.className,n=s._config.classPrefix||"";if(u&&(t=t.baseVal),s._config.enableJSClass){var i=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(i,"$1"+n+"js$2")}s._config.enableClasses&&(t+=" "+n+e.join(" "+n),u?c.className.baseVal=t:c.className=t)}(r),delete a.addTest,delete a.addAsyncTest;for(var d=0;d<s._q.length;d++)s._q[d]();e.Modernizr=s}(window,document),Modernizr.devicemotion?console.log("supported"):console.log("not supported"),$(".chart-area").parent().css("overflow","visible"),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("TwoStep",[],t):"object"==typeof exports?exports.TwoStep=t():e.TwoStep=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return[40,32,39,34].indexOf(e)>-1?1:[37,38,33].indexOf(e)>-1?-1:0},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.instances=[]}return i(e,[{key:"register",value:function(e){return this.instances.push(e),this}},{key:"getActiveInstances",value:function(){return this.instances.filter(function(e){return e.enabled})}}]),e}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=i(n(0)),a=new(i(n(1)).default),s=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),0===t.elements.length)throw"Elements array is empty";if(t.narrative){if(t.elements.length!==t.narrative.length)throw"Elements and narrative are different lengths";if(!1==!t.narrative.filter(function(e){return"function"!=typeof e}).length)throw"Narrative contains non-functions";this.narrative=t.narrative}this.onChange=t.onChange,this.elements=Array.prototype.slice.call(t.elements),this.enabled=!0,this.offset=t.hasOwnProperty("offset")?t.offset:{down:"50%",up:"0"};var n=this.setWaypoints(this.elements,function(e){if("down"==e){var t=r.elements.indexOf(this.element);t!==this.index&&r.goTo(t,!1,e)}},t.continuous,this.offset.down),i=this.setWaypoints(this.elements,function(e){if("up"==e){var t=r.elements.indexOf(this.element);t!==this.index&&r.goTo(t,!1,e)}},t.continuous,this.offset.up);if(this.waypoints=[n,i],t.stick){if(void 0===$().fixTo)throw"fixTo is not present on the page, or may have been loaded in before jQuery.";$(t.stick).wrapInner('<div class="two-step-sticky-wrapper"></div>'),this.sticky=$(t.stick).find(".two-step-sticky-wrapper").fixTo($(t.stick))}this.setKeyboard(),this.index=-1,a.register(this),setInterval(function(){Waypoint.refreshAll()},1e3);var r=this}return r(e,[{key:"goTo",value:function(e,t,n){var i=this;if(!1===this.isValidIndex(e))throw e+" is not a valid index. Must be between 0 and "+(this.elements.length-1)+" (inclusive).";this.narrative&&this.narrative[e]({element:this.elements[e],index:e,direction:n}),this.onChange&&this.onChange({element:this.elements[e],index:e,direction:n}),this.index=e;var r=$(this.elements).eq(e);return $(this.elements).removeClass("active"),r.addClass("active"),!0===t?(this.disableWaypoints(),$("html, body").animate({scrollTop:r.offset().top-100},500).promise().then(function(){i.enableWaypoints()})):$.Deferred().resolve()}},{key:"setWaypoints",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments[3];return e.map(function(e){return new Waypoint({element:e,handler:t,continuous:n,offset:i})})}},{key:"setKeyboard",value:function(){var e=this;$(window).keydown(function(t){if(e.disabled)return!0;var n=(0,o.default)(t.keyCode),i=a.getActiveInstances();if(0!==n&&t.target===document.body&&!1===t.metaKey&&1===i.length){var r=e.index+n;return!e.isValidIndex(r)||(e.goTo(r,!0),t.preventDefault(),!1)}})}},{key:"isValidIndex",value:function(e){return e<this.elements.length&&e>-1}},{key:"disableWaypoints",value:function(){[].concat.apply([],this.waypoints).forEach(function(e){return e.disable()})}},{key:"enableWaypoints",value:function(){[].concat.apply([],this.waypoints).forEach(function(e){return e.enable()})}},{key:"disable",value:function(){this.disabled=!0,this.enabled=!1,this.disableWaypoints(),this.sticky&&this.sticky.fixTo("stop")}},{key:"enable",value:function(){this.disabled=!1,this.enabled=!0,this.enableWaypoints(),this.sticky&&this.sticky.fixTo("start")}}]),e}();t.default=s,e.exports=t.default}])});var ts=new TwoStep({elements:document.querySelectorAll(".parent .narrative-item"),onChange:function(e){console.log("Item "+e.index)},stick:document.querySelector(".parent .sticky-outer"),narrative:[function(e){},function(e){$(".chart-title").text("Median home price 1981-present, in 2021 dollars"),$(".chart-source").text("Census Bureau and Department of Housing and Urban Development via FRED")},function(e){$(".chart-title").text("30-year, fixed-rate mortgage average, 1981-present"),$(".chart-source").text("Freddie Mac via FRED")},function(e){$(".chart-title").text("Monthly payment on a $205,000 home"),$(".chart-source").text("Freddie Mac via FRED (mortgage rate)")},function(e){$(".chart-title").text("Monthly payment on the median home"),$(".chart-source").text("Census Bureau and Department of Housing and Urban Development via FRED (home price); Freddie Mac via FRED (mortgage rate)")},function(e){$(".chart-title").text("Total interest paid on a median home at the average rate"),$(".chart-source").text("Census Bureau and Department of Housing and Urban Development via FRED (home price); Freddie Mac via FRED (mortgage rate)")}],offset:{up:"-10%",down:"100%"}}),requirejs,require,define;function drawHighcharts(){chart=Highcharts.chart("chart-container",{chart:{type:"area",styledMode:!0,spacingBottom:25,spacingRight:25,spacingLeft:10,spacingTop:20,animation:{duration:1e3}},title:{text:null},data:{csvURL:"https://raw.githubusercontent.com/kschmidt2/grow-historical-mortgages/master/data/median-home-price.csv"},annotations:[{}],plotOptions:{series:{animation:{duration:1e3,defer:1e3},lineWidth:1,states:{hover:{enabled:!1}},marker:{enabled:!1,symbol:"circle",fillColor:"#ffffff",states:{hover:{fillColor:"#ffffff"}}}}},legend:{enabled:!1},xAxis:{labels:{style:{whiteSpace:"nowrap"}},tickLength:5},yAxis:{title:!1,labels:{useHTML:!0,overflow:"allow"},tickAmount:6,tickLength:25,tickPosition:"inside"},credits:{enabled:!1},tooltip:{enabled:!1},defs:{gradient0:{tagName:"linearGradient",id:"gradient-0",x1:0,y1:0,x2:0,y2:1,children:[{tagName:"stop",offset:0},{tagName:"stop",offset:1}]}},responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{align:"left",x:-18},tooltip:{enabled:!1}}}]}})}Highcharts.setOptions({lang:{thousandsSep:","}}),"complete"===document.readyState||"interactive"===document.readyState?drawHighcharts():document.addEventListener("DOMContentLoaded",drawHighcharts),function(global,setTimeout){var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.6",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;function commentReplace(e,t){return t||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){var n;if(e)for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}function eachReverse(e,t){var n;if(e)for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,i){return t&&eachProp(t,function(t,r){!n&&hasProp(e,r)||(!i||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[r]=t:(e[r]||(e[r]={}),mixin(e[r],t,n,i)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,i){var r=new Error(t+"\nhttps://requirejs.org/docs/errors.html#"+e);return r.requireType=e,r.requireModules=i,n&&(r.originalError=n),r}if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,i){var r,o,a=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=n,n=i):e=[]),o&&o.context&&(a=o.context),(r=getOwn(contexts,a))||(r=contexts[a]=req.s.newContext(a)),o&&r.configure(o),r.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=void 0!==setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var i=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return i.type=e.scriptType||"text/javascript",i.charset="utf-8",i.async=!0,i},req.load=function(e,t,n){var i,r=e&&e.config||{};if(isBrowser)return(i=req.createNode(r,t,n)).setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),!i.attachEvent||i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0||isOpera?(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)),i.src=n,r.onNodeCreated&&r.onNodeCreated(i,r,t,n),currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{setTimeout(function(){},0),importScripts(n),e.completeLoad(t)}catch(i){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,i,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){if(head||(head=e.parentNode),dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,n){var i,r;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(i=currentlyAddingScript||getInteractiveScript())&&(e||(e=i.getAttribute("data-requiremodule")),r=contexts[i.getAttribute("data-requirecontext")]),r?(r.defQueue.push([e,t,n]),r.defQueueMap[e]=!0):globalDefQueue.push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}function newContext(e){var t,n,i,r,o,a={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},s={},c={},u={},d=[],l={},f={},p={},h=1,m=1;function g(e,t,n){var i,r,o,s,c,u,d,l,f,p,h=t&&t.split("/"),m=a.map,g=m&&m["*"];if(e&&(u=(e=e.split("/")).length-1,a.nodeIdCompat&&jsSuffixRegExp.test(e[u])&&(e[u]=e[u].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&h&&(e=h.slice(0,h.length-1).concat(e)),function(e){var t,n;for(t=0;t<e.length;t++)if("."===(n=e[t]))e.splice(t,1),t-=1;else if(".."===n){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}(e),e=e.join("/")),n&&m&&(h||g)){e:for(o=(r=e.split("/")).length;o>0;o-=1){if(c=r.slice(0,o).join("/"),h)for(s=h.length;s>0;s-=1)if((i=getOwn(m,h.slice(0,s).join("/")))&&(i=getOwn(i,c))){d=i,l=o;break e}!f&&g&&getOwn(g,c)&&(f=getOwn(g,c),p=o)}!d&&f&&(d=f,l=p),d&&(r.splice(0,l,d),e=r.join("/"))}return getOwn(a.pkgs,e)||e}function v(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===i.contextName)return t.parentNode.removeChild(t),!0})}function b(e){var t=getOwn(a.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),i.require.undef(e),i.makeRequire(null,{skipMap:!0})([e]),!0}function x(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function y(e,t,n,r){var o,a,s,c,u=null,d=t?t.name:null,f=e,p=!0,v="";return e||(p=!1,e="_@r"+(h+=1)),u=(c=x(e))[0],e=c[1],u&&(u=g(u,d,r),a=getOwn(l,u)),e&&(u?v=n?e:a&&a.normalize?a.normalize(e,function(e){return g(e,d,r)}):-1===e.indexOf("!")?g(e,d,r):e:(u=(c=x(v=g(e,d,r)))[0],v=c[1],n=!0,o=i.nameToUrl(v))),{prefix:u,name:v,parentMap:t,unnormalized:!!(s=!u||a||n?"":"_unnormalized"+(m+=1)),url:o,originalName:f,isDefine:p,id:(u?u+"!"+v:v)+s}}function w(e){var t=e.id,n=getOwn(s,t);return n||(n=s[t]=new i.Module(e)),n}function E(e,t,n){var i=e.id,r=getOwn(s,i);!hasProp(l,i)||r&&!r.defineEmitComplete?(r=w(e)).error&&"error"===t?n(r.error):r.on(t,n):"defined"===t&&n(l[i])}function q(e,t){var n=e.requireModules,i=!1;t?t(e):(each(n,function(t){var n=getOwn(s,t);n&&(n.error=e,n.events.error&&(i=!0,n.emit("error",e)))}),i||req.onError(e))}function k(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(i.defQueueMap[t]=!0),d.push(e)}),globalDefQueue=[])}function M(e){delete s[e],delete c[e]}function O(){var e,n,r=1e3*a.waitSeconds,u=r&&i.startTime+r<(new Date).getTime(),d=[],f=[],p=!1,h=!0;if(!t){if(t=!0,eachProp(c,function(e){var t=e.map,i=t.id;if(e.enabled&&(t.isDefine||f.push(e),!e.error))if(!e.inited&&u)b(i)?(n=!0,p=!0):(d.push(i),v(i));else if(!e.inited&&e.fetched&&t.isDefine&&(p=!0,!t.prefix))return h=!1}),u&&d.length)return(e=makeError("timeout","Load timeout for modules: "+d,null,d)).contextName=i.contextName,q(e);h&&each(f,function(e){!function e(t,n,i){var r=t.map.id;t.error?t.emit("error",t.error):(n[r]=!0,each(t.depMaps,function(r,o){var a=r.id,c=getOwn(s,a);!c||t.depMatched[o]||i[a]||(getOwn(n,a)?(t.defineDep(o,l[a]),t.check()):e(c,n,i))}),i[r]=!0)}(e,{},{})}),u&&!n||!p||!isBrowser&&!isWebWorker||o||(o=setTimeout(function(){o=0,O()},50)),t=!1}}function S(e){hasProp(l,e[0])||w(y(e[0],null,!0)).init(e[1],e[2])}function T(e,t,n,i){e.detachEvent&&!isOpera?i&&e.detachEvent(i,t):e.removeEventListener(n,t,!1)}function j(e){var t=e.currentTarget||e.srcElement;return T(t,i.onScriptLoad,"load","onreadystatechange"),T(t,i.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function C(){var e;for(k();d.length;){if(null===(e=d.shift())[0])return q(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));S(e)}i.defQueueMap={}}return r={require:function(e){return e.require?e.require:e.require=i.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?l[e.map.id]=e.exports:e.exports=l[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(a.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},(n=function(e){this.events=getOwn(u,e.id)||{},this.map=e,this.shim=getOwn(a.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0}).prototype={init:function(e,t,n,i){i=i||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,i.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();i.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;f[e]||(f[e]=!0,i.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,r=this.depExports,o=this.exports,a=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(a)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{o=i.execCb(n,a,r,o)}catch(t){e=t}else o=i.execCb(n,a,r,o);if(this.map.isDefine&&void 0===o&&((t=this.module)?o=t.exports:this.usingExports&&(o=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",q(this.error=e)}else o=a;if(this.exports=o,this.map.isDefine&&!this.ignore&&(l[n]=o,req.onResourceLoad)){var s=[];each(this.depMaps,function(e){s.push(e.normalizedMap||e)}),req.onResourceLoad(i,this.map,s)}M(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(i.defQueueMap,n)||this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,n=y(e.prefix);this.depMaps.push(n),E(n,"defined",bind(this,function(n){var r,o,c,u=getOwn(p,this.map.id),d=this.map.name,l=this.map.parentMap?this.map.parentMap.name:null,f=i.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(n.normalize&&(d=n.normalize(d,function(e){return g(e,l,!0)})||""),E(o=y(e.prefix+"!"+d,this.map.parentMap,!0),"defined",bind(this,function(e){this.map.normalizedMap=o,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),void((c=getOwn(s,o.id))&&(this.depMaps.push(o),this.events.error&&c.on("error",bind(this,function(e){this.emit("error",e)})),c.enable()))):u?(this.map.url=i.nameToUrl(u),void this.load()):((r=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})})).error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(s,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&M(e.map.id)}),q(e)}),r.fromText=bind(this,function(n,o){var s=e.name,c=y(s),u=useInteractive;o&&(n=o),u&&(useInteractive=!1),w(c),hasProp(a.config,t)&&(a.config[s]=a.config[t]);try{req.exec(n)}catch(e){return q(makeError("fromtexteval","fromText eval for "+t+" failed: "+e,e,[t]))}u&&(useInteractive=!0),this.depMaps.push(c),i.completeLoad(s),f([s],r)}),void n.load(e.name,f,r,a))})),i.enable(n,this),this.pluginMaps[n.id]=n},enable:function(){c[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,o,a;if("string"==typeof e){if(e=y(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,a=getOwn(r,e.id))return void(this.depExports[t]=a(this));this.depCount+=1,E(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?E(e,"error",bind(this,this.errback)):this.events.error&&E(e,"error",bind(this,function(e){this.emit("error",e)}))}n=e.id,o=s[n],hasProp(r,n)||!o||o.enabled||i.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(s,e.id);t&&!t.enabled&&i.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},(i={config:a,contextName:e,registry:s,defined:l,urlFetched:f,defQueue:d,defQueueMap:{},Module:n,makeModuleMap:y,nextTick:req.nextTick,onError:q,configure:function(e){if(e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs){var t=e.urlArgs;e.urlArgs=function(e,n){return(-1===n.indexOf("?")?"?":"&")+t}}var n=a.shim,r={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){r[t]?(a[t]||(a[t]={}),mixin(a[t],e,!0,!0)):a[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(p[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=i.makeShimExports(e)),n[t]=e}),a.shim=n),e.packages&&each(e.packages,function(e){var t;t=(e="string"==typeof e?{name:e}:e).name,e.location&&(a.paths[t]=e.location),a.pkgs[t]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(s,function(e,t){e.inited||e.map.unnormalized||(e.map=y(t,null,!0))}),(e.deps||e.callback)&&i.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}},makeRequire:function(t,n){function o(a,c,u){var d,f;return n.enableBuildCallback&&c&&isFunction(c)&&(c.__requireJsBuild=!0),"string"==typeof a?isFunction(c)?q(makeError("requireargs","Invalid require call"),u):t&&hasProp(r,a)?r[a](s[t.id]):req.get?req.get(i,a,t,o):(d=y(a,t,!1,!0).id,hasProp(l,d)?l[d]:q(makeError("notloaded",'Module name "'+d+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(C(),i.nextTick(function(){C(),(f=w(y(null,t))).skipMap=n.skipMap,f.init(a,c,u,{enabled:!0}),O()}),o)}return n=n||{},mixin(o,{isBrowser:isBrowser,toUrl:function(e){var n,r=e.lastIndexOf("."),o=e.split("/")[0];return-1!==r&&(!("."===o||".."===o)||r>1)&&(n=e.substring(r,e.length),e=e.substring(0,r)),i.nameToUrl(g(e,t&&t.id,!0),n,!0)},defined:function(e){return hasProp(l,y(e,t,!1,!0).id)},specified:function(e){return e=y(e,t,!1,!0).id,hasProp(l,e)||hasProp(s,e)}}),t||(o.undef=function(e){k();var n=y(e,t,!0),r=getOwn(s,e);r.undefed=!0,v(e),delete l[e],delete f[n.url],delete u[e],eachReverse(d,function(t,n){t[0]===e&&d.splice(n,1)}),delete i.defQueueMap[e],r&&(r.events.defined&&(u[e]=r.events),M(e))}),o},enable:function(e){getOwn(s,e.id)&&w(e).enable()},completeLoad:function(e){var t,n,r,o=getOwn(a.shim,e)||{},c=o.exports;for(k();d.length;){if(null===(n=d.shift())[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);S(n)}if(i.defQueueMap={},r=getOwn(s,e),!t&&!hasProp(l,e)&&r&&!r.inited){if(!(!a.enforceDefine||c&&getGlobal(c)))return b(e)?void 0:q(makeError("nodefine","No define call for "+e,null,[e]));S([e,o.deps||[],o.exportsFn])}O()},nameToUrl:function(e,t,n){var r,o,s,c,u,d,l=getOwn(a.pkgs,e);if(l&&(e=l),d=getOwn(p,e))return i.nameToUrl(d,t,n);if(req.jsExtRegExp.test(e))c=e+(t||"");else{for(r=a.paths,s=(o=e.split("/")).length;s>0;s-=1)if(u=getOwn(r,o.slice(0,s).join("/"))){isArray(u)&&(u=u[0]),o.splice(0,s,u);break}c=o.join("/"),c=("/"===(c+=t||(/^data\:|^blob\:|\?/.test(c)||n?"":".js")).charAt(0)||c.match(/^[\w\+\.\-]+:/)?"":a.baseUrl)+c}return a.urlArgs&&!/^blob\:/.test(c)?c+a.urlArgs(e,c):c},load:function(e,t){req.load(i,e,t)},execCb:function(e,t,n,i){return t.apply(i,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=j(e);i.completeLoad(t.id)}},onScriptError:function(e){var t=j(e);if(!b(t.id)){var n=[];return eachProp(s,function(e,i){0!==i.indexOf("_@r")&&each(e.depMaps,function(e){if(e.id===t.id)return n.push(i),!0})}),q(makeError("scripterror",'Script error for "'+t.id+(n.length?'", needed by: '+n.join(", "):'"'),e,[t.id]))}}}).require=i.makeRequire(),i}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e}),interactiveScript)}}(this,"undefined"==typeof setTimeout?void 0:setTimeout);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJyZXF1aXJlLmpzIl0sIm5hbWVzIjpbImNoYXJ0IiwiZSIsIm4iLCJvIiwicyIsInQiLCJmIiwibCIsIl92ZXJzaW9uIiwiX2NvbmZpZyIsImNsYXNzUHJlZml4IiwiZW5hYmxlQ2xhc3NlcyIsImVuYWJsZUpTQ2xhc3MiLCJ1c2VQcmVmaXhlcyIsIl9xIiwib24iLCJ0aGlzIiwic2V0VGltZW91dCIsImFkZFRlc3QiLCJwdXNoIiwibmFtZSIsImZuIiwib3B0aW9ucyIsImFkZEFzeW5jVGVzdCIsIk1vZGVybml6ciIsInByb3RvdHlwZSIsInIiLCJkb2N1bWVudEVsZW1lbnQiLCJjIiwibm9kZU5hbWUiLCJ0b0xvd2VyQ2FzZSIsImEiLCJpIiwiaGFzT3duUHJvcGVydHkiLCJhbGlhc2VzIiwibGVuZ3RoIiwic3BsaXQiLCJCb29sZWFuIiwiam9pbiIsImNsYXNzTmFtZSIsImJhc2VWYWwiLCJSZWdFeHAiLCJyZXBsYWNlIiwiZCIsIndpbmRvdyIsImRvY3VtZW50IiwiZGV2aWNlbW90aW9uIiwiY29uc29sZSIsImxvZyIsIiQiLCJwYXJlbnQiLCJjc3MiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwiVHdvU3RlcCIsImNhbGwiLCJtIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJwIiwidmFsdWUiLCJpbmRleE9mIiwid3JpdGFibGUiLCJrZXkiLCJUeXBlRXJyb3IiLCJpbnN0YW5jZXMiLCJmaWx0ZXIiLCJlbmFibGVkIiwiZWxlbWVudHMiLCJuYXJyYXRpdmUiLCJvbkNoYW5nZSIsIkFycmF5Iiwic2xpY2UiLCJvZmZzZXQiLCJkb3duIiwidXAiLCJzZXRXYXlwb2ludHMiLCJlbGVtZW50IiwiaW5kZXgiLCJnb1RvIiwiY29udGludW91cyIsIndheXBvaW50cyIsInN0aWNrIiwiZml4VG8iLCJ3cmFwSW5uZXIiLCJzdGlja3kiLCJmaW5kIiwic2V0S2V5Ym9hcmQiLCJyZWdpc3RlciIsInNldEludGVydmFsIiwiV2F5cG9pbnQiLCJyZWZyZXNoQWxsIiwiaXNWYWxpZEluZGV4IiwiZGlyZWN0aW9uIiwiZXEiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiZGlzYWJsZVdheXBvaW50cyIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJ0b3AiLCJwcm9taXNlIiwidGhlbiIsImVuYWJsZVdheXBvaW50cyIsIkRlZmVycmVkIiwicmVzb2x2ZSIsImFyZ3VtZW50cyIsIm1hcCIsImhhbmRsZXIiLCJrZXlkb3duIiwiZGlzYWJsZWQiLCJrZXlDb2RlIiwiZ2V0QWN0aXZlSW5zdGFuY2VzIiwidGFyZ2V0IiwiYm9keSIsIm1ldGFLZXkiLCJwcmV2ZW50RGVmYXVsdCIsImNvbmNhdCIsImFwcGx5IiwiZm9yRWFjaCIsImRpc2FibGUiLCJlbmFibGUiLCJ0cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJldmVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0IiwicmVxdWlyZWpzIiwicmVxdWlyZSIsImRyYXdIaWdoY2hhcnRzIiwiSGlnaGNoYXJ0cyIsInR5cGUiLCJzdHlsZWRNb2RlIiwic3BhY2luZ0JvdHRvbSIsInNwYWNpbmdSaWdodCIsInNwYWNpbmdMZWZ0Iiwic3BhY2luZ1RvcCIsImFuaW1hdGlvbiIsImR1cmF0aW9uIiwidGl0bGUiLCJkYXRhIiwiY3N2VVJMIiwiYW5ub3RhdGlvbnMiLCJwbG90T3B0aW9ucyIsInNlcmllcyIsImRlZmVyIiwibGluZVdpZHRoIiwic3RhdGVzIiwiaG92ZXIiLCJtYXJrZXIiLCJzeW1ib2wiLCJmaWxsQ29sb3IiLCJsZWdlbmQiLCJ4QXhpcyIsImxhYmVscyIsInN0eWxlIiwid2hpdGVTcGFjZSIsInRpY2tMZW5ndGgiLCJ5QXhpcyIsInVzZUhUTUwiLCJvdmVyZmxvdyIsInRpY2tBbW91bnQiLCJ0aWNrUG9zaXRpb24iLCJjcmVkaXRzIiwidG9vbHRpcCIsImRlZnMiLCJncmFkaWVudDAiLCJ0YWdOYW1lIiwiaWQiLCJ4MSIsInkxIiwieDIiLCJ5MiIsImNoaWxkcmVuIiwicmVzcG9uc2l2ZSIsInJ1bGVzIiwiY29uZGl0aW9uIiwibWF4V2lkdGgiLCJjaGFydE9wdGlvbnMiLCJhbGlnbiIsIngiLCJzZXRPcHRpb25zIiwibGFuZyIsInRob3VzYW5kc1NlcCIsInJlYWR5U3RhdGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZ2xvYmFsIiwicmVxIiwiaGVhZCIsImJhc2VFbGVtZW50IiwiZGF0YU1haW4iLCJzcmMiLCJpbnRlcmFjdGl2ZVNjcmlwdCIsImN1cnJlbnRseUFkZGluZ1NjcmlwdCIsIm1haW5TY3JpcHQiLCJzdWJQYXRoIiwidmVyc2lvbiIsImNvbW1lbnRSZWdFeHAiLCJjanNSZXF1aXJlUmVnRXhwIiwianNTdWZmaXhSZWdFeHAiLCJjdXJyRGlyUmVnRXhwIiwib3AiLCJvc3RyaW5nIiwidG9TdHJpbmciLCJoYXNPd24iLCJpc0Jyb3dzZXIiLCJuYXZpZ2F0b3IiLCJpc1dlYldvcmtlciIsImltcG9ydFNjcmlwdHMiLCJyZWFkeVJlZ0V4cCIsInBsYXRmb3JtIiwiZGVmQ29udGV4dE5hbWUiLCJpc09wZXJhIiwib3BlcmEiLCJjb250ZXh0cyIsImNmZyIsImdsb2JhbERlZlF1ZXVlIiwidXNlSW50ZXJhY3RpdmUiLCJjb21tZW50UmVwbGFjZSIsIm1hdGNoIiwic2luZ2xlUHJlZml4IiwiaXNGdW5jdGlvbiIsIml0IiwiaXNBcnJheSIsImVhY2giLCJhcnkiLCJmdW5jIiwiZWFjaFJldmVyc2UiLCJoYXNQcm9wIiwib2JqIiwicHJvcCIsImdldE93biIsImVhY2hQcm9wIiwibWl4aW4iLCJzb3VyY2UiLCJmb3JjZSIsImRlZXBTdHJpbmdNaXhpbiIsImJpbmQiLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJkZWZhdWx0T25FcnJvciIsImVyciIsImdldEdsb2JhbCIsImciLCJwYXJ0IiwibWFrZUVycm9yIiwibXNnIiwicmVxdWlyZU1vZHVsZXMiLCJFcnJvciIsInJlcXVpcmVUeXBlIiwib3JpZ2luYWxFcnJvciIsInVuZGVmaW5lZCIsImRlcHMiLCJjYWxsYmFjayIsImVycmJhY2siLCJvcHRpb25hbCIsImNvbnRleHQiLCJjb25maWciLCJjb250ZXh0TmFtZSIsIm5ld0NvbnRleHQiLCJjb25maWd1cmUiLCJuZXh0VGljayIsImpzRXh0UmVnRXhwIiwiY3R4IiwicGFyZW50Tm9kZSIsIm9uRXJyb3IiLCJjcmVhdGVOb2RlIiwibW9kdWxlTmFtZSIsInVybCIsIm5vZGUiLCJ4aHRtbCIsImNyZWF0ZUVsZW1lbnROUyIsImNyZWF0ZUVsZW1lbnQiLCJzY3JpcHRUeXBlIiwiY2hhcnNldCIsImFzeW5jIiwibG9hZCIsInNldEF0dHJpYnV0ZSIsImF0dGFjaEV2ZW50Iiwib25TY3JpcHRMb2FkIiwib25TY3JpcHRFcnJvciIsIm9uTm9kZUNyZWF0ZWQiLCJpbnNlcnRCZWZvcmUiLCJhcHBlbmRDaGlsZCIsImNvbXBsZXRlTG9hZCIsInNraXBEYXRhTWFpbiIsInNjcmlwdCIsImdldEF0dHJpYnV0ZSIsImJhc2VVcmwiLCJwb3AiLCJ0ZXN0IiwiZGVwIiwiZ2V0SW50ZXJhY3RpdmVTY3JpcHQiLCJkZWZRdWV1ZSIsImRlZlF1ZXVlTWFwIiwialF1ZXJ5IiwiZXhlYyIsImV2YWwiLCJpbkNoZWNrTG9hZGVkIiwiTW9kdWxlIiwiaGFuZGxlcnMiLCJjaGVja0xvYWRlZFRpbWVvdXRJZCIsIndhaXRTZWNvbmRzIiwicGF0aHMiLCJidW5kbGVzIiwicGtncyIsInNoaW0iLCJyZWdpc3RyeSIsImVuYWJsZWRSZWdpc3RyeSIsInVuZGVmRXZlbnRzIiwiZGVmaW5lZCIsInVybEZldGNoZWQiLCJidW5kbGVzTWFwIiwicmVxdWlyZUNvdW50ZXIiLCJ1bm5vcm1hbGl6ZWRDb3VudGVyIiwibm9ybWFsaXplIiwiYmFzZU5hbWUiLCJhcHBseU1hcCIsIm1hcFZhbHVlIiwibmFtZVBhcnRzIiwiaiIsIm5hbWVTZWdtZW50IiwibGFzdEluZGV4IiwiZm91bmRNYXAiLCJmb3VuZEkiLCJmb3VuZFN0YXJNYXAiLCJzdGFySSIsImJhc2VQYXJ0cyIsInN0YXJNYXAiLCJub2RlSWRDb21wYXQiLCJjaGFyQXQiLCJzcGxpY2UiLCJ0cmltRG90cyIsIm91dGVyTG9vcCIsInJlbW92ZVNjcmlwdCIsInNjcmlwdE5vZGUiLCJyZW1vdmVDaGlsZCIsImhhc1BhdGhGYWxsYmFjayIsInBhdGhDb25maWciLCJzaGlmdCIsInVuZGVmIiwibWFrZVJlcXVpcmUiLCJza2lwTWFwIiwic3BsaXRQcmVmaXgiLCJwcmVmaXgiLCJzdWJzdHJpbmciLCJtYWtlTW9kdWxlTWFwIiwicGFyZW50TW9kdWxlTWFwIiwiaXNOb3JtYWxpemVkIiwicGx1Z2luTW9kdWxlIiwic3VmZml4IiwicGFyZW50TmFtZSIsIm9yaWdpbmFsTmFtZSIsImlzRGVmaW5lIiwibm9ybWFsaXplZE5hbWUiLCJuYW1lVG9VcmwiLCJwYXJlbnRNYXAiLCJ1bm5vcm1hbGl6ZWQiLCJnZXRNb2R1bGUiLCJkZXBNYXAiLCJtb2QiLCJkZWZpbmVFbWl0Q29tcGxldGUiLCJlcnJvciIsImlkcyIsIm5vdGlmaWVkIiwiZXZlbnRzIiwiZW1pdCIsInRha2VHbG9iYWxRdWV1ZSIsInF1ZXVlSXRlbSIsImNsZWFuUmVnaXN0cnkiLCJjaGVja0xvYWRlZCIsInVzaW5nUGF0aEZhbGxiYWNrIiwid2FpdEludGVydmFsIiwiZXhwaXJlZCIsInN0YXJ0VGltZSIsIkRhdGUiLCJnZXRUaW1lIiwibm9Mb2FkcyIsInJlcUNhbGxzIiwic3RpbGxMb2FkaW5nIiwibmVlZEN5Y2xlQ2hlY2siLCJtb2RJZCIsImluaXRlZCIsImZldGNoZWQiLCJicmVha0N5Y2xlIiwidHJhY2VkIiwicHJvY2Vzc2VkIiwiZGVwTWFwcyIsImRlcElkIiwiZGVwTWF0Y2hlZCIsImRlZmluZURlcCIsImNoZWNrIiwiY2FsbEdldE1vZHVsZSIsImFyZ3MiLCJpbml0IiwicmVtb3ZlTGlzdGVuZXIiLCJpZU5hbWUiLCJkZXRhY2hFdmVudCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJnZXRTY3JpcHREYXRhIiwiZXZ0IiwiY3VycmVudFRhcmdldCIsInNyY0VsZW1lbnQiLCJpbnRha2VEZWZpbmVzIiwidXNpbmdFeHBvcnRzIiwidXJpIiwiZGVwRXhwb3J0cyIsInBsdWdpbk1hcHMiLCJkZXBDb3VudCIsImZhY3RvcnkiLCJpZ25vcmUiLCJmZXRjaCIsImNhbGxQbHVnaW4iLCJlbmFibGVCdWlsZENhbGxiYWNrIiwiZW5hYmxpbmciLCJjanNNb2R1bGUiLCJkZWZpbmluZyIsImV4ZWNDYiIsInJlcXVpcmVNYXAiLCJvblJlc291cmNlTG9hZCIsInJlc0xvYWRNYXBzIiwibm9ybWFsaXplZE1hcCIsImRlZmluZUVtaXR0ZWQiLCJwbHVnaW5NYXAiLCJwbHVnaW4iLCJub3JtYWxpemVkTW9kIiwiYnVuZGxlSWQiLCJsb2NhbFJlcXVpcmUiLCJmcm9tVGV4dCIsInRleHRBbHQiLCJtb2R1bGVNYXAiLCJoYXNJbnRlcmFjdGl2ZSIsInVuZGVmZWQiLCJjYiIsImNicyIsInVybEFyZ3MiLCJvYmpzIiwidiIsImV4cG9ydHNGbiIsIm1ha2VTaGltRXhwb3J0cyIsInBhY2thZ2VzIiwicGtnT2JqIiwibG9jYXRpb24iLCJtYWluIiwicmV0IiwicmVsTWFwIiwicmVxdWlyZU1vZCIsIl9fcmVxdWlyZUpzQnVpbGQiLCJ0b1VybCIsIm1vZHVsZU5hbWVQbHVzRXh0IiwiZXh0IiwibGFzdEluZGV4T2YiLCJzZWdtZW50Iiwic3BlY2lmaWVkIiwiZm91bmQiLCJzaEV4cG9ydHMiLCJlbmZvcmNlRGVmaW5lIiwic2tpcEV4dCIsInN5bXMiLCJwYXJlbnRQYXRoIiwicGtnTWFpbiIsInBhcmVudHMiXSwibWFwcGluZ3MiOiJBQWtCQSxJQUFBQSxPQVZBLFNBQUFDLEVBQUFDLEVBQUFDLEdBQUEsU0FBQUMsRUFBQUgsRUFBQUMsR0FBQSxjQUFBRCxJQUFBQyxFQUFBLElBQUFHLEVBQUEsR0FBQUMsRUFBQSxHQUFBQyxFQUFBLENBQUFDLFNBQUEsUUFBQUMsUUFBQSxDQUFBQyxZQUFBLEdBQUFDLGVBQUEs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QUNBLE9BQUFRLGtCQUFBOEYsSUFHQTlGLG9CQXg4REEsQ0FzbEVBdkwsS0FBQSxvQkFBQUMsZ0JBQUFpUCxFQUFBalAiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGFkZHMgc29jaWFsIGNsYXNzIHRvIGdldCBzb2NpYWwgY2hhcnRcbi8vIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNoYXJ0LWFyZWFcIik7XG4vLyBmb3IodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5sZW5ndGg7IGkrKylcbi8vIHtcbi8vICAgICBlbGVtZW50W2ldLmNsYXNzTmFtZSArPSBcIiBzb2NpYWxcIjtcbi8vIH1cbi8qISBtb2Rlcm5penIgMy42LjAgKEN1c3RvbSBCdWlsZCkgfCBNSVQgKlxuICogaHR0cHM6Ly9tb2Rlcm5penIuY29tL2Rvd25sb2FkLz8tZGV2aWNlbW90aW9uX2RldmljZW9yaWVudGF0aW9uLXNldGNsYXNzZXMgISovXG4gIWZ1bmN0aW9uKGUsbixvKXtmdW5jdGlvbiBzKGUsbil7cmV0dXJuIHR5cGVvZiBlPT09bn1mdW5jdGlvbiBhKCl7dmFyIGUsbixvLGEsaSxsLHI7Zm9yKHZhciBjIGluIGYpaWYoZi5oYXNPd25Qcm9wZXJ0eShjKSl7aWYoZT1bXSxuPWZbY10sbi5uYW1lJiYoZS5wdXNoKG4ubmFtZS50b0xvd2VyQ2FzZSgpKSxuLm9wdGlvbnMmJm4ub3B0aW9ucy5hbGlhc2VzJiZuLm9wdGlvbnMuYWxpYXNlcy5sZW5ndGgpKWZvcihvPTA7bzxuLm9wdGlvbnMuYWxpYXNlcy5sZW5ndGg7bysrKWUucHVzaChuLm9wdGlvbnMuYWxpYXNlc1tvXS50b0xvd2VyQ2FzZSgpKTtmb3IoYT1zKG4uZm4sXCJmdW5jdGlvblwiKT9uLmZuKCk6bi5mbixpPTA7aTxlLmxlbmd0aDtpKyspbD1lW2ldLHI9bC5zcGxpdChcIi5cIiksMT09PXIubGVuZ3RoP01vZGVybml6cltyWzBdXT1hOighTW9kZXJuaXpyW3JbMF1dfHxNb2Rlcm5penJbclswXV1pbnN0YW5jZW9mIEJvb2xlYW58fChNb2Rlcm5penJbclswXV09bmV3IEJvb2xlYW4oTW9kZXJuaXpyW3JbMF1dKSksTW9kZXJuaXpyW3JbMF1dW3JbMV1dPWEpLHQucHVzaCgoYT9cIlwiOlwibm8tXCIpK3Iuam9pbihcIi1cIikpfX1mdW5jdGlvbiBpKGUpe3ZhciBuPXIuY2xhc3NOYW1lLG89TW9kZXJuaXpyLl9jb25maWcuY2xhc3NQcmVmaXh8fFwiXCI7aWYoYyYmKG49bi5iYXNlVmFsKSxNb2Rlcm5penIuX2NvbmZpZy5lbmFibGVKU0NsYXNzKXt2YXIgcz1uZXcgUmVnRXhwKFwiKF58XFxcXHMpXCIrbytcIm5vLWpzKFxcXFxzfCQpXCIpO249bi5yZXBsYWNlKHMsXCIkMVwiK28rXCJqcyQyXCIpfU1vZGVybml6ci5fY29uZmlnLmVuYWJsZUNsYXNzZXMmJihuKz1cIiBcIitvK2Uuam9pbihcIiBcIitvKSxjP3IuY2xhc3NOYW1lLmJhc2VWYWw9bjpyLmNsYXNzTmFtZT1uKX12YXIgdD1bXSxmPVtdLGw9e192ZXJzaW9uOlwiMy42LjBcIixfY29uZmlnOntjbGFzc1ByZWZpeDpcIlwiLGVuYWJsZUNsYXNzZXM6ITAsZW5hYmxlSlNDbGFzczohMCx1c2VQcmVmaXhlczohMH0sX3E6W10sb246ZnVuY3Rpb24oZSxuKXt2YXIgbz10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtuKG9bZV0pfSwwKX0sYWRkVGVzdDpmdW5jdGlvbihlLG4sbyl7Zi5wdXNoKHtuYW1lOmUsZm46bixvcHRpb25zOm99KX0sYWRkQXN5bmNUZXN0OmZ1bmN0aW9uKGUpe2YucHVzaCh7bmFtZTpudWxsLGZuOmV9KX19LE1vZGVybml6cj1mdW5jdGlvbigpe307TW9kZXJuaXpyLnByb3RvdHlwZT1sLE1vZGVybml6cj1uZXcgTW9kZXJuaXpyLE1vZGVybml6ci5hZGRUZXN0KFwiZGV2aWNlbW90aW9uXCIsXCJEZXZpY2VNb3Rpb25FdmVudFwiaW4gZSksTW9kZXJuaXpyLmFkZFRlc3QoXCJkZXZpY2VvcmllbnRhdGlvblwiLFwiRGV2aWNlT3JpZW50YXRpb25FdmVudFwiaW4gZSk7dmFyIHI9bi5kb2N1bWVudEVsZW1lbnQsYz1cInN2Z1wiPT09ci5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2EoKSxpKHQpLGRlbGV0ZSBsLmFkZFRlc3QsZGVsZXRlIGwuYWRkQXN5bmNUZXN0O2Zvcih2YXIgZD0wO2Q8TW9kZXJuaXpyLl9xLmxlbmd0aDtkKyspTW9kZXJuaXpyLl9xW2RdKCk7ZS5Nb2Rlcm5penI9TW9kZXJuaXpyfSh3aW5kb3csZG9jdW1lbnQpO1xuXG4gIGlmIChNb2Rlcm5penIuZGV2aWNlbW90aW9uKSB7XG4gICAgLy8gc3VwcG9ydGVkXG4gICAgICAgIGNvbnNvbGUubG9nKFwic3VwcG9ydGVkXCIpXG4gIH0gZWxzZSB7XG4gICAgLy8gbm90LXN1cHBvcnRlZFxuICAgIGNvbnNvbGUubG9nKFwibm90IHN1cHBvcnRlZFwiKVxuICB9XG5cbiAgbGV0IGNoYXJ0O1xuXG5cbiQoIFwiLmNoYXJ0LWFyZWFcIiApLnBhcmVudCgpLmNzcyggXCJvdmVyZmxvd1wiLCBcInZpc2libGVcIiApXG4hZnVuY3Rpb24oZSx0KXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShcIlR3b1N0ZXBcIixbXSx0KTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzLlR3b1N0ZXA9dCgpOmUuVHdvU3RlcD10KCl9KHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChpKXtpZihuW2ldKXJldHVybiBuW2ldLmV4cG9ydHM7dmFyIG89bltpXT17aTppLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIGVbaV0uY2FsbChvLmV4cG9ydHMsbyxvLmV4cG9ydHMsdCksby5sPSEwLG8uZXhwb3J0c312YXIgbj17fTtyZXR1cm4gdC5tPWUsdC5jPW4sdC5pPWZ1bmN0aW9uKGUpe3JldHVybiBlfSx0LmQ9ZnVuY3Rpb24oZSxuLGkpe3QubyhlLG4pfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLHtjb25maWd1cmFibGU6ITEsZW51bWVyYWJsZTohMCxnZXQ6aX0pfSx0Lm49ZnVuY3Rpb24oZSl7dmFyIG49ZSYmZS5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIGUuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gZX07cmV0dXJuIHQuZChuLFwiYVwiLG4pLG59LHQubz1mdW5jdGlvbihlLHQpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KX0sdC5wPVwiXCIsdCh0LnM9Mil9KFtmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gaShlKXt2YXIgdD1bNDAsMzIsMzksMzRdLG49WzM3LDM4LDMzXTtyZXR1cm4gdC5pbmRleE9mKGUpPi0xPzE6bi5pbmRleE9mKGUpPi0xPy0xOjB9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSksdC5kZWZhdWx0PWksZS5leHBvcnRzPXQuZGVmYXVsdH0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGkoZSx0KXtpZighKGUgaW5zdGFuY2VvZiB0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKXt2YXIgaT10W25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKHQsbixpKXtyZXR1cm4gbiYmZSh0LnByb3RvdHlwZSxuKSxpJiZlKHQsaSksdH19KCkscj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtpKHRoaXMsZSksdGhpcy5pbnN0YW5jZXM9W119cmV0dXJuIG8oZSxbe2tleTpcInJlZ2lzdGVyXCIsdmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaW5zdGFuY2VzLnB1c2goZSksdGhpc319LHtrZXk6XCJnZXRBY3RpdmVJbnN0YW5jZXNcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluc3RhbmNlcy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZW5hYmxlZH0pfX1dKSxlfSgpO3QuZGVmYXVsdD1yLGUuZXhwb3J0cz10LmRlZmF1bHR9LGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBpKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX1mdW5jdGlvbiBvKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIGk9dFtuXTtpLmVudW1lcmFibGU9aS5lbnVtZXJhYmxlfHwhMSxpLmNvbmZpZ3VyYWJsZT0hMCxcInZhbHVlXCJpbiBpJiYoaS53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsaS5rZXksaSl9fXJldHVybiBmdW5jdGlvbih0LG4saSl7cmV0dXJuIG4mJmUodC5wcm90b3R5cGUsbiksaSYmZSh0LGkpLHR9fSgpLHM9bigwKSxhPWkocyksdT1uKDEpLGY9aSh1KSxsPW5ldyBmLmRlZmF1bHQsYz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUodCl7ZnVuY3Rpb24gbihlKXtpZihcInVwXCI9PWUpe3ZhciB0PWEuZWxlbWVudHMuaW5kZXhPZih0aGlzLmVsZW1lbnQpO3QhPT10aGlzLmluZGV4JiZhLmdvVG8odCwhMSxlKX19ZnVuY3Rpb24gaShlKXtpZihcImRvd25cIj09ZSl7dmFyIHQ9YS5lbGVtZW50cy5pbmRleE9mKHRoaXMuZWxlbWVudCk7dCE9PXRoaXMuaW5kZXgmJmEuZ29Ubyh0LCExLGUpfX1pZihvKHRoaXMsZSksMD09PXQuZWxlbWVudHMubGVuZ3RoKXRocm93XCJFbGVtZW50cyBhcnJheSBpcyBlbXB0eVwiO2lmKHQubmFycmF0aXZlKXtpZih0LmVsZW1lbnRzLmxlbmd0aCE9PXQubmFycmF0aXZlLmxlbmd0aCl0aHJvd1wiRWxlbWVudHMgYW5kIG5hcnJhdGl2ZSBhcmUgZGlmZmVyZW50IGxlbmd0aHNcIjtpZighdC5uYXJyYXRpdmUuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIiE9dHlwZW9mIGV9KS5sZW5ndGg9PT0hMSl0aHJvd1wiTmFycmF0aXZlIGNvbnRhaW5zIG5vbi1mdW5jdGlvbnNcIjt0aGlzLm5hcnJhdGl2ZT10Lm5hcnJhdGl2ZX10aGlzLm9uQ2hhbmdlPXQub25DaGFuZ2UsdGhpcy5lbGVtZW50cz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0LmVsZW1lbnRzKSx0aGlzLmVuYWJsZWQ9ITAsdGhpcy5vZmZzZXQ9dC5oYXNPd25Qcm9wZXJ0eShcIm9mZnNldFwiKT90Lm9mZnNldDp7ZG93bjpcIjUwJVwiLHVwOlwiMFwifTt2YXIgcj10aGlzLnNldFdheXBvaW50cyh0aGlzLmVsZW1lbnRzLGksdC5jb250aW51b3VzLHRoaXMub2Zmc2V0LmRvd24pLHM9dGhpcy5zZXRXYXlwb2ludHModGhpcy5lbGVtZW50cyxuLHQuY29udGludW91cyx0aGlzLm9mZnNldC51cCk7aWYodGhpcy53YXlwb2ludHM9W3Isc10sdC5zdGljayl7aWYodm9pZCAwPT09JCgpLmZpeFRvKXRocm93XCJmaXhUbyBpcyBub3QgcHJlc2VudCBvbiB0aGUgcGFnZSwgb3IgbWF5IGhhdmUgYmVlbiBsb2FkZWQgaW4gYmVmb3JlIGpRdWVyeS5cIjskKHQuc3RpY2spLndyYXBJbm5lcignPGRpdiBjbGFzcz1cInR3by1zdGVwLXN0aWNreS13cmFwcGVyXCI+PC9kaXY+JyksdGhpcy5zdGlja3k9JCh0LnN0aWNrKS5maW5kKFwiLnR3by1zdGVwLXN0aWNreS13cmFwcGVyXCIpLmZpeFRvKCQodC5zdGljaykpfXRoaXMuc2V0S2V5Ym9hcmQoKSx0aGlzLmluZGV4PS0xLGwucmVnaXN0ZXIodGhpcyksc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtXYXlwb2ludC5yZWZyZXNoQWxsKCl9LDFlMyk7dmFyIGE9dGhpc31yZXR1cm4gcihlLFt7a2V5OlwiZ29Ub1wiLHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzO2lmKHRoaXMuaXNWYWxpZEluZGV4KGUpPT09ITEpdGhyb3cgZStcIiBpcyBub3QgYSB2YWxpZCBpbmRleC4gTXVzdCBiZSBiZXR3ZWVuIDAgYW5kIFwiKyh0aGlzLmVsZW1lbnRzLmxlbmd0aC0xKStcIiAoaW5jbHVzaXZlKS5cIjt0aGlzLm5hcnJhdGl2ZSYmdGhpcy5uYXJyYXRpdmVbZV0oe2VsZW1lbnQ6dGhpcy5lbGVtZW50c1tlXSxpbmRleDplLGRpcmVjdGlvbjpufSksdGhpcy5vbkNoYW5nZSYmdGhpcy5vbkNoYW5nZSh7ZWxlbWVudDp0aGlzLmVsZW1lbnRzW2VdLGluZGV4OmUsZGlyZWN0aW9uOm59KSx0aGlzLmluZGV4PWU7dmFyIG89JCh0aGlzLmVsZW1lbnRzKS5lcShlKTtyZXR1cm4gJCh0aGlzLmVsZW1lbnRzKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSxvLmFkZENsYXNzKFwiYWN0aXZlXCIpLHQ9PT0hMD8odGhpcy5kaXNhYmxlV2F5cG9pbnRzKCksJChcImh0bWwsIGJvZHlcIikuYW5pbWF0ZSh7c2Nyb2xsVG9wOm8ub2Zmc2V0KCkudG9wLTEwMH0sNTAwKS5wcm9taXNlKCkudGhlbihmdW5jdGlvbigpe2kuZW5hYmxlV2F5cG9pbnRzKCl9KSk6JC5EZWZlcnJlZCgpLnJlc29sdmUoKX19LHtrZXk6XCJzZXRXYXlwb2ludHNcIix2YWx1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPSEoYXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0pfHxhcmd1bWVudHNbMl0saT1hcmd1bWVudHNbM107cmV0dXJuIGUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBuZXcgV2F5cG9pbnQoe2VsZW1lbnQ6ZSxoYW5kbGVyOnQsY29udGludW91czpuLG9mZnNldDppfSl9KX19LHtrZXk6XCJzZXRLZXlib2FyZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpczskKHdpbmRvdykua2V5ZG93bihmdW5jdGlvbih0KXtpZihlLmRpc2FibGVkKXJldHVybiEwO3ZhciBuPSgwLGEuZGVmYXVsdCkodC5rZXlDb2RlKSxpPWwuZ2V0QWN0aXZlSW5zdGFuY2VzKCk7aWYoMCE9PW4mJnQudGFyZ2V0PT09ZG9jdW1lbnQuYm9keSYmdC5tZXRhS2V5PT09ITEmJjE9PT1pLmxlbmd0aCl7dmFyIG89ZS5pbmRleCtuO3JldHVybiFlLmlzVmFsaWRJbmRleChvKXx8KGUuZ29UbyhvLCEwKSx0LnByZXZlbnREZWZhdWx0KCksITEpfX0pfX0se2tleTpcImlzVmFsaWRJbmRleFwiLHZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlPHRoaXMuZWxlbWVudHMubGVuZ3RoJiZlPi0xfX0se2tleTpcImRpc2FibGVXYXlwb2ludHNcIix2YWx1ZTpmdW5jdGlvbigpe1tdLmNvbmNhdC5hcHBseShbXSx0aGlzLndheXBvaW50cykuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gZS5kaXNhYmxlKCl9KX19LHtrZXk6XCJlbmFibGVXYXlwb2ludHNcIix2YWx1ZTpmdW5jdGlvbigpe1tdLmNvbmNhdC5hcHBseShbXSx0aGlzLndheXBvaW50cykuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gZS5lbmFibGUoKX0pfX0se2tleTpcImRpc2FibGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZGlzYWJsZWQ9ITAsdGhpcy5lbmFibGVkPSExLHRoaXMuZGlzYWJsZVdheXBvaW50cygpLHRoaXMuc3RpY2t5JiZ0aGlzLnN0aWNreS5maXhUbyhcInN0b3BcIil9fSx7a2V5OlwiZW5hYmxlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkPSExLHRoaXMuZW5hYmxlZD0hMCx0aGlzLmVuYWJsZVdheXBvaW50cygpLHRoaXMuc3RpY2t5JiZ0aGlzLnN0aWNreS5maXhUbyhcInN0YXJ0XCIpfX1dKSxlfSgpO3QuZGVmYXVsdD1jLGUuZXhwb3J0cz10LmRlZmF1bHR9XSl9KTtcblxudmFyIHRzID0gbmV3IFR3b1N0ZXAoe1xuICBlbGVtZW50czogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBhcmVudCAubmFycmF0aXZlLWl0ZW0nKSxcbiAgb25DaGFuZ2U6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBjb25zb2xlLmxvZygnSXRlbSAnK2V2ZW50LmluZGV4KTtcbiAgfSxcbiAgc3RpY2s6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYXJlbnQgLnN0aWNreS1vdXRlcicpLFxuICBuYXJyYXRpdmU6IFtcbiAgICAgIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIC8vIGNoYXJ0LnJlbW92ZUFubm90YXRpb24oJ2dlbmRlci1hbm5vJyk7XG4gICAgICAgIC8vIGNoYXJ0LnJlbW92ZUFubm90YXRpb24oJ3BhcmVudC1hbm5vJyk7XG4gICAgICAgIC8vIGNoYXJ0LnJlbW92ZUFubm90YXRpb24oJ2xmcC1hbm5vJyk7XG4gICAgICAgIC8vIGNoYXJ0LnJlbW92ZUFubm90YXRpb24oJ2UtcC1hbm5vJyk7XG4gICAgICB9LFxuICAgICAgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgJCgnLmNoYXJ0LXRpdGxlJykudGV4dCgnTWVkaWFuIGhvbWUgcHJpY2UgMTk4MS1wcmVzZW50LCBpbiAyMDIxIGRvbGxhcnMnKTtcbiAgICAgICAgJCgnLmNoYXJ0LXNvdXJjZScpLnRleHQoJ0NlbnN1cyBCdXJlYXUgYW5kIERlcGFydG1lbnQgb2YgSG91c2luZyBhbmQgVXJiYW4gRGV2ZWxvcG1lbnQgdmlhIEZSRUQnKTtcbiAgICAgICAgLy8gY2hhcnQucmVtb3ZlQW5ub3RhdGlvbignZ2VuZGVyLWFubm8nKTtcbiAgICAgICAgLy8gY2hhcnQucmVtb3ZlQW5ub3RhdGlvbigncGFyZW50LWFubm8nKTtcbiAgICAgICAgLy8gY2hhcnQucmVtb3ZlQW5ub3RhdGlvbignbGZwLWFubm8nKTtcbiAgICAgICAgLy8gc2V0VGltZW91dChmdW5jdGlvbigpe2NoYXJ0LmFkZEFubm90YXRpb24oYW5ub3RhdGlvbjEpfSw1MDApLFxuICAgICAgICAvLyBjaGFydC51cGRhdGUoe1xuICAgICAgICAvLyAgICAgY2hhcnQ6IHtcbiAgICAgICAgLy8gICAgICAgICB0eXBlOiAnYXJlYScsXG4gICAgICAgIC8vICAgICB9LFxuICAgICAgICAvLyAgICAgZGF0YToge1xuICAgICAgICAvLyAgICAgICAgIHRhYmxlOiAnZGF0YXRhYmxlMSdcbiAgICAgICAgLy8gICAgIH0sXG4gICAgICAgIC8vICAgICB5QXhpczoge1xuICAgICAgICAvLyAgICAgICAgIG1pbjogNjAsXG4gICAgICAgIC8vICAgICAgICAgbWF4OiA4NVxuICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgLy8gICAgIHhBeGlzOiB7XG4gICAgICAgIC8vICAgICAgICAgbWluOiBEYXRlLlVUQygyMDAwLCAwLCAxKVxuICAgICAgICAvLyAgICAgfVxuICAgICAgICAvLyB9KTtcbiAgICAgIH0sXG4gICAgICBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAvLyBjaGFydC5yZW1vdmVBbm5vdGF0aW9uKCdwYXJlbnQtYW5ubycpO1xuICAgICAgICAvLyBjaGFydC5yZW1vdmVBbm5vdGF0aW9uKCdsZnAtYW5ubycpO1xuICAgICAgICAvLyBjaGFydC5yZW1vdmVBbm5vdGF0aW9uKCdlLXAtYW5ubycpO1xuICAgICAgICAvLyBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Y2hhcnQuYWRkQW5ub3RhdGlvbihhbm5vdGF0aW9uMil9LDUwMCksXG4gICAgICAgICQoJy5jaGFydC10aXRsZScpLnRleHQoJzMwLXllYXIsIGZpeGVkLXJhdGUgbW9ydGdhZ2UgYXZlcmFnZSwgMTk4MS1wcmVzZW50Jyk7XG4gICAgICAgICQoJy5jaGFydC1zb3VyY2UnKS50ZXh0KCdGcmVkZGllIE1hYyB2aWEgRlJFRCcpO1xuICAgICAgICAvLyBjaGFydC51cGRhdGUoe1xuICAgICAgICAvLyAgICAgY2hhcnQ6IHtcbiAgICAgICAgLy8gICAgICAgICB0eXBlOiAnbGluZScsXG4gICAgICAgIC8vICAgICAgICAgc3BhY2luZ0xlZnQ6IDEwXG4gICAgICAgIC8vICAgICB9LFxuICAgICAgICAvLyAgICAgZGF0YToge1xuICAgICAgICAvLyAgICAgICAgIHRhYmxlOiAnZGF0YXRhYmxlMidcbiAgICAgICAgLy8gICAgIH0sXG4gICAgICAgIC8vICAgICB5QXhpczoge1xuICAgICAgICAvLyAgICAgICAgIG1pbjogNDUsXG4gICAgICAgIC8vICAgICAgICAgbWF4OiA3MFxuICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgLy8gICAgIHhBeGlzOiB7XG4gICAgICAgIC8vICAgICAgICAgbWluOiBEYXRlLlVUQygyMDE5LCAwLCAxKVxuICAgICAgICAvLyAgICAgfVxuICAgICAgICAvLyB9KTtcbiAgICAgICAgLy8gY2hhcnQudXBkYXRlRnJvbURhdGEoKTtcbiAgICAgIH0sXG4gICAgICBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAvLyBjaGFydC5yZW1vdmVBbm5vdGF0aW9uKCdnZW5kZXItYW5ubycpO1xuICAgICAgICAvLyBjaGFydC5yZW1vdmVBbm5vdGF0aW9uKCdlLXAtYW5ubycpO1xuICAgICAgICAvLyBjaGFydC5yZW1vdmVBbm5vdGF0aW9uKCdsZnAtYW5ubycpO1xuICAgICAgICAvLyBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Y2hhcnQuYWRkQW5ub3RhdGlvbihhbm5vdGF0aW9uMyk7JCgnLmhpZ2hjaGFydHMtYW5ub3RhdGlvbi1sYWJlbC1ib3gnKS5jc3MoJ2ZpbGwnLCAnd2hpdGUnKX0sNTAwKSxcbiAgICAgICAgJCgnLmNoYXJ0LXRpdGxlJykudGV4dCgnTW9udGhseSBwYXltZW50IG9uIGEgJDIwNSwwMDAgaG9tZScpO1xuICAgICAgICAkKCcuY2hhcnQtc291cmNlJykudGV4dCgnRnJlZGRpZSBNYWMgdmlhIEZSRUQgKG1vcnRnYWdlIHJhdGUpJyk7XG4gICAgICAgIC8vIGNoYXJ0LnVwZGF0ZSh7XG4gICAgICAgIC8vICAgICBjaGFydDoge1xuICAgICAgICAvLyAgICAgICAgIHR5cGU6ICdsaW5lJyxcbiAgICAgICAgLy8gICAgICAgICBzcGFjaW5nTGVmdDogLTlcbiAgICAgICAgLy8gICAgIH0sXG4gICAgICAgIC8vICAgICBkYXRhOiB7XG4gICAgICAgIC8vICAgICAgICAgdGFibGU6ICdkYXRhdGFibGUzJ1xuICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgLy8gICAgIHlBeGlzOiB7XG4gICAgICAgIC8vICAgICAgICAgbWluOiA1MCxcbiAgICAgICAgLy8gICAgICAgICBtYXg6IDEwMFxuICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgLy8gICAgIHhBeGlzOiB7XG4gICAgICAgIC8vICAgICAgICAgbWluOiBEYXRlLlVUQygyMDE5LCAwLCAxKVxuICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgLy8gfSk7XG4gICAgICB9LFxuICAgICAgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgLy8gY2hhcnQucmVtb3ZlQW5ub3RhdGlvbignZ2VuZGVyLWFubm8nKTtcbiAgICAgICAgLy8gY2hhcnQucmVtb3ZlQW5ub3RhdGlvbigncGFyZW50LWFubm8nKTtcbiAgICAgICAgLy8gY2hhcnQucmVtb3ZlQW5ub3RhdGlvbignZS1wLWFubm8nKTtcbiAgICAgICAgLy8gc2V0VGltZW91dChmdW5jdGlvbigpe2NoYXJ0LmFkZEFubm90YXRpb24oYW5ub3RhdGlvbjQpOyQoJy5oaWdoY2hhcnRzLWFubm90YXRpb24tbGFiZWwtYm94JykuY3NzKCdmaWxsJywgJ25vbmUnKTskKCcuaGlnaGNoYXJ0cy15YXhpcy1ncmlkIHBhdGg6ZXEoNCknKS5jc3MoJ3N0cm9rZScsICdibGFjaycpO30sNTAwKTtcbiAgICAgICAgJCgnLmNoYXJ0LXRpdGxlJykudGV4dCgnTW9udGhseSBwYXltZW50IG9uIHRoZSBtZWRpYW4gaG9tZScpO1xuICAgICAgICAkKCcuY2hhcnQtc291cmNlJykudGV4dCgnQ2Vuc3VzIEJ1cmVhdSBhbmQgRGVwYXJ0bWVudCBvZiBIb3VzaW5nIGFuZCBVcmJhbiBEZXZlbG9wbWVudCB2aWEgRlJFRCAoaG9tZSBwcmljZSk7IEZyZWRkaWUgTWFjIHZpYSBGUkVEIChtb3J0Z2FnZSByYXRlKScpO1xuICAgIC8vICAgICBjaGFydC51cGRhdGUoe1xuICAgIC8vICAgICAgICAgY2hhcnQ6IHtcbiAgICAvLyAgICAgICAgICAgICB0eXBlOiAnbGluZScsXG4gICAgLy8gICAgICAgICAgICAgc3BhY2luZ0xlZnQ6IDEwXG4gICAgLy8gICAgICAgICB9LFxuICAgIC8vICAgICAgICAgZGF0YToge1xuICAgIC8vICAgICAgICAgICAgIHRhYmxlOiAnZGF0YXRhYmxlNCdcbiAgICAvLyAgICAgICAgIH0sXG4gICAgLy8gICAgICAgICB5QXhpczoge1xuICAgIC8vICAgICAgICAgICAgIG1pbjogLTgsXG4gICAgLy8gICAgICAgICAgICAgbWF4OiAyXG4gICAgLy8gICAgICAgICB9LFxuICAgIC8vICAgICAgICAgeEF4aXM6IHtcbiAgICAvLyAgICAgICAgICAgICBtaW46IERhdGUuVVRDKDIwMjAsIDEsIDEpXG4gICAgLy8gICAgICAgICB9XG4gICAgLy8gICAgIH0pO1xuICAgIC8vICAgICAvLyBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Y2hhcnQudXBkYXRlKHtkYXRhOntjc3ZVUkw6ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20va3NjaG1pZHQyL2dyb3ctd29tZW5zLXJlY2Vzc2lvbi1pbnRyby9tYXN0ZXIvYXBwL2RhdGEvbGZsLWdlbmRlci5jc3YnfX0pfSw1KTtcbiAgICAgIH0sXG4gICAgICBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAkKCcuY2hhcnQtdGl0bGUnKS50ZXh0KCdUb3RhbCBpbnRlcmVzdCBwYWlkIG9uIGEgbWVkaWFuIGhvbWUgYXQgdGhlIGF2ZXJhZ2UgcmF0ZScpO1xuICAgICAgICAkKCcuY2hhcnQtc291cmNlJykudGV4dCgnQ2Vuc3VzIEJ1cmVhdSBhbmQgRGVwYXJ0bWVudCBvZiBIb3VzaW5nIGFuZCBVcmJhbiBEZXZlbG9wbWVudCB2aWEgRlJFRCAoaG9tZSBwcmljZSk7IEZyZWRkaWUgTWFjIHZpYSBGUkVEIChtb3J0Z2FnZSByYXRlKScpO1xuICAgICAgfVxuICBdLFxuICBvZmZzZXQ6IHtcbiAgICAgIHVwOiAnLTEwJScsXG4gICAgICBkb3duOiAnMTAwJSdcbiAgfVxufSk7XG5cblxuSGlnaGNoYXJ0cy5zZXRPcHRpb25zKHtcbiAgICBsYW5nOiB7XG4gICAgICB0aG91c2FuZHNTZXA6ICcsJ1xuICAgIH1cbn0pO1xuXG5cblxuXG5mdW5jdGlvbiBkcmF3SGlnaGNoYXJ0cygpIHtcbiAgICBjaGFydCA9IEhpZ2hjaGFydHMuY2hhcnQoJ2NoYXJ0LWNvbnRhaW5lcicsIHtcbiAgICAgICAgY2hhcnQ6IHtcbiAgICAgICAgICAgIHR5cGU6ICdhcmVhJyxcbiAgICAgICAgICAgIHN0eWxlZE1vZGU6IHRydWUsXG4gICAgICAgICAgICBzcGFjaW5nQm90dG9tOiAyNSxcbiAgICAgICAgICAgIHNwYWNpbmdSaWdodDogMjUsXG4gICAgICAgICAgICBzcGFjaW5nTGVmdDogMTAsXG4gICAgICAgICAgICBzcGFjaW5nVG9wOiAyMCxcbiAgICAgICAgICAgIGFuaW1hdGlvbjoge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwLFxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBcbiAgICAgICAgdGl0bGU6IHtcbiAgICAgICAgICAgIHRleHQ6IG51bGxcbiAgICAgICAgfSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgY3N2VVJMOiAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2tzY2htaWR0Mi9ncm93LWhpc3RvcmljYWwtbW9ydGdhZ2VzL21hc3Rlci9kYXRhL21lZGlhbi1ob21lLXByaWNlLmNzdidcbiAgICAgICAgfSxcbiAgICAgICAgYW5ub3RhdGlvbnM6IFt7XG4gICAgICAgIH1dLFxuICAgICAgICAvLyBmb3IgYmFyIGNoYXJ0cyBvbmx5XG4gICAgICAgIC8vIHBsb3RPcHRpb25zOiB7XG4gICAgICAgIC8vICAgICBzZXJpZXM6IHtcbiAgICAgICAgLy8gICAgICAgICBncm91cFBhZGRpbmc6IDAuMVxuICAgICAgICAvLyAgICAgfSBcbiAgICAgICAgLy8gfSxcbiAgICAgICAgLy8gZm9yIGxpbmUgY2hhcnRzIG9ubHlcbiAgICAgICAgcGxvdE9wdGlvbnM6IHtcbiAgICAgICAgICAgIHNlcmllczoge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwMCxcbiAgICAgICAgICAgICAgICAgICAgZGVmZXI6IDEwMDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGxpbmVXaWR0aDogMSxcbiAgICAgICAgICAgICAgICBzdGF0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgaG92ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC8vIGNsaXA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1hcmtlcjoge1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgc3ltYm9sOiAnY2lyY2xlJyxcbiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiAnI2ZmZmZmZicsXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaG92ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I6ICcjZmZmZmZmJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBsZWdlbmQ6IHtcbiAgICAgICAgICAgIC8vIGFsaWduOiAncmlnaHQnLFxuICAgICAgICAgICAgLy8gc3ltYm9sUmFkaXVzOiAwLFxuICAgICAgICAgICAgLy8gdmVydGljYWxBbGlnbjogJ3RvcCcsXG4gICAgICAgICAgICAvLyB4OiAxMCxcbiAgICAgICAgICAgIC8vIGl0ZW1NYXJnaW5Ub3A6IC0xMFxuICAgICAgICAgICAgZW5hYmxlZDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgeEF4aXM6IHtcbiAgICAgICAgICAgIGxhYmVsczoge1xuICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgIHdoaXRlU3BhY2U6ICdub3dyYXAnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRpY2tMZW5ndGg6IDUsXG4gICAgICAgICAgICAvLyBwbG90QmFuZHM6IFt7IC8vIG1hcmsgdGhlIHdlZWtlbmRcbiAgICAgICAgICAgIC8vICAgICBmcm9tOiBEYXRlLlVUQygyMDIwLCAxLCAxKSxcbiAgICAgICAgICAgIC8vICAgICB0bzogRGF0ZS5VVEMoMjAyMCwgOSwgMzApLFxuICAgICAgICAgICAgLy8gICAgIGxhYmVsOiB7XG4gICAgICAgICAgICAvLyAgICAgICAgIHRleHQ6ICdQYW5kZW1pYycsXG4gICAgICAgICAgICAvLyAgICAgICAgIHRleHRBbGlnbjogJ2NlbnRlcidcbiAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAvLyB9XSxcbiAgICAgICAgICAgIC8vIG1pbjogRGF0ZS5VVEMoMjAwMCwgMCwgMSlcbiAgICAgICAgICAgIC8vIGVkaXRzIHhBeGlzIHRpY2tzXG4gICAgICAgICAgICAvLyBkYXRlVGltZUxhYmVsRm9ybWF0czoge1xuICAgICAgICAgICAgLy8gICAgIHdlZWs6ICclYi4gJWUnLFxuICAgICAgICAgICAgLy8gfSxcbiAgICAgICAgICAgIC8vIHRpY2tJbnRlcnZhbDogMjQgKiAzNjAwICogMTAwMCAqIDdcbiAgICAgICAgfSxcbiAgICAgICAgeUF4aXM6IHtcbiAgICAgICAgICAgIHRpdGxlOiBmYWxzZSxcbiAgICAgICAgICAgIGxhYmVsczoge1xuICAgICAgICAgICAgICAgIHVzZUhUTUw6IHRydWUsXG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICdhbGxvdydcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBtaW46IDYwLFxuICAgICAgICAgICAgLy8gbWF4OiA4NSxcbiAgICAgICAgICAgIHRpY2tBbW91bnQ6IDYsXG4gICAgICAgICAgICAvLyB3aWR0aDogMCxcbiAgICAgICAgICAgIHRpY2tMZW5ndGg6IDI1LFxuICAgICAgICAgICAgdGlja1Bvc2l0aW9uOiAnaW5zaWRlJ1xuICAgICAgICAgICAgLy8gYWRkcyBjb21tYXMgdG8gdGhvdXNhbmRzXG4gICAgICAgICAgICAvLyBmb3JtYXR0ZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vICAgICByZXR1cm4gSGlnaGNoYXJ0cy5udW1iZXJGb3JtYXQodGhpcy52YWx1ZSwwLCcuJywnLCcpO1xuICAgICAgICAgICAgLy8gfSxcbiAgICAgICAgfSxcbiAgICAgICAgY3JlZGl0czoge1xuICAgICAgICAgICAgZW5hYmxlZDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgdG9vbHRpcDoge1xuICAgICAgICAgICAgZW5hYmxlZDogZmFsc2VcbiAgICAgICAgfSxcbiAgICAgICAgZGVmczoge1xuICAgICAgICAgICAgZ3JhZGllbnQwOiB7XG4gICAgICAgICAgICAgICAgdGFnTmFtZTogJ2xpbmVhckdyYWRpZW50JyxcbiAgICAgICAgICAgICAgICBpZDogJ2dyYWRpZW50LTAnLFxuICAgICAgICAgICAgICAgIHgxOiAwLFxuICAgICAgICAgICAgICAgIHkxOiAwLFxuICAgICAgICAgICAgICAgIHgyOiAwLFxuICAgICAgICAgICAgICAgIHkyOiAxLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbe1xuICAgICAgICAgICAgICAgICAgICB0YWdOYW1lOiAnc3RvcCcsXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldDogMFxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgdGFnTmFtZTogJ3N0b3AnLFxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IDFcbiAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZXNwb25zaXZlOiB7XG4gICAgICAgICAgICBydWxlczogW3tcbiAgICAgICAgICAgIGNvbmRpdGlvbjoge1xuICAgICAgICAgICAgICAgIG1heFdpZHRoOiA1MDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjaGFydE9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBsZWdlbmQ6IHtcbiAgICAgICAgICAgICAgICAgICAgYWxpZ246ICdsZWZ0JyxcbiAgICAgICAgICAgICAgICAgICAgeDogLTE4XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0b29sdGlwOiB7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgfV1cbiAgICAgICAgfVxuICAgIH0pXG59XG5cbmlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnIHx8IGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdpbnRlcmFjdGl2ZScpIHtcbiAgICBkcmF3SGlnaGNoYXJ0cygpO1xufSBlbHNlIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBkcmF3SGlnaGNoYXJ0cyk7XG59IiwiLyoqIHZpbTogZXQ6dHM9NDpzdz00OnN0cz00XG4gKiBAbGljZW5zZSBSZXF1aXJlSlMgMi4zLjYgQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMuXG4gKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSwgaHR0cHM6Ly9naXRodWIuY29tL3JlcXVpcmVqcy9yZXF1aXJlanMvYmxvYi9tYXN0ZXIvTElDRU5TRVxuICovXG4vL05vdCB1c2luZyBzdHJpY3Q6IHVuZXZlbiBzdHJpY3Qgc3VwcG9ydCBpbiBicm93c2VycywgIzM5MiwgYW5kIGNhdXNlc1xuLy9wcm9ibGVtcyB3aXRoIHJlcXVpcmVqcy5leGVjKCkvdHJhbnNwaWxlciBwbHVnaW5zIHRoYXQgbWF5IG5vdCBiZSBzdHJpY3QuXG4vKmpzbGludCByZWdleHA6IHRydWUsIG5vbWVuOiB0cnVlLCBzbG9wcHk6IHRydWUgKi9cbi8qZ2xvYmFsIHdpbmRvdywgbmF2aWdhdG9yLCBkb2N1bWVudCwgaW1wb3J0U2NyaXB0cywgc2V0VGltZW91dCwgb3BlcmEgKi9cblxudmFyIHJlcXVpcmVqcywgcmVxdWlyZSwgZGVmaW5lO1xuKGZ1bmN0aW9uIChnbG9iYWwsIHNldFRpbWVvdXQpIHtcbiAgICB2YXIgcmVxLCBzLCBoZWFkLCBiYXNlRWxlbWVudCwgZGF0YU1haW4sIHNyYyxcbiAgICAgICAgaW50ZXJhY3RpdmVTY3JpcHQsIGN1cnJlbnRseUFkZGluZ1NjcmlwdCwgbWFpblNjcmlwdCwgc3ViUGF0aCxcbiAgICAgICAgdmVyc2lvbiA9ICcyLjMuNicsXG4gICAgICAgIGNvbW1lbnRSZWdFeHAgPSAvXFwvXFwqW1xcc1xcU10qP1xcKlxcL3woW146XCInPV18XilcXC9cXC8uKiQvbWcsXG4gICAgICAgIGNqc1JlcXVpcmVSZWdFeHAgPSAvW14uXVxccypyZXF1aXJlXFxzKlxcKFxccypbXCInXShbXidcIlxcc10rKVtcIiddXFxzKlxcKS9nLFxuICAgICAgICBqc1N1ZmZpeFJlZ0V4cCA9IC9cXC5qcyQvLFxuICAgICAgICBjdXJyRGlyUmVnRXhwID0gL15cXC5cXC8vLFxuICAgICAgICBvcCA9IE9iamVjdC5wcm90b3R5cGUsXG4gICAgICAgIG9zdHJpbmcgPSBvcC50b1N0cmluZyxcbiAgICAgICAgaGFzT3duID0gb3AuaGFzT3duUHJvcGVydHksXG4gICAgICAgIGlzQnJvd3NlciA9ICEhKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5kb2N1bWVudCksXG4gICAgICAgIGlzV2ViV29ya2VyID0gIWlzQnJvd3NlciAmJiB0eXBlb2YgaW1wb3J0U2NyaXB0cyAhPT0gJ3VuZGVmaW5lZCcsXG4gICAgICAgIC8vUFMzIGluZGljYXRlcyBsb2FkZWQgYW5kIGNvbXBsZXRlLCBidXQgbmVlZCB0byB3YWl0IGZvciBjb21wbGV0ZVxuICAgICAgICAvL3NwZWNpZmljYWxseS4gU2VxdWVuY2UgaXMgJ2xvYWRpbmcnLCAnbG9hZGVkJywgZXhlY3V0aW9uLFxuICAgICAgICAvLyB0aGVuICdjb21wbGV0ZScuIFRoZSBVQSBjaGVjayBpcyB1bmZvcnR1bmF0ZSwgYnV0IG5vdCBzdXJlIGhvd1xuICAgICAgICAvL3RvIGZlYXR1cmUgdGVzdCB3L28gY2F1c2luZyBwZXJmIGlzc3Vlcy5cbiAgICAgICAgcmVhZHlSZWdFeHAgPSBpc0Jyb3dzZXIgJiYgbmF2aWdhdG9yLnBsYXRmb3JtID09PSAnUExBWVNUQVRJT04gMycgP1xuICAgICAgICAgICAgICAgICAgICAgIC9eY29tcGxldGUkLyA6IC9eKGNvbXBsZXRlfGxvYWRlZCkkLyxcbiAgICAgICAgZGVmQ29udGV4dE5hbWUgPSAnXycsXG4gICAgICAgIC8vT2ggdGhlIHRyYWdlZHksIGRldGVjdGluZyBvcGVyYS4gU2VlIHRoZSB1c2FnZSBvZiBpc09wZXJhIGZvciByZWFzb24uXG4gICAgICAgIGlzT3BlcmEgPSB0eXBlb2Ygb3BlcmEgIT09ICd1bmRlZmluZWQnICYmIG9wZXJhLnRvU3RyaW5nKCkgPT09ICdbb2JqZWN0IE9wZXJhXScsXG4gICAgICAgIGNvbnRleHRzID0ge30sXG4gICAgICAgIGNmZyA9IHt9LFxuICAgICAgICBnbG9iYWxEZWZRdWV1ZSA9IFtdLFxuICAgICAgICB1c2VJbnRlcmFjdGl2ZSA9IGZhbHNlO1xuXG4gICAgLy9Db3VsZCBtYXRjaCBzb21ldGhpbmcgbGlrZSAnKS8vY29tbWVudCcsIGRvIG5vdCBsb3NlIHRoZSBwcmVmaXggdG8gY29tbWVudC5cbiAgICBmdW5jdGlvbiBjb21tZW50UmVwbGFjZShtYXRjaCwgc2luZ2xlUHJlZml4KSB7XG4gICAgICAgIHJldHVybiBzaW5nbGVQcmVmaXggfHwgJyc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNGdW5jdGlvbihpdCkge1xuICAgICAgICByZXR1cm4gb3N0cmluZy5jYWxsKGl0KSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0FycmF5KGl0KSB7XG4gICAgICAgIHJldHVybiBvc3RyaW5nLmNhbGwoaXQpID09PSAnW29iamVjdCBBcnJheV0nO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhlbHBlciBmdW5jdGlvbiBmb3IgaXRlcmF0aW5nIG92ZXIgYW4gYXJyYXkuIElmIHRoZSBmdW5jIHJldHVybnNcbiAgICAgKiBhIHRydWUgdmFsdWUsIGl0IHdpbGwgYnJlYWsgb3V0IG9mIHRoZSBsb29wLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGVhY2goYXJ5LCBmdW5jKSB7XG4gICAgICAgIGlmIChhcnkpIHtcbiAgICAgICAgICAgIHZhciBpO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGFyeS5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIGlmIChhcnlbaV0gJiYgZnVuYyhhcnlbaV0sIGksIGFyeSkpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIGZvciBpdGVyYXRpbmcgb3ZlciBhbiBhcnJheSBiYWNrd2FyZHMuIElmIHRoZSBmdW5jXG4gICAgICogcmV0dXJucyBhIHRydWUgdmFsdWUsIGl0IHdpbGwgYnJlYWsgb3V0IG9mIHRoZSBsb29wLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGVhY2hSZXZlcnNlKGFyeSwgZnVuYykge1xuICAgICAgICBpZiAoYXJ5KSB7XG4gICAgICAgICAgICB2YXIgaTtcbiAgICAgICAgICAgIGZvciAoaSA9IGFyeS5sZW5ndGggLSAxOyBpID4gLTE7IGkgLT0gMSkge1xuICAgICAgICAgICAgICAgIGlmIChhcnlbaV0gJiYgZnVuYyhhcnlbaV0sIGksIGFyeSkpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFzUHJvcChvYmosIHByb3ApIHtcbiAgICAgICAgcmV0dXJuIGhhc093bi5jYWxsKG9iaiwgcHJvcCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0T3duKG9iaiwgcHJvcCkge1xuICAgICAgICByZXR1cm4gaGFzUHJvcChvYmosIHByb3ApICYmIG9ialtwcm9wXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDeWNsZXMgb3ZlciBwcm9wZXJ0aWVzIGluIGFuIG9iamVjdCBhbmQgY2FsbHMgYSBmdW5jdGlvbiBmb3IgZWFjaFxuICAgICAqIHByb3BlcnR5IHZhbHVlLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyBhIHRydXRoeSB2YWx1ZSwgdGhlbiB0aGVcbiAgICAgKiBpdGVyYXRpb24gaXMgc3RvcHBlZC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBlYWNoUHJvcChvYmosIGZ1bmMpIHtcbiAgICAgICAgdmFyIHByb3A7XG4gICAgICAgIGZvciAocHJvcCBpbiBvYmopIHtcbiAgICAgICAgICAgIGlmIChoYXNQcm9wKG9iaiwgcHJvcCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZnVuYyhvYmpbcHJvcF0sIHByb3ApKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNpbXBsZSBmdW5jdGlvbiB0byBtaXggaW4gcHJvcGVydGllcyBmcm9tIHNvdXJjZSBpbnRvIHRhcmdldCxcbiAgICAgKiBidXQgb25seSBpZiB0YXJnZXQgZG9lcyBub3QgYWxyZWFkeSBoYXZlIGEgcHJvcGVydHkgb2YgdGhlIHNhbWUgbmFtZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtaXhpbih0YXJnZXQsIHNvdXJjZSwgZm9yY2UsIGRlZXBTdHJpbmdNaXhpbikge1xuICAgICAgICBpZiAoc291cmNlKSB7XG4gICAgICAgICAgICBlYWNoUHJvcChzb3VyY2UsIGZ1bmN0aW9uICh2YWx1ZSwgcHJvcCkge1xuICAgICAgICAgICAgICAgIGlmIChmb3JjZSB8fCAhaGFzUHJvcCh0YXJnZXQsIHByb3ApKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZWVwU3RyaW5nTWl4aW4gJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgIWlzQXJyYXkodmFsdWUpICYmICFpc0Z1bmN0aW9uKHZhbHVlKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgISh2YWx1ZSBpbnN0YW5jZW9mIFJlZ0V4cCkpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXRbcHJvcF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRbcHJvcF0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG1peGluKHRhcmdldFtwcm9wXSwgdmFsdWUsIGZvcmNlLCBkZWVwU3RyaW5nTWl4aW4pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W3Byb3BdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cblxuICAgIC8vU2ltaWxhciB0byBGdW5jdGlvbi5wcm90b3R5cGUuYmluZCwgYnV0IHRoZSAndGhpcycgb2JqZWN0IGlzIHNwZWNpZmllZFxuICAgIC8vZmlyc3QsIHNpbmNlIGl0IGlzIGVhc2llciB0byByZWFkL2ZpZ3VyZSBvdXQgd2hhdCAndGhpcycgd2lsbCBiZS5cbiAgICBmdW5jdGlvbiBiaW5kKG9iaiwgZm4pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBmbi5hcHBseShvYmosIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NyaXB0cygpIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWZhdWx0T25FcnJvcihlcnIpIHtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgIH1cblxuICAgIC8vQWxsb3cgZ2V0dGluZyBhIGdsb2JhbCB0aGF0IGlzIGV4cHJlc3NlZCBpblxuICAgIC8vZG90IG5vdGF0aW9uLCBsaWtlICdhLmIuYycuXG4gICAgZnVuY3Rpb24gZ2V0R2xvYmFsKHZhbHVlKSB7XG4gICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZyA9IGdsb2JhbDtcbiAgICAgICAgZWFjaCh2YWx1ZS5zcGxpdCgnLicpLCBmdW5jdGlvbiAocGFydCkge1xuICAgICAgICAgICAgZyA9IGdbcGFydF07XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGFuIGVycm9yIHdpdGggYSBwb2ludGVyIHRvIGFuIFVSTCB3aXRoIG1vcmUgaW5mb3JtYXRpb24uXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGlkIHRoZSBlcnJvciBJRCB0aGF0IG1hcHMgdG8gYW4gSUQgb24gYSB3ZWIgcGFnZS5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBodW1hbiByZWFkYWJsZSBlcnJvci5cbiAgICAgKiBAcGFyYW0ge0Vycm9yfSBbZXJyXSB0aGUgb3JpZ2luYWwgZXJyb3IsIGlmIHRoZXJlIGlzIG9uZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtFcnJvcn1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBtYWtlRXJyb3IoaWQsIG1zZywgZXJyLCByZXF1aXJlTW9kdWxlcykge1xuICAgICAgICB2YXIgZSA9IG5ldyBFcnJvcihtc2cgKyAnXFxuaHR0cHM6Ly9yZXF1aXJlanMub3JnL2RvY3MvZXJyb3JzLmh0bWwjJyArIGlkKTtcbiAgICAgICAgZS5yZXF1aXJlVHlwZSA9IGlkO1xuICAgICAgICBlLnJlcXVpcmVNb2R1bGVzID0gcmVxdWlyZU1vZHVsZXM7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGUub3JpZ2luYWxFcnJvciA9IGVycjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGRlZmluZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLy9JZiBhIGRlZmluZSBpcyBhbHJlYWR5IGluIHBsYXkgdmlhIGFub3RoZXIgQU1EIGxvYWRlcixcbiAgICAgICAgLy9kbyBub3Qgb3ZlcndyaXRlLlxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiByZXF1aXJlanMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHJlcXVpcmVqcykpIHtcbiAgICAgICAgICAgIC8vRG8gbm90IG92ZXJ3cml0ZSBhbiBleGlzdGluZyByZXF1aXJlanMgaW5zdGFuY2UuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY2ZnID0gcmVxdWlyZWpzO1xuICAgICAgICByZXF1aXJlanMgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLy9BbGxvdyBmb3IgYSByZXF1aXJlIGNvbmZpZyBvYmplY3RcbiAgICBpZiAodHlwZW9mIHJlcXVpcmUgIT09ICd1bmRlZmluZWQnICYmICFpc0Z1bmN0aW9uKHJlcXVpcmUpKSB7XG4gICAgICAgIC8vYXNzdW1lIGl0IGlzIGEgY29uZmlnIG9iamVjdC5cbiAgICAgICAgY2ZnID0gcmVxdWlyZTtcbiAgICAgICAgcmVxdWlyZSA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBuZXdDb250ZXh0KGNvbnRleHROYW1lKSB7XG4gICAgICAgIHZhciBpbkNoZWNrTG9hZGVkLCBNb2R1bGUsIGNvbnRleHQsIGhhbmRsZXJzLFxuICAgICAgICAgICAgY2hlY2tMb2FkZWRUaW1lb3V0SWQsXG4gICAgICAgICAgICBjb25maWcgPSB7XG4gICAgICAgICAgICAgICAgLy9EZWZhdWx0cy4gRG8gbm90IHNldCBhIGRlZmF1bHQgZm9yIG1hcFxuICAgICAgICAgICAgICAgIC8vY29uZmlnIHRvIHNwZWVkIHVwIG5vcm1hbGl6ZSgpLCB3aGljaFxuICAgICAgICAgICAgICAgIC8vd2lsbCBydW4gZmFzdGVyIGlmIHRoZXJlIGlzIG5vIGRlZmF1bHQuXG4gICAgICAgICAgICAgICAgd2FpdFNlY29uZHM6IDcsXG4gICAgICAgICAgICAgICAgYmFzZVVybDogJy4vJyxcbiAgICAgICAgICAgICAgICBwYXRoczoge30sXG4gICAgICAgICAgICAgICAgYnVuZGxlczoge30sXG4gICAgICAgICAgICAgICAgcGtnczoge30sXG4gICAgICAgICAgICAgICAgc2hpbToge30sXG4gICAgICAgICAgICAgICAgY29uZmlnOiB7fVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlZ2lzdHJ5ID0ge30sXG4gICAgICAgICAgICAvL3JlZ2lzdHJ5IG9mIGp1c3QgZW5hYmxlZCBtb2R1bGVzLCB0byBzcGVlZFxuICAgICAgICAgICAgLy9jeWNsZSBicmVha2luZyBjb2RlIHdoZW4gbG90cyBvZiBtb2R1bGVzXG4gICAgICAgICAgICAvL2FyZSByZWdpc3RlcmVkLCBidXQgbm90IGFjdGl2YXRlZC5cbiAgICAgICAgICAgIGVuYWJsZWRSZWdpc3RyeSA9IHt9LFxuICAgICAgICAgICAgdW5kZWZFdmVudHMgPSB7fSxcbiAgICAgICAgICAgIGRlZlF1ZXVlID0gW10sXG4gICAgICAgICAgICBkZWZpbmVkID0ge30sXG4gICAgICAgICAgICB1cmxGZXRjaGVkID0ge30sXG4gICAgICAgICAgICBidW5kbGVzTWFwID0ge30sXG4gICAgICAgICAgICByZXF1aXJlQ291bnRlciA9IDEsXG4gICAgICAgICAgICB1bm5vcm1hbGl6ZWRDb3VudGVyID0gMTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVHJpbXMgdGhlIC4gYW5kIC4uIGZyb20gYW4gYXJyYXkgb2YgcGF0aCBzZWdtZW50cy5cbiAgICAgICAgICogSXQgd2lsbCBrZWVwIGEgbGVhZGluZyBwYXRoIHNlZ21lbnQgaWYgYSAuLiB3aWxsIGJlY29tZVxuICAgICAgICAgKiB0aGUgZmlyc3QgcGF0aCBzZWdtZW50LCB0byBoZWxwIHdpdGggbW9kdWxlIG5hbWUgbG9va3VwcyxcbiAgICAgICAgICogd2hpY2ggYWN0IGxpa2UgcGF0aHMsIGJ1dCBjYW4gYmUgcmVtYXBwZWQuIEJ1dCB0aGUgZW5kIHJlc3VsdCxcbiAgICAgICAgICogYWxsIHBhdGhzIHRoYXQgdXNlIHRoaXMgZnVuY3Rpb24gc2hvdWxkIGxvb2sgbm9ybWFsaXplZC5cbiAgICAgICAgICogTk9URTogdGhpcyBtZXRob2QgTU9ESUZJRVMgdGhlIGlucHV0IGFycmF5LlxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBhcnkgdGhlIGFycmF5IG9mIHBhdGggc2VnbWVudHMuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB0cmltRG90cyhhcnkpIHtcbiAgICAgICAgICAgIHZhciBpLCBwYXJ0O1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGFyeS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHBhcnQgPSBhcnlbaV07XG4gICAgICAgICAgICAgICAgaWYgKHBhcnQgPT09ICcuJykge1xuICAgICAgICAgICAgICAgICAgICBhcnkuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICBpIC09IDE7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0ID09PSAnLi4nKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGF0IHRoZSBzdGFydCwgb3IgcHJldmlvdXMgdmFsdWUgaXMgc3RpbGwgLi4sXG4gICAgICAgICAgICAgICAgICAgIC8vIGtlZXAgdGhlbSBzbyB0aGF0IHdoZW4gY29udmVydGVkIHRvIGEgcGF0aCBpdCBtYXlcbiAgICAgICAgICAgICAgICAgICAgLy8gc3RpbGwgd29yayB3aGVuIGNvbnZlcnRlZCB0byBhIHBhdGgsIGV2ZW4gdGhvdWdoXG4gICAgICAgICAgICAgICAgICAgIC8vIGFzIGFuIElEIGl0IGlzIGxlc3MgdGhhbiBpZGVhbC4gSW4gbGFyZ2VyIHBvaW50XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbGVhc2VzLCBtYXkgYmUgYmV0dGVyIHRvIGp1c3Qga2ljayBvdXQgYW4gZXJyb3IuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpID09PSAwIHx8IChpID09PSAxICYmIGFyeVsyXSA9PT0gJy4uJykgfHwgYXJ5W2kgLSAxXSA9PT0gJy4uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyeS5zcGxpY2UoaSAtIDEsIDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaSAtPSAyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdpdmVuIGEgcmVsYXRpdmUgbW9kdWxlIG5hbWUsIGxpa2UgLi9zb21ldGhpbmcsIG5vcm1hbGl6ZSBpdCB0b1xuICAgICAgICAgKiBhIHJlYWwgbmFtZSB0aGF0IGNhbiBiZSBtYXBwZWQgdG8gYSBwYXRoLlxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSB0aGUgcmVsYXRpdmUgbmFtZVxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gYmFzZU5hbWUgYSByZWFsIG5hbWUgdGhhdCB0aGUgbmFtZSBhcmcgaXMgcmVsYXRpdmVcbiAgICAgICAgICogdG8uXG4gICAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gYXBwbHlNYXAgYXBwbHkgdGhlIG1hcCBjb25maWcgdG8gdGhlIHZhbHVlLiBTaG91bGRcbiAgICAgICAgICogb25seSBiZSBkb25lIGlmIHRoaXMgbm9ybWFsaXphdGlvbiBpcyBmb3IgYSBkZXBlbmRlbmN5IElELlxuICAgICAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSBub3JtYWxpemVkIG5hbWVcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZShuYW1lLCBiYXNlTmFtZSwgYXBwbHlNYXApIHtcbiAgICAgICAgICAgIHZhciBwa2dNYWluLCBtYXBWYWx1ZSwgbmFtZVBhcnRzLCBpLCBqLCBuYW1lU2VnbWVudCwgbGFzdEluZGV4LFxuICAgICAgICAgICAgICAgIGZvdW5kTWFwLCBmb3VuZEksIGZvdW5kU3Rhck1hcCwgc3RhckksIG5vcm1hbGl6ZWRCYXNlUGFydHMsXG4gICAgICAgICAgICAgICAgYmFzZVBhcnRzID0gKGJhc2VOYW1lICYmIGJhc2VOYW1lLnNwbGl0KCcvJykpLFxuICAgICAgICAgICAgICAgIG1hcCA9IGNvbmZpZy5tYXAsXG4gICAgICAgICAgICAgICAgc3Rhck1hcCA9IG1hcCAmJiBtYXBbJyonXTtcblxuICAgICAgICAgICAgLy9BZGp1c3QgYW55IHJlbGF0aXZlIHBhdGhzLlxuICAgICAgICAgICAgaWYgKG5hbWUpIHtcbiAgICAgICAgICAgICAgICBuYW1lID0gbmFtZS5zcGxpdCgnLycpO1xuICAgICAgICAgICAgICAgIGxhc3RJbmRleCA9IG5hbWUubGVuZ3RoIC0gMTtcblxuICAgICAgICAgICAgICAgIC8vIElmIHdhbnRpbmcgbm9kZSBJRCBjb21wYXRpYmlsaXR5LCBzdHJpcCAuanMgZnJvbSBlbmRcbiAgICAgICAgICAgICAgICAvLyBvZiBJRHMuIEhhdmUgdG8gZG8gdGhpcyBoZXJlLCBhbmQgbm90IGluIG5hbWVUb1VybFxuICAgICAgICAgICAgICAgIC8vIGJlY2F1c2Ugbm9kZSBhbGxvd3MgZWl0aGVyIC5qcyBvciBub24gLmpzIHRvIG1hcFxuICAgICAgICAgICAgICAgIC8vIHRvIHNhbWUgZmlsZS5cbiAgICAgICAgICAgICAgICBpZiAoY29uZmlnLm5vZGVJZENvbXBhdCAmJiBqc1N1ZmZpeFJlZ0V4cC50ZXN0KG5hbWVbbGFzdEluZGV4XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZVtsYXN0SW5kZXhdID0gbmFtZVtsYXN0SW5kZXhdLnJlcGxhY2UoanNTdWZmaXhSZWdFeHAsICcnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTdGFydHMgd2l0aCBhICcuJyBzbyBuZWVkIHRoZSBiYXNlTmFtZVxuICAgICAgICAgICAgICAgIGlmIChuYW1lWzBdLmNoYXJBdCgwKSA9PT0gJy4nICYmIGJhc2VQYXJ0cykge1xuICAgICAgICAgICAgICAgICAgICAvL0NvbnZlcnQgYmFzZU5hbWUgdG8gYXJyYXksIGFuZCBsb3Agb2ZmIHRoZSBsYXN0IHBhcnQsXG4gICAgICAgICAgICAgICAgICAgIC8vc28gdGhhdCAuIG1hdGNoZXMgdGhhdCAnZGlyZWN0b3J5JyBhbmQgbm90IG5hbWUgb2YgdGhlIGJhc2VOYW1lJ3NcbiAgICAgICAgICAgICAgICAgICAgLy9tb2R1bGUuIEZvciBpbnN0YW5jZSwgYmFzZU5hbWUgb2YgJ29uZS90d28vdGhyZWUnLCBtYXBzIHRvXG4gICAgICAgICAgICAgICAgICAgIC8vJ29uZS90d28vdGhyZWUuanMnLCBidXQgd2Ugd2FudCB0aGUgZGlyZWN0b3J5LCAnb25lL3R3bycgZm9yXG4gICAgICAgICAgICAgICAgICAgIC8vdGhpcyBub3JtYWxpemF0aW9uLlxuICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkQmFzZVBhcnRzID0gYmFzZVBhcnRzLnNsaWNlKDAsIGJhc2VQYXJ0cy5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG5vcm1hbGl6ZWRCYXNlUGFydHMuY29uY2F0KG5hbWUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRyaW1Eb3RzKG5hbWUpO1xuICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lLmpvaW4oJy8nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9BcHBseSBtYXAgY29uZmlnIGlmIGF2YWlsYWJsZS5cbiAgICAgICAgICAgIGlmIChhcHBseU1hcCAmJiBtYXAgJiYgKGJhc2VQYXJ0cyB8fCBzdGFyTWFwKSkge1xuICAgICAgICAgICAgICAgIG5hbWVQYXJ0cyA9IG5hbWUuc3BsaXQoJy8nKTtcblxuICAgICAgICAgICAgICAgIG91dGVyTG9vcDogZm9yIChpID0gbmFtZVBhcnRzLmxlbmd0aDsgaSA+IDA7IGkgLT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBuYW1lU2VnbWVudCA9IG5hbWVQYXJ0cy5zbGljZSgwLCBpKS5qb2luKCcvJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGJhc2VQYXJ0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9GaW5kIHRoZSBsb25nZXN0IGJhc2VOYW1lIHNlZ21lbnQgbWF0Y2ggaW4gdGhlIGNvbmZpZy5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vU28sIGRvIGpvaW5zIG9uIHRoZSBiaWdnZXN0IHRvIHNtYWxsZXN0IGxlbmd0aHMgb2YgYmFzZVBhcnRzLlxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChqID0gYmFzZVBhcnRzLmxlbmd0aDsgaiA+IDA7IGogLT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcFZhbHVlID0gZ2V0T3duKG1hcCwgYmFzZVBhcnRzLnNsaWNlKDAsIGopLmpvaW4oJy8nKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2Jhc2VOYW1lIHNlZ21lbnQgaGFzIGNvbmZpZywgZmluZCBpZiBpdCBoYXMgb25lIGZvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcyBuYW1lLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXBWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBWYWx1ZSA9IGdldE93bihtYXBWYWx1ZSwgbmFtZVNlZ21lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFwVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vTWF0Y2gsIHVwZGF0ZSBuYW1lIHRvIHRoZSBuZXcgdmFsdWUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3VuZE1hcCA9IG1hcFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRJID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIG91dGVyTG9vcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vQ2hlY2sgZm9yIGEgc3RhciBtYXAgbWF0Y2gsIGJ1dCBqdXN0IGhvbGQgb24gdG8gaXQsXG4gICAgICAgICAgICAgICAgICAgIC8vaWYgdGhlcmUgaXMgYSBzaG9ydGVyIHNlZ21lbnQgbWF0Y2ggbGF0ZXIgaW4gYSBtYXRjaGluZ1xuICAgICAgICAgICAgICAgICAgICAvL2NvbmZpZywgdGhlbiBmYXZvciBvdmVyIHRoaXMgc3RhciBtYXAuXG4gICAgICAgICAgICAgICAgICAgIGlmICghZm91bmRTdGFyTWFwICYmIHN0YXJNYXAgJiYgZ2V0T3duKHN0YXJNYXAsIG5hbWVTZWdtZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRTdGFyTWFwID0gZ2V0T3duKHN0YXJNYXAsIG5hbWVTZWdtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJJID0gaTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICghZm91bmRNYXAgJiYgZm91bmRTdGFyTWFwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvdW5kTWFwID0gZm91bmRTdGFyTWFwO1xuICAgICAgICAgICAgICAgICAgICBmb3VuZEkgPSBzdGFySTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZm91bmRNYXApIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZVBhcnRzLnNwbGljZSgwLCBmb3VuZEksIGZvdW5kTWFwKTtcbiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG5hbWVQYXJ0cy5qb2luKCcvJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBJZiB0aGUgbmFtZSBwb2ludHMgdG8gYSBwYWNrYWdlJ3MgbmFtZSwgdXNlXG4gICAgICAgICAgICAvLyB0aGUgcGFja2FnZSBtYWluIGluc3RlYWQuXG4gICAgICAgICAgICBwa2dNYWluID0gZ2V0T3duKGNvbmZpZy5wa2dzLCBuYW1lKTtcblxuICAgICAgICAgICAgcmV0dXJuIHBrZ01haW4gPyBwa2dNYWluIDogbmFtZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZVNjcmlwdChuYW1lKSB7XG4gICAgICAgICAgICBpZiAoaXNCcm93c2VyKSB7XG4gICAgICAgICAgICAgICAgZWFjaChzY3JpcHRzKCksIGZ1bmN0aW9uIChzY3JpcHROb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzY3JpcHROb2RlLmdldEF0dHJpYnV0ZSgnZGF0YS1yZXF1aXJlbW9kdWxlJykgPT09IG5hbWUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JpcHROb2RlLmdldEF0dHJpYnV0ZSgnZGF0YS1yZXF1aXJlY29udGV4dCcpID09PSBjb250ZXh0LmNvbnRleHROYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JpcHROb2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2NyaXB0Tm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaGFzUGF0aEZhbGxiYWNrKGlkKSB7XG4gICAgICAgICAgICB2YXIgcGF0aENvbmZpZyA9IGdldE93bihjb25maWcucGF0aHMsIGlkKTtcbiAgICAgICAgICAgIGlmIChwYXRoQ29uZmlnICYmIGlzQXJyYXkocGF0aENvbmZpZykgJiYgcGF0aENvbmZpZy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgLy9Qb3Agb2ZmIHRoZSBmaXJzdCBhcnJheSB2YWx1ZSwgc2luY2UgaXQgZmFpbGVkLCBhbmRcbiAgICAgICAgICAgICAgICAvL3JldHJ5XG4gICAgICAgICAgICAgICAgcGF0aENvbmZpZy5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIGNvbnRleHQucmVxdWlyZS51bmRlZihpZCk7XG5cbiAgICAgICAgICAgICAgICAvL0N1c3RvbSByZXF1aXJlIHRoYXQgZG9lcyBub3QgZG8gbWFwIHRyYW5zbGF0aW9uLCBzaW5jZVxuICAgICAgICAgICAgICAgIC8vSUQgaXMgXCJhYnNvbHV0ZVwiLCBhbHJlYWR5IG1hcHBlZC9yZXNvbHZlZC5cbiAgICAgICAgICAgICAgICBjb250ZXh0Lm1ha2VSZXF1aXJlKG51bGwsIHtcbiAgICAgICAgICAgICAgICAgICAgc2tpcE1hcDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pKFtpZF0pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvL1R1cm5zIGEgcGx1Z2luIXJlc291cmNlIHRvIFtwbHVnaW4sIHJlc291cmNlXVxuICAgICAgICAvL3dpdGggdGhlIHBsdWdpbiBiZWluZyB1bmRlZmluZWQgaWYgdGhlIG5hbWVcbiAgICAgICAgLy9kaWQgbm90IGhhdmUgYSBwbHVnaW4gcHJlZml4LlxuICAgICAgICBmdW5jdGlvbiBzcGxpdFByZWZpeChuYW1lKSB7XG4gICAgICAgICAgICB2YXIgcHJlZml4LFxuICAgICAgICAgICAgICAgIGluZGV4ID0gbmFtZSA/IG5hbWUuaW5kZXhPZignIScpIDogLTE7XG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgICAgIHByZWZpeCA9IG5hbWUuc3Vic3RyaW5nKDAsIGluZGV4KTtcbiAgICAgICAgICAgICAgICBuYW1lID0gbmFtZS5zdWJzdHJpbmcoaW5kZXggKyAxLCBuYW1lLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gW3ByZWZpeCwgbmFtZV07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIG1vZHVsZSBtYXBwaW5nIHRoYXQgaW5jbHVkZXMgcGx1Z2luIHByZWZpeCwgbW9kdWxlXG4gICAgICAgICAqIG5hbWUsIGFuZCBwYXRoLiBJZiBwYXJlbnRNb2R1bGVNYXAgaXMgcHJvdmlkZWQgaXQgd2lsbFxuICAgICAgICAgKiBhbHNvIG5vcm1hbGl6ZSB0aGUgbmFtZSB2aWEgcmVxdWlyZS5ub3JtYWxpemUoKVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSB0aGUgbW9kdWxlIG5hbWVcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IFtwYXJlbnRNb2R1bGVNYXBdIHBhcmVudCBtb2R1bGUgbWFwXG4gICAgICAgICAqIGZvciB0aGUgbW9kdWxlIG5hbWUsIHVzZWQgdG8gcmVzb2x2ZSByZWxhdGl2ZSBuYW1lcy5cbiAgICAgICAgICogQHBhcmFtIHtCb29sZWFufSBpc05vcm1hbGl6ZWQ6IGlzIHRoZSBJRCBhbHJlYWR5IG5vcm1hbGl6ZWQuXG4gICAgICAgICAqIFRoaXMgaXMgdHJ1ZSBpZiB0aGlzIGNhbGwgaXMgZG9uZSBmb3IgYSBkZWZpbmUoKSBtb2R1bGUgSUQuXG4gICAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gYXBwbHlNYXA6IGFwcGx5IHRoZSBtYXAgY29uZmlnIHRvIHRoZSBJRC5cbiAgICAgICAgICogU2hvdWxkIG9ubHkgYmUgdHJ1ZSBpZiB0aGlzIG1hcCBpcyBmb3IgYSBkZXBlbmRlbmN5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gbWFrZU1vZHVsZU1hcChuYW1lLCBwYXJlbnRNb2R1bGVNYXAsIGlzTm9ybWFsaXplZCwgYXBwbHlNYXApIHtcbiAgICAgICAgICAgIHZhciB1cmwsIHBsdWdpbk1vZHVsZSwgc3VmZml4LCBuYW1lUGFydHMsXG4gICAgICAgICAgICAgICAgcHJlZml4ID0gbnVsbCxcbiAgICAgICAgICAgICAgICBwYXJlbnROYW1lID0gcGFyZW50TW9kdWxlTWFwID8gcGFyZW50TW9kdWxlTWFwLm5hbWUgOiBudWxsLFxuICAgICAgICAgICAgICAgIG9yaWdpbmFsTmFtZSA9IG5hbWUsXG4gICAgICAgICAgICAgICAgaXNEZWZpbmUgPSB0cnVlLFxuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWROYW1lID0gJyc7XG5cbiAgICAgICAgICAgIC8vSWYgbm8gbmFtZSwgdGhlbiBpdCBtZWFucyBpdCBpcyBhIHJlcXVpcmUgY2FsbCwgZ2VuZXJhdGUgYW5cbiAgICAgICAgICAgIC8vaW50ZXJuYWwgbmFtZS5cbiAgICAgICAgICAgIGlmICghbmFtZSkge1xuICAgICAgICAgICAgICAgIGlzRGVmaW5lID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbmFtZSA9ICdfQHInICsgKHJlcXVpcmVDb3VudGVyICs9IDEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBuYW1lUGFydHMgPSBzcGxpdFByZWZpeChuYW1lKTtcbiAgICAgICAgICAgIHByZWZpeCA9IG5hbWVQYXJ0c1swXTtcbiAgICAgICAgICAgIG5hbWUgPSBuYW1lUGFydHNbMV07XG5cbiAgICAgICAgICAgIGlmIChwcmVmaXgpIHtcbiAgICAgICAgICAgICAgICBwcmVmaXggPSBub3JtYWxpemUocHJlZml4LCBwYXJlbnROYW1lLCBhcHBseU1hcCk7XG4gICAgICAgICAgICAgICAgcGx1Z2luTW9kdWxlID0gZ2V0T3duKGRlZmluZWQsIHByZWZpeCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vQWNjb3VudCBmb3IgcmVsYXRpdmUgcGF0aHMgaWYgdGhlcmUgaXMgYSBiYXNlIG5hbWUuXG4gICAgICAgICAgICBpZiAobmFtZSkge1xuICAgICAgICAgICAgICAgIGlmIChwcmVmaXgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTm9ybWFsaXplZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZE5hbWUgPSBuYW1lO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBsdWdpbk1vZHVsZSAmJiBwbHVnaW5Nb2R1bGUubm9ybWFsaXplKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1BsdWdpbiBpcyBsb2FkZWQsIHVzZSBpdHMgbm9ybWFsaXplIG1ldGhvZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWROYW1lID0gcGx1Z2luTW9kdWxlLm5vcm1hbGl6ZShuYW1lLCBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBub3JtYWxpemUobmFtZSwgcGFyZW50TmFtZSwgYXBwbHlNYXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBuZXN0ZWQgcGx1Z2luIHJlZmVyZW5jZXMsIHRoZW4gZG8gbm90IHRyeSB0b1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm9ybWFsaXplLCBhcyBpdCB3aWxsIG5vdCBub3JtYWxpemUgY29ycmVjdGx5LiBUaGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwbGFjZXMgYSByZXN0cmljdGlvbiBvbiByZXNvdXJjZUlkcywgYW5kIHRoZSBsb25nZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRlcm0gc29sdXRpb24gaXMgbm90IHRvIG5vcm1hbGl6ZSB1bnRpbCBwbHVnaW5zIGFyZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9hZGVkIGFuZCBhbGwgbm9ybWFsaXphdGlvbnMgdG8gYWxsb3cgZm9yIGFzeW5jXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsb2FkaW5nIG9mIGEgbG9hZGVyIHBsdWdpbi4gQnV0IGZvciBub3csIGZpeGVzIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29tbW9uIHVzZXMuIERldGFpbHMgaW4gIzExMzFcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWROYW1lID0gbmFtZS5pbmRleE9mKCchJykgPT09IC0xID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplKG5hbWUsIHBhcmVudE5hbWUsIGFwcGx5TWFwKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL0EgcmVndWxhciBtb2R1bGUuXG4gICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWROYW1lID0gbm9ybWFsaXplKG5hbWUsIHBhcmVudE5hbWUsIGFwcGx5TWFwKTtcblxuICAgICAgICAgICAgICAgICAgICAvL05vcm1hbGl6ZWQgbmFtZSBtYXkgYmUgYSBwbHVnaW4gSUQgZHVlIHRvIG1hcCBjb25maWdcbiAgICAgICAgICAgICAgICAgICAgLy9hcHBsaWNhdGlvbiBpbiBub3JtYWxpemUuIFRoZSBtYXAgY29uZmlnIHZhbHVlcyBtdXN0XG4gICAgICAgICAgICAgICAgICAgIC8vYWxyZWFkeSBiZSBub3JtYWxpemVkLCBzbyBkbyBub3QgbmVlZCB0byByZWRvIHRoYXQgcGFydC5cbiAgICAgICAgICAgICAgICAgICAgbmFtZVBhcnRzID0gc3BsaXRQcmVmaXgobm9ybWFsaXplZE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBwcmVmaXggPSBuYW1lUGFydHNbMF07XG4gICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWROYW1lID0gbmFtZVBhcnRzWzFdO1xuICAgICAgICAgICAgICAgICAgICBpc05vcm1hbGl6ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIHVybCA9IGNvbnRleHQubmFtZVRvVXJsKG5vcm1hbGl6ZWROYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vSWYgdGhlIGlkIGlzIGEgcGx1Z2luIGlkIHRoYXQgY2Fubm90IGJlIGRldGVybWluZWQgaWYgaXQgbmVlZHNcbiAgICAgICAgICAgIC8vbm9ybWFsaXphdGlvbiwgc3RhbXAgaXQgd2l0aCBhIHVuaXF1ZSBJRCBzbyB0d28gbWF0Y2hpbmcgcmVsYXRpdmVcbiAgICAgICAgICAgIC8vaWRzIHRoYXQgbWF5IGNvbmZsaWN0IGNhbiBiZSBzZXBhcmF0ZS5cbiAgICAgICAgICAgIHN1ZmZpeCA9IHByZWZpeCAmJiAhcGx1Z2luTW9kdWxlICYmICFpc05vcm1hbGl6ZWQgP1xuICAgICAgICAgICAgICAgICAgICAgJ191bm5vcm1hbGl6ZWQnICsgKHVubm9ybWFsaXplZENvdW50ZXIgKz0gMSkgOlxuICAgICAgICAgICAgICAgICAgICAgJyc7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcHJlZml4OiBwcmVmaXgsXG4gICAgICAgICAgICAgICAgbmFtZTogbm9ybWFsaXplZE5hbWUsXG4gICAgICAgICAgICAgICAgcGFyZW50TWFwOiBwYXJlbnRNb2R1bGVNYXAsXG4gICAgICAgICAgICAgICAgdW5ub3JtYWxpemVkOiAhIXN1ZmZpeCxcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgICAgICBvcmlnaW5hbE5hbWU6IG9yaWdpbmFsTmFtZSxcbiAgICAgICAgICAgICAgICBpc0RlZmluZTogaXNEZWZpbmUsXG4gICAgICAgICAgICAgICAgaWQ6IChwcmVmaXggP1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJlZml4ICsgJyEnICsgbm9ybWFsaXplZE5hbWUgOlxuICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZE5hbWUpICsgc3VmZml4XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0TW9kdWxlKGRlcE1hcCkge1xuICAgICAgICAgICAgdmFyIGlkID0gZGVwTWFwLmlkLFxuICAgICAgICAgICAgICAgIG1vZCA9IGdldE93bihyZWdpc3RyeSwgaWQpO1xuXG4gICAgICAgICAgICBpZiAoIW1vZCkge1xuICAgICAgICAgICAgICAgIG1vZCA9IHJlZ2lzdHJ5W2lkXSA9IG5ldyBjb250ZXh0Lk1vZHVsZShkZXBNYXApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbW9kO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb24oZGVwTWFwLCBuYW1lLCBmbikge1xuICAgICAgICAgICAgdmFyIGlkID0gZGVwTWFwLmlkLFxuICAgICAgICAgICAgICAgIG1vZCA9IGdldE93bihyZWdpc3RyeSwgaWQpO1xuXG4gICAgICAgICAgICBpZiAoaGFzUHJvcChkZWZpbmVkLCBpZCkgJiZcbiAgICAgICAgICAgICAgICAgICAgKCFtb2QgfHwgbW9kLmRlZmluZUVtaXRDb21wbGV0ZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gJ2RlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGZuKGRlZmluZWRbaWRdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG1vZCA9IGdldE1vZHVsZShkZXBNYXApO1xuICAgICAgICAgICAgICAgIGlmIChtb2QuZXJyb3IgJiYgbmFtZSA9PT0gJ2Vycm9yJykge1xuICAgICAgICAgICAgICAgICAgICBmbihtb2QuZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1vZC5vbihuYW1lLCBmbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb25FcnJvcihlcnIsIGVycmJhY2spIHtcbiAgICAgICAgICAgIHZhciBpZHMgPSBlcnIucmVxdWlyZU1vZHVsZXMsXG4gICAgICAgICAgICAgICAgbm90aWZpZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgaWYgKGVycmJhY2spIHtcbiAgICAgICAgICAgICAgICBlcnJiYWNrKGVycik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVhY2goaWRzLCBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1vZCA9IGdldE93bihyZWdpc3RyeSwgaWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobW9kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1NldCBlcnJvciBvbiBtb2R1bGUsIHNvIGl0IHNraXBzIHRpbWVvdXQgY2hlY2tzLlxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kLmVycm9yID0gZXJyO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZC5ldmVudHMuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmllZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFub3RpZmllZCkge1xuICAgICAgICAgICAgICAgICAgICByZXEub25FcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbnRlcm5hbCBtZXRob2QgdG8gdHJhbnNmZXIgZ2xvYmFsUXVldWUgaXRlbXMgdG8gdGhpcyBjb250ZXh0J3NcbiAgICAgICAgICogZGVmUXVldWUuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB0YWtlR2xvYmFsUXVldWUoKSB7XG4gICAgICAgICAgICAvL1B1c2ggYWxsIHRoZSBnbG9iYWxEZWZRdWV1ZSBpdGVtcyBpbnRvIHRoZSBjb250ZXh0J3MgZGVmUXVldWVcbiAgICAgICAgICAgIGlmIChnbG9iYWxEZWZRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBlYWNoKGdsb2JhbERlZlF1ZXVlLCBmdW5jdGlvbihxdWV1ZUl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gcXVldWVJdGVtWzBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGlkID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5kZWZRdWV1ZU1hcFtpZF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlZlF1ZXVlLnB1c2gocXVldWVJdGVtKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBnbG9iYWxEZWZRdWV1ZSA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaGFuZGxlcnMgPSB7XG4gICAgICAgICAgICAncmVxdWlyZSc6IGZ1bmN0aW9uIChtb2QpIHtcbiAgICAgICAgICAgICAgICBpZiAobW9kLnJlcXVpcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vZC5yZXF1aXJlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAobW9kLnJlcXVpcmUgPSBjb250ZXh0Lm1ha2VSZXF1aXJlKG1vZC5tYXApKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2V4cG9ydHMnOiBmdW5jdGlvbiAobW9kKSB7XG4gICAgICAgICAgICAgICAgbW9kLnVzaW5nRXhwb3J0cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKG1vZC5tYXAuaXNEZWZpbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZC5leHBvcnRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGRlZmluZWRbbW9kLm1hcC5pZF0gPSBtb2QuZXhwb3J0cyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG1vZC5leHBvcnRzID0gZGVmaW5lZFttb2QubWFwLmlkXSA9IHt9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnbW9kdWxlJzogZnVuY3Rpb24gKG1vZCkge1xuICAgICAgICAgICAgICAgIGlmIChtb2QubW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtb2QubW9kdWxlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAobW9kLm1vZHVsZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBtb2QubWFwLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXJpOiBtb2QubWFwLnVybCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRPd24oY29uZmlnLmNvbmZpZywgbW9kLm1hcC5pZCkgfHwge307XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0czogbW9kLmV4cG9ydHMgfHwgKG1vZC5leHBvcnRzID0ge30pXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBjbGVhblJlZ2lzdHJ5KGlkKSB7XG4gICAgICAgICAgICAvL0NsZWFuIHVwIG1hY2hpbmVyeSB1c2VkIGZvciB3YWl0aW5nIG1vZHVsZXMuXG4gICAgICAgICAgICBkZWxldGUgcmVnaXN0cnlbaWRdO1xuICAgICAgICAgICAgZGVsZXRlIGVuYWJsZWRSZWdpc3RyeVtpZF07XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBicmVha0N5Y2xlKG1vZCwgdHJhY2VkLCBwcm9jZXNzZWQpIHtcbiAgICAgICAgICAgIHZhciBpZCA9IG1vZC5tYXAuaWQ7XG5cbiAgICAgICAgICAgIGlmIChtb2QuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBtb2QuZW1pdCgnZXJyb3InLCBtb2QuZXJyb3IpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0cmFjZWRbaWRdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBlYWNoKG1vZC5kZXBNYXBzLCBmdW5jdGlvbiAoZGVwTWFwLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkZXBJZCA9IGRlcE1hcC5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcCA9IGdldE93bihyZWdpc3RyeSwgZGVwSWQpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vT25seSBmb3JjZSB0aGluZ3MgdGhhdCBoYXZlIG5vdCBjb21wbGV0ZWRcbiAgICAgICAgICAgICAgICAgICAgLy9iZWluZyBkZWZpbmVkLCBzbyBzdGlsbCBpbiB0aGUgcmVnaXN0cnksXG4gICAgICAgICAgICAgICAgICAgIC8vYW5kIG9ubHkgaWYgaXQgaGFzIG5vdCBiZWVuIG1hdGNoZWQgdXBcbiAgICAgICAgICAgICAgICAgICAgLy9pbiB0aGUgbW9kdWxlIGFscmVhZHkuXG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXAgJiYgIW1vZC5kZXBNYXRjaGVkW2ldICYmICFwcm9jZXNzZWRbZGVwSWRdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2V0T3duKHRyYWNlZCwgZGVwSWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kLmRlZmluZURlcChpLCBkZWZpbmVkW2RlcElkXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kLmNoZWNrKCk7IC8vcGFzcyBmYWxzZT9cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtDeWNsZShkZXAsIHRyYWNlZCwgcHJvY2Vzc2VkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHByb2Nlc3NlZFtpZF0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY2hlY2tMb2FkZWQoKSB7XG4gICAgICAgICAgICB2YXIgZXJyLCB1c2luZ1BhdGhGYWxsYmFjayxcbiAgICAgICAgICAgICAgICB3YWl0SW50ZXJ2YWwgPSBjb25maWcud2FpdFNlY29uZHMgKiAxMDAwLFxuICAgICAgICAgICAgICAgIC8vSXQgaXMgcG9zc2libGUgdG8gZGlzYWJsZSB0aGUgd2FpdCBpbnRlcnZhbCBieSB1c2luZyB3YWl0U2Vjb25kcyBvZiAwLlxuICAgICAgICAgICAgICAgIGV4cGlyZWQgPSB3YWl0SW50ZXJ2YWwgJiYgKGNvbnRleHQuc3RhcnRUaW1lICsgd2FpdEludGVydmFsKSA8IG5ldyBEYXRlKCkuZ2V0VGltZSgpLFxuICAgICAgICAgICAgICAgIG5vTG9hZHMgPSBbXSxcbiAgICAgICAgICAgICAgICByZXFDYWxscyA9IFtdLFxuICAgICAgICAgICAgICAgIHN0aWxsTG9hZGluZyA9IGZhbHNlLFxuICAgICAgICAgICAgICAgIG5lZWRDeWNsZUNoZWNrID0gdHJ1ZTtcblxuICAgICAgICAgICAgLy9EbyBub3QgYm90aGVyIGlmIHRoaXMgY2FsbCB3YXMgYSByZXN1bHQgb2YgYSBjeWNsZSBicmVhay5cbiAgICAgICAgICAgIGlmIChpbkNoZWNrTG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpbkNoZWNrTG9hZGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgLy9GaWd1cmUgb3V0IHRoZSBzdGF0ZSBvZiBhbGwgdGhlIG1vZHVsZXMuXG4gICAgICAgICAgICBlYWNoUHJvcChlbmFibGVkUmVnaXN0cnksIGZ1bmN0aW9uIChtb2QpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWFwID0gbW9kLm1hcCxcbiAgICAgICAgICAgICAgICAgICAgbW9kSWQgPSBtYXAuaWQ7XG5cbiAgICAgICAgICAgICAgICAvL1NraXAgdGhpbmdzIHRoYXQgYXJlIG5vdCBlbmFibGVkIG9yIGluIGVycm9yIHN0YXRlLlxuICAgICAgICAgICAgICAgIGlmICghbW9kLmVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICghbWFwLmlzRGVmaW5lKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcUNhbGxzLnB1c2gobW9kKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIW1vZC5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAvL0lmIHRoZSBtb2R1bGUgc2hvdWxkIGJlIGV4ZWN1dGVkLCBhbmQgaXQgaGFzIG5vdFxuICAgICAgICAgICAgICAgICAgICAvL2JlZW4gaW5pdGVkIGFuZCB0aW1lIGlzIHVwLCByZW1lbWJlciBpdC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtb2QuaW5pdGVkICYmIGV4cGlyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNQYXRoRmFsbGJhY2sobW9kSWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNpbmdQYXRoRmFsbGJhY2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0aWxsTG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vTG9hZHMucHVzaChtb2RJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlU2NyaXB0KG1vZElkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghbW9kLmluaXRlZCAmJiBtb2QuZmV0Y2hlZCAmJiBtYXAuaXNEZWZpbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0aWxsTG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1hcC5wcmVmaXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL05vIHJlYXNvbiB0byBrZWVwIGxvb2tpbmcgZm9yIHVuZmluaXNoZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2xvYWRpbmcuIElmIHRoZSBvbmx5IHN0aWxsTG9hZGluZyBpcyBhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9wbHVnaW4gcmVzb3VyY2UgdGhvdWdoLCBrZWVwIGdvaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYmVjYXVzZSBpdCBtYXkgYmUgdGhhdCBhIHBsdWdpbiByZXNvdXJjZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaXMgd2FpdGluZyBvbiBhIG5vbi1wbHVnaW4gY3ljbGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChuZWVkQ3ljbGVDaGVjayA9IGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoZXhwaXJlZCAmJiBub0xvYWRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIC8vSWYgd2FpdCB0aW1lIGV4cGlyZWQsIHRocm93IGVycm9yIG9mIHVubG9hZGVkIG1vZHVsZXMuXG4gICAgICAgICAgICAgICAgZXJyID0gbWFrZUVycm9yKCd0aW1lb3V0JywgJ0xvYWQgdGltZW91dCBmb3IgbW9kdWxlczogJyArIG5vTG9hZHMsIG51bGwsIG5vTG9hZHMpO1xuICAgICAgICAgICAgICAgIGVyci5jb250ZXh0TmFtZSA9IGNvbnRleHQuY29udGV4dE5hbWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9uRXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9Ob3QgZXhwaXJlZCwgY2hlY2sgZm9yIGEgY3ljbGUuXG4gICAgICAgICAgICBpZiAobmVlZEN5Y2xlQ2hlY2spIHtcbiAgICAgICAgICAgICAgICBlYWNoKHJlcUNhbGxzLCBmdW5jdGlvbiAobW9kKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrQ3ljbGUobW9kLCB7fSwge30pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL0lmIHN0aWxsIHdhaXRpbmcgb24gbG9hZHMsIGFuZCB0aGUgd2FpdGluZyBsb2FkIGlzIHNvbWV0aGluZ1xuICAgICAgICAgICAgLy9vdGhlciB0aGFuIGEgcGx1Z2luIHJlc291cmNlLCBvciB0aGVyZSBhcmUgc3RpbGwgb3V0c3RhbmRpbmdcbiAgICAgICAgICAgIC8vc2NyaXB0cywgdGhlbiBqdXN0IHRyeSBiYWNrIGxhdGVyLlxuICAgICAgICAgICAgaWYgKCghZXhwaXJlZCB8fCB1c2luZ1BhdGhGYWxsYmFjaykgJiYgc3RpbGxMb2FkaW5nKSB7XG4gICAgICAgICAgICAgICAgLy9Tb21ldGhpbmcgaXMgc3RpbGwgd2FpdGluZyB0byBsb2FkLiBXYWl0IGZvciBpdCwgYnV0IG9ubHlcbiAgICAgICAgICAgICAgICAvL2lmIGEgdGltZW91dCBpcyBub3QgYWxyZWFkeSBpbiBlZmZlY3QuXG4gICAgICAgICAgICAgICAgaWYgKChpc0Jyb3dzZXIgfHwgaXNXZWJXb3JrZXIpICYmICFjaGVja0xvYWRlZFRpbWVvdXRJZCkge1xuICAgICAgICAgICAgICAgICAgICBjaGVja0xvYWRlZFRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tMb2FkZWRUaW1lb3V0SWQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tMb2FkZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgNTApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaW5DaGVja0xvYWRlZCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgTW9kdWxlID0gZnVuY3Rpb24gKG1hcCkge1xuICAgICAgICAgICAgdGhpcy5ldmVudHMgPSBnZXRPd24odW5kZWZFdmVudHMsIG1hcC5pZCkgfHwge307XG4gICAgICAgICAgICB0aGlzLm1hcCA9IG1hcDtcbiAgICAgICAgICAgIHRoaXMuc2hpbSA9IGdldE93bihjb25maWcuc2hpbSwgbWFwLmlkKTtcbiAgICAgICAgICAgIHRoaXMuZGVwRXhwb3J0cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5kZXBNYXBzID0gW107XG4gICAgICAgICAgICB0aGlzLmRlcE1hdGNoZWQgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luTWFwcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5kZXBDb3VudCA9IDA7XG5cbiAgICAgICAgICAgIC8qIHRoaXMuZXhwb3J0cyB0aGlzLmZhY3RvcnlcbiAgICAgICAgICAgICAgIHRoaXMuZGVwTWFwcyA9IFtdLFxuICAgICAgICAgICAgICAgdGhpcy5lbmFibGVkLCB0aGlzLmZldGNoZWRcbiAgICAgICAgICAgICovXG4gICAgICAgIH07XG5cbiAgICAgICAgTW9kdWxlLnByb3RvdHlwZSA9IHtcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uIChkZXBNYXBzLCBmYWN0b3J5LCBlcnJiYWNrLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgICAgICAgICAvL0RvIG5vdCBkbyBtb3JlIGluaXRzIGlmIGFscmVhZHkgZG9uZS4gQ2FuIGhhcHBlbiBpZiB0aGVyZVxuICAgICAgICAgICAgICAgIC8vYXJlIG11bHRpcGxlIGRlZmluZSBjYWxscyBmb3IgdGhlIHNhbWUgbW9kdWxlLiBUaGF0IGlzIG5vdFxuICAgICAgICAgICAgICAgIC8vYSBub3JtYWwsIGNvbW1vbiBjYXNlLCBidXQgaXQgaXMgYWxzbyBub3QgdW5leHBlY3RlZC5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbml0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuZmFjdG9yeSA9IGZhY3Rvcnk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZXJyYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAvL1JlZ2lzdGVyIGZvciBlcnJvcnMgb24gdGhpcyBtb2R1bGUuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub24oJ2Vycm9yJywgZXJyYmFjayk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmV2ZW50cy5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAvL0lmIG5vIGVycmJhY2sgYWxyZWFkeSwgYnV0IHRoZXJlIGFyZSBlcnJvciBsaXN0ZW5lcnNcbiAgICAgICAgICAgICAgICAgICAgLy9vbiB0aGlzIG1vZHVsZSwgc2V0IHVwIGFuIGVycmJhY2sgdG8gcGFzcyB0byB0aGUgZGVwcy5cbiAgICAgICAgICAgICAgICAgICAgZXJyYmFjayA9IGJpbmQodGhpcywgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vRG8gYSBjb3B5IG9mIHRoZSBkZXBlbmRlbmN5IGFycmF5LCBzbyB0aGF0XG4gICAgICAgICAgICAgICAgLy9zb3VyY2UgaW5wdXRzIGFyZSBub3QgbW9kaWZpZWQuIEZvciBleGFtcGxlXG4gICAgICAgICAgICAgICAgLy9cInNoaW1cIiBkZXBzIGFyZSBwYXNzZWQgaW4gaGVyZSBkaXJlY3RseSwgYW5kXG4gICAgICAgICAgICAgICAgLy9kb2luZyBhIGRpcmVjdCBtb2RpZmljYXRpb24gb2YgdGhlIGRlcE1hcHMgYXJyYXlcbiAgICAgICAgICAgICAgICAvL3dvdWxkIGFmZmVjdCB0aGF0IGNvbmZpZy5cbiAgICAgICAgICAgICAgICB0aGlzLmRlcE1hcHMgPSBkZXBNYXBzICYmIGRlcE1hcHMuc2xpY2UoMCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmVycmJhY2sgPSBlcnJiYWNrO1xuXG4gICAgICAgICAgICAgICAgLy9JbmRpY2F0ZSB0aGlzIG1vZHVsZSBoYXMgYmUgaW5pdGlhbGl6ZWRcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRlZCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmlnbm9yZSA9IG9wdGlvbnMuaWdub3JlO1xuXG4gICAgICAgICAgICAgICAgLy9Db3VsZCBoYXZlIG9wdGlvbiB0byBpbml0IHRoaXMgbW9kdWxlIGluIGVuYWJsZWQgbW9kZSxcbiAgICAgICAgICAgICAgICAvL29yIGNvdWxkIGhhdmUgYmVlbiBwcmV2aW91c2x5IG1hcmtlZCBhcyBlbmFibGVkLiBIb3dldmVyLFxuICAgICAgICAgICAgICAgIC8vdGhlIGRlcGVuZGVuY2llcyBhcmUgbm90IGtub3duIHVudGlsIGluaXQgaXMgY2FsbGVkLiBTb1xuICAgICAgICAgICAgICAgIC8vaWYgZW5hYmxlZCBwcmV2aW91c2x5LCBub3cgdHJpZ2dlciBkZXBlbmRlbmNpZXMgYXMgZW5hYmxlZC5cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5lbmFibGVkIHx8IHRoaXMuZW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICAvL0VuYWJsZSB0aGlzIG1vZHVsZSBhbmQgZGVwZW5kZW5jaWVzLlxuICAgICAgICAgICAgICAgICAgICAvL1dpbGwgY2FsbCB0aGlzLmNoZWNrKClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmFibGUoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgZGVmaW5lRGVwOiBmdW5jdGlvbiAoaSwgZGVwRXhwb3J0cykge1xuICAgICAgICAgICAgICAgIC8vQmVjYXVzZSBvZiBjeWNsZXMsIGRlZmluZWQgY2FsbGJhY2sgZm9yIGEgZ2l2ZW5cbiAgICAgICAgICAgICAgICAvL2V4cG9ydCBjYW4gYmUgY2FsbGVkIG1vcmUgdGhhbiBvbmNlLlxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5kZXBNYXRjaGVkW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVwTWF0Y2hlZFtpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVwQ291bnQgLT0gMTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXBFeHBvcnRzW2ldID0gZGVwRXhwb3J0cztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBmZXRjaDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZldGNoZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmZldGNoZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgY29udGV4dC5zdGFydFRpbWUgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xuXG4gICAgICAgICAgICAgICAgdmFyIG1hcCA9IHRoaXMubWFwO1xuXG4gICAgICAgICAgICAgICAgLy9JZiB0aGUgbWFuYWdlciBpcyBmb3IgYSBwbHVnaW4gbWFuYWdlZCByZXNvdXJjZSxcbiAgICAgICAgICAgICAgICAvL2FzayB0aGUgcGx1Z2luIHRvIGxvYWQgaXQgbm93LlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNoaW0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5tYWtlUmVxdWlyZSh0aGlzLm1hcCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlQnVpbGRDYWxsYmFjazogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9KSh0aGlzLnNoaW0uZGVwcyB8fCBbXSwgYmluZCh0aGlzLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFwLnByZWZpeCA/IHRoaXMuY2FsbFBsdWdpbigpIDogdGhpcy5sb2FkKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL1JlZ3VsYXIgZGVwZW5kZW5jeS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hcC5wcmVmaXggPyB0aGlzLmNhbGxQbHVnaW4oKSA6IHRoaXMubG9hZCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgdXJsID0gdGhpcy5tYXAudXJsO1xuXG4gICAgICAgICAgICAgICAgLy9SZWd1bGFyIGRlcGVuZGVuY3kuXG4gICAgICAgICAgICAgICAgaWYgKCF1cmxGZXRjaGVkW3VybF0pIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsRmV0Y2hlZFt1cmxdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5sb2FkKHRoaXMubWFwLmlkLCB1cmwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ2hlY2tzIGlmIHRoZSBtb2R1bGUgaXMgcmVhZHkgdG8gZGVmaW5lIGl0c2VsZiwgYW5kIGlmIHNvLFxuICAgICAgICAgICAgICogZGVmaW5lIGl0LlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjaGVjazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5lbmFibGVkIHx8IHRoaXMuZW5hYmxpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBlcnIsIGNqc01vZHVsZSxcbiAgICAgICAgICAgICAgICAgICAgaWQgPSB0aGlzLm1hcC5pZCxcbiAgICAgICAgICAgICAgICAgICAgZGVwRXhwb3J0cyA9IHRoaXMuZGVwRXhwb3J0cyxcbiAgICAgICAgICAgICAgICAgICAgZXhwb3J0cyA9IHRoaXMuZXhwb3J0cyxcbiAgICAgICAgICAgICAgICAgICAgZmFjdG9yeSA9IHRoaXMuZmFjdG9yeTtcblxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pbml0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSBmZXRjaCBpZiBub3QgYWxyZWFkeSBpbiB0aGUgZGVmUXVldWUuXG4gICAgICAgICAgICAgICAgICAgIGlmICghaGFzUHJvcChjb250ZXh0LmRlZlF1ZXVlTWFwLCBpZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2goKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgdGhpcy5lcnJvcik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5kZWZpbmluZykge1xuICAgICAgICAgICAgICAgICAgICAvL1RoZSBmYWN0b3J5IGNvdWxkIHRyaWdnZXIgYW5vdGhlciByZXF1aXJlIGNhbGxcbiAgICAgICAgICAgICAgICAgICAgLy90aGF0IHdvdWxkIHJlc3VsdCBpbiBjaGVja2luZyB0aGlzIG1vZHVsZSB0b1xuICAgICAgICAgICAgICAgICAgICAvL2RlZmluZSBpdHNlbGYgYWdhaW4uIElmIGFscmVhZHkgaW4gdGhlIHByb2Nlc3NcbiAgICAgICAgICAgICAgICAgICAgLy9vZiBkb2luZyB0aGF0LCBza2lwIHRoaXMgd29yay5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZpbmluZyA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVwQ291bnQgPCAxICYmICF0aGlzLmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGZhY3RvcnkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9JZiB0aGVyZSBpcyBhbiBlcnJvciBsaXN0ZW5lciwgZmF2b3IgcGFzc2luZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdG8gdGhhdCBpbnN0ZWFkIG9mIHRocm93aW5nIGFuIGVycm9yLiBIb3dldmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vb25seSBkbyBpdCBmb3IgZGVmaW5lKCknZCAgbW9kdWxlcy4gcmVxdWlyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZXJyYmFja3Mgc2hvdWxkIG5vdCBiZSBjYWxsZWQgZm9yIGZhaWx1cmVzIGluXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90aGVpciBjYWxsYmFja3MgKCM2OTkpLiBIb3dldmVyIGlmIGEgZ2xvYmFsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9vbkVycm9yIGlzIHNldCwgdXNlIHRoYXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh0aGlzLmV2ZW50cy5lcnJvciAmJiB0aGlzLm1hcC5pc0RlZmluZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uRXJyb3IgIT09IGRlZmF1bHRPbkVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnRzID0gY29udGV4dC5leGVjQ2IoaWQsIGZhY3RvcnksIGRlcEV4cG9ydHMsIGV4cG9ydHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnIgPSBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0cyA9IGNvbnRleHQuZXhlY0NiKGlkLCBmYWN0b3J5LCBkZXBFeHBvcnRzLCBleHBvcnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGYXZvciByZXR1cm4gdmFsdWUgb3ZlciBleHBvcnRzLiBJZiBub2RlL2NqcyBpbiBwbGF5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZW4gd2lsbCBub3QgaGF2ZSBhIHJldHVybiB2YWx1ZSBhbnl3YXkuIEZhdm9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbW9kdWxlLmV4cG9ydHMgYXNzaWdubWVudCBvdmVyIGV4cG9ydHMgb2JqZWN0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hcC5pc0RlZmluZSAmJiBleHBvcnRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2pzTW9kdWxlID0gdGhpcy5tb2R1bGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjanNNb2R1bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydHMgPSBjanNNb2R1bGUuZXhwb3J0cztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnVzaW5nRXhwb3J0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9leHBvcnRzIGFscmVhZHkgc2V0IHRoZSBkZWZpbmVkIHZhbHVlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0cyA9IHRoaXMuZXhwb3J0cztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyLnJlcXVpcmVNYXAgPSB0aGlzLm1hcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyLnJlcXVpcmVNb2R1bGVzID0gdGhpcy5tYXAuaXNEZWZpbmUgPyBbdGhpcy5tYXAuaWRdIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyLnJlcXVpcmVUeXBlID0gdGhpcy5tYXAuaXNEZWZpbmUgPyAnZGVmaW5lJyA6ICdyZXF1aXJlJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uRXJyb3IoKHRoaXMuZXJyb3IgPSBlcnIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9KdXN0IGEgbGl0ZXJhbCB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9ydHMgPSBmYWN0b3J5O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4cG9ydHMgPSBleHBvcnRzO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tYXAuaXNEZWZpbmUgJiYgIXRoaXMuaWdub3JlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmaW5lZFtpZF0gPSBleHBvcnRzO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcS5vblJlc291cmNlTG9hZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzTG9hZE1hcHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFjaCh0aGlzLmRlcE1hcHMsIGZ1bmN0aW9uIChkZXBNYXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc0xvYWRNYXBzLnB1c2goZGVwTWFwLm5vcm1hbGl6ZWRNYXAgfHwgZGVwTWFwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vblJlc291cmNlTG9hZChjb250ZXh0LCB0aGlzLm1hcCwgcmVzTG9hZE1hcHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9DbGVhbiB1cFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYW5SZWdpc3RyeShpZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmaW5lZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvL0ZpbmlzaGVkIHRoZSBkZWZpbmUgc3RhZ2UuIEFsbG93IGNhbGxpbmcgY2hlY2sgYWdhaW5cbiAgICAgICAgICAgICAgICAgICAgLy90byBhbGxvdyBkZWZpbmUgbm90aWZpY2F0aW9ucyBiZWxvdyBpbiB0aGUgY2FzZSBvZiBhXG4gICAgICAgICAgICAgICAgICAgIC8vY3ljbGUuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmaW5pbmcgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kZWZpbmVkICYmICF0aGlzLmRlZmluZUVtaXR0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmaW5lRW1pdHRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2RlZmluZWQnLCB0aGlzLmV4cG9ydHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZpbmVFbWl0Q29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBjYWxsUGx1Z2luOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hcCA9IHRoaXMubWFwLFxuICAgICAgICAgICAgICAgICAgICBpZCA9IG1hcC5pZCxcbiAgICAgICAgICAgICAgICAgICAgLy9NYXAgYWxyZWFkeSBub3JtYWxpemVkIHRoZSBwcmVmaXguXG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbk1hcCA9IG1ha2VNb2R1bGVNYXAobWFwLnByZWZpeCk7XG5cbiAgICAgICAgICAgICAgICAvL01hcmsgdGhpcyBhcyBhIGRlcGVuZGVuY3kgZm9yIHRoaXMgcGx1Z2luLCBzbyBpdFxuICAgICAgICAgICAgICAgIC8vY2FuIGJlIHRyYWNlZCBmb3IgY3ljbGVzLlxuICAgICAgICAgICAgICAgIHRoaXMuZGVwTWFwcy5wdXNoKHBsdWdpbk1hcCk7XG5cbiAgICAgICAgICAgICAgICBvbihwbHVnaW5NYXAsICdkZWZpbmVkJywgYmluZCh0aGlzLCBmdW5jdGlvbiAocGx1Z2luKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsb2FkLCBub3JtYWxpemVkTWFwLCBub3JtYWxpemVkTW9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgYnVuZGxlSWQgPSBnZXRPd24oYnVuZGxlc01hcCwgdGhpcy5tYXAuaWQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IHRoaXMubWFwLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnROYW1lID0gdGhpcy5tYXAucGFyZW50TWFwID8gdGhpcy5tYXAucGFyZW50TWFwLm5hbWUgOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxSZXF1aXJlID0gY29udGV4dC5tYWtlUmVxdWlyZShtYXAucGFyZW50TWFwLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlQnVpbGRDYWxsYmFjazogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9JZiBjdXJyZW50IG1hcCBpcyBub3Qgbm9ybWFsaXplZCwgd2FpdCBmb3IgdGhhdFxuICAgICAgICAgICAgICAgICAgICAvL25vcm1hbGl6ZWQgbmFtZSB0byBsb2FkIGluc3RlYWQgb2YgY29udGludWluZy5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWFwLnVubm9ybWFsaXplZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9Ob3JtYWxpemUgdGhlIElEIGlmIHRoZSBwbHVnaW4gYWxsb3dzIGl0LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBsdWdpbi5ub3JtYWxpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gcGx1Z2luLm5vcm1hbGl6ZShuYW1lLCBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9ybWFsaXplKG5hbWUsIHBhcmVudE5hbWUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pIHx8ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3ByZWZpeCBhbmQgbmFtZSBzaG91bGQgYWxyZWFkeSBiZSBub3JtYWxpemVkLCBubyBuZWVkXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2ZvciBhcHBseWluZyBtYXAgY29uZmlnIGFnYWluIGVpdGhlci5cbiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRNYXAgPSBtYWtlTW9kdWxlTWFwKG1hcC5wcmVmaXggKyAnIScgKyBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXAucGFyZW50TWFwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbihub3JtYWxpemVkTWFwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkZWZpbmVkJywgYmluZCh0aGlzLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXAubm9ybWFsaXplZE1hcCA9IG5vcm1hbGl6ZWRNYXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdChbXSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gdmFsdWU7IH0sIG51bGwsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZ25vcmU6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkTW9kID0gZ2V0T3duKHJlZ2lzdHJ5LCBub3JtYWxpemVkTWFwLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3JtYWxpemVkTW9kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9NYXJrIHRoaXMgYXMgYSBkZXBlbmRlbmN5IGZvciB0aGlzIHBsdWdpbiwgc28gaXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NhbiBiZSB0cmFjZWQgZm9yIGN5Y2xlcy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlcE1hcHMucHVzaChub3JtYWxpemVkTWFwKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmV2ZW50cy5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkTW9kLm9uKCdlcnJvcicsIGJpbmQodGhpcywgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZE1vZC5lbmFibGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy9JZiBhIHBhdGhzIGNvbmZpZywgdGhlbiBqdXN0IGxvYWQgdGhhdCBmaWxlIGluc3RlYWQgdG9cbiAgICAgICAgICAgICAgICAgICAgLy9yZXNvbHZlIHRoZSBwbHVnaW4sIGFzIGl0IGlzIGJ1aWx0IGludG8gdGhhdCBwYXRocyBsYXllci5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGJ1bmRsZUlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcC51cmwgPSBjb250ZXh0Lm5hbWVUb1VybChidW5kbGVJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGxvYWQgPSBiaW5kKHRoaXMsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0KFtdLCBmdW5jdGlvbiAoKSB7IHJldHVybiB2YWx1ZTsgfSwgbnVsbCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBsb2FkLmVycm9yID0gYmluZCh0aGlzLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yID0gZXJyO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyLnJlcXVpcmVNb2R1bGVzID0gW2lkXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9SZW1vdmUgdGVtcCB1bm5vcm1hbGl6ZWQgbW9kdWxlcyBmb3IgdGhpcyBtb2R1bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3NpbmNlIHRoZXkgd2lsbCBuZXZlciBiZSByZXNvbHZlZCBvdGhlcndpc2Ugbm93LlxuICAgICAgICAgICAgICAgICAgICAgICAgZWFjaFByb3AocmVnaXN0cnksIGZ1bmN0aW9uIChtb2QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kLm1hcC5pZC5pbmRleE9mKGlkICsgJ191bm5vcm1hbGl6ZWQnKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhblJlZ2lzdHJ5KG1vZC5tYXAuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vQWxsb3cgcGx1Z2lucyB0byBsb2FkIG90aGVyIGNvZGUgd2l0aG91dCBoYXZpbmcgdG8ga25vdyB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy9jb250ZXh0IG9yIGhvdyB0byAnY29tcGxldGUnIHRoZSBsb2FkLlxuICAgICAgICAgICAgICAgICAgICBsb2FkLmZyb21UZXh0ID0gYmluZCh0aGlzLCBmdW5jdGlvbiAodGV4dCwgdGV4dEFsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLypqc2xpbnQgZXZpbDogdHJ1ZSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vZHVsZU5hbWUgPSBtYXAubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2R1bGVNYXAgPSBtYWtlTW9kdWxlTWFwKG1vZHVsZU5hbWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0ludGVyYWN0aXZlID0gdXNlSW50ZXJhY3RpdmU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vQXMgb2YgMi4xLjAsIHN1cHBvcnQganVzdCBwYXNzaW5nIHRoZSB0ZXh0LCB0byByZWluZm9yY2VcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZnJvbVRleHQgb25seSBiZWluZyBjYWxsZWQgb25jZSBwZXIgcmVzb3VyY2UuIFN0aWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3N1cHBvcnQgb2xkIHN0eWxlIG9mIHBhc3NpbmcgbW9kdWxlTmFtZSBidXQgZGlzY2FyZFxuICAgICAgICAgICAgICAgICAgICAgICAgLy90aGF0IG1vZHVsZU5hbWUgaW4gZmF2b3Igb2YgdGhlIGludGVybmFsIHJlZi5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0QWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA9IHRleHRBbHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vVHVybiBvZmYgaW50ZXJhY3RpdmUgc2NyaXB0IG1hdGNoaW5nIGZvciBJRSBmb3IgYW55IGRlZmluZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9jYWxscyBpbiB0aGUgdGV4dCwgdGhlbiB0dXJuIGl0IGJhY2sgb24gYXQgdGhlIGVuZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNJbnRlcmFjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZUludGVyYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vUHJpbWUgdGhlIHN5c3RlbSBieSBjcmVhdGluZyBhIG1vZHVsZSBpbnN0YW5jZSBmb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaXQuXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRNb2R1bGUobW9kdWxlTWFwKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9UcmFuc2ZlciBhbnkgY29uZmlnIHRvIHRoaXMgb3RoZXIgbW9kdWxlLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc1Byb3AoY29uZmlnLmNvbmZpZywgaWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLmNvbmZpZ1ttb2R1bGVOYW1lXSA9IGNvbmZpZy5jb25maWdbaWRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5leGVjKHRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvbkVycm9yKG1ha2VFcnJvcignZnJvbXRleHRldmFsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmcm9tVGV4dCBldmFsIGZvciAnICsgaWQgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIGZhaWxlZDogJyArIGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2lkXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzSW50ZXJhY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VJbnRlcmFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vTWFyayB0aGlzIGFzIGEgZGVwZW5kZW5jeSBmb3IgdGhlIHBsdWdpblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9yZXNvdXJjZVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXBNYXBzLnB1c2gobW9kdWxlTWFwKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9TdXBwb3J0IGFub255bW91cyBtb2R1bGVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5jb21wbGV0ZUxvYWQobW9kdWxlTmFtZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vQmluZCB0aGUgdmFsdWUgb2YgdGhhdCBtb2R1bGUgdG8gdGhlIHZhbHVlIGZvciB0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3Jlc291cmNlIElELlxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxSZXF1aXJlKFttb2R1bGVOYW1lXSwgbG9hZCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vVXNlIHBhcmVudE5hbWUgaGVyZSBzaW5jZSB0aGUgcGx1Z2luJ3MgbmFtZSBpcyBub3QgcmVsaWFibGUsXG4gICAgICAgICAgICAgICAgICAgIC8vY291bGQgYmUgc29tZSB3ZWlyZCBzdHJpbmcgd2l0aCBubyBwYXRoIHRoYXQgYWN0dWFsbHkgd2FudHMgdG9cbiAgICAgICAgICAgICAgICAgICAgLy9yZWZlcmVuY2UgdGhlIHBhcmVudE5hbWUncyBwYXRoLlxuICAgICAgICAgICAgICAgICAgICBwbHVnaW4ubG9hZChtYXAubmFtZSwgbG9jYWxSZXF1aXJlLCBsb2FkLCBjb25maWcpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIGNvbnRleHQuZW5hYmxlKHBsdWdpbk1hcCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW5NYXBzW3BsdWdpbk1hcC5pZF0gPSBwbHVnaW5NYXA7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBlbmFibGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBlbmFibGVkUmVnaXN0cnlbdGhpcy5tYXAuaWRdID0gdGhpcztcbiAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgLy9TZXQgZmxhZyBtZW50aW9uaW5nIHRoYXQgdGhlIG1vZHVsZSBpcyBlbmFibGluZyxcbiAgICAgICAgICAgICAgICAvL3NvIHRoYXQgaW1tZWRpYXRlIGNhbGxzIHRvIHRoZSBkZWZpbmVkIGNhbGxiYWNrc1xuICAgICAgICAgICAgICAgIC8vZm9yIGRlcGVuZGVuY2llcyBkbyBub3QgdHJpZ2dlciBpbmFkdmVydGVudCBsb2FkXG4gICAgICAgICAgICAgICAgLy93aXRoIHRoZSBkZXBDb3VudCBzdGlsbCBiZWluZyB6ZXJvLlxuICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgLy9FbmFibGUgZWFjaCBkZXBlbmRlbmN5XG4gICAgICAgICAgICAgICAgZWFjaCh0aGlzLmRlcE1hcHMsIGJpbmQodGhpcywgZnVuY3Rpb24gKGRlcE1hcCwgaSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaWQsIG1vZCwgaGFuZGxlcjtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGRlcE1hcCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vRGVwZW5kZW5jeSBuZWVkcyB0byBiZSBjb252ZXJ0ZWQgdG8gYSBkZXBNYXBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYW5kIHdpcmVkIHVwIHRvIHRoaXMgbW9kdWxlLlxuICAgICAgICAgICAgICAgICAgICAgICAgZGVwTWFwID0gbWFrZU1vZHVsZU1hcChkZXBNYXAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLm1hcC5pc0RlZmluZSA/IHRoaXMubWFwIDogdGhpcy5tYXAucGFyZW50TWFwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLnNraXBNYXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXBNYXBzW2ldID0gZGVwTWFwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyID0gZ2V0T3duKGhhbmRsZXJzLCBkZXBNYXAuaWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVwRXhwb3J0c1tpXSA9IGhhbmRsZXIodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlcENvdW50ICs9IDE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uKGRlcE1hcCwgJ2RlZmluZWQnLCBiaW5kKHRoaXMsIGZ1bmN0aW9uIChkZXBFeHBvcnRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudW5kZWZlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmaW5lRGVwKGksIGRlcEV4cG9ydHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2soKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZXJyYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uKGRlcE1hcCwgJ2Vycm9yJywgYmluZCh0aGlzLCB0aGlzLmVycmJhY2spKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5ldmVudHMuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBObyBkaXJlY3QgZXJyYmFjayBvbiB0aGlzIG1vZHVsZSwgYnV0IHNvbWV0aGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVsc2UgaXMgbGlzdGVuaW5nIGZvciBlcnJvcnMsIHNvIGJlIHN1cmUgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwcm9wYWdhdGUgdGhlIGVycm9yIGNvcnJlY3RseS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbihkZXBNYXAsICdlcnJvcicsIGJpbmQodGhpcywgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlkID0gZGVwTWFwLmlkO1xuICAgICAgICAgICAgICAgICAgICBtb2QgPSByZWdpc3RyeVtpZF07XG5cbiAgICAgICAgICAgICAgICAgICAgLy9Ta2lwIHNwZWNpYWwgbW9kdWxlcyBsaWtlICdyZXF1aXJlJywgJ2V4cG9ydHMnLCAnbW9kdWxlJ1xuICAgICAgICAgICAgICAgICAgICAvL0Fsc28sIGRvbid0IGNhbGwgZW5hYmxlIGlmIGl0IGlzIGFscmVhZHkgZW5hYmxlZCxcbiAgICAgICAgICAgICAgICAgICAgLy9pbXBvcnRhbnQgaW4gY2lyY3VsYXIgZGVwZW5kZW5jeSBjYXNlcy5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFoYXNQcm9wKGhhbmRsZXJzLCBpZCkgJiYgbW9kICYmICFtb2QuZW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5lbmFibGUoZGVwTWFwLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIC8vRW5hYmxlIGVhY2ggcGx1Z2luIHRoYXQgaXMgdXNlZCBpblxuICAgICAgICAgICAgICAgIC8vYSBkZXBlbmRlbmN5XG4gICAgICAgICAgICAgICAgZWFjaFByb3AodGhpcy5wbHVnaW5NYXBzLCBiaW5kKHRoaXMsIGZ1bmN0aW9uIChwbHVnaW5NYXApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1vZCA9IGdldE93bihyZWdpc3RyeSwgcGx1Z2luTWFwLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZCAmJiAhbW9kLmVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZW5hYmxlKHBsdWdpbk1hcCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmVuYWJsaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrKCk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBvbjogZnVuY3Rpb24gKG5hbWUsIGNiKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNicyA9IHRoaXMuZXZlbnRzW25hbWVdO1xuICAgICAgICAgICAgICAgIGlmICghY2JzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNicyA9IHRoaXMuZXZlbnRzW25hbWVdID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNicy5wdXNoKGNiKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGVtaXQ6IGZ1bmN0aW9uIChuYW1lLCBldnQpIHtcbiAgICAgICAgICAgICAgICBlYWNoKHRoaXMuZXZlbnRzW25hbWVdLCBmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgICAgICAgICAgICAgY2IoZXZ0KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gJ2Vycm9yJykge1xuICAgICAgICAgICAgICAgICAgICAvL05vdyB0aGF0IHRoZSBlcnJvciBoYW5kbGVyIHdhcyB0cmlnZ2VyZWQsIHJlbW92ZVxuICAgICAgICAgICAgICAgICAgICAvL3RoZSBsaXN0ZW5lcnMsIHNpbmNlIHRoaXMgYnJva2VuIE1vZHVsZSBpbnN0YW5jZVxuICAgICAgICAgICAgICAgICAgICAvL2NhbiBzdGF5IGFyb3VuZCBmb3IgYSB3aGlsZSBpbiB0aGUgcmVnaXN0cnkuXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmV2ZW50c1tuYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gY2FsbEdldE1vZHVsZShhcmdzKSB7XG4gICAgICAgICAgICAvL1NraXAgbW9kdWxlcyBhbHJlYWR5IGRlZmluZWQuXG4gICAgICAgICAgICBpZiAoIWhhc1Byb3AoZGVmaW5lZCwgYXJnc1swXSkpIHtcbiAgICAgICAgICAgICAgICBnZXRNb2R1bGUobWFrZU1vZHVsZU1hcChhcmdzWzBdLCBudWxsLCB0cnVlKSkuaW5pdChhcmdzWzFdLCBhcmdzWzJdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKG5vZGUsIGZ1bmMsIG5hbWUsIGllTmFtZSkge1xuICAgICAgICAgICAgLy9GYXZvciBkZXRhY2hFdmVudCBiZWNhdXNlIG9mIElFOVxuICAgICAgICAgICAgLy9pc3N1ZSwgc2VlIGF0dGFjaEV2ZW50L2FkZEV2ZW50TGlzdGVuZXIgY29tbWVudCBlbHNld2hlcmVcbiAgICAgICAgICAgIC8vaW4gdGhpcyBmaWxlLlxuICAgICAgICAgICAgaWYgKG5vZGUuZGV0YWNoRXZlbnQgJiYgIWlzT3BlcmEpIHtcbiAgICAgICAgICAgICAgICAvL1Byb2JhYmx5IElFLiBJZiBub3QgaXQgd2lsbCB0aHJvdyBhbiBlcnJvciwgd2hpY2ggd2lsbCBiZVxuICAgICAgICAgICAgICAgIC8vdXNlZnVsIHRvIGtub3cuXG4gICAgICAgICAgICAgICAgaWYgKGllTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBub2RlLmRldGFjaEV2ZW50KGllTmFtZSwgZnVuYyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIobmFtZSwgZnVuYywgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdpdmVuIGFuIGV2ZW50IGZyb20gYSBzY3JpcHQgbm9kZSwgZ2V0IHRoZSByZXF1aXJlanMgaW5mbyBmcm9tIGl0LFxuICAgICAgICAgKiBhbmQgdGhlbiByZW1vdmVzIHRoZSBldmVudCBsaXN0ZW5lcnMgb24gdGhlIG5vZGUuXG4gICAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2dFxuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0U2NyaXB0RGF0YShldnQpIHtcbiAgICAgICAgICAgIC8vVXNpbmcgY3VycmVudFRhcmdldCBpbnN0ZWFkIG9mIHRhcmdldCBmb3IgRmlyZWZveCAyLjAncyBzYWtlLiBOb3RcbiAgICAgICAgICAgIC8vYWxsIG9sZCBicm93c2VycyB3aWxsIGJlIHN1cHBvcnRlZCwgYnV0IHRoaXMgb25lIHdhcyBlYXN5IGVub3VnaFxuICAgICAgICAgICAgLy90byBzdXBwb3J0IGFuZCBzdGlsbCBtYWtlcyBzZW5zZS5cbiAgICAgICAgICAgIHZhciBub2RlID0gZXZ0LmN1cnJlbnRUYXJnZXQgfHwgZXZ0LnNyY0VsZW1lbnQ7XG5cbiAgICAgICAgICAgIC8vUmVtb3ZlIHRoZSBsaXN0ZW5lcnMgb25jZSBoZXJlLlxuICAgICAgICAgICAgcmVtb3ZlTGlzdGVuZXIobm9kZSwgY29udGV4dC5vblNjcmlwdExvYWQsICdsb2FkJywgJ29ucmVhZHlzdGF0ZWNoYW5nZScpO1xuICAgICAgICAgICAgcmVtb3ZlTGlzdGVuZXIobm9kZSwgY29udGV4dC5vblNjcmlwdEVycm9yLCAnZXJyb3InKTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBub2RlOiBub2RlLFxuICAgICAgICAgICAgICAgIGlkOiBub2RlICYmIG5vZGUuZ2V0QXR0cmlidXRlKCdkYXRhLXJlcXVpcmVtb2R1bGUnKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGludGFrZURlZmluZXMoKSB7XG4gICAgICAgICAgICB2YXIgYXJncztcblxuICAgICAgICAgICAgLy9BbnkgZGVmaW5lZCBtb2R1bGVzIGluIHRoZSBnbG9iYWwgcXVldWUsIGludGFrZSB0aGVtIG5vdy5cbiAgICAgICAgICAgIHRha2VHbG9iYWxRdWV1ZSgpO1xuXG4gICAgICAgICAgICAvL01ha2Ugc3VyZSBhbnkgcmVtYWluaW5nIGRlZlF1ZXVlIGl0ZW1zIGdldCBwcm9wZXJseSBwcm9jZXNzZWQuXG4gICAgICAgICAgICB3aGlsZSAoZGVmUXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgYXJncyA9IGRlZlF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3NbMF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uRXJyb3IobWFrZUVycm9yKCdtaXNtYXRjaCcsICdNaXNtYXRjaGVkIGFub255bW91cyBkZWZpbmUoKSBtb2R1bGU6ICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJnc1thcmdzLmxlbmd0aCAtIDFdKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy9hcmdzIGFyZSBpZCwgZGVwcywgZmFjdG9yeS4gU2hvdWxkIGJlIG5vcm1hbGl6ZWQgYnkgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vZGVmaW5lKCkgZnVuY3Rpb24uXG4gICAgICAgICAgICAgICAgICAgIGNhbGxHZXRNb2R1bGUoYXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGV4dC5kZWZRdWV1ZU1hcCA9IHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgY29udGV4dCA9IHtcbiAgICAgICAgICAgIGNvbmZpZzogY29uZmlnLFxuICAgICAgICAgICAgY29udGV4dE5hbWU6IGNvbnRleHROYW1lLFxuICAgICAgICAgICAgcmVnaXN0cnk6IHJlZ2lzdHJ5LFxuICAgICAgICAgICAgZGVmaW5lZDogZGVmaW5lZCxcbiAgICAgICAgICAgIHVybEZldGNoZWQ6IHVybEZldGNoZWQsXG4gICAgICAgICAgICBkZWZRdWV1ZTogZGVmUXVldWUsXG4gICAgICAgICAgICBkZWZRdWV1ZU1hcDoge30sXG4gICAgICAgICAgICBNb2R1bGU6IE1vZHVsZSxcbiAgICAgICAgICAgIG1ha2VNb2R1bGVNYXA6IG1ha2VNb2R1bGVNYXAsXG4gICAgICAgICAgICBuZXh0VGljazogcmVxLm5leHRUaWNrLFxuICAgICAgICAgICAgb25FcnJvcjogb25FcnJvcixcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBTZXQgYSBjb25maWd1cmF0aW9uIGZvciB0aGUgY29udGV4dC5cbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjZmcgY29uZmlnIG9iamVjdCB0byBpbnRlZ3JhdGUuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNvbmZpZ3VyZTogZnVuY3Rpb24gKGNmZykge1xuICAgICAgICAgICAgICAgIC8vTWFrZSBzdXJlIHRoZSBiYXNlVXJsIGVuZHMgaW4gYSBzbGFzaC5cbiAgICAgICAgICAgICAgICBpZiAoY2ZnLmJhc2VVcmwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNmZy5iYXNlVXJsLmNoYXJBdChjZmcuYmFzZVVybC5sZW5ndGggLSAxKSAhPT0gJy8nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZmcuYmFzZVVybCArPSAnLyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IG9sZCBzdHlsZSB1cmxBcmdzIHN0cmluZyB0byBhIGZ1bmN0aW9uLlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2ZnLnVybEFyZ3MgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1cmxBcmdzID0gY2ZnLnVybEFyZ3M7XG4gICAgICAgICAgICAgICAgICAgIGNmZy51cmxBcmdzID0gZnVuY3Rpb24oaWQsIHVybCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh1cmwuaW5kZXhPZignPycpID09PSAtMSA/ICc/JyA6ICcmJykgKyB1cmxBcmdzO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vU2F2ZSBvZmYgdGhlIHBhdGhzIHNpbmNlIHRoZXkgcmVxdWlyZSBzcGVjaWFsIHByb2Nlc3NpbmcsXG4gICAgICAgICAgICAgICAgLy90aGV5IGFyZSBhZGRpdGl2ZS5cbiAgICAgICAgICAgICAgICB2YXIgc2hpbSA9IGNvbmZpZy5zaGltLFxuICAgICAgICAgICAgICAgICAgICBvYmpzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aHM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBidW5kbGVzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBlYWNoUHJvcChjZmcsIGZ1bmN0aW9uICh2YWx1ZSwgcHJvcCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob2Jqc1twcm9wXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25maWdbcHJvcF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWdbcHJvcF0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG1peGluKGNvbmZpZ1twcm9wXSwgdmFsdWUsIHRydWUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnW3Byb3BdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vUmV2ZXJzZSBtYXAgdGhlIGJ1bmRsZXNcbiAgICAgICAgICAgICAgICBpZiAoY2ZnLmJ1bmRsZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgZWFjaFByb3AoY2ZnLmJ1bmRsZXMsIGZ1bmN0aW9uICh2YWx1ZSwgcHJvcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWFjaCh2YWx1ZSwgZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodiAhPT0gcHJvcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidW5kbGVzTWFwW3ZdID0gcHJvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9NZXJnZSBzaGltXG4gICAgICAgICAgICAgICAgaWYgKGNmZy5zaGltKSB7XG4gICAgICAgICAgICAgICAgICAgIGVhY2hQcm9wKGNmZy5zaGltLCBmdW5jdGlvbiAodmFsdWUsIGlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL05vcm1hbGl6ZSB0aGUgc3RydWN0dXJlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVwczogdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZS5leHBvcnRzIHx8IHZhbHVlLmluaXQpICYmICF2YWx1ZS5leHBvcnRzRm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5leHBvcnRzRm4gPSBjb250ZXh0Lm1ha2VTaGltRXhwb3J0cyh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzaGltW2lkXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLnNoaW0gPSBzaGltO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vQWRqdXN0IHBhY2thZ2VzIGlmIG5lY2Vzc2FyeS5cbiAgICAgICAgICAgICAgICBpZiAoY2ZnLnBhY2thZ2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIGVhY2goY2ZnLnBhY2thZ2VzLCBmdW5jdGlvbiAocGtnT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYXRpb24sIG5hbWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHBrZ09iaiA9IHR5cGVvZiBwa2dPYmogPT09ICdzdHJpbmcnID8ge25hbWU6IHBrZ09ian0gOiBwa2dPYmo7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgPSBwa2dPYmoubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uID0gcGtnT2JqLmxvY2F0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLnBhdGhzW25hbWVdID0gcGtnT2JqLmxvY2F0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1NhdmUgcG9pbnRlciB0byBtYWluIG1vZHVsZSBJRCBmb3IgcGtnIG5hbWUuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1JlbW92ZSBsZWFkaW5nIGRvdCBpbiBtYWluLCBzbyBtYWluIHBhdGhzIGFyZSBub3JtYWxpemVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy9hbmQgcmVtb3ZlIGFueSB0cmFpbGluZyAuanMsIHNpbmNlIGRpZmZlcmVudCBwYWNrYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2VudnMgaGF2ZSBkaWZmZXJlbnQgY29udmVudGlvbnM6IHNvbWUgdXNlIGEgbW9kdWxlIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3NvbWUgdXNlIGEgZmlsZSBuYW1lLlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLnBrZ3NbbmFtZV0gPSBwa2dPYmoubmFtZSArICcvJyArIChwa2dPYmoubWFpbiB8fCAnbWFpbicpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoY3VyckRpclJlZ0V4cCwgJycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoanNTdWZmaXhSZWdFeHAsICcnKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9JZiB0aGVyZSBhcmUgYW55IFwid2FpdGluZyB0byBleGVjdXRlXCIgbW9kdWxlcyBpbiB0aGUgcmVnaXN0cnksXG4gICAgICAgICAgICAgICAgLy91cGRhdGUgdGhlIG1hcHMgZm9yIHRoZW0sIHNpbmNlIHRoZWlyIGluZm8sIGxpa2UgVVJMcyB0byBsb2FkLFxuICAgICAgICAgICAgICAgIC8vbWF5IGhhdmUgY2hhbmdlZC5cbiAgICAgICAgICAgICAgICBlYWNoUHJvcChyZWdpc3RyeSwgZnVuY3Rpb24gKG1vZCwgaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9JZiBtb2R1bGUgYWxyZWFkeSBoYXMgaW5pdCBjYWxsZWQsIHNpbmNlIGl0IGlzIHRvb1xuICAgICAgICAgICAgICAgICAgICAvL2xhdGUgdG8gbW9kaWZ5IHRoZW0sIGFuZCBpZ25vcmUgdW5ub3JtYWxpemVkIG9uZXNcbiAgICAgICAgICAgICAgICAgICAgLy9zaW5jZSB0aGV5IGFyZSB0cmFuc2llbnQuXG4gICAgICAgICAgICAgICAgICAgIGlmICghbW9kLmluaXRlZCAmJiAhbW9kLm1hcC51bm5vcm1hbGl6ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZC5tYXAgPSBtYWtlTW9kdWxlTWFwKGlkLCBudWxsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy9JZiBhIGRlcHMgYXJyYXkgb3IgYSBjb25maWcgY2FsbGJhY2sgaXMgc3BlY2lmaWVkLCB0aGVuIGNhbGxcbiAgICAgICAgICAgICAgICAvL3JlcXVpcmUgd2l0aCB0aG9zZSBhcmdzLiBUaGlzIGlzIHVzZWZ1bCB3aGVuIHJlcXVpcmUgaXMgZGVmaW5lZCBhcyBhXG4gICAgICAgICAgICAgICAgLy9jb25maWcgb2JqZWN0IGJlZm9yZSByZXF1aXJlLmpzIGlzIGxvYWRlZC5cbiAgICAgICAgICAgICAgICBpZiAoY2ZnLmRlcHMgfHwgY2ZnLmNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQucmVxdWlyZShjZmcuZGVwcyB8fCBbXSwgY2ZnLmNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBtYWtlU2hpbUV4cG9ydHM6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGZuKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmV0O1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuaW5pdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gdmFsdWUuaW5pdC5hcHBseShnbG9iYWwsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldCB8fCAodmFsdWUuZXhwb3J0cyAmJiBnZXRHbG9iYWwodmFsdWUuZXhwb3J0cykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZm47XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBtYWtlUmVxdWlyZTogZnVuY3Rpb24gKHJlbE1hcCwgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gbG9jYWxSZXF1aXJlKGRlcHMsIGNhbGxiYWNrLCBlcnJiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpZCwgbWFwLCByZXF1aXJlTW9kO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmVuYWJsZUJ1aWxkQ2FsbGJhY2sgJiYgY2FsbGJhY2sgJiYgaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLl9fcmVxdWlyZUpzQnVpbGQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkZXBzID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9JbnZhbGlkIGNhbGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25FcnJvcihtYWtlRXJyb3IoJ3JlcXVpcmVhcmdzJywgJ0ludmFsaWQgcmVxdWlyZSBjYWxsJyksIGVycmJhY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0lmIHJlcXVpcmV8ZXhwb3J0c3xtb2R1bGUgYXJlIHJlcXVlc3RlZCwgZ2V0IHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy92YWx1ZSBmb3IgdGhlbSBmcm9tIHRoZSBzcGVjaWFsIGhhbmRsZXJzLiBDYXZlYXQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAvL3RoaXMgb25seSB3b3JrcyB3aGlsZSBtb2R1bGUgaXMgYmVpbmcgZGVmaW5lZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWxNYXAgJiYgaGFzUHJvcChoYW5kbGVycywgZGVwcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlcnNbZGVwc10ocmVnaXN0cnlbcmVsTWFwLmlkXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vU3luY2hyb25vdXMgYWNjZXNzIHRvIG9uZSBtb2R1bGUuIElmIHJlcXVpcmUuZ2V0IGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2F2YWlsYWJsZSAoYXMgaW4gdGhlIE5vZGUgYWRhcHRlciksIHByZWZlciB0aGF0LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcS5nZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVxLmdldChjb250ZXh0LCBkZXBzLCByZWxNYXAsIGxvY2FsUmVxdWlyZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vTm9ybWFsaXplIG1vZHVsZSBuYW1lLCBpZiBpdCBjb250YWlucyAuIG9yIC4uXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXAgPSBtYWtlTW9kdWxlTWFwKGRlcHMsIHJlbE1hcCwgZmFsc2UsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQgPSBtYXAuaWQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaGFzUHJvcChkZWZpbmVkLCBpZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25FcnJvcihtYWtlRXJyb3IoJ25vdGxvYWRlZCcsICdNb2R1bGUgbmFtZSBcIicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXCIgaGFzIG5vdCBiZWVuIGxvYWRlZCB5ZXQgZm9yIGNvbnRleHQ6ICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHROYW1lICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocmVsTWFwID8gJycgOiAnLiBVc2UgcmVxdWlyZShbXSknKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmluZWRbaWRdO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy9HcmFiIGRlZmluZXMgd2FpdGluZyBpbiB0aGUgZ2xvYmFsIHF1ZXVlLlxuICAgICAgICAgICAgICAgICAgICBpbnRha2VEZWZpbmVzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9NYXJrIGFsbCB0aGUgZGVwZW5kZW5jaWVzIGFzIG5lZWRpbmcgdG8gYmUgbG9hZGVkLlxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0Lm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vU29tZSBkZWZpbmVzIGNvdWxkIGhhdmUgYmVlbiBhZGRlZCBzaW5jZSB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vcmVxdWlyZSBjYWxsLCBjb2xsZWN0IHRoZW0uXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRha2VEZWZpbmVzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVNb2QgPSBnZXRNb2R1bGUobWFrZU1vZHVsZU1hcChudWxsLCByZWxNYXApKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9TdG9yZSBpZiBtYXAgY29uZmlnIHNob3VsZCBiZSBhcHBsaWVkIHRvIHRoaXMgcmVxdWlyZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9jYWxsIGZvciBkZXBlbmRlbmNpZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlTW9kLnNraXBNYXAgPSBvcHRpb25zLnNraXBNYXA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVNb2QuaW5pdChkZXBzLCBjYWxsYmFjaywgZXJyYmFjaywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0xvYWRlZCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9jYWxSZXF1aXJlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG1peGluKGxvY2FsUmVxdWlyZSwge1xuICAgICAgICAgICAgICAgICAgICBpc0Jyb3dzZXI6IGlzQnJvd3NlcixcblxuICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICogQ29udmVydHMgYSBtb2R1bGUgbmFtZSArIC5leHRlbnNpb24gaW50byBhbiBVUkwgcGF0aC5cbiAgICAgICAgICAgICAgICAgICAgICogKlJlcXVpcmVzKiB0aGUgdXNlIG9mIGEgbW9kdWxlIG5hbWUuIEl0IGRvZXMgbm90IHN1cHBvcnQgdXNpbmdcbiAgICAgICAgICAgICAgICAgICAgICogcGxhaW4gVVJMcyBsaWtlIG5hbWVUb1VybC5cbiAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIHRvVXJsOiBmdW5jdGlvbiAobW9kdWxlTmFtZVBsdXNFeHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBtb2R1bGVOYW1lUGx1c0V4dC5sYXN0SW5kZXhPZignLicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZ21lbnQgPSBtb2R1bGVOYW1lUGx1c0V4dC5zcGxpdCgnLycpWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUmVsYXRpdmUgPSBzZWdtZW50ID09PSAnLicgfHwgc2VnbWVudCA9PT0gJy4uJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9IYXZlIGEgZmlsZSBleHRlbnNpb24gYWxpYXMsIGFuZCBpdCBpcyBub3QgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2RvdHMgZnJvbSBhIHJlbGF0aXZlIHBhdGguXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xICYmICghaXNSZWxhdGl2ZSB8fCBpbmRleCA+IDEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0ID0gbW9kdWxlTmFtZVBsdXNFeHQuc3Vic3RyaW5nKGluZGV4LCBtb2R1bGVOYW1lUGx1c0V4dC5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZU5hbWVQbHVzRXh0ID0gbW9kdWxlTmFtZVBsdXNFeHQuc3Vic3RyaW5nKDAsIGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQubmFtZVRvVXJsKG5vcm1hbGl6ZShtb2R1bGVOYW1lUGx1c0V4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbE1hcCAmJiByZWxNYXAuaWQsIHRydWUpLCBleHQsICB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICBkZWZpbmVkOiBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoYXNQcm9wKGRlZmluZWQsIG1ha2VNb2R1bGVNYXAoaWQsIHJlbE1hcCwgZmFsc2UsIHRydWUpLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICBzcGVjaWZpZWQ6IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQgPSBtYWtlTW9kdWxlTWFwKGlkLCByZWxNYXAsIGZhbHNlLCB0cnVlKS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoYXNQcm9wKGRlZmluZWQsIGlkKSB8fCBoYXNQcm9wKHJlZ2lzdHJ5LCBpZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vT25seSBhbGxvdyB1bmRlZiBvbiB0b3AgbGV2ZWwgcmVxdWlyZSBjYWxsc1xuICAgICAgICAgICAgICAgIGlmICghcmVsTWFwKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsUmVxdWlyZS51bmRlZiA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9CaW5kIGFueSB3YWl0aW5nIGRlZmluZSgpIGNhbGxzIHRvIHRoaXMgY29udGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZml4IGZvciAjNDA4XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWtlR2xvYmFsUXVldWUoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hcCA9IG1ha2VNb2R1bGVNYXAoaWQsIHJlbE1hcCwgdHJ1ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kID0gZ2V0T3duKHJlZ2lzdHJ5LCBpZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZC51bmRlZmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZVNjcmlwdChpZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBkZWZpbmVkW2lkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB1cmxGZXRjaGVkW21hcC51cmxdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHVuZGVmRXZlbnRzW2lkXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9DbGVhbiBxdWV1ZWQgZGVmaW5lcyB0b28uIEdvIGJhY2t3YXJkc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9pbiBhcnJheSBzbyB0aGF0IHRoZSBzcGxpY2VzIGRvIG5vdFxuICAgICAgICAgICAgICAgICAgICAgICAgLy9tZXNzIHVwIHRoZSBpdGVyYXRpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICBlYWNoUmV2ZXJzZShkZWZRdWV1ZSwgZnVuY3Rpb24oYXJncywgaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcmdzWzBdID09PSBpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZRdWV1ZS5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgY29udGV4dC5kZWZRdWV1ZU1hcFtpZF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0hvbGQgb24gdG8gbGlzdGVuZXJzIGluIGNhc2UgdGhlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9tb2R1bGUgd2lsbCBiZSBhdHRlbXB0ZWQgdG8gYmUgcmVsb2FkZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3VzaW5nIGEgZGlmZmVyZW50IGNvbmZpZy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kLmV2ZW50cy5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmRXZlbnRzW2lkXSA9IG1vZC5ldmVudHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYW5SZWdpc3RyeShpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvY2FsUmVxdWlyZTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ2FsbGVkIHRvIGVuYWJsZSBhIG1vZHVsZSBpZiBpdCBpcyBzdGlsbCBpbiB0aGUgcmVnaXN0cnlcbiAgICAgICAgICAgICAqIGF3YWl0aW5nIGVuYWJsZW1lbnQuIEEgc2Vjb25kIGFyZywgcGFyZW50LCB0aGUgcGFyZW50IG1vZHVsZSxcbiAgICAgICAgICAgICAqIGlzIHBhc3NlZCBpbiBmb3IgY29udGV4dCwgd2hlbiB0aGlzIG1ldGhvZCBpcyBvdmVycmlkZGVuIGJ5XG4gICAgICAgICAgICAgKiB0aGUgb3B0aW1pemVyLiBOb3Qgc2hvd24gaGVyZSB0byBrZWVwIGNvZGUgY29tcGFjdC5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZW5hYmxlOiBmdW5jdGlvbiAoZGVwTWFwKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1vZCA9IGdldE93bihyZWdpc3RyeSwgZGVwTWFwLmlkKTtcbiAgICAgICAgICAgICAgICBpZiAobW9kKSB7XG4gICAgICAgICAgICAgICAgICAgIGdldE1vZHVsZShkZXBNYXApLmVuYWJsZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogSW50ZXJuYWwgbWV0aG9kIHVzZWQgYnkgZW52aXJvbm1lbnQgYWRhcHRlcnMgdG8gY29tcGxldGUgYSBsb2FkIGV2ZW50LlxuICAgICAgICAgICAgICogQSBsb2FkIGV2ZW50IGNvdWxkIGJlIGEgc2NyaXB0IGxvYWQgb3IganVzdCBhIGxvYWQgcGFzcyBmcm9tIGEgc3luY2hyb25vdXNcbiAgICAgICAgICAgICAqIGxvYWQgY2FsbC5cbiAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtb2R1bGVOYW1lIHRoZSBuYW1lIG9mIHRoZSBtb2R1bGUgdG8gcG90ZW50aWFsbHkgY29tcGxldGUuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNvbXBsZXRlTG9hZDogZnVuY3Rpb24gKG1vZHVsZU5hbWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZm91bmQsIGFyZ3MsIG1vZCxcbiAgICAgICAgICAgICAgICAgICAgc2hpbSA9IGdldE93bihjb25maWcuc2hpbSwgbW9kdWxlTmFtZSkgfHwge30sXG4gICAgICAgICAgICAgICAgICAgIHNoRXhwb3J0cyA9IHNoaW0uZXhwb3J0cztcblxuICAgICAgICAgICAgICAgIHRha2VHbG9iYWxRdWV1ZSgpO1xuXG4gICAgICAgICAgICAgICAgd2hpbGUgKGRlZlF1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBhcmdzID0gZGVmUXVldWUuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3NbMF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3NbMF0gPSBtb2R1bGVOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9JZiBhbHJlYWR5IGZvdW5kIGFuIGFub255bW91cyBtb2R1bGUgYW5kIGJvdW5kIGl0XG4gICAgICAgICAgICAgICAgICAgICAgICAvL3RvIHRoaXMgbmFtZSwgdGhlbiB0aGlzIGlzIHNvbWUgb3RoZXIgYW5vbiBtb2R1bGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vd2FpdGluZyBmb3IgaXRzIGNvbXBsZXRlTG9hZCB0byBmaXJlLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXJnc1swXSA9PT0gbW9kdWxlTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9Gb3VuZCBtYXRjaGluZyBkZWZpbmUgY2FsbCBmb3IgdGhpcyBzY3JpcHQhXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjYWxsR2V0TW9kdWxlKGFyZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250ZXh0LmRlZlF1ZXVlTWFwID0ge307XG5cbiAgICAgICAgICAgICAgICAvL0RvIHRoaXMgYWZ0ZXIgdGhlIGN5Y2xlIG9mIGNhbGxHZXRNb2R1bGUgaW4gY2FzZSB0aGUgcmVzdWx0XG4gICAgICAgICAgICAgICAgLy9vZiB0aG9zZSBjYWxscy9pbml0IGNhbGxzIGNoYW5nZXMgdGhlIHJlZ2lzdHJ5LlxuICAgICAgICAgICAgICAgIG1vZCA9IGdldE93bihyZWdpc3RyeSwgbW9kdWxlTmFtZSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kICYmICFoYXNQcm9wKGRlZmluZWQsIG1vZHVsZU5hbWUpICYmIG1vZCAmJiAhbW9kLmluaXRlZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnLmVuZm9yY2VEZWZpbmUgJiYgKCFzaEV4cG9ydHMgfHwgIWdldEdsb2JhbChzaEV4cG9ydHMpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc1BhdGhGYWxsYmFjayhtb2R1bGVOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uRXJyb3IobWFrZUVycm9yKCdub2RlZmluZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTm8gZGVmaW5lIGNhbGwgZm9yICcgKyBtb2R1bGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFttb2R1bGVOYW1lXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9BIHNjcmlwdCB0aGF0IGRvZXMgbm90IGNhbGwgZGVmaW5lKCksIHNvIGp1c3Qgc2ltdWxhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhlIGNhbGwgZm9yIGl0LlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbEdldE1vZHVsZShbbW9kdWxlTmFtZSwgKHNoaW0uZGVwcyB8fCBbXSksIHNoaW0uZXhwb3J0c0ZuXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjaGVja0xvYWRlZCgpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDb252ZXJ0cyBhIG1vZHVsZSBuYW1lIHRvIGEgZmlsZSBwYXRoLiBTdXBwb3J0cyBjYXNlcyB3aGVyZVxuICAgICAgICAgICAgICogbW9kdWxlTmFtZSBtYXkgYWN0dWFsbHkgYmUganVzdCBhbiBVUkwuXG4gICAgICAgICAgICAgKiBOb3RlIHRoYXQgaXQgKipkb2VzIG5vdCoqIGNhbGwgbm9ybWFsaXplIG9uIHRoZSBtb2R1bGVOYW1lLFxuICAgICAgICAgICAgICogaXQgaXMgYXNzdW1lZCB0byBoYXZlIGFscmVhZHkgYmVlbiBub3JtYWxpemVkLiBUaGlzIGlzIGFuXG4gICAgICAgICAgICAgKiBpbnRlcm5hbCBBUEksIG5vdCBhIHB1YmxpYyBvbmUuIFVzZSB0b1VybCBmb3IgdGhlIHB1YmxpYyBBUEkuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIG5hbWVUb1VybDogZnVuY3Rpb24gKG1vZHVsZU5hbWUsIGV4dCwgc2tpcEV4dCkge1xuICAgICAgICAgICAgICAgIHZhciBwYXRocywgc3ltcywgaSwgcGFyZW50TW9kdWxlLCB1cmwsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudFBhdGgsIGJ1bmRsZUlkLFxuICAgICAgICAgICAgICAgICAgICBwa2dNYWluID0gZ2V0T3duKGNvbmZpZy5wa2dzLCBtb2R1bGVOYW1lKTtcblxuICAgICAgICAgICAgICAgIGlmIChwa2dNYWluKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZU5hbWUgPSBwa2dNYWluO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGJ1bmRsZUlkID0gZ2V0T3duKGJ1bmRsZXNNYXAsIG1vZHVsZU5hbWUpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGJ1bmRsZUlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0Lm5hbWVUb1VybChidW5kbGVJZCwgZXh0LCBza2lwRXh0KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL0lmIGEgY29sb24gaXMgaW4gdGhlIFVSTCwgaXQgaW5kaWNhdGVzIGEgcHJvdG9jb2wgaXMgdXNlZCBhbmQgaXQgaXMganVzdFxuICAgICAgICAgICAgICAgIC8vYW4gVVJMIHRvIGEgZmlsZSwgb3IgaWYgaXQgc3RhcnRzIHdpdGggYSBzbGFzaCwgY29udGFpbnMgYSBxdWVyeSBhcmcgKGkuZS4gPylcbiAgICAgICAgICAgICAgICAvL29yIGVuZHMgd2l0aCAuanMsIHRoZW4gYXNzdW1lIHRoZSB1c2VyIG1lYW50IHRvIHVzZSBhbiB1cmwgYW5kIG5vdCBhIG1vZHVsZSBpZC5cbiAgICAgICAgICAgICAgICAvL1RoZSBzbGFzaCBpcyBpbXBvcnRhbnQgZm9yIHByb3RvY29sLWxlc3MgVVJMcyBhcyB3ZWxsIGFzIGZ1bGwgcGF0aHMuXG4gICAgICAgICAgICAgICAgaWYgKHJlcS5qc0V4dFJlZ0V4cC50ZXN0KG1vZHVsZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vSnVzdCBhIHBsYWluIHBhdGgsIG5vdCBtb2R1bGUgbmFtZSBsb29rdXAsIHNvIGp1c3QgcmV0dXJuIGl0LlxuICAgICAgICAgICAgICAgICAgICAvL0FkZCBleHRlbnNpb24gaWYgaXQgaXMgaW5jbHVkZWQuIFRoaXMgaXMgYSBiaXQgd29ua3ksIG9ubHkgbm9uLS5qcyB0aGluZ3MgcGFzc1xuICAgICAgICAgICAgICAgICAgICAvL2FuIGV4dGVuc2lvbiwgdGhpcyBtZXRob2QgcHJvYmFibHkgbmVlZHMgdG8gYmUgcmV3b3JrZWQuXG4gICAgICAgICAgICAgICAgICAgIHVybCA9IG1vZHVsZU5hbWUgKyAoZXh0IHx8ICcnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL0EgbW9kdWxlIHRoYXQgbmVlZHMgdG8gYmUgY29udmVydGVkIHRvIGEgcGF0aC5cbiAgICAgICAgICAgICAgICAgICAgcGF0aHMgPSBjb25maWcucGF0aHM7XG5cbiAgICAgICAgICAgICAgICAgICAgc3ltcyA9IG1vZHVsZU5hbWUuc3BsaXQoJy8nKTtcbiAgICAgICAgICAgICAgICAgICAgLy9Gb3IgZWFjaCBtb2R1bGUgbmFtZSBzZWdtZW50LCBzZWUgaWYgdGhlcmUgaXMgYSBwYXRoXG4gICAgICAgICAgICAgICAgICAgIC8vcmVnaXN0ZXJlZCBmb3IgaXQuIFN0YXJ0IHdpdGggbW9zdCBzcGVjaWZpYyBuYW1lXG4gICAgICAgICAgICAgICAgICAgIC8vYW5kIHdvcmsgdXAgZnJvbSBpdC5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gc3ltcy5sZW5ndGg7IGkgPiAwOyBpIC09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudE1vZHVsZSA9IHN5bXMuc2xpY2UoMCwgaSkuam9pbignLycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRQYXRoID0gZ2V0T3duKHBhdGhzLCBwYXJlbnRNb2R1bGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudFBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0lmIGFuIGFycmF5LCBpdCBtZWFucyB0aGVyZSBhcmUgYSBmZXcgY2hvaWNlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0Nob29zZSB0aGUgb25lIHRoYXQgaXMgZGVzaXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0FycmF5KHBhcmVudFBhdGgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudFBhdGggPSBwYXJlbnRQYXRoWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeW1zLnNwbGljZSgwLCBpLCBwYXJlbnRQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vSm9pbiB0aGUgcGF0aCBwYXJ0cyB0b2dldGhlciwgdGhlbiBmaWd1cmUgb3V0IGlmIGJhc2VVcmwgaXMgbmVlZGVkLlxuICAgICAgICAgICAgICAgICAgICB1cmwgPSBzeW1zLmpvaW4oJy8nKTtcbiAgICAgICAgICAgICAgICAgICAgdXJsICs9IChleHQgfHwgKC9eZGF0YVxcOnxeYmxvYlxcOnxcXD8vLnRlc3QodXJsKSB8fCBza2lwRXh0ID8gJycgOiAnLmpzJykpO1xuICAgICAgICAgICAgICAgICAgICB1cmwgPSAodXJsLmNoYXJBdCgwKSA9PT0gJy8nIHx8IHVybC5tYXRjaCgvXltcXHdcXCtcXC5cXC1dKzovKSA/ICcnIDogY29uZmlnLmJhc2VVcmwpICsgdXJsO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBjb25maWcudXJsQXJncyAmJiAhL15ibG9iXFw6Ly50ZXN0KHVybCkgP1xuICAgICAgICAgICAgICAgICAgICAgICB1cmwgKyBjb25maWcudXJsQXJncyhtb2R1bGVOYW1lLCB1cmwpIDogdXJsO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLy9EZWxlZ2F0ZXMgdG8gcmVxLmxvYWQuIEJyb2tlbiBvdXQgYXMgYSBzZXBhcmF0ZSBmdW5jdGlvbiB0b1xuICAgICAgICAgICAgLy9hbGxvdyBvdmVycmlkaW5nIGluIHRoZSBvcHRpbWl6ZXIuXG4gICAgICAgICAgICBsb2FkOiBmdW5jdGlvbiAoaWQsIHVybCkge1xuICAgICAgICAgICAgICAgIHJlcS5sb2FkKGNvbnRleHQsIGlkLCB1cmwpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFeGVjdXRlcyBhIG1vZHVsZSBjYWxsYmFjayBmdW5jdGlvbi4gQnJva2VuIG91dCBhcyBhIHNlcGFyYXRlIGZ1bmN0aW9uXG4gICAgICAgICAgICAgKiBzb2xlbHkgdG8gYWxsb3cgdGhlIGJ1aWxkIHN5c3RlbSB0byBzZXF1ZW5jZSB0aGUgZmlsZXMgaW4gdGhlIGJ1aWx0XG4gICAgICAgICAgICAgKiBsYXllciBpbiB0aGUgcmlnaHQgc2VxdWVuY2UuXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZXhlY0NiOiBmdW5jdGlvbiAobmFtZSwgY2FsbGJhY2ssIGFyZ3MsIGV4cG9ydHMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkoZXhwb3J0cywgYXJncyk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIGNhbGxiYWNrIGZvciBzY3JpcHQgbG9hZHMsIHVzZWQgdG8gY2hlY2sgc3RhdHVzIG9mIGxvYWRpbmcuXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHBhcmFtIHtFdmVudH0gZXZ0IHRoZSBldmVudCBmcm9tIHRoZSBicm93c2VyIGZvciB0aGUgc2NyaXB0XG4gICAgICAgICAgICAgKiB0aGF0IHdhcyBsb2FkZWQuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIG9uU2NyaXB0TG9hZDogZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgIC8vVXNpbmcgY3VycmVudFRhcmdldCBpbnN0ZWFkIG9mIHRhcmdldCBmb3IgRmlyZWZveCAyLjAncyBzYWtlLiBOb3RcbiAgICAgICAgICAgICAgICAvL2FsbCBvbGQgYnJvd3NlcnMgd2lsbCBiZSBzdXBwb3J0ZWQsIGJ1dCB0aGlzIG9uZSB3YXMgZWFzeSBlbm91Z2hcbiAgICAgICAgICAgICAgICAvL3RvIHN1cHBvcnQgYW5kIHN0aWxsIG1ha2VzIHNlbnNlLlxuICAgICAgICAgICAgICAgIGlmIChldnQudHlwZSA9PT0gJ2xvYWQnIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAocmVhZHlSZWdFeHAudGVzdCgoZXZ0LmN1cnJlbnRUYXJnZXQgfHwgZXZ0LnNyY0VsZW1lbnQpLnJlYWR5U3RhdGUpKSkge1xuICAgICAgICAgICAgICAgICAgICAvL1Jlc2V0IGludGVyYWN0aXZlIHNjcmlwdCBzbyBhIHNjcmlwdCBub2RlIGlzIG5vdCBoZWxkIG9udG8gZm9yXG4gICAgICAgICAgICAgICAgICAgIC8vdG8gbG9uZy5cbiAgICAgICAgICAgICAgICAgICAgaW50ZXJhY3RpdmVTY3JpcHQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vUHVsbCBvdXQgdGhlIG5hbWUgb2YgdGhlIG1vZHVsZSBhbmQgdGhlIGNvbnRleHQuXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gZ2V0U2NyaXB0RGF0YShldnQpO1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNvbXBsZXRlTG9hZChkYXRhLmlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENhbGxiYWNrIGZvciBzY3JpcHQgZXJyb3JzLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBvblNjcmlwdEVycm9yOiBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBnZXRTY3JpcHREYXRhKGV2dCk7XG4gICAgICAgICAgICAgICAgaWYgKCFoYXNQYXRoRmFsbGJhY2soZGF0YS5pZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZWFjaFByb3AocmVnaXN0cnksIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkuaW5kZXhPZignX0ByJykgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYWNoKHZhbHVlLmRlcE1hcHMsIGZ1bmN0aW9uKGRlcE1hcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVwTWFwLmlkID09PSBkYXRhLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25FcnJvcihtYWtlRXJyb3IoJ3NjcmlwdGVycm9yJywgJ1NjcmlwdCBlcnJvciBmb3IgXCInICsgZGF0YS5pZCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocGFyZW50cy5sZW5ndGggP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1wiLCBuZWVkZWQgYnk6ICcgKyBwYXJlbnRzLmpvaW4oJywgJykgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1wiJyksIGV2dCwgW2RhdGEuaWRdKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnRleHQucmVxdWlyZSA9IGNvbnRleHQubWFrZVJlcXVpcmUoKTtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFpbiBlbnRyeSBwb2ludC5cbiAgICAgKlxuICAgICAqIElmIHRoZSBvbmx5IGFyZ3VtZW50IHRvIHJlcXVpcmUgaXMgYSBzdHJpbmcsIHRoZW4gdGhlIG1vZHVsZSB0aGF0XG4gICAgICogaXMgcmVwcmVzZW50ZWQgYnkgdGhhdCBzdHJpbmcgaXMgZmV0Y2hlZCBmb3IgdGhlIGFwcHJvcHJpYXRlIGNvbnRleHQuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgZmlyc3QgYXJndW1lbnQgaXMgYW4gYXJyYXksIHRoZW4gaXQgd2lsbCBiZSB0cmVhdGVkIGFzIGFuIGFycmF5XG4gICAgICogb2YgZGVwZW5kZW5jeSBzdHJpbmcgbmFtZXMgdG8gZmV0Y2guIEFuIG9wdGlvbmFsIGZ1bmN0aW9uIGNhbGxiYWNrIGNhblxuICAgICAqIGJlIHNwZWNpZmllZCB0byBleGVjdXRlIHdoZW4gYWxsIG9mIHRob3NlIGRlcGVuZGVuY2llcyBhcmUgYXZhaWxhYmxlLlxuICAgICAqXG4gICAgICogTWFrZSBhIGxvY2FsIHJlcSB2YXJpYWJsZSB0byBoZWxwIENhamEgY29tcGxpYW5jZSAoaXQgYXNzdW1lcyB0aGluZ3NcbiAgICAgKiBvbiBhIHJlcXVpcmUgdGhhdCBhcmUgbm90IHN0YW5kYXJkaXplZCksIGFuZCB0byBnaXZlIGEgc2hvcnRcbiAgICAgKiBuYW1lIGZvciBtaW5pZmljYXRpb24vbG9jYWwgc2NvcGUgdXNlLlxuICAgICAqL1xuICAgIHJlcSA9IHJlcXVpcmVqcyA9IGZ1bmN0aW9uIChkZXBzLCBjYWxsYmFjaywgZXJyYmFjaywgb3B0aW9uYWwpIHtcblxuICAgICAgICAvL0ZpbmQgdGhlIHJpZ2h0IGNvbnRleHQsIHVzZSBkZWZhdWx0XG4gICAgICAgIHZhciBjb250ZXh0LCBjb25maWcsXG4gICAgICAgICAgICBjb250ZXh0TmFtZSA9IGRlZkNvbnRleHROYW1lO1xuXG4gICAgICAgIC8vIERldGVybWluZSBpZiBoYXZlIGNvbmZpZyBvYmplY3QgaW4gdGhlIGNhbGwuXG4gICAgICAgIGlmICghaXNBcnJheShkZXBzKSAmJiB0eXBlb2YgZGVwcyAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIC8vIGRlcHMgaXMgYSBjb25maWcgb2JqZWN0XG4gICAgICAgICAgICBjb25maWcgPSBkZXBzO1xuICAgICAgICAgICAgaWYgKGlzQXJyYXkoY2FsbGJhY2spKSB7XG4gICAgICAgICAgICAgICAgLy8gQWRqdXN0IGFyZ3MgaWYgdGhlcmUgYXJlIGRlcGVuZGVuY2llc1xuICAgICAgICAgICAgICAgIGRlcHMgPSBjYWxsYmFjaztcbiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGVycmJhY2s7XG4gICAgICAgICAgICAgICAgZXJyYmFjayA9IG9wdGlvbmFsO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZXBzID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29uZmlnICYmIGNvbmZpZy5jb250ZXh0KSB7XG4gICAgICAgICAgICBjb250ZXh0TmFtZSA9IGNvbmZpZy5jb250ZXh0O1xuICAgICAgICB9XG5cbiAgICAgICAgY29udGV4dCA9IGdldE93bihjb250ZXh0cywgY29udGV4dE5hbWUpO1xuICAgICAgICBpZiAoIWNvbnRleHQpIHtcbiAgICAgICAgICAgIGNvbnRleHQgPSBjb250ZXh0c1tjb250ZXh0TmFtZV0gPSByZXEucy5uZXdDb250ZXh0KGNvbnRleHROYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb25maWcpIHtcbiAgICAgICAgICAgIGNvbnRleHQuY29uZmlndXJlKGNvbmZpZyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY29udGV4dC5yZXF1aXJlKGRlcHMsIGNhbGxiYWNrLCBlcnJiYWNrKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU3VwcG9ydCByZXF1aXJlLmNvbmZpZygpIHRvIG1ha2UgaXQgZWFzaWVyIHRvIGNvb3BlcmF0ZSB3aXRoIG90aGVyXG4gICAgICogQU1EIGxvYWRlcnMgb24gZ2xvYmFsbHkgYWdyZWVkIG5hbWVzLlxuICAgICAqL1xuICAgIHJlcS5jb25maWcgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiByZXEoY29uZmlnKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRXhlY3V0ZSBzb21ldGhpbmcgYWZ0ZXIgdGhlIGN1cnJlbnQgdGlja1xuICAgICAqIG9mIHRoZSBldmVudCBsb29wLiBPdmVycmlkZSBmb3Igb3RoZXIgZW52c1xuICAgICAqIHRoYXQgaGF2ZSBhIGJldHRlciBzb2x1dGlvbiB0aGFuIHNldFRpbWVvdXQuXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGZuIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgbGF0ZXIuXG4gICAgICovXG4gICAgcmVxLm5leHRUaWNrID0gdHlwZW9mIHNldFRpbWVvdXQgIT09ICd1bmRlZmluZWQnID8gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZm4sIDQpO1xuICAgIH0gOiBmdW5jdGlvbiAoZm4pIHsgZm4oKTsgfTtcblxuICAgIC8qKlxuICAgICAqIEV4cG9ydCByZXF1aXJlIGFzIGEgZ2xvYmFsLCBidXQgb25seSBpZiBpdCBkb2VzIG5vdCBhbHJlYWR5IGV4aXN0LlxuICAgICAqL1xuICAgIGlmICghcmVxdWlyZSkge1xuICAgICAgICByZXF1aXJlID0gcmVxO1xuICAgIH1cblxuICAgIHJlcS52ZXJzaW9uID0gdmVyc2lvbjtcblxuICAgIC8vVXNlZCB0byBmaWx0ZXIgb3V0IGRlcGVuZGVuY2llcyB0aGF0IGFyZSBhbHJlYWR5IHBhdGhzLlxuICAgIHJlcS5qc0V4dFJlZ0V4cCA9IC9eXFwvfDp8XFw/fFxcLmpzJC87XG4gICAgcmVxLmlzQnJvd3NlciA9IGlzQnJvd3NlcjtcbiAgICBzID0gcmVxLnMgPSB7XG4gICAgICAgIGNvbnRleHRzOiBjb250ZXh0cyxcbiAgICAgICAgbmV3Q29udGV4dDogbmV3Q29udGV4dFxuICAgIH07XG5cbiAgICAvL0NyZWF0ZSBkZWZhdWx0IGNvbnRleHQuXG4gICAgcmVxKHt9KTtcblxuICAgIC8vRXhwb3J0cyBzb21lIGNvbnRleHQtc2Vuc2l0aXZlIG1ldGhvZHMgb24gZ2xvYmFsIHJlcXVpcmUuXG4gICAgZWFjaChbXG4gICAgICAgICd0b1VybCcsXG4gICAgICAgICd1bmRlZicsXG4gICAgICAgICdkZWZpbmVkJyxcbiAgICAgICAgJ3NwZWNpZmllZCdcbiAgICBdLCBmdW5jdGlvbiAocHJvcCkge1xuICAgICAgICAvL1JlZmVyZW5jZSBmcm9tIGNvbnRleHRzIGluc3RlYWQgb2YgZWFybHkgYmluZGluZyB0byBkZWZhdWx0IGNvbnRleHQsXG4gICAgICAgIC8vc28gdGhhdCBkdXJpbmcgYnVpbGRzLCB0aGUgbGF0ZXN0IGluc3RhbmNlIG9mIHRoZSBkZWZhdWx0IGNvbnRleHRcbiAgICAgICAgLy93aXRoIGl0cyBjb25maWcgZ2V0cyB1c2VkLlxuICAgICAgICByZXFbcHJvcF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY3R4ID0gY29udGV4dHNbZGVmQ29udGV4dE5hbWVdO1xuICAgICAgICAgICAgcmV0dXJuIGN0eC5yZXF1aXJlW3Byb3BdLmFwcGx5KGN0eCwgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICB9KTtcblxuICAgIGlmIChpc0Jyb3dzZXIpIHtcbiAgICAgICAgaGVhZCA9IHMuaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG4gICAgICAgIC8vSWYgQkFTRSB0YWcgaXMgaW4gcGxheSwgdXNpbmcgYXBwZW5kQ2hpbGQgaXMgYSBwcm9ibGVtIGZvciBJRTYuXG4gICAgICAgIC8vV2hlbiB0aGF0IGJyb3dzZXIgZGllcywgdGhpcyBjYW4gYmUgcmVtb3ZlZC4gRGV0YWlscyBpbiB0aGlzIGpRdWVyeSBidWc6XG4gICAgICAgIC8vaHR0cDovL2Rldi5qcXVlcnkuY29tL3RpY2tldC8yNzA5XG4gICAgICAgIGJhc2VFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2Jhc2UnKVswXTtcbiAgICAgICAgaWYgKGJhc2VFbGVtZW50KSB7XG4gICAgICAgICAgICBoZWFkID0gcy5oZWFkID0gYmFzZUVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFueSBlcnJvcnMgdGhhdCByZXF1aXJlIGV4cGxpY2l0bHkgZ2VuZXJhdGVzIHdpbGwgYmUgcGFzc2VkIHRvIHRoaXNcbiAgICAgKiBmdW5jdGlvbi4gSW50ZXJjZXB0L292ZXJyaWRlIGl0IGlmIHlvdSB3YW50IGN1c3RvbSBlcnJvciBoYW5kbGluZy5cbiAgICAgKiBAcGFyYW0ge0Vycm9yfSBlcnIgdGhlIGVycm9yIG9iamVjdC5cbiAgICAgKi9cbiAgICByZXEub25FcnJvciA9IGRlZmF1bHRPbkVycm9yO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyB0aGUgbm9kZSBmb3IgdGhlIGxvYWQgY29tbWFuZC4gT25seSB1c2VkIGluIGJyb3dzZXIgZW52cy5cbiAgICAgKi9cbiAgICByZXEuY3JlYXRlTm9kZSA9IGZ1bmN0aW9uIChjb25maWcsIG1vZHVsZU5hbWUsIHVybCkge1xuICAgICAgICB2YXIgbm9kZSA9IGNvbmZpZy54aHRtbCA/XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sJywgJ2h0bWw6c2NyaXB0JykgOlxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgICBub2RlLnR5cGUgPSBjb25maWcuc2NyaXB0VHlwZSB8fCAndGV4dC9qYXZhc2NyaXB0JztcbiAgICAgICAgbm9kZS5jaGFyc2V0ID0gJ3V0Zi04JztcbiAgICAgICAgbm9kZS5hc3luYyA9IHRydWU7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBEb2VzIHRoZSByZXF1ZXN0IHRvIGxvYWQgYSBtb2R1bGUgZm9yIHRoZSBicm93c2VyIGNhc2UuXG4gICAgICogTWFrZSB0aGlzIGEgc2VwYXJhdGUgZnVuY3Rpb24gdG8gYWxsb3cgb3RoZXIgZW52aXJvbm1lbnRzXG4gICAgICogdG8gb3ZlcnJpZGUgaXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29udGV4dCB0aGUgcmVxdWlyZSBjb250ZXh0IHRvIGZpbmQgc3RhdGUuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1vZHVsZU5hbWUgdGhlIG5hbWUgb2YgdGhlIG1vZHVsZS5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gdXJsIHRoZSBVUkwgdG8gdGhlIG1vZHVsZS5cbiAgICAgKi9cbiAgICByZXEubG9hZCA9IGZ1bmN0aW9uIChjb250ZXh0LCBtb2R1bGVOYW1lLCB1cmwpIHtcbiAgICAgICAgdmFyIGNvbmZpZyA9IChjb250ZXh0ICYmIGNvbnRleHQuY29uZmlnKSB8fCB7fSxcbiAgICAgICAgICAgIG5vZGU7XG4gICAgICAgIGlmIChpc0Jyb3dzZXIpIHtcbiAgICAgICAgICAgIC8vSW4gdGhlIGJyb3dzZXIgc28gdXNlIGEgc2NyaXB0IHRhZ1xuICAgICAgICAgICAgbm9kZSA9IHJlcS5jcmVhdGVOb2RlKGNvbmZpZywgbW9kdWxlTmFtZSwgdXJsKTtcblxuICAgICAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtcmVxdWlyZWNvbnRleHQnLCBjb250ZXh0LmNvbnRleHROYW1lKTtcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdkYXRhLXJlcXVpcmVtb2R1bGUnLCBtb2R1bGVOYW1lKTtcblxuICAgICAgICAgICAgLy9TZXQgdXAgbG9hZCBsaXN0ZW5lci4gVGVzdCBhdHRhY2hFdmVudCBmaXJzdCBiZWNhdXNlIElFOSBoYXNcbiAgICAgICAgICAgIC8vYSBzdWJ0bGUgaXNzdWUgaW4gaXRzIGFkZEV2ZW50TGlzdGVuZXIgYW5kIHNjcmlwdCBvbmxvYWQgZmlyaW5nc1xuICAgICAgICAgICAgLy90aGF0IGRvIG5vdCBtYXRjaCB0aGUgYmVoYXZpb3Igb2YgYWxsIG90aGVyIGJyb3dzZXJzIHdpdGhcbiAgICAgICAgICAgIC8vYWRkRXZlbnRMaXN0ZW5lciBzdXBwb3J0LCB3aGljaCBmaXJlIHRoZSBvbmxvYWQgZXZlbnQgZm9yIGFcbiAgICAgICAgICAgIC8vc2NyaXB0IHJpZ2h0IGFmdGVyIHRoZSBzY3JpcHQgZXhlY3V0aW9uLiBTZWU6XG4gICAgICAgICAgICAvL2h0dHBzOi8vY29ubmVjdC5taWNyb3NvZnQuY29tL0lFL2ZlZWRiYWNrL2RldGFpbHMvNjQ4MDU3L3NjcmlwdC1vbmxvYWQtZXZlbnQtaXMtbm90LWZpcmVkLWltbWVkaWF0ZWx5LWFmdGVyLXNjcmlwdC1leGVjdXRpb25cbiAgICAgICAgICAgIC8vVU5GT1JUVU5BVEVMWSBPcGVyYSBpbXBsZW1lbnRzIGF0dGFjaEV2ZW50IGJ1dCBkb2VzIG5vdCBmb2xsb3cgdGhlIHNjcmlwdFxuICAgICAgICAgICAgLy9zY3JpcHQgZXhlY3V0aW9uIG1vZGUuXG4gICAgICAgICAgICBpZiAobm9kZS5hdHRhY2hFdmVudCAmJlxuICAgICAgICAgICAgICAgICAgICAvL0NoZWNrIGlmIG5vZGUuYXR0YWNoRXZlbnQgaXMgYXJ0aWZpY2lhbGx5IGFkZGVkIGJ5IGN1c3RvbSBzY3JpcHQgb3JcbiAgICAgICAgICAgICAgICAgICAgLy9uYXRpdmVseSBzdXBwb3J0ZWQgYnkgYnJvd3NlclxuICAgICAgICAgICAgICAgICAgICAvL3JlYWQgaHR0cHM6Ly9naXRodWIuY29tL3JlcXVpcmVqcy9yZXF1aXJlanMvaXNzdWVzLzE4N1xuICAgICAgICAgICAgICAgICAgICAvL2lmIHdlIGNhbiBOT1QgZmluZCBbbmF0aXZlIGNvZGVdIHRoZW4gaXQgbXVzdCBOT1QgbmF0aXZlbHkgc3VwcG9ydGVkLlxuICAgICAgICAgICAgICAgICAgICAvL2luIElFOCwgbm9kZS5hdHRhY2hFdmVudCBkb2VzIG5vdCBoYXZlIHRvU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgLy9Ob3RlIHRoZSB0ZXN0IGZvciBcIltuYXRpdmUgY29kZVwiIHdpdGggbm8gY2xvc2luZyBicmFjZSwgc2VlOlxuICAgICAgICAgICAgICAgICAgICAvL2h0dHBzOi8vZ2l0aHViLmNvbS9yZXF1aXJlanMvcmVxdWlyZWpzL2lzc3Vlcy8yNzNcbiAgICAgICAgICAgICAgICAgICAgIShub2RlLmF0dGFjaEV2ZW50LnRvU3RyaW5nICYmIG5vZGUuYXR0YWNoRXZlbnQudG9TdHJpbmcoKS5pbmRleE9mKCdbbmF0aXZlIGNvZGUnKSA8IDApICYmXG4gICAgICAgICAgICAgICAgICAgICFpc09wZXJhKSB7XG4gICAgICAgICAgICAgICAgLy9Qcm9iYWJseSBJRS4gSUUgKGF0IGxlYXN0IDYtOCkgZG8gbm90IGZpcmVcbiAgICAgICAgICAgICAgICAvL3NjcmlwdCBvbmxvYWQgcmlnaHQgYWZ0ZXIgZXhlY3V0aW5nIHRoZSBzY3JpcHQsIHNvXG4gICAgICAgICAgICAgICAgLy93ZSBjYW5ub3QgdGllIHRoZSBhbm9ueW1vdXMgZGVmaW5lIGNhbGwgdG8gYSBuYW1lLlxuICAgICAgICAgICAgICAgIC8vSG93ZXZlciwgSUUgcmVwb3J0cyB0aGUgc2NyaXB0IGFzIGJlaW5nIGluICdpbnRlcmFjdGl2ZSdcbiAgICAgICAgICAgICAgICAvL3JlYWR5U3RhdGUgYXQgdGhlIHRpbWUgb2YgdGhlIGRlZmluZSBjYWxsLlxuICAgICAgICAgICAgICAgIHVzZUludGVyYWN0aXZlID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIG5vZGUuYXR0YWNoRXZlbnQoJ29ucmVhZHlzdGF0ZWNoYW5nZScsIGNvbnRleHQub25TY3JpcHRMb2FkKTtcbiAgICAgICAgICAgICAgICAvL0l0IHdvdWxkIGJlIGdyZWF0IHRvIGFkZCBhbiBlcnJvciBoYW5kbGVyIGhlcmUgdG8gY2F0Y2hcbiAgICAgICAgICAgICAgICAvLzQwNHMgaW4gSUU5Ky4gSG93ZXZlciwgb25yZWFkeXN0YXRlY2hhbmdlIHdpbGwgZmlyZSBiZWZvcmVcbiAgICAgICAgICAgICAgICAvL3RoZSBlcnJvciBoYW5kbGVyLCBzbyB0aGF0IGRvZXMgbm90IGhlbHAuIElmIGFkZEV2ZW50TGlzdGVuZXJcbiAgICAgICAgICAgICAgICAvL2lzIHVzZWQsIHRoZW4gSUUgd2lsbCBmaXJlIGVycm9yIGJlZm9yZSBsb2FkLCBidXQgd2UgY2Fubm90XG4gICAgICAgICAgICAgICAgLy91c2UgdGhhdCBwYXRod2F5IGdpdmVuIHRoZSBjb25uZWN0Lm1pY3Jvc29mdC5jb20gaXNzdWVcbiAgICAgICAgICAgICAgICAvL21lbnRpb25lZCBhYm92ZSBhYm91dCBub3QgZG9pbmcgdGhlICdzY3JpcHQgZXhlY3V0ZSxcbiAgICAgICAgICAgICAgICAvL3RoZW4gZmlyZSB0aGUgc2NyaXB0IGxvYWQgZXZlbnQgbGlzdGVuZXIgYmVmb3JlIGV4ZWN1dGVcbiAgICAgICAgICAgICAgICAvL25leHQgc2NyaXB0JyB0aGF0IG90aGVyIGJyb3dzZXJzIGRvLlxuICAgICAgICAgICAgICAgIC8vQmVzdCBob3BlOiBJRTEwIGZpeGVzIHRoZSBpc3N1ZXMsXG4gICAgICAgICAgICAgICAgLy9hbmQgdGhlbiBkZXN0cm95cyBhbGwgaW5zdGFsbHMgb2YgSUUgNi05LlxuICAgICAgICAgICAgICAgIC8vbm9kZS5hdHRhY2hFdmVudCgnb25lcnJvcicsIGNvbnRleHQub25TY3JpcHRFcnJvcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGNvbnRleHQub25TY3JpcHRMb2FkLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGNvbnRleHQub25TY3JpcHRFcnJvciwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbm9kZS5zcmMgPSB1cmw7XG5cbiAgICAgICAgICAgIC8vQ2FsbGluZyBvbk5vZGVDcmVhdGVkIGFmdGVyIGFsbCBwcm9wZXJ0aWVzIG9uIHRoZSBub2RlIGhhdmUgYmVlblxuICAgICAgICAgICAgLy9zZXQsIGJ1dCBiZWZvcmUgaXQgaXMgcGxhY2VkIGluIHRoZSBET00uXG4gICAgICAgICAgICBpZiAoY29uZmlnLm9uTm9kZUNyZWF0ZWQpIHtcbiAgICAgICAgICAgICAgICBjb25maWcub25Ob2RlQ3JlYXRlZChub2RlLCBjb25maWcsIG1vZHVsZU5hbWUsIHVybCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vRm9yIHNvbWUgY2FjaGUgY2FzZXMgaW4gSUUgNi04LCB0aGUgc2NyaXB0IGV4ZWN1dGVzIGJlZm9yZSB0aGUgZW5kXG4gICAgICAgICAgICAvL29mIHRoZSBhcHBlbmRDaGlsZCBleGVjdXRpb24sIHNvIHRvIHRpZSBhbiBhbm9ueW1vdXMgZGVmaW5lXG4gICAgICAgICAgICAvL2NhbGwgdG8gdGhlIG1vZHVsZSBuYW1lICh3aGljaCBpcyBzdG9yZWQgb24gdGhlIG5vZGUpLCBob2xkIG9uXG4gICAgICAgICAgICAvL3RvIGEgcmVmZXJlbmNlIHRvIHRoaXMgbm9kZSwgYnV0IGNsZWFyIGFmdGVyIHRoZSBET00gaW5zZXJ0aW9uLlxuICAgICAgICAgICAgY3VycmVudGx5QWRkaW5nU2NyaXB0ID0gbm9kZTtcbiAgICAgICAgICAgIGlmIChiYXNlRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGhlYWQuaW5zZXJ0QmVmb3JlKG5vZGUsIGJhc2VFbGVtZW50KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaGVhZC5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRseUFkZGluZ1NjcmlwdCA9IG51bGw7XG5cbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9IGVsc2UgaWYgKGlzV2ViV29ya2VyKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vSW4gYSB3ZWIgd29ya2VyLCB1c2UgaW1wb3J0U2NyaXB0cy4gVGhpcyBpcyBub3QgYSB2ZXJ5XG4gICAgICAgICAgICAgICAgLy9lZmZpY2llbnQgdXNlIG9mIGltcG9ydFNjcmlwdHMsIGltcG9ydFNjcmlwdHMgd2lsbCBibG9jayB1bnRpbFxuICAgICAgICAgICAgICAgIC8vaXRzIHNjcmlwdCBpcyBkb3dubG9hZGVkIGFuZCBldmFsdWF0ZWQuIEhvd2V2ZXIsIGlmIHdlYiB3b3JrZXJzXG4gICAgICAgICAgICAgICAgLy9hcmUgaW4gcGxheSwgdGhlIGV4cGVjdGF0aW9uIGlzIHRoYXQgYSBidWlsZCBoYXMgYmVlbiBkb25lIHNvXG4gICAgICAgICAgICAgICAgLy90aGF0IG9ubHkgb25lIHNjcmlwdCBuZWVkcyB0byBiZSBsb2FkZWQgYW55d2F5LiBUaGlzIG1heSBuZWVkXG4gICAgICAgICAgICAgICAgLy90byBiZSByZWV2YWx1YXRlZCBpZiBvdGhlciB1c2UgY2FzZXMgYmVjb21lIGNvbW1vbi5cblxuICAgICAgICAgICAgICAgIC8vIFBvc3QgYSB0YXNrIHRvIHRoZSBldmVudCBsb29wIHRvIHdvcmsgYXJvdW5kIGEgYnVnIGluIFdlYktpdFxuICAgICAgICAgICAgICAgIC8vIHdoZXJlIHRoZSB3b3JrZXIgZ2V0cyBnYXJiYWdlLWNvbGxlY3RlZCBhZnRlciBjYWxsaW5nXG4gICAgICAgICAgICAgICAgLy8gaW1wb3J0U2NyaXB0cygpOiBodHRwczovL3dlYmtpdC5vcmcvYi8xNTMzMTdcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge30sIDApO1xuICAgICAgICAgICAgICAgIGltcG9ydFNjcmlwdHModXJsKTtcblxuICAgICAgICAgICAgICAgIC8vQWNjb3VudCBmb3IgYW5vbnltb3VzIG1vZHVsZXNcbiAgICAgICAgICAgICAgICBjb250ZXh0LmNvbXBsZXRlTG9hZChtb2R1bGVOYW1lKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0Lm9uRXJyb3IobWFrZUVycm9yKCdpbXBvcnRzY3JpcHRzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ltcG9ydFNjcmlwdHMgZmFpbGVkIGZvciAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZU5hbWUgKyAnIGF0ICcgKyB1cmwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFttb2R1bGVOYW1lXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGdldEludGVyYWN0aXZlU2NyaXB0KCkge1xuICAgICAgICBpZiAoaW50ZXJhY3RpdmVTY3JpcHQgJiYgaW50ZXJhY3RpdmVTY3JpcHQucmVhZHlTdGF0ZSA9PT0gJ2ludGVyYWN0aXZlJykge1xuICAgICAgICAgICAgcmV0dXJuIGludGVyYWN0aXZlU2NyaXB0O1xuICAgICAgICB9XG5cbiAgICAgICAgZWFjaFJldmVyc2Uoc2NyaXB0cygpLCBmdW5jdGlvbiAoc2NyaXB0KSB7XG4gICAgICAgICAgICBpZiAoc2NyaXB0LnJlYWR5U3RhdGUgPT09ICdpbnRlcmFjdGl2ZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKGludGVyYWN0aXZlU2NyaXB0ID0gc2NyaXB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBpbnRlcmFjdGl2ZVNjcmlwdDtcbiAgICB9XG5cbiAgICAvL0xvb2sgZm9yIGEgZGF0YS1tYWluIHNjcmlwdCBhdHRyaWJ1dGUsIHdoaWNoIGNvdWxkIGFsc28gYWRqdXN0IHRoZSBiYXNlVXJsLlxuICAgIGlmIChpc0Jyb3dzZXIgJiYgIWNmZy5za2lwRGF0YU1haW4pIHtcbiAgICAgICAgLy9GaWd1cmUgb3V0IGJhc2VVcmwuIEdldCBpdCBmcm9tIHRoZSBzY3JpcHQgdGFnIHdpdGggcmVxdWlyZS5qcyBpbiBpdC5cbiAgICAgICAgZWFjaFJldmVyc2Uoc2NyaXB0cygpLCBmdW5jdGlvbiAoc2NyaXB0KSB7XG4gICAgICAgICAgICAvL1NldCB0aGUgJ2hlYWQnIHdoZXJlIHdlIGNhbiBhcHBlbmQgY2hpbGRyZW4gYnlcbiAgICAgICAgICAgIC8vdXNpbmcgdGhlIHNjcmlwdCdzIHBhcmVudC5cbiAgICAgICAgICAgIGlmICghaGVhZCkge1xuICAgICAgICAgICAgICAgIGhlYWQgPSBzY3JpcHQucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9Mb29rIGZvciBhIGRhdGEtbWFpbiBhdHRyaWJ1dGUgdG8gc2V0IG1haW4gc2NyaXB0IGZvciB0aGUgcGFnZVxuICAgICAgICAgICAgLy90byBsb2FkLiBJZiBpdCBpcyB0aGVyZSwgdGhlIHBhdGggdG8gZGF0YSBtYWluIGJlY29tZXMgdGhlXG4gICAgICAgICAgICAvL2Jhc2VVcmwsIGlmIGl0IGlzIG5vdCBhbHJlYWR5IHNldC5cbiAgICAgICAgICAgIGRhdGFNYWluID0gc2NyaXB0LmdldEF0dHJpYnV0ZSgnZGF0YS1tYWluJyk7XG4gICAgICAgICAgICBpZiAoZGF0YU1haW4pIHtcbiAgICAgICAgICAgICAgICAvL1ByZXNlcnZlIGRhdGFNYWluIGluIGNhc2UgaXQgaXMgYSBwYXRoIChpLmUuIGNvbnRhaW5zICc/JylcbiAgICAgICAgICAgICAgICBtYWluU2NyaXB0ID0gZGF0YU1haW47XG5cbiAgICAgICAgICAgICAgICAvL1NldCBmaW5hbCBiYXNlVXJsIGlmIHRoZXJlIGlzIG5vdCBhbHJlYWR5IGFuIGV4cGxpY2l0IG9uZSxcbiAgICAgICAgICAgICAgICAvL2J1dCBvbmx5IGRvIHNvIGlmIHRoZSBkYXRhLW1haW4gdmFsdWUgaXMgbm90IGEgbG9hZGVyIHBsdWdpblxuICAgICAgICAgICAgICAgIC8vbW9kdWxlIElELlxuICAgICAgICAgICAgICAgIGlmICghY2ZnLmJhc2VVcmwgJiYgbWFpblNjcmlwdC5pbmRleE9mKCchJykgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vUHVsbCBvZmYgdGhlIGRpcmVjdG9yeSBvZiBkYXRhLW1haW4gZm9yIHVzZSBhcyB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy9iYXNlVXJsLlxuICAgICAgICAgICAgICAgICAgICBzcmMgPSBtYWluU2NyaXB0LnNwbGl0KCcvJyk7XG4gICAgICAgICAgICAgICAgICAgIG1haW5TY3JpcHQgPSBzcmMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIHN1YlBhdGggPSBzcmMubGVuZ3RoID8gc3JjLmpvaW4oJy8nKSAgKyAnLycgOiAnLi8nO1xuXG4gICAgICAgICAgICAgICAgICAgIGNmZy5iYXNlVXJsID0gc3ViUGF0aDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL1N0cmlwIG9mZiBhbnkgdHJhaWxpbmcgLmpzIHNpbmNlIG1haW5TY3JpcHQgaXMgbm93XG4gICAgICAgICAgICAgICAgLy9saWtlIGEgbW9kdWxlIG5hbWUuXG4gICAgICAgICAgICAgICAgbWFpblNjcmlwdCA9IG1haW5TY3JpcHQucmVwbGFjZShqc1N1ZmZpeFJlZ0V4cCwgJycpO1xuXG4gICAgICAgICAgICAgICAgLy9JZiBtYWluU2NyaXB0IGlzIHN0aWxsIGEgcGF0aCwgZmFsbCBiYWNrIHRvIGRhdGFNYWluXG4gICAgICAgICAgICAgICAgaWYgKHJlcS5qc0V4dFJlZ0V4cC50ZXN0KG1haW5TY3JpcHQpKSB7XG4gICAgICAgICAgICAgICAgICAgIG1haW5TY3JpcHQgPSBkYXRhTWFpbjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL1B1dCB0aGUgZGF0YS1tYWluIHNjcmlwdCBpbiB0aGUgZmlsZXMgdG8gbG9hZC5cbiAgICAgICAgICAgICAgICBjZmcuZGVwcyA9IGNmZy5kZXBzID8gY2ZnLmRlcHMuY29uY2F0KG1haW5TY3JpcHQpIDogW21haW5TY3JpcHRdO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBmdW5jdGlvbiB0aGF0IGhhbmRsZXMgZGVmaW5pdGlvbnMgb2YgbW9kdWxlcy4gRGlmZmVycyBmcm9tXG4gICAgICogcmVxdWlyZSgpIGluIHRoYXQgYSBzdHJpbmcgZm9yIHRoZSBtb2R1bGUgc2hvdWxkIGJlIHRoZSBmaXJzdCBhcmd1bWVudCxcbiAgICAgKiBhbmQgdGhlIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgYWZ0ZXIgZGVwZW5kZW5jaWVzIGFyZSBsb2FkZWQgc2hvdWxkXG4gICAgICogcmV0dXJuIGEgdmFsdWUgdG8gZGVmaW5lIHRoZSBtb2R1bGUgY29ycmVzcG9uZGluZyB0byB0aGUgZmlyc3QgYXJndW1lbnQnc1xuICAgICAqIG5hbWUuXG4gICAgICovXG4gICAgZGVmaW5lID0gZnVuY3Rpb24gKG5hbWUsIGRlcHMsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBub2RlLCBjb250ZXh0O1xuXG4gICAgICAgIC8vQWxsb3cgZm9yIGFub255bW91cyBtb2R1bGVzXG4gICAgICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIC8vQWRqdXN0IGFyZ3MgYXBwcm9wcmlhdGVseVxuICAgICAgICAgICAgY2FsbGJhY2sgPSBkZXBzO1xuICAgICAgICAgICAgZGVwcyA9IG5hbWU7XG4gICAgICAgICAgICBuYW1lID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vVGhpcyBtb2R1bGUgbWF5IG5vdCBoYXZlIGRlcGVuZGVuY2llc1xuICAgICAgICBpZiAoIWlzQXJyYXkoZGVwcykpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gZGVwcztcbiAgICAgICAgICAgIGRlcHMgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9JZiBubyBuYW1lLCBhbmQgY2FsbGJhY2sgaXMgYSBmdW5jdGlvbiwgdGhlbiBmaWd1cmUgb3V0IGlmIGl0IGFcbiAgICAgICAgLy9Db21tb25KUyB0aGluZyB3aXRoIGRlcGVuZGVuY2llcy5cbiAgICAgICAgaWYgKCFkZXBzICYmIGlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICAgICAgICBkZXBzID0gW107XG4gICAgICAgICAgICAvL1JlbW92ZSBjb21tZW50cyBmcm9tIHRoZSBjYWxsYmFjayBzdHJpbmcsXG4gICAgICAgICAgICAvL2xvb2sgZm9yIHJlcXVpcmUgY2FsbHMsIGFuZCBwdWxsIHRoZW0gaW50byB0aGUgZGVwZW5kZW5jaWVzLFxuICAgICAgICAgICAgLy9idXQgb25seSBpZiB0aGVyZSBhcmUgZnVuY3Rpb24gYXJncy5cbiAgICAgICAgICAgIGlmIChjYWxsYmFjay5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICAudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZShjb21tZW50UmVnRXhwLCBjb21tZW50UmVwbGFjZSlcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoY2pzUmVxdWlyZVJlZ0V4cCwgZnVuY3Rpb24gKG1hdGNoLCBkZXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcHMucHVzaChkZXApO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vTWF5IGJlIGEgQ29tbW9uSlMgdGhpbmcgZXZlbiB3aXRob3V0IHJlcXVpcmUgY2FsbHMsIGJ1dCBzdGlsbFxuICAgICAgICAgICAgICAgIC8vY291bGQgdXNlIGV4cG9ydHMsIGFuZCBtb2R1bGUuIEF2b2lkIGRvaW5nIGV4cG9ydHMgYW5kIG1vZHVsZVxuICAgICAgICAgICAgICAgIC8vd29yayB0aG91Z2ggaWYgaXQganVzdCBuZWVkcyByZXF1aXJlLlxuICAgICAgICAgICAgICAgIC8vUkVRVUlSRVMgdGhlIGZ1bmN0aW9uIHRvIGV4cGVjdCB0aGUgQ29tbW9uSlMgdmFyaWFibGVzIGluIHRoZVxuICAgICAgICAgICAgICAgIC8vb3JkZXIgbGlzdGVkIGJlbG93LlxuICAgICAgICAgICAgICAgIGRlcHMgPSAoY2FsbGJhY2subGVuZ3RoID09PSAxID8gWydyZXF1aXJlJ10gOiBbJ3JlcXVpcmUnLCAnZXhwb3J0cycsICdtb2R1bGUnXSkuY29uY2F0KGRlcHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy9JZiBpbiBJRSA2LTggYW5kIGhpdCBhbiBhbm9ueW1vdXMgZGVmaW5lKCkgY2FsbCwgZG8gdGhlIGludGVyYWN0aXZlXG4gICAgICAgIC8vd29yay5cbiAgICAgICAgaWYgKHVzZUludGVyYWN0aXZlKSB7XG4gICAgICAgICAgICBub2RlID0gY3VycmVudGx5QWRkaW5nU2NyaXB0IHx8IGdldEludGVyYWN0aXZlU2NyaXB0KCk7XG4gICAgICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgICAgICAgIGlmICghbmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBuYW1lID0gbm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtcmVxdWlyZW1vZHVsZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250ZXh0ID0gY29udGV4dHNbbm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtcmVxdWlyZWNvbnRleHQnKV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvL0Fsd2F5cyBzYXZlIG9mZiBldmFsdWF0aW5nIHRoZSBkZWYgY2FsbCB1bnRpbCB0aGUgc2NyaXB0IG9ubG9hZCBoYW5kbGVyLlxuICAgICAgICAvL1RoaXMgYWxsb3dzIG11bHRpcGxlIG1vZHVsZXMgdG8gYmUgaW4gYSBmaWxlIHdpdGhvdXQgcHJlbWF0dXJlbHlcbiAgICAgICAgLy90cmFjaW5nIGRlcGVuZGVuY2llcywgYW5kIGFsbG93cyBmb3IgYW5vbnltb3VzIG1vZHVsZSBzdXBwb3J0LFxuICAgICAgICAvL3doZXJlIHRoZSBtb2R1bGUgbmFtZSBpcyBub3Qga25vd24gdW50aWwgdGhlIHNjcmlwdCBvbmxvYWQgZXZlbnRcbiAgICAgICAgLy9vY2N1cnMuIElmIG5vIGNvbnRleHQsIHVzZSB0aGUgZ2xvYmFsIHF1ZXVlLCBhbmQgZ2V0IGl0IHByb2Nlc3NlZFxuICAgICAgICAvL2luIHRoZSBvbnNjcmlwdCBsb2FkIGNhbGxiYWNrLlxuICAgICAgICBpZiAoY29udGV4dCkge1xuICAgICAgICAgICAgY29udGV4dC5kZWZRdWV1ZS5wdXNoKFtuYW1lLCBkZXBzLCBjYWxsYmFja10pO1xuICAgICAgICAgICAgY29udGV4dC5kZWZRdWV1ZU1hcFtuYW1lXSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnbG9iYWxEZWZRdWV1ZS5wdXNoKFtuYW1lLCBkZXBzLCBjYWxsYmFja10pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGRlZmluZS5hbWQgPSB7XG4gICAgICAgIGpRdWVyeTogdHJ1ZVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlcyB0aGUgdGV4dC4gTm9ybWFsbHkganVzdCB1c2VzIGV2YWwsIGJ1dCBjYW4gYmUgbW9kaWZpZWRcbiAgICAgKiB0byB1c2UgYSBiZXR0ZXIsIGVudmlyb25tZW50LXNwZWNpZmljIGNhbGwuIE9ubHkgdXNlZCBmb3IgdHJhbnNwaWxpbmdcbiAgICAgKiBsb2FkZXIgcGx1Z2lucywgbm90IGZvciBwbGFpbiBKUyBtb2R1bGVzLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IHRoZSB0ZXh0IHRvIGV4ZWN1dGUvZXZhbHVhdGUuXG4gICAgICovXG4gICAgcmVxLmV4ZWMgPSBmdW5jdGlvbiAodGV4dCkge1xuICAgICAgICAvKmpzbGludCBldmlsOiB0cnVlICovXG4gICAgICAgIHJldHVybiBldmFsKHRleHQpO1xuICAgIH07XG5cbiAgICAvL1NldCB1cCB3aXRoIGNvbmZpZyBpbmZvLlxuICAgIHJlcShjZmcpO1xufSh0aGlzLCAodHlwZW9mIHNldFRpbWVvdXQgPT09ICd1bmRlZmluZWQnID8gdW5kZWZpbmVkIDogc2V0VGltZW91dCkpKTsiXX0=
